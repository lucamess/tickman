parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"awqi":[function(require,module,exports) {
"use strict";var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),i=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),l=Symbol.iterator;function p(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=l&&e[l]||e["@@iterator"])?e:null}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d=Object.assign,_={};function h(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||y}function x(){}function m(e,t,r){this.props=e,this.context=t,this.refs=_,this.updater=r||y}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=h.prototype;var v=m.prototype=new x;v.constructor=m,d(v,h.prototype),v.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function w(t,r,n){var o,u={},s=null,a=null;if(null!=r)for(o in void 0!==r.ref&&(a=r.ref),void 0!==r.key&&(s=""+r.key),r)S.call(r,o)&&!$.hasOwnProperty(o)&&(u[o]=r[o]);var c=arguments.length-2;if(1===c)u.children=n;else if(1<c){for(var i=Array(c),f=0;f<c;f++)i[f]=arguments[f+2];u.children=i}if(t&&t.defaultProps)for(o in c=t.defaultProps)void 0===u[o]&&(u[o]=c[o]);return{$$typeof:e,type:t,key:s,ref:a,props:u,_owner:E.current}}function R(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function k(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}function C(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}var g=/\/+/g;function j(e,t){return"object"==typeof e&&null!==e&&null!=e.key?C(""+e.key):t.toString(36)}function O(r,n,o,u,s){var a=typeof r;"undefined"!==a&&"boolean"!==a||(r=null);var c=!1;if(null===r)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(r.$$typeof){case e:case t:c=!0}}if(c)return s=s(c=r),r=""===u?"."+j(c,0):u,b(s)?(o="",null!=r&&(o=r.replace(g,"$&/")+"/"),O(s,n,o,"",function(e){return e})):null!=s&&(k(s)&&(s=R(s,o+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(g,"$&/")+"/")+r)),n.push(s)),1;if(c=0,u=""===u?".":u+":",b(r))for(var i=0;i<r.length;i++){var f=u+j(a=r[i],i);c+=O(a,n,o,f,s)}else if("function"==typeof(f=p(r)))for(r=f.call(r),i=0;!(a=r.next()).done;)c+=O(a=a.value,n,o,f=u+j(a,i++),s);else if("object"===a)throw n=String(r),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return c}function P(e,t,r){if(null==e)return e;var n=[],o=0;return O(e,n,"","",function(e){return t.call(r,e,o++)}),n}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},V={transition:null},A={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:V,ReactCurrentOwner:E};exports.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},exports.Component=h,exports.Fragment=r,exports.Profiler=o,exports.PureComponent=m,exports.StrictMode=n,exports.Suspense=c,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,exports.cloneElement=function(t,r,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=d({},t.props),u=t.key,s=t.ref,a=t._owner;if(null!=r){if(void 0!==r.ref&&(s=r.ref,a=E.current),void 0!==r.key&&(u=""+r.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(i in r)S.call(r,i)&&!$.hasOwnProperty(i)&&(o[i]=void 0===r[i]&&void 0!==c?c[i]:r[i])}var i=arguments.length-2;if(1===i)o.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:e,type:t.type,key:u,ref:s,props:o,_owner:a}},exports.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},exports.createElement=w,exports.createFactory=function(e){var t=w.bind(null,e);return t.type=e,t},exports.createRef=function(){return{current:null}},exports.forwardRef=function(e){return{$$typeof:a,render:e}},exports.isValidElement=k,exports.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},exports.memo=function(e,t){return{$$typeof:i,type:e,compare:void 0===t?null:t}},exports.startTransition=function(e){var t=V.transition;V.transition={};try{e()}finally{V.transition=t}},exports.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},exports.useCallback=function(e,t){return T.current.useCallback(e,t)},exports.useContext=function(e){return T.current.useContext(e)},exports.useDebugValue=function(){},exports.useDeferredValue=function(e){return T.current.useDeferredValue(e)},exports.useEffect=function(e,t){return T.current.useEffect(e,t)},exports.useId=function(){return T.current.useId()},exports.useImperativeHandle=function(e,t,r){return T.current.useImperativeHandle(e,t,r)},exports.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},exports.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},exports.useMemo=function(e,t){return T.current.useMemo(e,t)},exports.useReducer=function(e,t,r){return T.current.useReducer(e,t,r)},exports.useRef=function(e){return T.current.useRef(e)},exports.useState=function(e){return T.current.useState(e)},exports.useSyncExternalStore=function(e,t,r){return T.current.useSyncExternalStore(e,t,r)},exports.useTransition=function(){return T.current.useTransition()},exports.version="18.2.0";
},{}],"n8MK":[function(require,module,exports) {
"use strict";module.exports=require("./cjs/react.production.min.js");
},{"./cjs/react.production.min.js":"awqi"}],"IvPb":[function(require,module,exports) {
"use strict";function e(e,n){var t=e.length;e.push(n);e:for(;0<t;){var a=t-1>>>1,o=e[a];if(!(0<r(o,n)))break e;e[a]=n,e[t]=o,t=a}}function n(e){return 0===e.length?null:e[0]}function t(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var a=0,o=e.length,l=o>>>1;a<l;){var i=2*(a+1)-1,u=e[i],s=i+1,c=e[s];if(0>r(u,t))s<o&&0>r(c,u)?(e[a]=c,e[s]=t,a=s):(e[a]=u,e[i]=t,a=i);else{if(!(s<o&&0>r(c,t)))break e;e[a]=c,e[s]=t,a=s}}}return n}function r(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;exports.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();exports.unstable_now=function(){return o.now()-l}}var i=[],u=[],s=1,c=null,f=3,p=!1,b=!1,d=!1,v="function"==typeof setTimeout?setTimeout:null,x="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function m(r){for(var a=n(u);null!==a;){if(null===a.callback)t(u);else{if(!(a.startTime<=r))break;t(u),a.sortIndex=a.expirationTime,e(i,a)}a=n(u)}}function g(e){if(d=!1,m(e),!b)if(null!==n(i))b=!0,j(_);else{var t=n(u);null!==t&&E(g,t.startTime-e)}}function _(e,r){b=!1,d&&(d=!1,x(I),I=-1),p=!0;var a=f;try{for(m(r),c=n(i);null!==c&&(!(c.expirationTime>r)||e&&!C());){var o=c.callback;if("function"==typeof o){c.callback=null,f=c.priorityLevel;var l=o(c.expirationTime<=r);r=exports.unstable_now(),"function"==typeof l?c.callback=l:c===n(i)&&t(i),m(r)}else t(i);c=n(i)}if(null!==c)var s=!0;else{var v=n(u);null!==v&&E(g,v.startTime-r),s=!1}return s}finally{c=null,f=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var h,k=!1,w=null,I=-1,T=5,P=-1;function C(){return!(exports.unstable_now()-P<T)}function L(){if(null!==w){var e=exports.unstable_now();P=e;var n=!0;try{n=w(!0,e)}finally{n?h():(k=!1,w=null)}}else k=!1}if("function"==typeof y)h=function(){y(L)};else if("undefined"!=typeof MessageChannel){var M=new MessageChannel,F=M.port2;M.port1.onmessage=L,h=function(){F.postMessage(null)}}else h=function(){v(L,0)};function j(e){w=e,k||(k=!0,h())}function E(e,n){I=v(function(){e(exports.unstable_now())},n)}exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(e){e.callback=null},exports.unstable_continueExecution=function(){b||p||(b=!0,j(_))},exports.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},exports.unstable_getCurrentPriorityLevel=function(){return f},exports.unstable_getFirstCallbackNode=function(){return n(i)},exports.unstable_next=function(e){switch(f){case 1:case 2:case 3:var n=3;break;default:n=f}var t=f;f=n;try{return e()}finally{f=t}},exports.unstable_pauseExecution=function(){},exports.unstable_requestPaint=function(){},exports.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=f;f=e;try{return n()}finally{f=t}},exports.unstable_scheduleCallback=function(t,r,a){var o=exports.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?o+a:o:a=o,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:s++,callback:r,priorityLevel:t,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(t.sortIndex=a,e(u,t),null===n(i)&&t===n(u)&&(d?(x(I),I=-1):d=!0,E(g,a-o))):(t.sortIndex=l,e(i,t),b||p||(b=!0,j(_))),t},exports.unstable_shouldYield=C,exports.unstable_wrapCallback=function(e){var n=f;return function(){var t=f;f=n;try{return e.apply(this,arguments)}finally{f=t}}};
},{}],"MDSO":[function(require,module,exports) {
"use strict";module.exports=require("./cjs/scheduler.production.min.js");
},{"./cjs/scheduler.production.min.js":"IvPb"}],"i17t":[function(require,module,exports) {
"use strict";var e=require("react"),n=require("scheduler");function t(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,l={};function a(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(l[e]=n,e=0;e<n.length;e++)r.add(n[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),i=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(e){return!!i.call(f,e)||!i.call(c,e)&&(s.test(e)?f[e]=!0:(c[e]=!0,!1))}function p(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function m(e,n,t,r){if(null==n||p(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function h(e,n,t,r,l,a,u){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=u}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];g[n]=new h(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,n,t,r){var l=g.hasOwnProperty(n)?g[n]:null;(null!==l?0!==l.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(m(n,t,l,r)&&(t=null),r||null===l?d(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):l.mustUseProperty?e[l.propertyName]=null===t?3!==l.type&&"":t:(n=l.attributeName,r=l.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(l=l.type)||4===l&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(v,y);g[n]=new h(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,I=Object.assign;function U(e){if(void 0===O)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);O=n&&n[1]||""}return"\n"+O+e}var V=!1;function A(e,n){if(!e||V)return"";V=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"==typeof s.stack){for(var l=s.stack.split("\n"),a=r.stack.split("\n"),u=l.length-1,o=a.length-1;1<=u&&0<=o&&l[u]!==a[o];)o--;for(;1<=u&&0<=o;u--,o--)if(l[u]!==a[o]){if(1!==u||1!==o)do{if(u--,0>--o||l[u]!==a[o]){var i="\n"+l[u].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=u&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=A(e.type,!1);case 11:return e=A(e.type.render,!1);case 1:return e=A(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case L:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case z:return(e._context.displayName||"Context")+".Provider";case P:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(n=e.displayName||null)?n:H(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return H(e(n))}catch(t){}}return null}function Q(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(n);case 8:return n===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function $(e){var n=j(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&void 0!==t&&"function"==typeof t.get&&"function"==typeof t.set){var l=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function q(e){e._valueTracker||(e._valueTracker=$(e))}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function Y(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function X(e,n){var t=n.checked;return I({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function G(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=W(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function Z(e,n){null!=(n=n.checked)&&b(e,"checked",n,!1)}function J(e,n){Z(e,n);var t=W(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ne(e,n.type,t):n.hasOwnProperty("defaultValue")&&ne(e,n.type,W(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function ee(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ne(e,n,t){"number"===n&&Y(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var te=Array.isArray;function re(e,n,t,r){if(e=e.options,n){n={};for(var l=0;l<t.length;l++)n["$"+t[l]]=!0;for(t=0;t<e.length;t++)l=n.hasOwnProperty("$"+e[t].value),e[t].selected!==l&&(e[t].selected=l),l&&r&&(e[t].defaultSelected=!0)}else{for(t=""+W(t),n=null,l=0;l<e.length;l++){if(e[l].value===t)return e[l].selected=!0,void(r&&(e[l].defaultSelected=!0));null!==n||e[l].disabled||(n=e[l])}null!==n&&(n.selected=!0)}}function le(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(t(91));return I({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,n){var r=n.value;if(null==r){if(r=n.children,n=n.defaultValue,null!=r){if(null!=n)throw Error(t(92));if(te(r)){if(1<r.length)throw Error(t(93));r=r[0]}n=r}null==n&&(n=""),r=n}e._wrapperState={initialValue:W(r)}}function ue(e,n){var t=W(n.value),r=W(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function oe(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ce,fe=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(n,t,r,l){MSApp.execUnsafeLocalFunction(function(){return e(n,t)})}:e}(function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function de(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function he(e,n,t){return null==n||"boolean"==typeof n||""===n?"":t||"number"!=typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),l=he(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,l):e[t]=l}}Object.keys(pe).forEach(function(e){me.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]})});var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,n){if(n){if(ve[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(t(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(t(60));if("object"!=typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(t(61))}if(null!=n.style&&"object"!=typeof n.style)throw Error(t(62))}}function be(e,n){if(-1===e.indexOf("-"))return"string"==typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,Ee=null;function Ce(e){if(e=Ul(e)){if("function"!=typeof Se)throw Error(t(280));var n=e.stateNode;n&&(n=Al(n),Se(e.stateNode,e.type,n))}}function ze(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ne(){if(xe){var e=xe,n=Ee;if(Ee=xe=null,Ce(e),n)for(e=0;e<n.length;e++)Ce(n[e])}}function Pe(e,n){return e(n)}function _e(){}var Le=!1;function Te(e,n,t){if(Le)return e(n,t);Le=!0;try{return Pe(e,n,t)}finally{Le=!1,(null!==xe||null!==Ee)&&(_e(),Ne())}}function Me(e,n){var r=e.stateNode;if(null===r)return null;var l=Al(r);if(null===l)return null;r=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(l=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!l;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(t(231,n,typeof r));return r}var Fe=!1;if(o)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(Rc){Fe=!1}function De(e,n,t,r,l,a,u,o,i){var s=Array.prototype.slice.call(arguments,3);try{n.apply(t,s)}catch(c){this.onError(c)}}var Oe=!1,Ie=null,Ue=!1,Ve=null,Ae={onError:function(e){Oe=!0,Ie=e}};function Be(e,n,t,r,l,a,u,o,i){Oe=!1,Ie=null,De.apply(Ae,arguments)}function He(e,n,r,l,a,u,o,i,s){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(t(198));var c=Ie;Oe=!1,Ie=null,Ue||(Ue=!0,Ve=c)}}function Qe(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!=(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function je(e){if(Qe(e)!==e)throw Error(t(188))}function $e(e){var n=e.alternate;if(!n){if(null===(n=Qe(e)))throw Error(t(188));return n!==e?null:e}for(var r=e,l=n;;){var a=r.return;if(null===a)break;var u=a.alternate;if(null===u){if(null!==(l=a.return)){r=l;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===r)return je(a),e;if(u===l)return je(a),n;u=u.sibling}throw Error(t(188))}if(r.return!==l.return)r=a,l=u;else{for(var o=!1,i=a.child;i;){if(i===r){o=!0,r=a,l=u;break}if(i===l){o=!0,l=a,r=u;break}i=i.sibling}if(!o){for(i=u.child;i;){if(i===r){o=!0,r=u,l=a;break}if(i===l){o=!0,l=u,r=a;break}i=i.sibling}if(!o)throw Error(t(189))}}if(r.alternate!==l)throw Error(t(190))}if(3!==r.tag)throw Error(t(188));return r.stateNode.current===r?e:n}function qe(e){return null!==(e=$e(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=Ke(e);if(null!==n)return n;e=e.sibling}return null}var Ye=n.unstable_scheduleCallback,Xe=n.unstable_cancelCallback,Ge=n.unstable_shouldYield,Ze=n.unstable_requestPaint,Je=n.unstable_now,en=n.unstable_getCurrentPriorityLevel,nn=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,rn=n.unstable_NormalPriority,ln=n.unstable_LowPriority,an=n.unstable_IdlePriority,un=null,on=null;function sn(e){if(on&&"function"==typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(un,e,void 0,128==(128&e.current.flags))}catch(n){}}var cn=Math.clz32?Math.clz32:pn,fn=Math.log,dn=Math.LN2;function pn(e){return 0===(e>>>=0)?32:31-(fn(e)/dn|0)|0}var mn=64,hn=4194304;function gn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,u=268435455&t;if(0!==u){var o=u&~l;0!==o?r=gn(o):0!==(a&=u)&&(r=gn(a))}else 0!==(u=t&~l)?r=gn(u):0!==a&&(r=gn(a));if(0===r)return 0;if(0!==n&&n!==r&&0==(n&l)&&((l=r&-r)>=(a=n&-n)||16===l&&0!=(4194240&a)))return n;if(0!=(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)l=1<<(t=31-cn(n)),r|=e[t],n&=~l;return r}function yn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:default:return-1}}function bn(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-cn(a),o=1<<u,i=l[u];-1===i?0!=(o&t)&&0==(o&r)||(l[u]=yn(o,n)):i<=n&&(e.expiredLanes|=o),a&=~o}}function kn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function wn(){var e=mn;return 0==(4194240&(mn<<=1))&&(mn=64),e}function Sn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function xn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-cn(n)]=t}function En(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var l=31-cn(t),a=1<<l;n[l]=0,r[l]=-1,e[l]=-1,t&=~a}}function Cn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-cn(t),l=1<<r;l&n|e[r]&n&&(e[r]|=n),t&=~l}}var zn=0;function Nn(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Pn,_n,Ln,Tn,Mn,Fn=!1,Rn=[],Dn=null,On=null,In=null,Un=new Map,Vn=new Map,An=[],Bn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hn(e,n){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Un.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(n.pointerId)}}function Qn(e,n,t,r,l,a){return null===e||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},null!==n&&(null!==(n=Ul(n))&&_n(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==l&&-1===n.indexOf(l)&&n.push(l),e)}function Wn(e,n,t,r,l){switch(n){case"focusin":return Dn=Qn(Dn,e,n,t,r,l),!0;case"dragenter":return On=Qn(On,e,n,t,r,l),!0;case"mouseover":return In=Qn(In,e,n,t,r,l),!0;case"pointerover":var a=l.pointerId;return Un.set(a,Qn(Un.get(a)||null,e,n,t,r,l)),!0;case"gotpointercapture":return a=l.pointerId,Vn.set(a,Qn(Vn.get(a)||null,e,n,t,r,l)),!0}return!1}function jn(e){var n=Il(e.target);if(null!==n){var t=Qe(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void Mn(e.priority,function(){Ln(t)})}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function $n(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=rt(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=Ul(t))&&_n(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);ke=r,t.target.dispatchEvent(r),ke=null,n.shift()}return!0}function qn(e,n,t){$n(e)&&t.delete(n)}function Kn(){Fn=!1,null!==Dn&&$n(Dn)&&(Dn=null),null!==On&&$n(On)&&(On=null),null!==In&&$n(In)&&(In=null),Un.forEach(qn),Vn.forEach(qn)}function Yn(e,t){e.blockedOn===t&&(e.blockedOn=null,Fn||(Fn=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Kn)))}function Xn(e){function n(n){return Yn(n,e)}if(0<Rn.length){Yn(Rn[0],e);for(var t=1;t<Rn.length;t++){var r=Rn[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dn&&Yn(Dn,e),null!==On&&Yn(On,e),null!==In&&Yn(In,e),Un.forEach(n),Vn.forEach(n),t=0;t<An.length;t++)(r=An[t]).blockedOn===e&&(r.blockedOn=null);for(;0<An.length&&null===(t=An[0]).blockedOn;)jn(t),null===t.blockedOn&&An.shift()}var Gn=k.ReactCurrentBatchConfig,Zn=!0;function Jn(e,n,t,r){var l=zn,a=Gn.transition;Gn.transition=null;try{zn=1,nt(e,n,t,r)}finally{zn=l,Gn.transition=a}}function et(e,n,t,r){var l=zn,a=Gn.transition;Gn.transition=null;try{zn=4,nt(e,n,t,r)}finally{zn=l,Gn.transition=a}}function nt(e,n,t,r){if(Zn){var l=rt(e,n,t,r);if(null===l)sl(e,n,r,tt,t),Hn(e,r);else if(Wn(l,e,n,t,r))r.stopPropagation();else if(Hn(e,r),4&n&&-1<Bn.indexOf(e)){for(;null!==l;){var a=Ul(l);if(null!==a&&Pn(a),null===(a=rt(e,n,t,r))&&sl(e,n,r,tt,t),a===l)break;l=a}null!==l&&r.stopPropagation()}else sl(e,n,r,null,t)}}var tt=null;function rt(e,n,t,r){if(tt=null,null!==(e=Il(e=we(r))))if(null===(n=Qe(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=We(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return tt=e,null}function lt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(en()){case nn:return 1;case tn:return 4;case rn:case ln:return 16;case an:return 536870912;default:return 16}default:return 16}}var at=null,ut=null,ot=null;function it(){if(ot)return ot;var e,n,t=ut,r=t.length,l="value"in at?at.value:at.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===l[a-n];n++);return ot=l.slice(e,1<n?1-n:void 0)}function st(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function ct(){return!0}function ft(){return!1}function dt(e){function n(n,t,r,l,a){for(var u in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=l,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(l):l[u]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?ct:ft,this.isPropagationStopped=ft,this}return I(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ct)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ct)},persist:function(){},isPersistent:ct}),n}var pt,mt,ht,gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vt=dt(gt),yt=I({},gt,{view:0,detail:0}),bt=dt(yt),kt=I({},yt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ot,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ht&&(ht&&"mousemove"===e.type?(pt=e.screenX-ht.screenX,mt=e.screenY-ht.screenY):mt=pt=0,ht=e),pt)},movementY:function(e){return"movementY"in e?e.movementY:mt}}),wt=dt(kt),St=I({},kt,{dataTransfer:0}),xt=dt(St),Et=I({},yt,{relatedTarget:0}),Ct=dt(Et),zt=I({},gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Nt=dt(zt),Pt=I({},gt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_t=dt(Pt),Lt=I({},gt,{data:0}),Tt=dt(Lt),Mt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ft={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dt(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=Rt[e])&&!!n[e]}function Ot(){return Dt}var It=I({},yt,{key:function(e){if(e.key){var n=Mt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=st(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ft[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ot,charCode:function(e){return"keypress"===e.type?st(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?st(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ut=dt(It),Vt=I({},kt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),At=dt(Vt),Bt=I({},yt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ot}),Ht=dt(Bt),Qt=I({},gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wt=dt(Qt),jt=I({},kt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$t=dt(jt),qt=[9,13,27,32],Kt=o&&"CompositionEvent"in window,Yt=null;o&&"documentMode"in document&&(Yt=document.documentMode);var Xt=o&&"TextEvent"in window&&!Yt,Gt=o&&(!Kt||Yt&&8<Yt&&11>=Yt),Zt=String.fromCharCode(32),Jt=!1;function er(e,n){switch(e){case"keyup":return-1!==qt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var tr=!1;function rr(e,n){switch(e){case"compositionend":return nr(n);case"keypress":return 32!==n.which?null:(Jt=!0,Zt);case"textInput":return(e=n.data)===Zt&&Jt?null:e;default:return null}}function lr(e,n){if(tr)return"compositionend"===e||!Kt&&er(e,n)?(e=it(),ot=ut=at=null,tr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Gt&&"ko"!==n.locale?null:n.data;default:return null}}var ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!ar[e.type]:"textarea"===n}function or(e,n,t,r){ze(r),0<(n=fl(n,"onChange")).length&&(t=new vt("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var ir=null,sr=null;function cr(e){rl(e,0)}function fr(e){if(K(Vl(e)))return e}function dr(e,n){if("change"===e)return n}var pr=!1;if(o){var mr;if(o){var hr="oninput"in document;if(!hr){var gr=document.createElement("div");gr.setAttribute("oninput","return;"),hr="function"==typeof gr.oninput}mr=hr}else mr=!1;pr=mr&&(!document.documentMode||9<document.documentMode)}function vr(){ir&&(ir.detachEvent("onpropertychange",yr),sr=ir=null)}function yr(e){if("value"===e.propertyName&&fr(sr)){var n=[];or(n,sr,e,we(e)),Te(cr,n)}}function br(e,n,t){"focusin"===e?(vr(),sr=t,(ir=n).attachEvent("onpropertychange",yr)):"focusout"===e&&vr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return fr(sr)}function wr(e,n){if("click"===e)return fr(n)}function Sr(e,n){if("input"===e||"change"===e)return fr(n)}function xr(e,n){return e===n&&(0!==e||1/e==1/n)||e!=e&&n!=n}var Er="function"==typeof Object.is?Object.is:xr;function Cr(e,n){if(Er(e,n))return!0;if("object"!=typeof e||null===e||"object"!=typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var l=t[r];if(!i.call(n,l)||!Er(e[l],n[l]))return!1}return!0}function zr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nr(e,n){var t,r=zr(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zr(r)}}function Pr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?Pr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function _r(){for(var e=window,n=Y();n instanceof e.HTMLIFrameElement;){try{var t="string"==typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=Y((e=n.contentWindow).document)}return n}function Lr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function Tr(e){var n=_r(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Pr(t.ownerDocument.documentElement,t)){if(null!==r&&Lr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var l=t.textContent.length,a=Math.min(r.start,l);r=void 0===r.end?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=Nr(t,a);var u=Nr(t,r);l&&u&&(1!==e.rangeCount||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&((n=n.createRange()).setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(u.node,u.offset)):(n.setEnd(u.node,u.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Mr=o&&"documentMode"in document&&11>=document.documentMode,Fr=null,Rr=null,Dr=null,Or=!1;function Ir(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;Or||null==Fr||Fr!==Y(r)||("selectionStart"in(r=Fr)&&Lr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Dr&&Cr(Dr,r)||(Dr=r,0<(r=fl(Rr,"onSelect")).length&&(n=new vt("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=Fr)))}function Ur(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Vr={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionend:Ur("Transition","TransitionEnd")},Ar={},Br={};function Hr(e){if(Ar[e])return Ar[e];if(!Vr[e])return e;var n,t=Vr[e];for(n in t)if(t.hasOwnProperty(n)&&n in Br)return Ar[e]=t[n];return e}o&&(Br=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);var Qr=Hr("animationend"),Wr=Hr("animationiteration"),jr=Hr("animationstart"),$r=Hr("transitionend"),qr=new Map,Kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(e,n){qr.set(e,n),a(n,[e])}for(var Xr=0;Xr<Kr.length;Xr++){var Gr=Kr[Xr],Zr=Gr.toLowerCase(),Jr=Gr[0].toUpperCase()+Gr.slice(1);Yr(Zr,"on"+Jr)}Yr(Qr,"onAnimationEnd"),Yr(Wr,"onAnimationIteration"),Yr(jr,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr($r,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nl=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function tl(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,He(r,n,void 0,e),e.currentTarget=null}function rl(e,n){n=0!=(4&n);for(var t=0;t<e.length;t++){var r=e[t],l=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var u=r.length-1;0<=u;u--){var o=r[u],i=o.instance,s=o.currentTarget;if(o=o.listener,i!==a&&l.isPropagationStopped())break e;tl(l,o,s),a=i}else for(u=0;u<r.length;u++){if(i=(o=r[u]).instance,s=o.currentTarget,o=o.listener,i!==a&&l.isPropagationStopped())break e;tl(l,o,s),a=i}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function ll(e,n){var t=n[Rl];void 0===t&&(t=n[Rl]=new Set);var r=e+"__bubble";t.has(r)||(il(n,e,2,!1),t.add(r))}function al(e,n,t){var r=0;n&&(r|=4),il(t,e,r,n)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ol(e){if(!e[ul]){e[ul]=!0,r.forEach(function(n){"selectionchange"!==n&&(nl.has(n)||al(n,!1,e),al(n,!0,e))});var n=9===e.nodeType?e:e.ownerDocument;null===n||n[ul]||(n[ul]=!0,al("selectionchange",!1,n))}}function il(e,n,t,r){switch(lt(n)){case 1:var l=Jn;break;case 4:l=et;break;default:l=nt}t=l.bind(null,n,t,e),l=void 0,!Fe||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(l=!0),r?void 0!==l?e.addEventListener(n,t,{capture:!0,passive:l}):e.addEventListener(n,t,!0):void 0!==l?e.addEventListener(n,t,{passive:l}):e.addEventListener(n,t,!1)}function sl(e,n,t,r,l){var a=r;if(0==(1&n)&&0==(2&n)&&null!==r)e:for(;;){if(null===r)return;var u=r.tag;if(3===u||4===u){var o=r.stateNode.containerInfo;if(o===l||8===o.nodeType&&o.parentNode===l)break;if(4===u)for(u=r.return;null!==u;){var i=u.tag;if((3===i||4===i)&&((i=u.stateNode.containerInfo)===l||8===i.nodeType&&i.parentNode===l))return;u=u.return}for(;null!==o;){if(null===(u=Il(o)))return;if(5===(i=u.tag)||6===i){r=a=u;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=a,l=we(t),u=[];e:{var o=qr.get(e);if(void 0!==o){var i=vt,s=e;switch(e){case"keypress":if(0===st(t))break e;case"keydown":case"keyup":i=Ut;break;case"focusin":s="focus",i=Ct;break;case"focusout":s="blur",i=Ct;break;case"beforeblur":case"afterblur":i=Ct;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=xt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Ht;break;case Qr:case Wr:case jr:i=Nt;break;case $r:i=Wt;break;case"scroll":i=bt;break;case"wheel":i=$t;break;case"copy":case"cut":case"paste":i=_t;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=At}var c=0!=(4&n),f=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==d&&(null!=(h=Me(m,d))&&c.push(cl(m,h,p)))),f)break;m=m.return}0<c.length&&(o=new i(o,s,null,t,l),u.push({event:o,listeners:c}))}}if(0==(7&n)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||t===ke||!(s=t.relatedTarget||t.fromElement)||!Il(s)&&!s[Fl])&&(i||o)&&(o=l.window===l?l:(o=l.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=r,null!==(s=(s=t.relatedTarget||t.toElement)?Il(s):null)&&(s!==(f=Qe(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(i=null,s=r),i!==s)){if(c=wt,h="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=At,h="onPointerLeave",d="onPointerEnter",m="pointer"),f=null==i?o:Vl(i),p=null==s?o:Vl(s),(o=new c(h,m+"leave",i,t,l)).target=f,o.relatedTarget=p,h=null,Il(l)===r&&((c=new c(d,m+"enter",s,t,l)).target=p,c.relatedTarget=f,h=c),f=h,i&&s)e:{for(d=s,m=0,p=c=i;p;p=dl(p))m++;for(p=0,h=d;h;h=dl(h))p++;for(;0<m-p;)c=dl(c),m--;for(;0<p-m;)d=dl(d),p--;for(;m--;){if(c===d||null!==d&&c===d.alternate)break e;c=dl(c),d=dl(d)}c=null}else c=null;null!==i&&pl(u,o,i,c,!1),null!==s&&null!==f&&pl(u,f,s,c,!0)}if("select"===(i=(o=r?Vl(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var g=dr;else if(ur(o))if(pr)g=Sr;else{g=kr;var v=br}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=wr);switch(g&&(g=g(e,r))?or(u,g,t,l):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ne(o,"number",o.value)),v=r?Vl(r):window,e){case"focusin":(ur(v)||"true"===v.contentEditable)&&(Fr=v,Rr=r,Dr=null);break;case"focusout":Dr=Rr=Fr=null;break;case"mousedown":Or=!0;break;case"contextmenu":case"mouseup":case"dragend":Or=!1,Ir(u,t,l);break;case"selectionchange":if(Mr)break;case"keydown":case"keyup":Ir(u,t,l)}var y;if(Kt)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else tr?er(e,t)&&(b="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(b="onCompositionStart");b&&(Gt&&"ko"!==t.locale&&(tr||"onCompositionStart"!==b?"onCompositionEnd"===b&&tr&&(y=it()):(ut="value"in(at=l)?at.value:at.textContent,tr=!0)),0<(v=fl(r,b)).length&&(b=new Tt(b,e,null,t,l),u.push({event:b,listeners:v}),y?b.data=y:null!==(y=nr(t))&&(b.data=y))),(y=Xt?rr(e,t):lr(e,t))&&(0<(r=fl(r,"onBeforeInput")).length&&(l=new Tt("onBeforeInput","beforeinput",null,t,l),u.push({event:l,listeners:r}),l.data=y))}rl(u,n)})}function cl(e,n,t){return{instance:e,listener:n,currentTarget:t}}function fl(e,n){for(var t=n+"Capture",r=[];null!==e;){var l=e,a=l.stateNode;5===l.tag&&null!==a&&(l=a,null!=(a=Me(e,t))&&r.unshift(cl(e,a,l)),null!=(a=Me(e,n))&&r.push(cl(e,a,l))),e=e.return}return r}function dl(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function pl(e,n,t,r,l){for(var a=n._reactName,u=[];null!==t&&t!==r;){var o=t,i=o.alternate,s=o.stateNode;if(null!==i&&i===r)break;5===o.tag&&null!==s&&(o=s,l?null!=(i=Me(t,a))&&u.unshift(cl(t,i,o)):l||null!=(i=Me(t,a))&&u.push(cl(t,i,o))),t=t.return}0!==u.length&&e.push({event:n,listeners:u})}var ml=/\r\n?/g,hl=/\u0000|\uFFFD/g;function gl(e){return("string"==typeof e?e:""+e).replace(ml,"\n").replace(hl,"")}function vl(e,n,r){if(n=gl(n),gl(e)!==n&&r)throw Error(t(425))}function yl(){}var bl=null,kl=null;function wl(e,n){return"textarea"===e||"noscript"===e||"string"==typeof n.children||"number"==typeof n.children||"object"==typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var Sl="function"==typeof setTimeout?setTimeout:void 0,xl="function"==typeof clearTimeout?clearTimeout:void 0,El="function"==typeof Promise?Promise:void 0,Cl="function"==typeof queueMicrotask?queueMicrotask:void 0!==El?function(e){return El.resolve(null).then(e).catch(zl)}:Sl;function zl(e){setTimeout(function(){throw e})}function Nl(e,n){var t=n,r=0;do{var l=t.nextSibling;if(e.removeChild(t),l&&8===l.nodeType)if("/$"===(t=l.data)){if(0===r)return e.removeChild(l),void Xn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=l}while(t);Xn(n)}function Pl(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function _l(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var Ll=Math.random().toString(36).slice(2),Tl="__reactFiber$"+Ll,Ml="__reactProps$"+Ll,Fl="__reactContainer$"+Ll,Rl="__reactEvents$"+Ll,Dl="__reactListeners$"+Ll,Ol="__reactHandles$"+Ll;function Il(e){var n=e[Tl];if(n)return n;for(var t=e.parentNode;t;){if(n=t[Fl]||t[Tl]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=_l(e);null!==e;){if(t=e[Tl])return t;e=_l(e)}return n}t=(e=t).parentNode}return null}function Ul(e){return!(e=e[Tl]||e[Fl])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Vl(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(t(33))}function Al(e){return e[Ml]||null}var Bl=[],Hl=-1;function Ql(e){return{current:e}}function Wl(e){0>Hl||(e.current=Bl[Hl],Bl[Hl]=null,Hl--)}function jl(e,n){Bl[++Hl]=e.current,e.current=n}var $l={},ql=Ql($l),Kl=Ql(!1),Yl=$l;function Xl(e,n){var t=e.type.contextTypes;if(!t)return $l;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var l,a={};for(l in t)a[l]=n[l];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function Gl(e){return null!=(e=e.childContextTypes)}function Zl(){Wl(Kl),Wl(ql)}function Jl(e,n,r){if(ql.current!==$l)throw Error(t(168));jl(ql,n),jl(Kl,r)}function ea(e,n,r){var l=e.stateNode;if(n=n.childContextTypes,"function"!=typeof l.getChildContext)return r;for(var a in l=l.getChildContext())if(!(a in n))throw Error(t(108,Q(e)||"Unknown",a));return I({},r,l)}function na(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$l,Yl=ql.current,jl(ql,e),jl(Kl,Kl.current),!0}function ta(e,n,r){var l=e.stateNode;if(!l)throw Error(t(169));r?(e=ea(e,n,Yl),l.__reactInternalMemoizedMergedChildContext=e,Wl(Kl),Wl(ql),jl(ql,e)):Wl(Kl),jl(Kl,r)}var ra=null,la=!1,aa=!1;function ua(e){null===ra?ra=[e]:ra.push(e)}function oa(e){la=!0,ua(e)}function ia(){if(!aa&&null!==ra){aa=!0;var e=0,n=zn;try{var t=ra;for(zn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}ra=null,la=!1}catch(l){throw null!==ra&&(ra=ra.slice(e+1)),Ye(nn,ia),l}finally{zn=n,aa=!1}}return null}var sa=[],ca=0,fa=null,da=0,pa=[],ma=0,ha=null,ga=1,va="";function ya(e,n){sa[ca++]=da,sa[ca++]=fa,fa=e,da=n}function ba(e,n,t){pa[ma++]=ga,pa[ma++]=va,pa[ma++]=ha,ha=e;var r=ga;e=va;var l=32-cn(r)-1;r&=~(1<<l),t+=1;var a=32-cn(n)+l;if(30<a){var u=l-l%5;a=(r&(1<<u)-1).toString(32),r>>=u,l-=u,ga=1<<32-cn(n)+l|t<<l|r,va=a+e}else ga=1<<a|t<<l|r,va=e}function ka(e){null!==e.return&&(ya(e,1),ba(e,1,0))}function wa(e){for(;e===fa;)fa=sa[--ca],sa[ca]=null,da=sa[--ca],sa[ca]=null;for(;e===ha;)ha=pa[--ma],pa[ma]=null,va=pa[--ma],pa[ma]=null,ga=pa[--ma],pa[ma]=null}var Sa=null,xa=null,Ea=!1,Ca=null;function za(e,n){var t=rc(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function Na(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,Sa=e,xa=Pl(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,Sa=e,xa=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==ha?{id:ga,overflow:va}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=rc(18,null,null,0)).stateNode=n,t.return=e,e.child=t,Sa=e,xa=null,!0);default:return!1}}function Pa(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function _a(e){if(Ea){var n=xa;if(n){var r=n;if(!Na(e,n)){if(Pa(e))throw Error(t(418));n=Pl(r.nextSibling);var l=Sa;n&&Na(e,n)?za(l,r):(e.flags=-4097&e.flags|2,Ea=!1,Sa=e)}}else{if(Pa(e))throw Error(t(418));e.flags=-4097&e.flags|2,Ea=!1,Sa=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Sa=e}function Ta(e){if(e!==Sa)return!1;if(!Ea)return La(e),Ea=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!wl(e.type,e.memoizedProps)),n&&(n=xa)){if(Pa(e))throw Ma(),Error(t(418));for(;n;)za(e,n),n=Pl(n.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(t(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===n){xa=Pl(e.nextSibling);break e}n--}else"$"!==r&&"$!"!==r&&"$?"!==r||n++}e=e.nextSibling}xa=null}}else xa=Sa?Pl(e.stateNode.nextSibling):null;return!0}function Ma(){for(var e=xa;e;)e=Pl(e.nextSibling)}function Fa(){xa=Sa=null,Ea=!1}function Ra(e){null===Ca?Ca=[e]:Ca.push(e)}var Da=k.ReactCurrentBatchConfig;function Oa(e,n){if(e&&e.defaultProps){for(var t in n=I({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var Ia=Ql(null),Ua=null,Va=null,Aa=null;function Ba(){Aa=Va=Ua=null}function Ha(e){var n=Ia.current;Wl(Ia),e._currentValue=n}function Qa(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Wa(e,n){Ua=e,Aa=Va=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&n)&&(Ao=!0),e.firstContext=null)}function ja(e){var n=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:n,next:null},null===Va){if(null===Ua)throw Error(t(308));Va=e,Ua.dependencies={lanes:0,firstContext:e}}else Va=Va.next=e;return n}var $a=null;function qa(e){null===$a?$a=[e]:$a.push(e)}function Ka(e,n,t,r){var l=n.interleaved;return null===l?(t.next=t,qa(n)):(t.next=l.next,l.next=t),n.interleaved=t,Ya(e,r)}function Ya(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Xa=!1;function Ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Za(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ja(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function eu(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Zi)){var l=r.pending;return null===l?n.next=n:(n.next=l.next,l.next=n),r.pending=n,Ya(e,t)}return null===(l=r.interleaved)?(n.next=n,qa(r)):(n.next=l.next,l.next=n),r.interleaved=n,Ya(e,t)}function nu(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!=(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,Cn(e,t)}}function tu(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var l=null,a=null;if(null!==(t=t.firstBaseUpdate)){do{var u={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===a?l=a=u:a=a.next=u,t=t.next}while(null!==t);null===a?l=a=n:a=a.next=n}else l=a=n;return t={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function ru(e,n,t,r){var l=e.updateQueue;Xa=!1;var a=l.firstBaseUpdate,u=l.lastBaseUpdate,o=l.shared.pending;if(null!==o){l.shared.pending=null;var i=o,s=i.next;i.next=null,null===u?a=s:u.next=s,u=i;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==u&&(null===o?c.firstBaseUpdate=s:o.next=s,c.lastBaseUpdate=i))}if(null!==a){var f=l.baseState;for(u=0,c=s=i=null,o=a;;){var d=o.lane,p=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,h=o;switch(d=n,p=t,h.tag){case 1:if("function"==typeof(m=h.payload)){f=m.call(p,f,d);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(d="function"==typeof(m=h.payload)?m.call(p,f,d):m))break e;f=I({},f,d);break e;case 2:Xa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=l.effects)?l.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(s=c=p,i=f):c=c.next=p,u|=d;if(null===(o=o.next)){if(null===(o=l.shared.pending))break;o=(d=o).next,d.next=null,l.lastBaseUpdate=d,l.shared.pending=null}}if(null===c&&(i=f),l.baseState=i,l.firstBaseUpdate=s,l.lastBaseUpdate=c,null!==(n=l.shared.interleaved)){l=n;do{u|=l.lane,l=l.next}while(l!==n)}else null===a&&(l.shared.lanes=0);us|=u,e.lanes=u,e.memoizedState=f}}function lu(e,n,r){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var l=e[n],a=l.callback;if(null!==a){if(l.callback=null,l=r,"function"!=typeof a)throw Error(t(191,a));a.call(l)}}}var au=(new e.Component).refs;function uu(e,n,t,r){t=null==(t=t(r,n=e.memoizedState))?n:I({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var ou={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=Es(),l=Cs(e),a=Ja(r,l);a.payload=n,null!=t&&(a.callback=t),null!==(n=eu(e,a,l))&&(zs(n,e,l,r),nu(n,e,l))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=Es(),l=Cs(e),a=Ja(r,l);a.tag=1,a.payload=n,null!=t&&(a.callback=t),null!==(n=eu(e,a,l))&&(zs(n,e,l,r),nu(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=Es(),r=Cs(e),l=Ja(t,r);l.tag=2,null!=n&&(l.callback=n),null!==(n=eu(e,l,r))&&(zs(n,e,r,t),nu(n,e,r))}};function iu(e,n,t,r,l,a,u){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,u):!n.prototype||!n.prototype.isPureReactComponent||(!Cr(t,r)||!Cr(l,a))}function su(e,n,t){var r=!1,l=$l,a=n.contextType;return"object"==typeof a&&null!==a?a=ja(a):(l=Gl(n)?Yl:ql.current,a=(r=null!=(r=n.contextTypes))?Xl(e,l):$l),n=new n(t,a),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=ou,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),n}function cu(e,n,t,r){e=n.state,"function"==typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"==typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&ou.enqueueReplaceState(n,n.state,null)}function fu(e,n,t,r){var l=e.stateNode;l.props=t,l.state=e.memoizedState,l.refs=au,Ga(e);var a=n.contextType;"object"==typeof a&&null!==a?l.context=ja(a):(a=Gl(n)?Yl:ql.current,l.context=Xl(e,a)),l.state=e.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(uu(e,n,a,t),l.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(n=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),n!==l.state&&ou.enqueueReplaceState(l,l.state,null),ru(e,t,l,r),l.state=e.memoizedState),"function"==typeof l.componentDidMount&&(e.flags|=4194308)}function du(e,n,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(t(309));var l=r.stateNode}if(!l)throw Error(t(147,e));var a=l,u=""+e;return null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===u?n.ref:((n=function(e){var n=a.refs;n===au&&(n=a.refs={}),null===e?delete n[u]:n[u]=e})._stringRef=u,n)}if("string"!=typeof e)throw Error(t(284));if(!r._owner)throw Error(t(290,e))}return e}function pu(e,n){throw e=Object.prototype.toString.call(n),Error(t(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function mu(e){return(0,e._init)(e._payload)}function hu(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function l(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=uc(e,n)).index=0,e.sibling=null,e}function u(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function o(n){return e&&null===n.alternate&&(n.flags|=2),n}function i(e,n,t,r){return null===n||6!==n.tag?((n=cc(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function s(e,n,t,r){var l=t.type;return l===x?f(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===M&&mu(l)===n.type)?((r=a(n,t.props)).ref=du(e,n,t),r.return=e,r):((r=oc(t.type,t.key,t.props,null,e.mode,r)).ref=du(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=fc(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function f(e,n,t,r,l){return null===n||7!==n.tag?((n=ic(t,e.mode,r,l)).return=e,n):((n=a(n,t)).return=e,n)}function d(e,n,t){if("string"==typeof n&&""!==n||"number"==typeof n)return(n=cc(""+n,e.mode,t)).return=e,n;if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return(t=oc(n.type,n.key,n.props,null,e.mode,t)).ref=du(e,null,n),t.return=e,t;case S:return(n=fc(n,e.mode,t)).return=e,n;case M:return d(e,(0,n._init)(n._payload),t)}if(te(n)||D(n))return(n=ic(n,e.mode,t,null)).return=e,n;pu(e,n)}return null}function p(e,n,t,r){var l=null!==n?n.key:null;if("string"==typeof t&&""!==t||"number"==typeof t)return null!==l?null:i(e,n,""+t,r);if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return t.key===l?s(e,n,t,r):null;case S:return t.key===l?c(e,n,t,r):null;case M:return p(e,n,(l=t._init)(t._payload),r)}if(te(t)||D(t))return null!==l?null:f(e,n,t,r,null);pu(e,t)}return null}function m(e,n,t,r,l){if("string"==typeof r&&""!==r||"number"==typeof r)return i(n,e=e.get(t)||null,""+r,l);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return s(n,e=e.get(null===r.key?t:r.key)||null,r,l);case S:return c(n,e=e.get(null===r.key?t:r.key)||null,r,l);case M:return m(e,n,t,(0,r._init)(r._payload),l)}if(te(r)||D(r))return f(n,e=e.get(t)||null,r,l,null);pu(n,r)}return null}function h(t,a,o,i){for(var s=null,c=null,f=a,h=a=0,g=null;null!==f&&h<o.length;h++){f.index>h?(g=f,f=null):g=f.sibling;var v=p(t,f,o[h],i);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&n(t,f),a=u(v,a,h),null===c?s=v:c.sibling=v,c=v,f=g}if(h===o.length)return r(t,f),Ea&&ya(t,h),s;if(null===f){for(;h<o.length;h++)null!==(f=d(t,o[h],i))&&(a=u(f,a,h),null===c?s=f:c.sibling=f,c=f);return Ea&&ya(t,h),s}for(f=l(t,f);h<o.length;h++)null!==(g=m(f,t,h,o[h],i))&&(e&&null!==g.alternate&&f.delete(null===g.key?h:g.key),a=u(g,a,h),null===c?s=g:c.sibling=g,c=g);return e&&f.forEach(function(e){return n(t,e)}),Ea&&ya(t,h),s}function g(a,o,i,s){var c=D(i);if("function"!=typeof c)throw Error(t(150));if(null==(i=c.call(i)))throw Error(t(151));for(var f=c=null,h=o,g=o=0,v=null,y=i.next();null!==h&&!y.done;g++,y=i.next()){h.index>g?(v=h,h=null):v=h.sibling;var b=p(a,h,y.value,s);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&n(a,h),o=u(b,o,g),null===f?c=b:f.sibling=b,f=b,h=v}if(y.done)return r(a,h),Ea&&ya(a,g),c;if(null===h){for(;!y.done;g++,y=i.next())null!==(y=d(a,y.value,s))&&(o=u(y,o,g),null===f?c=y:f.sibling=y,f=y);return Ea&&ya(a,g),c}for(h=l(a,h);!y.done;g++,y=i.next())null!==(y=m(h,a,g,y.value,s))&&(e&&null!==y.alternate&&h.delete(null===y.key?g:y.key),o=u(y,o,g),null===f?c=y:f.sibling=y,f=y);return e&&h.forEach(function(e){return n(a,e)}),Ea&&ya(a,g),c}return function e(t,l,u,i){if("object"==typeof u&&null!==u&&u.type===x&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case w:e:{for(var s=u.key,c=l;null!==c;){if(c.key===s){if((s=u.type)===x){if(7===c.tag){r(t,c.sibling),(l=a(c,u.props.children)).return=t,t=l;break e}}else if(c.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===M&&mu(s)===c.type){r(t,c.sibling),(l=a(c,u.props)).ref=du(t,c,u),l.return=t,t=l;break e}r(t,c);break}n(t,c),c=c.sibling}u.type===x?((l=ic(u.props.children,t.mode,i,u.key)).return=t,t=l):((i=oc(u.type,u.key,u.props,null,t.mode,i)).ref=du(t,l,u),i.return=t,t=i)}return o(t);case S:e:{for(c=u.key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){r(t,l.sibling),(l=a(l,u.children||[])).return=t,t=l;break e}r(t,l);break}n(t,l),l=l.sibling}(l=fc(u,t.mode,i)).return=t,t=l}return o(t);case M:return e(t,l,(c=u._init)(u._payload),i)}if(te(u))return h(t,l,u,i);if(D(u))return g(t,l,u,i);pu(t,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==l&&6===l.tag?(r(t,l.sibling),(l=a(l,u)).return=t,t=l):(r(t,l),(l=cc(u,t.mode,i)).return=t,t=l),o(t)):r(t,l)}}var gu=hu(!0),vu=hu(!1),yu={},bu=Ql(yu),ku=Ql(yu),wu=Ql(yu);function Su(e){if(e===yu)throw Error(t(174));return e}function xu(e,n){switch(jl(wu,n),jl(ku,e),jl(bu,yu),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:se(null,"");break;default:n=se(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}Wl(bu),jl(bu,n)}function Eu(){Wl(bu),Wl(ku),Wl(wu)}function Cu(e){Su(wu.current);var n=Su(bu.current),t=se(n,e.type);n!==t&&(jl(ku,e),jl(bu,t))}function zu(e){ku.current===e&&(Wl(bu),Wl(ku))}var Nu=Ql(0);function Pu(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!=(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _u=[];function Lu(){for(var e=0;e<_u.length;e++)_u[e]._workInProgressVersionPrimary=null;_u.length=0}var Tu=k.ReactCurrentDispatcher,Mu=k.ReactCurrentBatchConfig,Fu=0,Ru=null,Du=null,Ou=null,Iu=!1,Uu=!1,Vu=0,Au=0;function Bu(){throw Error(t(321))}function Hu(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Er(e[t],n[t]))return!1;return!0}function Qu(e,n,r,l,a,u){if(Fu=u,Ru=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Tu.current=null===e||null===e.memoizedState?No:Po,e=r(l,a),Uu){u=0;do{if(Uu=!1,Vu=0,25<=u)throw Error(t(301));u+=1,Ou=Du=null,n.updateQueue=null,Tu.current=_o,e=r(l,a)}while(Uu)}if(Tu.current=zo,n=null!==Du&&null!==Du.next,Fu=0,Ou=Du=Ru=null,Iu=!1,n)throw Error(t(300));return e}function Wu(){var e=0!==Vu;return Vu=0,e}function ju(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ou?Ru.memoizedState=Ou=e:Ou=Ou.next=e,Ou}function $u(){if(null===Du){var e=Ru.alternate;e=null!==e?e.memoizedState:null}else e=Du.next;var n=null===Ou?Ru.memoizedState:Ou.next;if(null!==n)Ou=n,Du=e;else{if(null===e)throw Error(t(310));e={memoizedState:(Du=e).memoizedState,baseState:Du.baseState,baseQueue:Du.baseQueue,queue:Du.queue,next:null},null===Ou?Ru.memoizedState=Ou=e:Ou=Ou.next=e}return Ou}function qu(e,n){return"function"==typeof n?n(e):n}function Ku(e){var n=$u(),r=n.queue;if(null===r)throw Error(t(311));r.lastRenderedReducer=e;var l=Du,a=l.baseQueue,u=r.pending;if(null!==u){if(null!==a){var o=a.next;a.next=u.next,u.next=o}l.baseQueue=a=u,r.pending=null}if(null!==a){u=a.next,l=l.baseState;var i=o=null,s=null,c=u;do{var f=c.lane;if((Fu&f)===f)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),l=c.hasEagerState?c.eagerState:e(l,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(i=s=d,o=l):s=s.next=d,Ru.lanes|=f,us|=f}c=c.next}while(null!==c&&c!==u);null===s?o=l:s.next=i,Er(l,n.memoizedState)||(Ao=!0),n.memoizedState=l,n.baseState=o,n.baseQueue=s,r.lastRenderedState=l}if(null!==(e=r.interleaved)){a=e;do{u=a.lane,Ru.lanes|=u,us|=u,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function Yu(e){var n=$u(),r=n.queue;if(null===r)throw Error(t(311));r.lastRenderedReducer=e;var l=r.dispatch,a=r.pending,u=n.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{u=e(u,o.action),o=o.next}while(o!==a);Er(u,n.memoizedState)||(Ao=!0),n.memoizedState=u,null===n.baseQueue&&(n.baseState=u),r.lastRenderedState=u}return[u,l]}function Xu(){}function Gu(e,n){var r=Ru,l=$u(),a=n(),u=!Er(l.memoizedState,a);if(u&&(l.memoizedState=a,Ao=!0),l=l.queue,so(eo.bind(null,r,l,e),[e]),l.getSnapshot!==n||u||null!==Ou&&1&Ou.memoizedState.tag){if(r.flags|=2048,lo(9,Ju.bind(null,r,l,a,n),void 0,null),null===Ji)throw Error(t(349));0!=(30&Fu)||Zu(r,n,a)}return a}function Zu(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=Ru.updateQueue)?(n={lastEffect:null,stores:null},Ru.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Ju(e,n,t,r){n.value=t,n.getSnapshot=r,no(n)&&to(e)}function eo(e,n,t){return t(function(){no(n)&&to(e)})}function no(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Er(e,t)}catch(r){return!0}}function to(e){var n=Ya(e,1);null!==n&&zs(n,e,1,-1)}function ro(e){var n=ju();return"function"==typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:e},n.queue=e,e=e.dispatch=So.bind(null,Ru,e),[n.memoizedState,e]}function lo(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=Ru.updateQueue)?(n={lastEffect:null,stores:null},Ru.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function ao(){return $u().memoizedState}function uo(e,n,t,r){var l=ju();Ru.flags|=e,l.memoizedState=lo(1|n,t,void 0,void 0===r?null:r)}function oo(e,n,t,r){var l=$u();r=void 0===r?null:r;var a=void 0;if(null!==Du){var u=Du.memoizedState;if(a=u.destroy,null!==r&&Hu(r,u.deps))return void(l.memoizedState=lo(n,t,a,r))}Ru.flags|=e,l.memoizedState=lo(1|n,t,a,r)}function io(e,n){return uo(8390656,8,e,n)}function so(e,n){return oo(2048,8,e,n)}function co(e,n){return oo(4,2,e,n)}function fo(e,n){return oo(4,4,e,n)}function po(e,n){return"function"==typeof n?(e=e(),n(e),function(){n(null)}):null!=n?(e=e(),n.current=e,function(){n.current=null}):void 0}function mo(e,n,t){return t=null!=t?t.concat([e]):null,oo(4,4,po.bind(null,n,e),t)}function ho(){}function go(e,n){var t=$u();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Hu(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function vo(e,n){var t=$u();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&Hu(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function yo(e,n,t){return 0==(21&Fu)?(e.baseState&&(e.baseState=!1,Ao=!0),e.memoizedState=t):(Er(t,n)||(t=wn(),Ru.lanes|=t,us|=t,e.baseState=!0),n)}function bo(e,n){var t=zn;zn=0!==t&&4>t?t:4,e(!0);var r=Mu.transition;Mu.transition={};try{e(!1),n()}finally{zn=t,Mu.transition=r}}function ko(){return $u().memoizedState}function wo(e,n,t){var r=Cs(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},xo(e))Eo(n,t);else if(null!==(t=Ka(e,n,t,r))){zs(t,e,r,Es()),Co(t,n,r)}}function So(e,n,t){var r=Cs(e),l={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(xo(e))Eo(n,l);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=n.lastRenderedReducer))try{var u=n.lastRenderedState,o=a(u,t);if(l.hasEagerState=!0,l.eagerState=o,Er(o,u)){var i=n.interleaved;return null===i?(l.next=l,qa(n)):(l.next=i.next,i.next=l),void(n.interleaved=l)}}catch(s){}null!==(t=Ka(e,n,l,r))&&(zs(t,e,r,l=Es()),Co(t,n,r))}}function xo(e){var n=e.alternate;return e===Ru||null!==n&&n===Ru}function Eo(e,n){Uu=Iu=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Co(e,n,t){if(0!=(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,Cn(e,t)}}var zo={readContext:ja,useCallback:Bu,useContext:Bu,useEffect:Bu,useImperativeHandle:Bu,useInsertionEffect:Bu,useLayoutEffect:Bu,useMemo:Bu,useReducer:Bu,useRef:Bu,useState:Bu,useDebugValue:Bu,useDeferredValue:Bu,useTransition:Bu,useMutableSource:Bu,useSyncExternalStore:Bu,useId:Bu,unstable_isNewReconciler:!1},No={readContext:ja,useCallback:function(e,n){return ju().memoizedState=[e,void 0===n?null:n],e},useContext:ja,useEffect:io,useImperativeHandle:function(e,n,t){return t=null!=t?t.concat([e]):null,uo(4194308,4,po.bind(null,n,e),t)},useLayoutEffect:function(e,n){return uo(4194308,4,e,n)},useInsertionEffect:function(e,n){return uo(4,2,e,n)},useMemo:function(e,n){var t=ju();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=ju();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=wo.bind(null,Ru,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ju().memoizedState=e},useState:ro,useDebugValue:ho,useDeferredValue:function(e){return ju().memoizedState=e},useTransition:function(){var e=ro(!1),n=e[0];return e=bo.bind(null,e[1]),ju().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var l=Ru,a=ju();if(Ea){if(void 0===r)throw Error(t(407));r=r()}else{if(r=n(),null===Ji)throw Error(t(349));0!=(30&Fu)||Zu(l,n,r)}a.memoizedState=r;var u={value:r,getSnapshot:n};return a.queue=u,io(eo.bind(null,l,u,e),[e]),l.flags|=2048,lo(9,Ju.bind(null,l,u,r,n),void 0,null),r},useId:function(){var e=ju(),n=Ji.identifierPrefix;if(Ea){var t=va;n=":"+n+"R"+(t=(ga&~(1<<32-cn(ga)-1)).toString(32)+t),0<(t=Vu++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=Au++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Po={readContext:ja,useCallback:go,useContext:ja,useEffect:so,useImperativeHandle:mo,useInsertionEffect:co,useLayoutEffect:fo,useMemo:vo,useReducer:Ku,useRef:ao,useState:function(){return Ku(qu)},useDebugValue:ho,useDeferredValue:function(e){return yo($u(),Du.memoizedState,e)},useTransition:function(){return[Ku(qu)[0],$u().memoizedState]},useMutableSource:Xu,useSyncExternalStore:Gu,useId:ko,unstable_isNewReconciler:!1},_o={readContext:ja,useCallback:go,useContext:ja,useEffect:so,useImperativeHandle:mo,useInsertionEffect:co,useLayoutEffect:fo,useMemo:vo,useReducer:Yu,useRef:ao,useState:function(){return Yu(qu)},useDebugValue:ho,useDeferredValue:function(e){var n=$u();return null===Du?n.memoizedState=e:yo(n,Du.memoizedState,e)},useTransition:function(){return[Yu(qu)[0],$u().memoizedState]},useMutableSource:Xu,useSyncExternalStore:Gu,useId:ko,unstable_isNewReconciler:!1};function Lo(e,n){try{var t="",r=n;do{t+=B(r),r=r.return}while(r);var l=t}catch(a){l="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:n,stack:l,digest:null}}function To(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function Mo(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var Fo="function"==typeof WeakMap?WeakMap:Map;function Ro(e,n,t){(t=Ja(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){ms||(ms=!0,hs=r),Mo(e,n)},t}function Do(e,n,t){(t=Ja(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var l=n.value;t.payload=function(){return r(l)},t.callback=function(){Mo(e,n)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(t.callback=function(){Mo(e,n),"function"!=typeof r&&(null===gs?gs=new Set([this]):gs.add(this));var t=n.stack;this.componentDidCatch(n.value,{componentStack:null!==t?t:""})}),t}function Oo(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new Fo;var l=new Set;r.set(n,l)}else void 0===(l=r.get(n))&&(l=new Set,r.set(n,l));l.has(t)||(l.add(t),e=Gs.bind(null,e,n,t),n.then(e,e))}function Io(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function Uo(e,n,t,r,l){return 0==(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=Ja(-1,1)).tag=2,eu(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Vo=k.ReactCurrentOwner,Ao=!1;function Bo(e,n,t,r){n.child=null===e?vu(n,null,t,r):gu(n,e.child,t,r)}function Ho(e,n,t,r,l){t=t.render;var a=n.ref;return Wa(n,l),r=Qu(e,n,t,r,a,l),t=Wu(),null===e||Ao?(Ea&&t&&ka(n),n.flags|=1,Bo(e,n,r,l),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,di(e,n,l))}function Qo(e,n,t,r,l){if(null===e){var a=t.type;return"function"!=typeof a||lc(a)||void 0!==a.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=oc(t.type,null,r,n,n.mode,l)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=a,Wo(e,n,a,r,l))}if(a=e.child,0==(e.lanes&l)){var u=a.memoizedProps;if((t=null!==(t=t.compare)?t:Cr)(u,r)&&e.ref===n.ref)return di(e,n,l)}return n.flags|=1,(e=uc(a,r)).ref=n.ref,e.return=n,n.child=e}function Wo(e,n,t,r,l){if(null!==e){var a=e.memoizedProps;if(Cr(a,r)&&e.ref===n.ref){if(Ao=!1,n.pendingProps=r=a,0==(e.lanes&l))return n.lanes=e.lanes,di(e,n,l);0!=(131072&e.flags)&&(Ao=!0)}}return qo(e,n,t,r,l)}function jo(e,n,t){var r=n.pendingProps,l=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},jl(rs,ts),ts|=t;else{if(0==(1073741824&t))return e=null!==a?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,jl(rs,ts),ts|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:t,jl(rs,ts),ts|=r}else null!==a?(r=a.baseLanes|t,n.memoizedState=null):r=t,jl(rs,ts),ts|=r;return Bo(e,n,l,t),n.child}function $o(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function qo(e,n,t,r,l){var a=Gl(t)?Yl:ql.current;return a=Xl(n,a),Wa(n,l),t=Qu(e,n,t,r,a,l),r=Wu(),null===e||Ao?(Ea&&r&&ka(n),n.flags|=1,Bo(e,n,t,l),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,di(e,n,l))}function Ko(e,n,t,r,l){if(Gl(t)){var a=!0;na(n)}else a=!1;if(Wa(n,l),null===n.stateNode)fi(e,n),su(n,t,r),fu(n,t,r,l),r=!0;else if(null===e){var u=n.stateNode,o=n.memoizedProps;u.props=o;var i=u.context,s=t.contextType;"object"==typeof s&&null!==s?s=ja(s):s=Xl(n,s=Gl(t)?Yl:ql.current);var c=t.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof u.getSnapshotBeforeUpdate;f||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(o!==r||i!==s)&&cu(n,u,r,s),Xa=!1;var d=n.memoizedState;u.state=d,ru(n,r,u,l),i=n.memoizedState,o!==r||d!==i||Kl.current||Xa?("function"==typeof c&&(uu(n,t,c,r),i=n.memoizedState),(o=Xa||iu(n,t,o,r,d,i,s))?(f||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||("function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount()),"function"==typeof u.componentDidMount&&(n.flags|=4194308)):("function"==typeof u.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=i),u.props=r,u.state=i,u.context=s,r=o):("function"==typeof u.componentDidMount&&(n.flags|=4194308),r=!1)}else{u=n.stateNode,Za(e,n),o=n.memoizedProps,s=n.type===n.elementType?o:Oa(n.type,o),u.props=s,f=n.pendingProps,d=u.context,"object"==typeof(i=t.contextType)&&null!==i?i=ja(i):i=Xl(n,i=Gl(t)?Yl:ql.current);var p=t.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof u.getSnapshotBeforeUpdate)||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(o!==f||d!==i)&&cu(n,u,r,i),Xa=!1,d=n.memoizedState,u.state=d,ru(n,r,u,l);var m=n.memoizedState;o!==f||d!==m||Kl.current||Xa?("function"==typeof p&&(uu(n,t,p,r),m=n.memoizedState),(s=Xa||iu(n,t,s,r,d,m,i)||!1)?(c||"function"!=typeof u.UNSAFE_componentWillUpdate&&"function"!=typeof u.componentWillUpdate||("function"==typeof u.componentWillUpdate&&u.componentWillUpdate(r,m,i),"function"==typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(r,m,i)),"function"==typeof u.componentDidUpdate&&(n.flags|=4),"function"==typeof u.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!=typeof u.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=m),u.props=r,u.state=m,u.context=i,r=s):("function"!=typeof u.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),r=!1)}return Yo(e,n,t,r,a,l)}function Yo(e,n,t,r,l,a){$o(e,n);var u=0!=(128&n.flags);if(!r&&!u)return l&&ta(n,t,!1),di(e,n,a);r=n.stateNode,Vo.current=n;var o=u&&"function"!=typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&u?(n.child=gu(n,e.child,null,a),n.child=gu(n,null,o,a)):Bo(e,n,o,a),n.memoizedState=r.state,l&&ta(n,t,!0),n.child}function Xo(e){var n=e.stateNode;n.pendingContext?Jl(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Jl(e,n.context,!1),xu(e,n.containerInfo)}function Go(e,n,t,r,l){return Fa(),Ra(l),n.flags|=256,Bo(e,n,t,r),n.child}var Zo,Jo,ei,ni,ti={dehydrated:null,treeContext:null,retryLane:0};function ri(e){return{baseLanes:e,cachePool:null,transitions:null}}function li(e,n,t){var r,l=n.pendingProps,a=Nu.current,u=!1,o=0!=(128&n.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(u=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),jl(Nu,1&a),null===e)return _a(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(o=l.children,e=l.fallback,u?(l=n.mode,u=n.child,o={mode:"hidden",children:o},0==(1&l)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=sc(o,l,0,null),e=ic(e,l,t,null),u.return=n,e.return=n,u.sibling=e,n.child=u,n.child.memoizedState=ri(t),n.memoizedState=ti,e):ai(n,o));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return oi(e,n,o,l,r,a,t);if(u){u=l.fallback,o=n.mode,r=(a=e.child).sibling;var i={mode:"hidden",children:l.children};return 0==(1&o)&&n.child!==a?((l=n.child).childLanes=0,l.pendingProps=i,n.deletions=null):(l=uc(a,i)).subtreeFlags=14680064&a.subtreeFlags,null!==r?u=uc(r,u):(u=ic(u,o,t,null)).flags|=2,u.return=n,l.return=n,l.sibling=u,n.child=l,l=u,u=n.child,o=null===(o=e.child.memoizedState)?ri(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},u.memoizedState=o,u.childLanes=e.childLanes&~t,n.memoizedState=ti,l}return e=(u=e.child).sibling,l=uc(u,{mode:"visible",children:l.children}),0==(1&n.mode)&&(l.lanes=t),l.return=n,l.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=l,n.memoizedState=null,l}function ai(e,n){return(n=sc({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function ui(e,n,t,r){return null!==r&&Ra(r),gu(n,e.child,null,t),(e=ai(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function oi(e,n,r,l,a,u,o){if(r)return 256&n.flags?(n.flags&=-257,ui(e,n,o,l=To(Error(t(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(u=l.fallback,a=n.mode,l=sc({mode:"visible",children:l.children},a,0,null),(u=ic(u,a,o,null)).flags|=2,l.return=n,u.return=n,l.sibling=u,n.child=l,0!=(1&n.mode)&&gu(n,e.child,null,o),n.child.memoizedState=ri(o),n.memoizedState=ti,u);if(0==(1&n.mode))return ui(e,n,o,null);if("$!"===a.data){if(l=a.nextSibling&&a.nextSibling.dataset)var i=l.dgst;return l=i,ui(e,n,o,l=To(u=Error(t(419)),l,void 0))}if(i=0!=(o&e.childLanes),Ao||i){if(null!==(l=Ji)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(l.suspendedLanes|o))?0:a)&&a!==u.retryLane&&(u.retryLane=a,Ya(e,a),zs(l,e,a,-1))}return As(),ui(e,n,o,l=To(Error(t(421))))}return"$?"===a.data?(n.flags|=128,n.child=e.child,n=Js.bind(null,e),a._reactRetry=n,null):(e=u.treeContext,xa=Pl(a.nextSibling),Sa=n,Ea=!0,Ca=null,null!==e&&(pa[ma++]=ga,pa[ma++]=va,pa[ma++]=ha,ga=e.id,va=e.overflow,ha=n),(n=ai(n,l.children)).flags|=4096,n)}function ii(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Qa(e.return,n,t)}function si(e,n,t,r,l){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:l}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=l)}function ci(e,n,t){var r=n.pendingProps,l=r.revealOrder,a=r.tail;if(Bo(e,n,r.children,t),0!=(2&(r=Nu.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ii(e,t,n);else if(19===e.tag)ii(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(jl(Nu,r),0==(1&n.mode))n.memoizedState=null;else switch(l){case"forwards":for(t=n.child,l=null;null!==t;)null!==(e=t.alternate)&&null===Pu(e)&&(l=t),t=t.sibling;null===(t=l)?(l=n.child,n.child=null):(l=t.sibling,t.sibling=null),si(n,!1,l,t,a);break;case"backwards":for(t=null,l=n.child,n.child=null;null!==l;){if(null!==(e=l.alternate)&&null===Pu(e)){n.child=l;break}e=l.sibling,l.sibling=t,t=l,l=e}si(n,!0,t,null,a);break;case"together":si(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function fi(e,n){0==(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function di(e,n,r){if(null!==e&&(n.dependencies=e.dependencies),us|=n.lanes,0==(r&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(t(153));if(null!==n.child){for(r=uc(e=n.child,e.pendingProps),n.child=r,r.return=n;null!==e.sibling;)e=e.sibling,(r=r.sibling=uc(e,e.pendingProps)).return=n;r.sibling=null}return n.child}function pi(e,n,t){switch(n.tag){case 3:Xo(n),Fa();break;case 5:Cu(n);break;case 1:Gl(n.type)&&na(n);break;case 4:xu(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,l=n.memoizedProps.value;jl(Ia,r._currentValue),r._currentValue=l;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(jl(Nu,1&Nu.current),n.flags|=128,null):0!=(t&n.child.childLanes)?li(e,n,t):(jl(Nu,1&Nu.current),null!==(e=di(e,n,t))?e.sibling:null);jl(Nu,1&Nu.current);break;case 19:if(r=0!=(t&n.childLanes),0!=(128&e.flags)){if(r)return ci(e,n,t);n.flags|=128}if(null!==(l=n.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),jl(Nu,Nu.current),r)break;return null;case 22:case 23:return n.lanes=0,jo(e,n,t)}return di(e,n,t)}function mi(e,n){if(!Ea)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hi(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var l=e.child;null!==l;)t|=l.lanes|l.childLanes,r|=14680064&l.subtreeFlags,r|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)t|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function gi(e,n,r){var a=n.pendingProps;switch(wa(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(n),null;case 1:return Gl(n.type)&&Zl(),hi(n),null;case 3:return a=n.stateNode,Eu(),Wl(Kl),Wl(ql),Lu(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(Ta(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&n.flags)||(n.flags|=1024,null!==Ca&&(Ls(Ca),Ca=null))),Jo(e,n),hi(n),null;case 5:zu(n);var u=Su(wu.current);if(r=n.type,null!==e&&null!=n.stateNode)ei(e,n,r,a,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!a){if(null===n.stateNode)throw Error(t(166));return hi(n),null}if(e=Su(bu.current),Ta(n)){a=n.stateNode,r=n.type;var o=n.memoizedProps;switch(a[Tl]=n,a[Ml]=o,e=0!=(1&n.mode),r){case"dialog":ll("cancel",a),ll("close",a);break;case"iframe":case"object":case"embed":ll("load",a);break;case"video":case"audio":for(u=0;u<el.length;u++)ll(el[u],a);break;case"source":ll("error",a);break;case"img":case"image":case"link":ll("error",a),ll("load",a);break;case"details":ll("toggle",a);break;case"input":G(a,o),ll("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},ll("invalid",a);break;case"textarea":ae(a,o),ll("invalid",a)}for(var i in ye(r,o),u=null,o)if(o.hasOwnProperty(i)){var s=o[i];"children"===i?"string"==typeof s?a.textContent!==s&&(!0!==o.suppressHydrationWarning&&vl(a.textContent,s,e),u=["children",s]):"number"==typeof s&&a.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&vl(a.textContent,s,e),u=["children",""+s]):l.hasOwnProperty(i)&&null!=s&&"onScroll"===i&&ll("scroll",a)}switch(r){case"input":q(a),ee(a,o,!0);break;case"textarea":q(a),oe(a);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(a.onclick=yl)}a=u,n.updateQueue=a,null!==a&&(n.flags|=4)}else{i=9===u.nodeType?u:u.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof a.is?e=i.createElement(r,{is:a.is}):(e=i.createElement(r),"select"===r&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,r),e[Tl]=n,e[Ml]=a,Zo(e,n,!1,!1),n.stateNode=e;e:{switch(i=be(r,a),r){case"dialog":ll("cancel",e),ll("close",e),u=a;break;case"iframe":case"object":case"embed":ll("load",e),u=a;break;case"video":case"audio":for(u=0;u<el.length;u++)ll(el[u],e);u=a;break;case"source":ll("error",e),u=a;break;case"img":case"image":case"link":ll("error",e),ll("load",e),u=a;break;case"details":ll("toggle",e),u=a;break;case"input":G(e,a),u=X(e,a),ll("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=I({},a,{value:void 0}),ll("invalid",e);break;case"textarea":ae(e,a),u=le(e,a),ll("invalid",e);break;default:u=a}for(o in ye(r,u),s=u)if(s.hasOwnProperty(o)){var c=s[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"==typeof c?("textarea"!==r||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=c&&"onScroll"===o&&ll("scroll",e):null!=c&&b(e,o,c,i))}switch(r){case"input":q(e),ee(e,a,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=a.value&&e.setAttribute("value",""+W(a.value));break;case"select":e.multiple=!!a.multiple,null!=(o=a.value)?re(e,!!a.multiple,o,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=yl)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return hi(n),null;case 6:if(e&&null!=n.stateNode)ni(e,n,e.memoizedProps,a);else{if("string"!=typeof a&&null===n.stateNode)throw Error(t(166));if(r=Su(wu.current),Su(bu.current),Ta(n)){if(a=n.stateNode,r=n.memoizedProps,a[Tl]=n,(o=a.nodeValue!==r)&&null!==(e=Sa))switch(e.tag){case 3:vl(a.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&vl(a.nodeValue,r,0!=(1&e.mode))}o&&(n.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[Tl]=n,n.stateNode=a}return hi(n),null;case 13:if(Wl(Nu),a=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Ea&&null!==xa&&0!=(1&n.mode)&&0==(128&n.flags))Ma(),Fa(),n.flags|=98560,o=!1;else if(o=Ta(n),null!==a&&null!==a.dehydrated){if(null===e){if(!o)throw Error(t(318));if(!(o=null!==(o=n.memoizedState)?o.dehydrated:null))throw Error(t(317));o[Tl]=n}else Fa(),0==(128&n.flags)&&(n.memoizedState=null),n.flags|=4;hi(n),o=!1}else null!==Ca&&(Ls(Ca),Ca=null),o=!0;if(!o)return 65536&n.flags?n:null}return 0!=(128&n.flags)?(n.lanes=r,n):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(n.child.flags|=8192,0!=(1&n.mode)&&(null===e||0!=(1&Nu.current)?0===ls&&(ls=3):As())),null!==n.updateQueue&&(n.flags|=4),hi(n),null);case 4:return Eu(),Jo(e,n),null===e&&ol(n.stateNode.containerInfo),hi(n),null;case 10:return Ha(n.type._context),hi(n),null;case 17:return Gl(n.type)&&Zl(),hi(n),null;case 19:if(Wl(Nu),null===(o=n.memoizedState))return hi(n),null;if(a=0!=(128&n.flags),null===(i=o.rendering))if(a)mi(o,!1);else{if(0!==ls||null!==e&&0!=(128&e.flags))for(e=n.child;null!==e;){if(null!==(i=Pu(e))){for(n.flags|=128,mi(o,!1),null!==(a=i.updateQueue)&&(n.updateQueue=a,n.flags|=4),n.subtreeFlags=0,a=r,r=n.child;null!==r;)e=a,(o=r).flags&=14680066,null===(i=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jl(Nu,1&Nu.current|2),n.child}e=e.sibling}null!==o.tail&&Je()>ds&&(n.flags|=128,a=!0,mi(o,!1),n.lanes=4194304)}else{if(!a)if(null!==(e=Pu(i))){if(n.flags|=128,a=!0,null!==(r=e.updateQueue)&&(n.updateQueue=r,n.flags|=4),mi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!Ea)return hi(n),null}else 2*Je()-o.renderingStartTime>ds&&1073741824!==r&&(n.flags|=128,a=!0,mi(o,!1),n.lanes=4194304);o.isBackwards?(i.sibling=n.child,n.child=i):(null!==(r=o.last)?r.sibling=i:n.child=i,o.last=i)}return null!==o.tail?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Je(),n.sibling=null,r=Nu.current,jl(Nu,a?1&r|2:1&r),n):(hi(n),null);case 22:case 23:return Os(),a=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==a&&(n.flags|=8192),a&&0!=(1&n.mode)?0!=(1073741824&ts)&&(hi(n),6&n.subtreeFlags&&(n.flags|=8192)):hi(n),null;case 24:case 25:return null}throw Error(t(156,n.tag))}function vi(e,n){switch(wa(n),n.tag){case 1:return Gl(n.type)&&Zl(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return Eu(),Wl(Kl),Wl(ql),Lu(),0!=(65536&(e=n.flags))&&0==(128&e)?(n.flags=-65537&e|128,n):null;case 5:return zu(n),null;case 13:if(Wl(Nu),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(t(340));Fa()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return Wl(Nu),null;case 4:return Eu(),null;case 10:return Ha(n.type._context),null;case 22:case 23:return Os(),null;case 24:default:return null}}Zo=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Jo=function(){},ei=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,Su(bu.current);var u,o=null;switch(t){case"input":a=X(e,a),r=X(e,r),o=[];break;case"select":a=I({},a,{value:void 0}),r=I({},r,{value:void 0}),o=[];break;case"textarea":a=le(e,a),r=le(e,r),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=yl)}for(c in ye(t,r),t=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var i=a[c];for(u in i)i.hasOwnProperty(u)&&(t||(t={}),t[u]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var s=r[c];if(i=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&s!==i&&(null!=s||null!=i))if("style"===c)if(i){for(u in i)!i.hasOwnProperty(u)||s&&s.hasOwnProperty(u)||(t||(t={}),t[u]="");for(u in s)s.hasOwnProperty(u)&&i[u]!==s[u]&&(t||(t={}),t[u]=s[u])}else t||(o||(o=[]),o.push(c,t)),t=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,i=i?i.__html:void 0,null!=s&&i!==s&&(o=o||[]).push(c,s)):"children"===c?"string"!=typeof s&&"number"!=typeof s||(o=o||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&ll("scroll",e),o||i===s||(o=[])):(o=o||[]).push(c,s))}t&&(o=o||[]).push("style",t);var c=o;(n.updateQueue=c)&&(n.flags|=4)}},ni=function(e,n,t,r){t!==r&&(n.flags|=4)};var yi=!1,bi=!1,ki="function"==typeof WeakSet?WeakSet:Set,wi=null;function Si(e,n){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(r){Xs(e,n,r)}else t.current=null}function xi(e,n,t){try{t()}catch(r){Xs(e,n,r)}}var Ei=!1;function Ci(e,n){if(bl=Zn,Lr(e=_r())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var l=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(l&&0!==l.rangeCount){r=l.anchorNode;var a=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{r.nodeType,u.nodeType}catch(w){r=null;break e}var o=0,i=-1,s=-1,c=0,f=0,d=e,p=null;n:for(;;){for(var m;d!==r||0!==a&&3!==d.nodeType||(i=o+a),d!==u||0!==l&&3!==d.nodeType||(s=o+l),3===d.nodeType&&(o+=d.nodeValue.length),null!==(m=d.firstChild);)p=d,d=m;for(;;){if(d===e)break n;if(p===r&&++c===a&&(i=o),p===u&&++f===l&&(s=o),null!==(m=d.nextSibling))break;p=(d=p).parentNode}d=m}r=-1===i||-1===s?null:{start:i,end:s}}else r=null}r=r||{start:0,end:0}}else r=null;for(kl={focusedElem:e,selectionRange:r},Zn=!1,wi=n;null!==wi;)if(e=(n=wi).child,0!=(1028&n.subtreeFlags)&&null!==e)e.return=n,wi=e;else for(;null!==wi;){n=wi;try{var h=n.alternate;if(0!=(1024&n.flags))switch(n.tag){case 0:case 11:case 15:break;case 1:if(null!==h){var g=h.memoizedProps,v=h.memoizedState,y=n.stateNode,b=y.getSnapshotBeforeUpdate(n.elementType===n.type?g:Oa(n.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=n.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(w){Xs(n,n.return,w)}if(null!==(e=n.sibling)){e.return=n.return,wi=e;break}wi=n.return}return h=Ei,Ei=!1,h}function zi(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,void 0!==a&&xi(n,t,a)}l=l.next}while(l!==r)}}function Ni(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function Pi(e){var n=e.ref;if(null!==n){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}"function"==typeof n?n(e):n.current=e}}function _i(e){var n=e.alternate;null!==n&&(e.alternate=null,_i(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[Tl],delete n[Ml],delete n[Rl],delete n[Dl],delete n[Ol])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Li(e){return 5===e.tag||3===e.tag||4===e.tag}function Ti(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Li(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Mi(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!=(t=t._reactRootContainer)||null!==n.onclick||(n.onclick=yl));else if(4!==r&&null!==(e=e.child))for(Mi(e,n,t),e=e.sibling;null!==e;)Mi(e,n,t),e=e.sibling}function Fi(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Fi(e,n,t),e=e.sibling;null!==e;)Fi(e,n,t),e=e.sibling}var Ri=null,Di=!1;function Oi(e,n,t){for(t=t.child;null!==t;)Ii(e,n,t),t=t.sibling}function Ii(e,n,t){if(on&&"function"==typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(un,t)}catch(o){}switch(t.tag){case 5:bi||Si(t,n);case 6:var r=Ri,l=Di;Ri=null,Oi(e,n,t),Di=l,null!==(Ri=r)&&(Di?(e=Ri,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):Ri.removeChild(t.stateNode));break;case 18:null!==Ri&&(Di?(e=Ri,t=t.stateNode,8===e.nodeType?Nl(e.parentNode,t):1===e.nodeType&&Nl(e,t),Xn(e)):Nl(Ri,t.stateNode));break;case 4:r=Ri,l=Di,Ri=t.stateNode.containerInfo,Di=!0,Oi(e,n,t),Ri=r,Di=l;break;case 0:case 11:case 14:case 15:if(!bi&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){l=r=r.next;do{var a=l,u=a.destroy;a=a.tag,void 0!==u&&(0!=(2&a)?xi(t,n,u):0!=(4&a)&&xi(t,n,u)),l=l.next}while(l!==r)}Oi(e,n,t);break;case 1:if(!bi&&(Si(t,n),"function"==typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Xs(t,n,o)}Oi(e,n,t);break;case 21:Oi(e,n,t);break;case 22:1&t.mode?(bi=(r=bi)||null!==t.memoizedState,Oi(e,n,t),bi=r):Oi(e,n,t);break;default:Oi(e,n,t)}}function Ui(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new ki),n.forEach(function(n){var r=ec.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Vi(e,n){var r=n.deletions;if(null!==r)for(var l=0;l<r.length;l++){var a=r[l];try{var u=e,o=n,i=o;e:for(;null!==i;){switch(i.tag){case 5:Ri=i.stateNode,Di=!1;break e;case 3:case 4:Ri=i.stateNode.containerInfo,Di=!0;break e}i=i.return}if(null===Ri)throw Error(t(160));Ii(u,o,a),Ri=null,Di=!1;var s=a.alternate;null!==s&&(s.return=null),a.return=null}catch(c){Xs(a,n,c)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)Ai(n,e),n=n.sibling}function Ai(e,n){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vi(n,e),Bi(e),4&l){try{zi(3,e,e.return),Ni(3,e)}catch(g){Xs(e,e.return,g)}try{zi(5,e,e.return)}catch(g){Xs(e,e.return,g)}}break;case 1:Vi(n,e),Bi(e),512&l&&null!==r&&Si(r,r.return);break;case 5:if(Vi(n,e),Bi(e),512&l&&null!==r&&Si(r,r.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(g){Xs(e,e.return,g)}}if(4&l&&null!=(a=e.stateNode)){var u=e.memoizedProps,o=null!==r?r.memoizedProps:u,i=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===i&&"radio"===u.type&&null!=u.name&&Z(a,u),be(i,o);var c=be(i,u);for(o=0;o<s.length;o+=2){var f=s[o],d=s[o+1];"style"===f?ge(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,c)}switch(i){case"input":J(a,u);break;case"textarea":ue(a,u);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var m=u.value;null!=m?re(a,!!u.multiple,m,!1):p!==!!u.multiple&&(null!=u.defaultValue?re(a,!!u.multiple,u.defaultValue,!0):re(a,!!u.multiple,u.multiple?[]:"",!1))}a[Ml]=u}catch(g){Xs(e,e.return,g)}}break;case 6:if(Vi(n,e),Bi(e),4&l){if(null===e.stateNode)throw Error(t(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(g){Xs(e,e.return,g)}}break;case 3:if(Vi(n,e),Bi(e),4&l&&null!==r&&r.memoizedState.isDehydrated)try{Xn(n.containerInfo)}catch(g){Xs(e,e.return,g)}break;case 4:Vi(n,e),Bi(e);break;case 13:Vi(n,e),Bi(e),8192&(a=e.child).flags&&(u=null!==a.memoizedState,a.stateNode.isHidden=u,!u||null!==a.alternate&&null!==a.alternate.memoizedState||(fs=Je())),4&l&&Ui(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?(bi=(c=bi)||f,Vi(n,e),bi=c):Vi(n,e),Bi(e),8192&l){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!=(1&e.mode))for(wi=e,f=e.child;null!==f;){for(d=wi=f;null!==wi;){switch(m=(p=wi).child,p.tag){case 0:case 11:case 14:case 15:zi(4,p,p.return);break;case 1:Si(p,p.return);var h=p.stateNode;if("function"==typeof h.componentWillUnmount){l=p,r=p.return;try{n=l,h.props=n.memoizedProps,h.state=n.memoizedState,h.componentWillUnmount()}catch(g){Xs(l,r,g)}}break;case 5:Si(p,p.return);break;case 22:if(null!==p.memoizedState){ji(d);continue}}null!==m?(m.return=p,wi=m):ji(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,c?"function"==typeof(u=a.style).setProperty?u.setProperty("display","none","important"):u.display="none":(i=d.stateNode,o=null!=(s=d.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null,i.style.display=he("display",o))}catch(g){Xs(e,e.return,g)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Xs(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vi(n,e),Bi(e),4&l&&Ui(e);break;case 21:break;default:Vi(n,e),Bi(e)}}function Bi(e){var n=e.flags;if(2&n){try{e:{for(var r=e.return;null!==r;){if(Li(r)){var l=r;break e}r=r.return}throw Error(t(160))}switch(l.tag){case 5:var a=l.stateNode;32&l.flags&&(de(a,""),l.flags&=-33),Fi(e,Ti(e),a);break;case 3:case 4:var u=l.stateNode.containerInfo;Mi(e,Ti(e),u);break;default:throw Error(t(161))}}catch(o){Xs(e,e.return,o)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function Hi(e,n,t){wi=e,Qi(e,n,t)}function Qi(e,n,t){for(var r=0!=(1&e.mode);null!==wi;){var l=wi,a=l.child;if(22===l.tag&&r){var u=null!==l.memoizedState||yi;if(!u){var o=l.alternate,i=null!==o&&null!==o.memoizedState||bi;o=yi;var s=bi;if(yi=u,(bi=i)&&!s)for(wi=l;null!==wi;)i=(u=wi).child,22===u.tag&&null!==u.memoizedState?$i(l):null!==i?(i.return=u,wi=i):$i(l);for(;null!==a;)wi=a,Qi(a,n,t),a=a.sibling;wi=l,yi=o,bi=s}Wi(e,n,t)}else 0!=(8772&l.subtreeFlags)&&null!==a?(a.return=l,wi=a):Wi(e,n,t)}}function Wi(e){for(;null!==wi;){var n=wi;if(0!=(8772&n.flags)){var r=n.alternate;try{if(0!=(8772&n.flags))switch(n.tag){case 0:case 11:case 15:bi||Ni(5,n);break;case 1:var l=n.stateNode;if(4&n.flags&&!bi)if(null===r)l.componentDidMount();else{var a=n.elementType===n.type?r.memoizedProps:Oa(n.type,r.memoizedProps);l.componentDidUpdate(a,r.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var u=n.updateQueue;null!==u&&lu(n,u,l);break;case 3:var o=n.updateQueue;if(null!==o){if(r=null,null!==n.child)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}lu(n,o,r)}break;case 5:var i=n.stateNode;if(null===r&&4&n.flags){r=i;var s=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break;case"img":s.src&&(r.src=s.src)}}break;case 6:case 4:case 12:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Xn(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bi||512&n.flags&&Pi(n)}catch(p){Xs(n,n.return,p)}}if(n===e){wi=null;break}if(null!==(r=n.sibling)){r.return=n.return,wi=r;break}wi=n.return}}function ji(e){for(;null!==wi;){var n=wi;if(n===e){wi=null;break}var t=n.sibling;if(null!==t){t.return=n.return,wi=t;break}wi=n.return}}function $i(e){for(;null!==wi;){var n=wi;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{Ni(4,n)}catch(i){Xs(n,t,i)}break;case 1:var r=n.stateNode;if("function"==typeof r.componentDidMount){var l=n.return;try{r.componentDidMount()}catch(i){Xs(n,l,i)}}var a=n.return;try{Pi(n)}catch(i){Xs(n,a,i)}break;case 5:var u=n.return;try{Pi(n)}catch(i){Xs(n,u,i)}}}catch(i){Xs(n,n.return,i)}if(n===e){wi=null;break}var o=n.sibling;if(null!==o){o.return=n.return,wi=o;break}wi=n.return}}var qi,Ki=Math.ceil,Yi=k.ReactCurrentDispatcher,Xi=k.ReactCurrentOwner,Gi=k.ReactCurrentBatchConfig,Zi=0,Ji=null,es=null,ns=0,ts=0,rs=Ql(0),ls=0,as=null,us=0,os=0,is=0,ss=null,cs=null,fs=0,ds=1/0,ps=null,ms=!1,hs=null,gs=null,vs=!1,ys=null,bs=0,ks=0,ws=null,Ss=-1,xs=0;function Es(){return 0!=(6&Zi)?Je():-1!==Ss?Ss:Ss=Je()}function Cs(e){return 0==(1&e.mode)?1:0!=(2&Zi)&&0!==ns?ns&-ns:null!==Da.transition?(0===xs&&(xs=wn()),xs):0!==(e=zn)?e:e=void 0===(e=window.event)?16:lt(e.type)}function zs(e,n,r,l){if(50<ks)throw ks=0,ws=null,Error(t(185));xn(e,r,l),0!=(2&Zi)&&e===Ji||(e===Ji&&(0==(2&Zi)&&(os|=r),4===ls&&Ms(e,ns)),Ns(e,l),1===r&&0===Zi&&0==(1&n.mode)&&(ds=Je()+500,la&&ia()))}function Ns(e,n){var t=e.callbackNode;bn(e,n);var r=vn(e,e===Ji?ns:0);if(0===r)null!==t&&Xe(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&Xe(t),1===n)0===e.tag?oa(Fs.bind(null,e)):ua(Fs.bind(null,e)),Cl(function(){0==(6&Zi)&&ia()}),t=null;else{switch(Nn(r)){case 1:t=nn;break;case 4:t=tn;break;case 16:t=rn;break;case 536870912:t=an;break;default:t=rn}t=nc(t,Ps.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function Ps(e,n){if(Ss=-1,xs=0,0!=(6&Zi))throw Error(t(327));var r=e.callbackNode;if(Ks()&&e.callbackNode!==r)return null;var l=vn(e,e===Ji?ns:0);if(0===l)return null;if(0!=(30&l)||0!=(l&e.expiredLanes)||n)n=Bs(e,l);else{n=l;var a=Zi;Zi|=2;var u=Vs();for(Ji===e&&ns===n||(ps=null,ds=Je()+500,Is(e,n));;)try{Qs();break}catch(i){Us(e,i)}Ba(),Yi.current=u,Zi=a,null!==es?n=0:(Ji=null,ns=0,n=ls)}if(0!==n){if(2===n&&(0!==(a=kn(e))&&(l=a,n=_s(e,a))),1===n)throw r=as,Is(e,0),Ms(e,l),Ns(e,Je()),r;if(6===n)Ms(e,l);else{if(a=e.current.alternate,0==(30&l)&&!Ts(a)&&(2===(n=Bs(e,l))&&(0!==(u=kn(e))&&(l=u,n=_s(e,u))),1===n))throw r=as,Is(e,0),Ms(e,l),Ns(e,Je()),r;switch(e.finishedWork=a,e.finishedLanes=l,n){case 0:case 1:throw Error(t(345));case 2:$s(e,cs,ps);break;case 3:if(Ms(e,l),(130023424&l)===l&&10<(n=fs+500-Je())){if(0!==vn(e,0))break;if(((a=e.suspendedLanes)&l)!==l){Es(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Sl($s.bind(null,e,cs,ps),n);break}$s(e,cs,ps);break;case 4:if(Ms(e,l),(4194240&l)===l)break;for(n=e.eventTimes,a=-1;0<l;){var o=31-cn(l);u=1<<o,(o=n[o])>a&&(a=o),l&=~u}if(l=a,10<(l=(120>(l=Je()-l)?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Ki(l/1960))-l)){e.timeoutHandle=Sl($s.bind(null,e,cs,ps),l);break}$s(e,cs,ps);break;case 5:$s(e,cs,ps);break;default:throw Error(t(329))}}}return Ns(e,Je()),e.callbackNode===r?Ps.bind(null,e):null}function _s(e,n){var t=ss;return e.current.memoizedState.isDehydrated&&(Is(e,n).flags|=256),2!==(e=Bs(e,n))&&(n=cs,cs=t,null!==n&&Ls(n)),e}function Ls(e){null===cs?cs=e:cs.push.apply(cs,e)}function Ts(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var l=t[r],a=l.getSnapshot;l=l.value;try{if(!Er(a(),l))return!1}catch(u){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ms(e,n){for(n&=~is,n&=~os,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-cn(n),r=1<<t;e[t]=-1,n&=~r}}function Fs(e){if(0!=(6&Zi))throw Error(t(327));Ks();var n=vn(e,0);if(0==(1&n))return Ns(e,Je()),null;var r=Bs(e,n);if(0!==e.tag&&2===r){var l=kn(e);0!==l&&(n=l,r=_s(e,l))}if(1===r)throw r=as,Is(e,0),Ms(e,n),Ns(e,Je()),r;if(6===r)throw Error(t(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,$s(e,cs,ps),Ns(e,Je()),null}function Rs(e,n){var t=Zi;Zi|=1;try{return e(n)}finally{0===(Zi=t)&&(ds=Je()+500,la&&ia())}}function Ds(e){null!==ys&&0===ys.tag&&0==(6&Zi)&&Ks();var n=Zi;Zi|=1;var t=Gi.transition,r=zn;try{if(Gi.transition=null,zn=1,e)return e()}finally{zn=r,Gi.transition=t,0==(6&(Zi=n))&&ia()}}function Os(){ts=rs.current,Wl(rs)}function Is(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,xl(t)),null!==es)for(t=es.return;null!==t;){var r=t;switch(wa(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Zl();break;case 3:Eu(),Wl(Kl),Wl(ql),Lu();break;case 5:zu(r);break;case 4:Eu();break;case 13:case 19:Wl(Nu);break;case 10:Ha(r.type._context);break;case 22:case 23:Os()}t=t.return}if(Ji=e,es=e=uc(e.current,null),ns=ts=n,ls=0,as=null,is=os=us=0,cs=ss=null,null!==$a){for(n=0;n<$a.length;n++)if(null!==(r=(t=$a[n]).interleaved)){t.interleaved=null;var l=r.next,a=t.pending;if(null!==a){var u=a.next;a.next=l,r.next=u}t.pending=r}$a=null}return e}function Us(e,n){for(;;){var r=es;try{if(Ba(),Tu.current=zo,Iu){for(var l=Ru.memoizedState;null!==l;){var a=l.queue;null!==a&&(a.pending=null),l=l.next}Iu=!1}if(Fu=0,Ou=Du=Ru=null,Uu=!1,Vu=0,Xi.current=null,null===r||null===r.return){ls=1,as=n,es=null;break}e:{var u=e,o=r.return,i=r,s=n;if(n=ns,i.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){var c=s,f=i,d=f.tag;if(0==(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Io(o);if(null!==m){m.flags&=-257,Uo(m,o,i,u,n),1&m.mode&&Oo(u,c,n),s=c;var h=(n=m).updateQueue;if(null===h){var g=new Set;g.add(s),n.updateQueue=g}else h.add(s);break e}if(0==(1&n)){Oo(u,c,n),As();break e}s=Error(t(426))}else if(Ea&&1&i.mode){var v=Io(o);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),Uo(v,o,i,u,n),Ra(Lo(s,i));break e}}u=s=Lo(s,i),4!==ls&&(ls=2),null===ss?ss=[u]:ss.push(u),u=o;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n,tu(u,Ro(u,s,n));break e;case 1:i=s;var y=u.type,b=u.stateNode;if(0==(128&u.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===gs||!gs.has(b)))){u.flags|=65536,n&=-n,u.lanes|=n,tu(u,Do(u,i,n));break e}}u=u.return}while(null!==u)}js(r)}catch(k){n=k,es===r&&null!==r&&(es=r=r.return);continue}break}}function Vs(){var e=Yi.current;return Yi.current=zo,null===e?zo:e}function As(){0!==ls&&3!==ls&&2!==ls||(ls=4),null===Ji||0==(268435455&us)&&0==(268435455&os)||Ms(Ji,ns)}function Bs(e,n){var r=Zi;Zi|=2;var l=Vs();for(Ji===e&&ns===n||(ps=null,Is(e,n));;)try{Hs();break}catch(a){Us(e,a)}if(Ba(),Zi=r,Yi.current=l,null!==es)throw Error(t(261));return Ji=null,ns=0,ls}function Hs(){for(;null!==es;)Ws(es)}function Qs(){for(;null!==es&&!Ge();)Ws(es)}function Ws(e){var n=qi(e.alternate,e,ts);e.memoizedProps=e.pendingProps,null===n?js(e):es=n,Xi.current=null}function js(e){var n=e;do{var t=n.alternate;if(e=n.return,0==(32768&n.flags)){if(null!==(t=gi(t,n,ts)))return void(es=t)}else{if(null!==(t=vi(t,n)))return t.flags&=32767,void(es=t);if(null===e)return ls=6,void(es=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(es=n);es=n=e}while(null!==n);0===ls&&(ls=5)}function $s(e,n,t){var r=zn,l=Gi.transition;try{Gi.transition=null,zn=1,qs(e,n,t,r)}finally{Gi.transition=l,zn=r}return null}function qs(e,n,r,l){do{Ks()}while(null!==ys);if(0!=(6&Zi))throw Error(t(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(t(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(En(e,u),e===Ji&&(es=Ji=null,ns=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||vs||(vs=!0,nc(rn,function(){return Ks(),null})),u=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||u){u=Gi.transition,Gi.transition=null;var o=zn;zn=1;var i=Zi;Zi|=4,Xi.current=null,Ci(e,r),Ai(r,e),Tr(kl),Zn=!!bl,kl=bl=null,e.current=r,Hi(r,e,a),Ze(),Zi=i,zn=o,Gi.transition=u}else e.current=r;if(vs&&(vs=!1,ys=e,bs=a),0===(u=e.pendingLanes)&&(gs=null),sn(r.stateNode,l),Ns(e,Je()),null!==n)for(l=e.onRecoverableError,r=0;r<n.length;r++)l((a=n[r]).value,{componentStack:a.stack,digest:a.digest});if(ms)throw ms=!1,e=hs,hs=null,e;return 0!=(1&bs)&&0!==e.tag&&Ks(),0!=(1&(u=e.pendingLanes))?e===ws?ks++:(ks=0,ws=e):ks=0,ia(),null}function Ks(){if(null!==ys){var e=Nn(bs),n=Gi.transition,r=zn;try{if(Gi.transition=null,zn=16>e?16:e,null===ys)var l=!1;else{if(e=ys,ys=null,bs=0,0!=(6&Zi))throw Error(t(331));var a=Zi;for(Zi|=4,wi=e.current;null!==wi;){var u=wi,o=u.child;if(0!=(16&wi.flags)){var i=u.deletions;if(null!==i){for(var s=0;s<i.length;s++){var c=i[s];for(wi=c;null!==wi;){var f=wi;switch(f.tag){case 0:case 11:case 15:zi(8,f,u)}var d=f.child;if(null!==d)d.return=f,wi=d;else for(;null!==wi;){var p=(f=wi).sibling,m=f.return;if(_i(f),f===c){wi=null;break}if(null!==p){p.return=m,wi=p;break}wi=m}}}var h=u.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}wi=u}}if(0!=(2064&u.subtreeFlags)&&null!==o)o.return=u,wi=o;else e:for(;null!==wi;){if(0!=(2048&(u=wi).flags))switch(u.tag){case 0:case 11:case 15:zi(9,u,u.return)}var y=u.sibling;if(null!==y){y.return=u.return,wi=y;break e}wi=u.return}}var b=e.current;for(wi=b;null!==wi;){var k=(o=wi).child;if(0!=(2064&o.subtreeFlags)&&null!==k)k.return=o,wi=k;else e:for(o=b;null!==wi;){if(0!=(2048&(i=wi).flags))try{switch(i.tag){case 0:case 11:case 15:Ni(9,i)}}catch(S){Xs(i,i.return,S)}if(i===o){wi=null;break e}var w=i.sibling;if(null!==w){w.return=i.return,wi=w;break e}wi=i.return}}if(Zi=a,ia(),on&&"function"==typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(un,e)}catch(S){}l=!0}return l}finally{zn=r,Gi.transition=n}}return!1}function Ys(e,n,t){e=eu(e,n=Ro(e,n=Lo(t,n),1),1),n=Es(),null!==e&&(xn(e,1,n),Ns(e,n))}function Xs(e,n,t){if(3===e.tag)Ys(e,e,t);else for(;null!==n;){if(3===n.tag){Ys(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===gs||!gs.has(r))){n=eu(n,e=Do(n,e=Lo(t,e),1),1),e=Es(),null!==n&&(xn(n,1,e),Ns(n,e));break}}n=n.return}}function Gs(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=Es(),e.pingedLanes|=e.suspendedLanes&t,Ji===e&&(ns&t)===t&&(4===ls||3===ls&&(130023424&ns)===ns&&500>Je()-fs?Is(e,0):is|=t),Ns(e,n)}function Zs(e,n){0===n&&(0==(1&e.mode)?n=1:(n=hn,0==(130023424&(hn<<=1))&&(hn=4194304)));var t=Es();null!==(e=Ya(e,n))&&(xn(e,n,t),Ns(e,t))}function Js(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Zs(e,t)}function ec(e,n){var r=0;switch(e.tag){case 13:var l=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(t(314))}null!==l&&l.delete(n),Zs(e,r)}function nc(e,n){return Ye(e,n)}function tc(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rc(e,n,t,r){return new tc(e,n,t,r)}function lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ac(e){if("function"==typeof e)return lc(e)?1:0;if(null!=e){if((e=e.$$typeof)===P)return 11;if(e===T)return 14}return 2}function uc(e,n){var t=e.alternate;return null===t?((t=rc(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function oc(e,n,r,l,a,u){var o=2;if(l=e,"function"==typeof e)lc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case x:return ic(r.children,a,u,n);case E:o=8,a|=8;break;case C:return(e=rc(12,r,n,2|a)).elementType=C,e.lanes=u,e;case _:return(e=rc(13,r,n,a)).elementType=_,e.lanes=u,e;case L:return(e=rc(19,r,n,a)).elementType=L,e.lanes=u,e;case F:return sc(r,a,u,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case z:o=10;break e;case N:o=9;break e;case P:o=11;break e;case T:o=14;break e;case M:o=16,l=null;break e}throw Error(t(130,null==e?e:typeof e,""))}return(n=rc(o,r,n,a)).elementType=e,n.type=l,n.lanes=u,n}function ic(e,n,t,r){return(e=rc(7,e,r,n)).lanes=t,e}function sc(e,n,t,r){return(e=rc(22,e,r,n)).elementType=F,e.lanes=t,e.stateNode={isHidden:!1},e}function cc(e,n,t){return(e=rc(6,e,null,n)).lanes=t,e}function fc(e,n,t){return(n=rc(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function dc(e,n,t,r,l){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sn(0),this.expirationTimes=Sn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function pc(e,n,t,r,l,a,u,o,i){return e=new dc(e,n,t,o,i),1===n?(n=1,!0===a&&(n|=8)):n=0,a=rc(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ga(a),e}function mc(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}function hc(e){if(!e)return $l;e:{if(Qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(t(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Gl(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(t(171))}if(1===e.tag){var r=e.type;if(Gl(r))return ea(e,r,n)}return n}function gc(e,n,t,r,l,a,u,o,i){return(e=pc(t,r,!0,e,l,a,u,o,i)).context=hc(null),t=e.current,(a=Ja(r=Es(),l=Cs(t))).callback=null!=n?n:null,eu(t,a,l),e.current.lanes=l,xn(e,l,r),Ns(e,r),e}function vc(e,n,t,r){var l=n.current,a=Es(),u=Cs(l);return t=hc(t),null===n.context?n.context=t:n.pendingContext=t,(n=Ja(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=eu(l,n,u))&&(zs(e,l,u,a),nu(e,l,u)),u}function yc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function bc(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function kc(e,n){bc(e,n),(e=e.alternate)&&bc(e,n)}function wc(){return null}qi=function(e,n,r){if(null!==e)if(e.memoizedProps!==n.pendingProps||Kl.current)Ao=!0;else{if(0==(e.lanes&r)&&0==(128&n.flags))return Ao=!1,pi(e,n,r);Ao=0!=(131072&e.flags)}else Ao=!1,Ea&&0!=(1048576&n.flags)&&ba(n,da,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;fi(e,n),e=n.pendingProps;var a=Xl(n,ql.current);Wa(n,r),a=Qu(null,n,l,e,a,r);var u=Wu();return n.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Gl(l)?(u=!0,na(n)):u=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ga(n),a.updater=ou,n.stateNode=a,a._reactInternals=n,fu(n,l,e,r),n=Yo(null,n,l,!0,u,r)):(n.tag=0,Ea&&u&&ka(n),Bo(null,n,a,r),n=n.child),n;case 16:l=n.elementType;e:{switch(fi(e,n),e=n.pendingProps,l=(a=l._init)(l._payload),n.type=l,a=n.tag=ac(l),e=Oa(l,e),a){case 0:n=qo(null,n,l,e,r);break e;case 1:n=Ko(null,n,l,e,r);break e;case 11:n=Ho(null,n,l,e,r);break e;case 14:n=Qo(null,n,l,Oa(l.type,e),r);break e}throw Error(t(306,l,""))}return n;case 0:return l=n.type,a=n.pendingProps,qo(e,n,l,a=n.elementType===l?a:Oa(l,a),r);case 1:return l=n.type,a=n.pendingProps,Ko(e,n,l,a=n.elementType===l?a:Oa(l,a),r);case 3:e:{if(Xo(n),null===e)throw Error(t(387));l=n.pendingProps,a=(u=n.memoizedState).element,Za(e,n),ru(n,l,null,r);var o=n.memoizedState;if(l=o.element,u.isDehydrated){if(u={element:l,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},n.updateQueue.baseState=u,n.memoizedState=u,256&n.flags){n=Go(e,n,l,r,a=Lo(Error(t(423)),n));break e}if(l!==a){n=Go(e,n,l,r,a=Lo(Error(t(424)),n));break e}for(xa=Pl(n.stateNode.containerInfo.firstChild),Sa=n,Ea=!0,Ca=null,r=vu(n,null,l,r),n.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(Fa(),l===a){n=di(e,n,r);break e}Bo(e,n,l,r)}n=n.child}return n;case 5:return Cu(n),null===e&&_a(n),l=n.type,a=n.pendingProps,u=null!==e?e.memoizedProps:null,o=a.children,wl(l,a)?o=null:null!==u&&wl(l,u)&&(n.flags|=32),$o(e,n),Bo(e,n,o,r),n.child;case 6:return null===e&&_a(n),null;case 13:return li(e,n,r);case 4:return xu(n,n.stateNode.containerInfo),l=n.pendingProps,null===e?n.child=gu(n,null,l,r):Bo(e,n,l,r),n.child;case 11:return l=n.type,a=n.pendingProps,Ho(e,n,l,a=n.elementType===l?a:Oa(l,a),r);case 7:return Bo(e,n,n.pendingProps,r),n.child;case 8:case 12:return Bo(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(l=n.type._context,a=n.pendingProps,u=n.memoizedProps,o=a.value,jl(Ia,l._currentValue),l._currentValue=o,null!==u)if(Er(u.value,o)){if(u.children===a.children&&!Kl.current){n=di(e,n,r);break e}}else for(null!==(u=n.child)&&(u.return=n);null!==u;){var i=u.dependencies;if(null!==i){o=u.child;for(var s=i.firstContext;null!==s;){if(s.context===l){if(1===u.tag){(s=Ja(-1,r&-r)).tag=2;var c=u.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?s.next=s:(s.next=f.next,f.next=s),c.pending=s}}u.lanes|=r,null!==(s=u.alternate)&&(s.lanes|=r),Qa(u.return,r,n),i.lanes|=r;break}s=s.next}}else if(10===u.tag)o=u.type===n.type?null:u.child;else if(18===u.tag){if(null===(o=u.return))throw Error(t(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),Qa(o,r,n),o=u.sibling}else o=u.child;if(null!==o)o.return=u;else for(o=u;null!==o;){if(o===n){o=null;break}if(null!==(u=o.sibling)){u.return=o.return,o=u;break}o=o.return}u=o}Bo(e,n,a.children,r),n=n.child}return n;case 9:return a=n.type,l=n.pendingProps.children,Wa(n,r),l=l(a=ja(a)),n.flags|=1,Bo(e,n,l,r),n.child;case 14:return a=Oa(l=n.type,n.pendingProps),Qo(e,n,l,a=Oa(l.type,a),r);case 15:return Wo(e,n,n.type,n.pendingProps,r);case 17:return l=n.type,a=n.pendingProps,a=n.elementType===l?a:Oa(l,a),fi(e,n),n.tag=1,Gl(l)?(e=!0,na(n)):e=!1,Wa(n,r),su(n,l,a),fu(n,l,a,r),Yo(null,n,l,!0,e,r);case 19:return ci(e,n,r);case 22:return jo(e,n,r)}throw Error(t(156,n.tag))};var Sc="function"==typeof reportError?reportError:function(e){console.error(e)};function xc(e){this._internalRoot=e}function Ec(e){this._internalRoot=e}function Cc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Nc(){}function Pc(e,n,t,r,l){if(l){if("function"==typeof r){var a=r;r=function(){var e=yc(u);a.call(e)}}var u=gc(n,r,e,0,null,!1,!1,"",Nc);return e._reactRootContainer=u,e[Fl]=u.current,ol(8===e.nodeType?e.parentNode:e),Ds(),u}for(;l=e.lastChild;)e.removeChild(l);if("function"==typeof r){var o=r;r=function(){var e=yc(i);o.call(e)}}var i=pc(e,0,!1,null,null,!1,!1,"",Nc);return e._reactRootContainer=i,e[Fl]=i.current,ol(8===e.nodeType?e.parentNode:e),Ds(function(){vc(n,i,t,r)}),i}function _c(e,n,t,r,l){var a=t._reactRootContainer;if(a){var u=a;if("function"==typeof l){var o=l;l=function(){var e=yc(u);o.call(e)}}vc(n,u,e,l)}else u=Pc(t,n,e,l,r);return yc(u)}Ec.prototype.render=xc.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(t(409));vc(e,n,null,null)},Ec.prototype.unmount=xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;Ds(function(){vc(null,e,null,null)}),n[Fl]=null}},Ec.prototype.unstable_scheduleHydration=function(e){if(e){var n=Tn();e={blockedOn:null,target:e,priority:n};for(var t=0;t<An.length&&0!==n&&n<An[t].priority;t++);An.splice(t,0,e),0===t&&jn(e)}},Pn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=gn(n.pendingLanes);0!==t&&(Cn(n,1|t),Ns(n,Je()),0==(6&Zi)&&(ds=Je()+500,ia()))}break;case 13:Ds(function(){var n=Ya(e,1);if(null!==n){var t=Es();zs(n,e,1,t)}}),kc(e,1)}},_n=function(e){if(13===e.tag){var n=Ya(e,134217728);if(null!==n)zs(n,e,134217728,Es());kc(e,134217728)}},Ln=function(e){if(13===e.tag){var n=Cs(e),t=Ya(e,n);if(null!==t)zs(t,e,n,Es());kc(e,n)}},Tn=function(){return zn},Mn=function(e,n){var t=zn;try{return zn=e,n()}finally{zn=t}},Se=function(e,n,r){switch(n){case"input":if(J(e,r),n=r.name,"radio"===r.type&&null!=n){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==e&&l.form===e.form){var a=Al(l);if(!a)throw Error(t(90));K(l),J(l,a)}}}break;case"textarea":ue(e,r);break;case"select":null!=(n=r.value)&&re(e,!!r.multiple,n,!1)}},Pe=Rs,_e=Ds;var Lc={usingClientEntryPoint:!1,Events:[Ul,Vl,Al,ze,Ne,Rs]},Tc={findFiberByHostInstance:Il,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mc={bundleType:Tc.bundleType,version:Tc.version,rendererPackageName:Tc.rendererPackageName,rendererConfig:Tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:Tc.findFiberByHostInstance||wc,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{un=Fc.inject(Mc),on=Fc}catch(Rc){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lc,exports.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Cc(n))throw Error(t(200));return mc(e,n,null,r)},exports.createRoot=function(e,n){if(!Cc(e))throw Error(t(299));var r=!1,l="",a=Sc;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(l=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=pc(e,1,!1,null,null,r,!1,l,a),e[Fl]=n.current,ol(8===e.nodeType?e.parentNode:e),new xc(n)},exports.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"==typeof e.render)throw Error(t(188));throw e=Object.keys(e).join(","),Error(t(268,e))}return e=null===(e=qe(n))?null:e.stateNode},exports.flushSync=function(e){return Ds(e)},exports.hydrate=function(e,n,r){if(!zc(n))throw Error(t(200));return _c(null,e,n,!0,r)},exports.hydrateRoot=function(e,n,r){if(!Cc(e))throw Error(t(405));var l=null!=r&&r.hydratedSources||null,a=!1,u="",o=Sc;if(null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(u=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),n=gc(n,null,e,1,null!=r?r:null,a,!1,u,o),e[Fl]=n.current,ol(e),l)for(e=0;e<l.length;e++)a=(a=(r=l[e])._getVersion)(r._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[r,a]:n.mutableSourceEagerHydrationData.push(r,a);return new Ec(n)},exports.render=function(e,n,r){if(!zc(n))throw Error(t(200));return _c(null,e,n,!1,r)},exports.unmountComponentAtNode=function(e){if(!zc(e))throw Error(t(40));return!!e._reactRootContainer&&(Ds(function(){_c(null,null,e,!1,function(){e._reactRootContainer=null,e[Fl]=null})}),!0)},exports.unstable_batchedUpdates=Rs,exports.unstable_renderSubtreeIntoContainer=function(e,n,r,l){if(!zc(r))throw Error(t(200));if(null==e||void 0===e._reactInternals)throw Error(t(38));return _c(e,n,r,!1,l)},exports.version="18.2.0-next-9e3b772b8-20220608";
},{"react":"n8MK","scheduler":"MDSO"}],"NKHc":[function(require,module,exports) {
"use strict";function _(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(O){console.error(O)}}}_(),module.exports=require("./cjs/react-dom.production.min.js");
},{"./cjs/react-dom.production.min.js":"i17t"}],"NdAl":[function(require,module,exports) {
"use strict";var t,e=require("react-dom");exports.createRoot=e.createRoot,exports.hydrateRoot=e.hydrateRoot;
},{"react-dom":"NKHc"}],"Shhf":[function(require,module,exports) {
"use strict";function e(){return(e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.UNSAFE_convertRoutesToDataRoutes=y,exports.UNSAFE_getPathContributingMatches=B,exports.UNSAFE_invariant=i,exports.UNSAFE_warning=s,exports.createBrowserHistory=o,exports.createHashHistory=n,exports.createMemoryHistory=a,exports.createPath=u,exports.createRouter=ve,exports.createStaticHandler=ge,exports.generatePath=U,exports.getStaticContextFromError=be,exports.getToPathname=q,exports.isDeferredData=$e,exports.isRouteErrorResponse=re,exports.matchPath=_,exports.matchRoutes=g,exports.parsePath=h,exports.resolvePath=F,exports.resolveTo=N,exports.stripBasename=I,exports.redirect=exports.normalizePathname=exports.json=exports.joinPaths=exports.defer=exports.UNSAFE_DeferredData=exports.UNSAFE_DEFERRED_SYMBOL=exports.IDLE_NAVIGATION=exports.IDLE_FETCHER=exports.IDLE_BLOCKER=exports.ErrorResponse=exports.Action=exports.AbortedDeferredError=void 0,exports.Action=t,function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(exports.Action=t={}));const r="popstate";function a(e){void 0===e&&(e={});let r,{initialEntries:a=["/"],initialIndex:o,v5Compat:n=!1}=e;r=a.map((e,t)=>m(e,"string"==typeof e?null:e.state,0===t?"default":void 0));let i=f(null==o?r.length-1:o),l=t.Pop,c=null;function f(e){return Math.min(Math.max(e,0),r.length-1)}function p(){return r[i]}function m(e,t,a){void 0===t&&(t=null);let o=d(r?p().pathname:"/",e,t,a);return s("/"===o.pathname.charAt(0),"relative pathnames are not supported in memory history: "+JSON.stringify(e)),o}function v(e){return"string"==typeof e?e:u(e)}return{get index(){return i},get action(){return l},get location(){return p()},createHref:v,createURL:e=>new URL(v(e),"http://localhost"),encodeLocation(e){let t="string"==typeof e?h(e):e;return{pathname:t.pathname||"",search:t.search||"",hash:t.hash||""}},push(e,a){l=t.Push;let o=m(e,a);i+=1,r.splice(i,r.length,o),n&&c&&c({action:l,location:o,delta:1})},replace(e,a){l=t.Replace;let o=m(e,a);r[i]=o,n&&c&&c({action:l,location:o,delta:0})},go(e){l=t.Pop;let a=f(i+e),o=r[a];i=a,c&&c({action:l,location:o,delta:e})},listen:e=>(c=e,()=>{c=null})}}function o(e){return void 0===e&&(e={}),f(function(e,t){let{pathname:r,search:a,hash:o}=e.location;return d("",{pathname:r,search:a,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:u(t)},null,e)}function n(e){return void 0===e&&(e={}),f(function(e,t){let{pathname:r="/",search:a="",hash:o=""}=h(e.location.hash.substr(1));return d("",{pathname:r,search:a,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),a="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");a=-1===r?t:t.slice(0,r)}return a+"#"+("string"==typeof t?t:u(t))},function(e,t){s("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},e)}function i(e,t){if(!1===e||null==e)throw new Error(t)}function s(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function l(){return Math.random().toString(36).substr(2,8)}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function d(t,r,a,o){return void 0===a&&(a=null),e({pathname:"string"==typeof t?t:t.pathname,search:"",hash:""},"string"==typeof r?h(r):r,{state:a,key:r&&r.key||o||l()})}function u(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function h(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function f(a,o,n,s){void 0===s&&(s={});let{window:l=document.defaultView,v5Compat:h=!1}=s,f=l.history,p=t.Pop,m=null,v=y();function y(){return(f.state||{idx:null}).idx}function g(){p=t.Pop;let e=y(),r=null==e?null:e-v;v=e,m&&m({action:p,location:w.location,delta:r})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,r="string"==typeof e?e:u(e);return i(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==v&&(v=0,f.replaceState(e({},f.state,{idx:v}),""));let w={get action(){return p},get location(){return a(l,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(r,g),m=e,()=>{l.removeEventListener(r,g),m=null}},createHref:e=>o(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,r){p=t.Push;let a=d(w.location,e,r);n&&n(a,e);let o=c(a,v=y()+1),i=w.createHref(a);try{f.pushState(o,"",i)}catch(s){l.location.assign(i)}h&&m&&m({action:p,location:w.location,delta:1})},replace:function(e,r){p=t.Replace;let a=d(w.location,e,r);n&&n(a,e);let o=c(a,v=y()),i=w.createHref(a);f.replaceState(o,"",i),h&&m&&m({action:p,location:w.location,delta:0})},go:e=>f.go(e)};return w}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));const m=new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e){return!0===e.index}function y(t,r,a,o){return void 0===a&&(a=[]),void 0===o&&(o={}),t.map((t,n)=>{let s=[...a,n],l="string"==typeof t.id?t.id:s.join("-");if(i(!0!==t.index||!t.children,"Cannot specify children on an index route"),i(!o[l],'Found a route id collision on id "'+l+"\".  Route id's must be globally unique within Data Router usages"),v(t)){let a=e({},t,r(t),{id:l});return o[l]=a,a}{let a=e({},t,r(t),{id:l,children:void 0});return o[l]=a,t.children&&(a.children=y(t.children,r,s,o)),a}})}function g(e,t,r){void 0===r&&(r="/");let a=I(("string"==typeof t?h(t):t).pathname||"/",r);if(null==a)return null;let o=b(e);D(o);let n=null;for(let i=0;null==n&&i<o.length;++i)n=C(o[i],O(a));return n}function b(e,t,r,a){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a="");let o=(e,o,n)=>{let s={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};s.relativePath.startsWith("/")&&(i(s.relativePath.startsWith(a),'Absolute route path "'+s.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(a.length));let l=$([a,s.relativePath]),c=r.concat(s);e.children&&e.children.length>0&&(i(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),b(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:M(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let a of w(e.path))o(e,t,a);else o(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[r,...a]=t,o=r.endsWith("?"),n=r.replace(/\?$/,"");if(0===a.length)return o?[n,""]:[n];let i=w(a.join("/")),s=[];return s.push(...i.map(e=>""===e?n:[n,e].join("/"))),o&&s.push(...i),s.map(t=>e.startsWith("/")&&""===t?"/":t)}function D(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:k(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}const E=/^:\w+$/,R=3,x=2,A=1,P=10,S=-2,L=e=>"*"===e;function M(e,t){let r=e.split("/"),a=r.length;return r.some(L)&&(a+=S),t&&(a+=x),r.filter(e=>!L(e)).reduce((e,t)=>e+(E.test(t)?R:""===t?A:P),a)}function k(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}function C(e,t){let{routesMeta:r}=e,a={},o="/",n=[];for(let i=0;i<r.length;++i){let e=r[i],s=i===r.length-1,l="/"===o?t:t.slice(o.length)||"/",c=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(a,c.params);let d=e.route;n.push({params:a,pathname:$([o,c.pathname]),pathnameBase:W($([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=$([o,c.pathnameBase]))}return n}function U(e,t){void 0===t&&(t={});let r=e;return r.endsWith("*")&&"*"!==r&&!r.endsWith("/*")&&(s(!1,'Route path "'+r+'" will be treated as if it were "'+r.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+r.replace(/\*$/,"/*")+'".'),r=r.replace(/\*$/,"/*")),(r.startsWith("/")?"/":"")+r.split(/\/+/).map((e,r,a)=>{if(r===a.length-1&&"*"===e){return t["*"]}const o=e.match(/^:(\w+)(\??)$/);if(o){const[,e,r]=o;let a=t[e];return"?"===r?null==a?"":a:(null==a&&i(!1,'Missing ":'+e+'" param'),a)}return e.replace(/\?$/g,"")}).filter(e=>!!e).join("/")}function _(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=j(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let n=o[0],i=n.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:a.reduce((e,t,r)=>{if("*"===t){let e=s[r]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=T(s[r]||"",t),e},{}),pathname:n,pathnameBase:i,pattern:e}}function j(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0),s("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(e,t)=>(a.push(t),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),a]}function O(e){try{return decodeURI(e)}catch(t){return s(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function T(e,t){try{return decodeURIComponent(e)}catch(r){return s(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&"/"!==a?null:e.slice(r)||"/"}function F(e,t){void 0===t&&(t="/");let{pathname:r,search:a="",hash:o=""}="string"==typeof e?h(e):e;return{pathname:r?r.startsWith("/")?r:z(r,t):t,search:K(a),hash:Y(o)}}function z(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function H(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function B(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function N(t,r,a,o){let n;void 0===o&&(o=!1),"string"==typeof t?n=h(t):(i(!(n=e({},t)).pathname||!n.pathname.includes("?"),H("?","pathname","search",n)),i(!n.pathname||!n.pathname.includes("#"),H("#","pathname","hash",n)),i(!n.search||!n.search.includes("#"),H("#","search","hash",n)));let s,l=""===t||""===n.pathname,c=l?"/":n.pathname;if(o||null==c)s=a;else{let e=r.length-1;if(c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}s=e>=0?r[e]:"/"}let d=F(n,s),u=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&a.endsWith("/");return d.pathname.endsWith("/")||!u&&!f||(d.pathname+="/"),d}function q(e){return""===e||""===e.pathname?"/":"string"==typeof e?h(e).pathname:e.pathname}const $=e=>e.join("/").replace(/\/\/+/g,"/");exports.joinPaths=$;const W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");exports.normalizePathname=W;const K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Y=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"",J=function(t,r){void 0===r&&(r={});let a="number"==typeof r?{status:r}:r,o=new Headers(a.headers);return o.has("Content-Type")||o.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),e({},a,{headers:o}))};exports.json=J;class V extends Error{}exports.AbortedDeferredError=V;class G{constructor(e,t){let r;this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],i(e&&"object"==typeof e&&!Array.isArray(e),"defer() only accepts plain objects"),this.abortPromise=new Promise((e,t)=>r=t),this.controller=new AbortController;let a=()=>r(new V("Deferred data aborted"));this.unlistenAbortSignal=(()=>this.controller.signal.removeEventListener("abort",a)),this.controller.signal.addEventListener("abort",a),this.data=Object.entries(e).reduce((e,t)=>{let[r,a]=t;return Object.assign(e,{[r]:this.trackPromise(r,a)})},{}),this.done&&this.unlistenAbortSignal(),this.init=t}trackPromise(e,t){if(!(t instanceof Promise))return t;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([t,this.abortPromise]).then(t=>this.onSettle(r,e,null,t),t=>this.onSettle(r,e,t));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,t,r,a){return this.controller.signal.aborted&&r instanceof V?(this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r)):(this.pendingKeysSet.delete(t),this.done&&this.unlistenAbortSignal(),r?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,t),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>a}),this.emit(!1,t),a))}emit(e,t){this.subscribers.forEach(r=>r(e,t))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,t)=>this.pendingKeysSet.delete(t)),this.emit(!0)}async resolveData(e){let t=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),t=await new Promise(t=>{this.subscribe(a=>{e.removeEventListener("abort",r),(a||this.done)&&t(a)})})}return t}get done(){return 0===this.pendingKeysSet.size}get unwrappedData(){return i(null!==this.data&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,t)=>{let[r,a]=t;return Object.assign(e,{[r]:Q(a)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function X(e){return e instanceof Promise&&!0===e._tracked}function Q(e){if(!X(e))return e;if(e._error)throw e._error;return e._data}exports.UNSAFE_DeferredData=G;const Z=function(e,t){return void 0===t&&(t={}),new G(e,"number"==typeof t?{status:t}:t)};exports.defer=Z;const ee=function(t,r){void 0===r&&(r=302);let a=r;"number"==typeof a?a={status:a}:void 0===a.status&&(a.status=302);let o=new Headers(a.headers);return o.set("Location",t),new Response(null,e({},a,{headers:o}))};exports.redirect=ee;class te{constructor(e,t,r,a){void 0===a&&(a=!1),this.status=e,this.statusText=t||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function re(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}exports.ErrorResponse=te;const ae=["post","put","patch","delete"],oe=new Set(ae),ne=["get",...ae],ie=new Set(ne),se=new Set([301,302,303,307,308]),le=new Set([307,308]),ce={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};exports.IDLE_NAVIGATION=ce;const de={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};exports.IDLE_FETCHER=de;const ue={state:"unblocked",proceed:void 0,reset:void 0,location:void 0};exports.IDLE_BLOCKER=ue;const he=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,pe=!fe,me=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)});function ve(r){let a;if(i(r.routes.length>0,"You must provide a non-empty routes array to createRouter"),r.mapRouteProperties)a=r.mapRouteProperties;else if(r.detectErrorBoundary){let e=r.detectErrorBoundary;a=(t=>({hasErrorBoundary:e(t)}))}else a=me;let o,n={},l=y(r.routes,a,void 0,n),c=r.basename||"/",u=e({v7_normalizeFormMethod:!1,v7_prependBasename:!1},r.future),h=null,f=new Set,m=null,v=null,b=null,w=null!=r.hydrationData,D=g(l,r.history.location,c),E=null;if(null==D){let e=Ie(404,{pathname:r.history.location.pathname}),{matches:t,route:a}=Te(l);D=t,E={[a.id]:e}}let R,x,A=!(D.some(e=>e.route.lazy)||D.some(e=>e.route.loader)&&null==r.hydrationData),P={historyAction:r.history.action,location:r.history.location,matches:D,initialized:A,navigation:ce,restoreScrollPosition:null==r.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||E,fetchers:new Map,blockers:new Map},S=t.Pop,L=!1,M=!1,k=!1,C=[],U=[],_=new Map,j=0,O=-1,T=new Map,F=new Set,z=new Map,H=new Map,B=new Map,N=!1;function q(t){P=e({},P,t),f.forEach(e=>e(P))}function $(a,n){var i,s;let c,d=null!=P.actionData&&null!=P.navigation.formMethod&&Ve(P.navigation.formMethod)&&"loading"===P.navigation.state&&!0!==(null==(i=a.state)?void 0:i._isRedirect);c=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:d?P.actionData:null;let u=n.loaderData?je(P.loaderData,n.loaderData,n.matches||[],n.errors):P.loaderData;for(let[e]of B)re(e);let h=!0===L||null!=P.navigation.formMethod&&Ve(P.navigation.formMethod)&&!0!==(null==(s=a.state)?void 0:s._isRedirect);o&&(l=o,o=void 0),q(e({},n,{actionData:c,loaderData:u,historyAction:S,location:a,initialized:!0,navigation:ce,revalidation:"idle",restoreScrollPosition:ie(a,n.matches||P.matches),preventScrollReset:h,blockers:new Map(P.blockers)})),M||S===t.Pop||(S===t.Push?r.history.push(a,a.state):S===t.Replace&&r.history.replace(a,a.state)),S=t.Pop,L=!1,M=!1,k=!1,C=[],U=[]}async function W(i,s,d){x&&x.abort(),x=null,S=i,M=!0===(d&&d.startUninterruptedRevalidation),function(e,t){if(m&&v&&b){let r=t.map(e=>Ze(e,P.loaderData)),a=v(e,r)||e.key;m[a]=b()}}(P.location,P.matches),L=!0===(d&&d.preventScrollReset);let u=o||l,h=d&&d.overrideNavigation,f=g(u,s,c);if(!f){let e=Ie(404,{pathname:s.pathname}),{matches:t,route:r}=Te(u);return ne(),void $(s,{matches:t,loaderData:{},errors:{[r.id]:e}})}if(P.initialized&&He(P.location,s)&&!(d&&d.submission&&Ve(d.submission.formMethod)))return void $(s,{matches:f});x=new AbortController;let y,w,D=ke(r.history,s,x.signal,d&&d.submission);if(d&&d.pendingError)w={[Oe(f).route.id]:d.pendingError};else if(d&&d.submission&&Ve(d.submission.formMethod)){let r=await async function(r,o,i,s,l){let d;V(),q({navigation:e({state:"submitting",location:o},i)});let u=et(s,o);if(u.route.action||u.route.lazy){if(d=await Me("action",r,u,s,n,a,c),r.signal.aborted)return{shortCircuited:!0}}else d={type:p.error,error:Ie(405,{method:r.method,pathname:o.pathname,routeId:u.route.id})};if(qe(d)){let e;return e=l&&null!=l.replace?l.replace:d.location===P.location.pathname+P.location.search,await Y(P,d,{submission:i,replace:e}),{shortCircuited:!0}}if(Ne(d)){let e=Oe(s,u.route.id);return!0!==(l&&l.replace)&&(S=t.Push),{pendingActionData:{},pendingActionError:{[e.route.id]:d.error}}}if(Be(d))throw Ie(400,{type:"defer-action"});return{pendingActionData:{[u.route.id]:d.data}}}(D,s,d.submission,f,{replace:d.replace});if(r.shortCircuited)return;y=r.pendingActionData,w=r.pendingActionError,h=e({state:"loading",location:s},d.submission),D=new Request(D.url,{signal:D.signal})}let{shortCircuited:E,loaderData:R,errors:A}=await async function(t,a,n,i,s,d,u,h,f){let p=i;if(!p){let t=e({state:"loading",location:a,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},s);p=t}let m=s||d?s||d:p.formMethod&&p.formAction&&p.formData&&p.formEncType?{formMethod:p.formMethod,formAction:p.formAction,formData:p.formData,formEncType:p.formEncType}:void 0,v=o||l,[y,g]=xe(r.history,P,n,m,a,k,C,U,z,v,c,h,f);if(ne(e=>!(n&&n.some(t=>t.route.id===e))||y&&y.some(t=>t.route.id===e)),0===y.length&&0===g.length){let t=ee();return $(a,e({matches:n,loaderData:{},errors:f||null},h?{actionData:h}:{},t?{fetchers:new Map(P.fetchers)}:{})),{shortCircuited:!0}}if(!M){g.forEach(e=>{let t=P.fetchers.get(e.key),r={state:"loading",data:t&&t.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};P.fetchers.set(e.key,r)});let t=h||P.actionData;q(e({navigation:p},t?0===Object.keys(t).length?{actionData:null}:{actionData:t}:{},g.length>0?{fetchers:new Map(P.fetchers)}:{}))}O=++j,g.forEach(e=>{e.controller&&_.set(e.key,e.controller)});let b=()=>g.forEach(e=>Q(e.key));x&&x.signal.addEventListener("abort",b);let{results:w,loaderResults:D,fetcherResults:E}=await J(P.matches,n,y,g,t);if(t.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",b);g.forEach(e=>_.delete(e.key));let R=Fe(w);if(R)return await Y(P,R,{replace:u}),{shortCircuited:!0};let{loaderData:A,errors:S}=_e(P,n,y,D,f,g,E,H);H.forEach((e,t)=>{e.subscribe(r=>{(r||e.done)&&H.delete(t)})});let L=ee(),T=te(O),I=L||T||g.length>0;return e({loaderData:A,errors:S},I?{fetchers:new Map(P.fetchers)}:{})}(D,s,f,h,d&&d.submission,d&&d.fetcherSubmission,d&&d.replace,y,w);E||(x=null,$(s,e({matches:f},y?{actionData:y}:{},{loaderData:R,errors:A})))}function K(e){return P.fetchers.get(e)||de}async function Y(a,o,n){var s;let{submission:l,replace:u,isFetchActionRedirect:h}=void 0===n?{}:n;o.revalidate&&(k=!0);let f=d(a.location,o.location,e({_isRedirect:!0},h?{_isFetchActionRedirect:!0}:{}));if(i(f,"Expected a location on the redirect navigation"),he.test(o.location)&&fe&&void 0!==(null==(s=window)?void 0:s.location)){let e=r.history.createURL(o.location),t=null==I(e.pathname,c);if(window.location.origin!==e.origin||t)return void(u?window.location.replace(o.location):window.location.assign(o.location))}x=null;let p=!0===u?t.Replace:t.Push,{formMethod:m,formAction:v,formEncType:y,formData:g}=a.navigation;!l&&m&&v&&g&&y&&(l={formMethod:m,formAction:v,formEncType:y,formData:g}),le.has(o.status)&&l&&Ve(l.formMethod)?await W(p,f,{submission:e({},l,{formAction:o.location}),preventScrollReset:L}):h?await W(p,f,{overrideNavigation:{state:"loading",location:f,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:l,preventScrollReset:L}):await W(p,f,{overrideNavigation:{state:"loading",location:f,formMethod:l?l.formMethod:void 0,formAction:l?l.formAction:void 0,formEncType:l?l.formEncType:void 0,formData:l?l.formData:void 0},preventScrollReset:L})}async function J(e,t,o,i,s){let l=await Promise.all([...o.map(e=>Me("loader",s,e,t,n,a,c)),...i.map(e=>{if(e.matches&&e.match&&e.controller)return Me("loader",ke(r.history,e.path,e.controller.signal),e.match,e.matches,n,a,c);return{type:p.error,error:Ie(404,{pathname:e.path})}})]),d=l.slice(0,o.length),u=l.slice(o.length);return await Promise.all([Ge(e,o,d,d.map(()=>s.signal),!1,P.loaderData),Ge(e,i.map(e=>e.match),u,i.map(e=>e.controller?e.controller.signal:null),!0)]),{results:l,loaderResults:d,fetcherResults:u}}function V(){k=!0,C.push(...ne()),z.forEach((e,t)=>{_.has(t)&&(U.push(t),Q(t))})}function G(e,t,r){let a=Oe(P.matches,t);X(e),q({errors:{[a.route.id]:r},fetchers:new Map(P.fetchers)})}function X(e){_.has(e)&&Q(e),z.delete(e),T.delete(e),F.delete(e),P.fetchers.delete(e)}function Q(e){let t=_.get(e);i(t,"Expected fetch controller: "+e),t.abort(),_.delete(e)}function Z(e){for(let t of e){let e={state:"idle",data:K(t).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};P.fetchers.set(t,e)}}function ee(){let e=[],t=!1;for(let r of F){let a=P.fetchers.get(r);i(a,"Expected fetcher: "+r),"loading"===a.state&&(F.delete(r),e.push(r),t=!0)}return Z(e),t}function te(e){let t=[];for(let[r,a]of T)if(a<e){let e=P.fetchers.get(r);i(e,"Expected fetcher: "+r),"loading"===e.state&&(Q(r),T.delete(r),t.push(r))}return Z(t),t.length>0}function re(e){P.blockers.delete(e),B.delete(e)}function ae(e,t){let r=P.blockers.get(e)||ue;i("unblocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"blocked"===t.state||"blocked"===r.state&&"proceeding"===t.state||"blocked"===r.state&&"unblocked"===t.state||"proceeding"===r.state&&"unblocked"===t.state,"Invalid blocker state transition: "+r.state+" -> "+t.state),P.blockers.set(e,t),q({blockers:new Map(P.blockers)})}function oe(e){let{currentLocation:t,nextLocation:r,historyAction:a}=e;if(0===B.size)return;B.size>1&&s(!1,"A router only supports one blocker at a time");let o=Array.from(B.entries()),[n,i]=o[o.length-1],l=P.blockers.get(n);return l&&"proceeding"===l.state?void 0:i({currentLocation:t,nextLocation:r,historyAction:a})?n:void 0}function ne(e){let t=[];return H.forEach((r,a)=>{e&&!e(a)||(r.cancel(),t.push(a),H.delete(a))}),t}function ie(e,t){if(m&&v&&b){let r=t.map(e=>Ze(e,P.loaderData)),a=v(e,r)||e.key,o=m[a];if("number"==typeof o)return o}return null}return R={get basename(){return c},get state(){return P},get routes(){return l},initialize:function(){return h=r.history.listen(e=>{let{action:t,location:a,delta:o}=e;if(N)return void(N=!1);s(0===B.size||null!=o,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let n=oe({currentLocation:P.location,nextLocation:a,historyAction:t});return n&&null!=o?(N=!0,r.history.go(-1*o),void ae(n,{state:"blocked",location:a,proceed(){ae(n,{state:"proceeding",proceed:void 0,reset:void 0,location:a}),r.history.go(o)},reset(){re(n),q({blockers:new Map(R.state.blockers)})}})):W(t,a)}),P.initialized||W(t.Pop,P.location),R},subscribe:function(e){return f.add(e),()=>f.delete(e)},enableScrollRestoration:function(e,t,r){if(m=e,b=t,v=r||(e=>e.key),!w&&P.navigation===ce){w=!0;let e=ie(P.location,P.matches);null!=e&&q({restoreScrollPosition:e})}return()=>{m=null,b=null,v=null}},navigate:async function a(o,n){if("number"==typeof o)return void r.history.go(o);let i=De(P.location,P.matches,c,u.v7_prependBasename,o,null==n?void 0:n.fromRouteId,null==n?void 0:n.relative),{path:s,submission:l,error:h}=Ee(u.v7_normalizeFormMethod,!1,i,n),f=P.location,p=d(P.location,s,n&&n.state);p=e({},p,r.history.encodeLocation(p));let m=n&&null!=n.replace?n.replace:void 0,v=t.Push;!0===m?v=t.Replace:!1===m||null!=l&&Ve(l.formMethod)&&l.formAction===P.location.pathname+P.location.search&&(v=t.Replace);let y=n&&"preventScrollReset"in n?!0===n.preventScrollReset:void 0,g=oe({currentLocation:f,nextLocation:p,historyAction:v});if(!g)return await W(v,p,{submission:l,pendingError:h,preventScrollReset:y,replace:n&&n.replace});ae(g,{state:"blocked",location:p,proceed(){ae(g,{state:"proceeding",proceed:void 0,reset:void 0,location:p}),a(o,n)},reset(){re(g),q({blockers:new Map(P.blockers)})}})},fetch:function(t,s,d,h){if(pe)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");_.has(t)&&Q(t);let f=o||l,p=De(P.location,P.matches,c,u.v7_prependBasename,d,s,null==h?void 0:h.relative),m=g(f,p,c);if(!m)return void G(t,s,Ie(404,{pathname:p}));let{path:v,submission:y}=Ee(u.v7_normalizeFormMethod,!0,p,h),b=et(m,v);L=!0===(h&&h.preventScrollReset),y&&Ve(y.formMethod)?async function(t,s,d,u,h,f){if(V(),z.delete(t),!u.route.action&&!u.route.lazy){let e=Ie(405,{method:f.formMethod,pathname:d,routeId:s});return void G(t,s,e)}let p=P.fetchers.get(t),m=e({state:"submitting"},f,{data:p&&p.data," _hasFetcherDoneAnything ":!0});P.fetchers.set(t,m),q({fetchers:new Map(P.fetchers)});let v=new AbortController,y=ke(r.history,d,v.signal,f);_.set(t,v);let b=await Me("action",y,u,h,n,a,c);if(y.signal.aborted)return void(_.get(t)===v&&_.delete(t));if(qe(b)){_.delete(t),F.add(t);let r=e({state:"loading"},f,{data:void 0," _hasFetcherDoneAnything ":!0});return P.fetchers.set(t,r),q({fetchers:new Map(P.fetchers)}),Y(P,b,{submission:f,isFetchActionRedirect:!0})}if(Ne(b))return void G(t,s,b.error);if(Be(b))throw Ie(400,{type:"defer-action"});let w=P.navigation.location||P.location,D=ke(r.history,w,v.signal),E=o||l,R="idle"!==P.navigation.state?g(E,P.navigation.location,c):P.matches;i(R,"Didn't find any matches after fetcher action");let A=++j;T.set(t,A);let L=e({state:"loading",data:b.data},f,{" _hasFetcherDoneAnything ":!0});P.fetchers.set(t,L);let[M,I]=xe(r.history,P,R,f,w,k,C,U,z,E,c,{[u.route.id]:b.data},void 0);I.filter(e=>e.key!==t).forEach(e=>{let t=e.key,r=P.fetchers.get(t),a={state:"loading",data:r&&r.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};P.fetchers.set(t,a),e.controller&&_.set(t,e.controller)}),q({fetchers:new Map(P.fetchers)});let B=()=>I.forEach(e=>Q(e.key));v.signal.addEventListener("abort",B);let{results:N,loaderResults:W,fetcherResults:K}=await J(P.matches,R,M,I,D);if(v.signal.aborted)return;v.signal.removeEventListener("abort",B),T.delete(t),_.delete(t),I.forEach(e=>_.delete(e.key));let X=Fe(N);if(X)return Y(P,X);let{loaderData:Z,errors:ee}=_e(P,P.matches,M,W,void 0,I,K,H),re={state:"idle",data:b.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};P.fetchers.set(t,re);let ae=te(A);"loading"===P.navigation.state&&A>O?(i(S,"Expected pending action"),x&&x.abort(),$(P.navigation.location,{matches:R,loaderData:Z,errors:ee,fetchers:new Map(P.fetchers)})):(q(e({errors:ee,loaderData:je(P.loaderData,Z,R,ee)},ae?{fetchers:new Map(P.fetchers)}:{})),k=!1)}(t,s,v,b,m,y):(z.set(t,{routeId:s,path:v}),async function(t,o,s,l,d,u){let h=P.fetchers.get(t),f=e({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},u,{data:h&&h.data," _hasFetcherDoneAnything ":!0});P.fetchers.set(t,f),q({fetchers:new Map(P.fetchers)});let p=new AbortController,m=ke(r.history,s,p.signal);_.set(t,p);let v=await Me("loader",m,l,d,n,a,c);if(Be(v)&&(v=await Xe(v,m.signal,!0)||v),_.get(t)===p&&_.delete(t),m.signal.aborted)return;if(qe(v))return F.add(t),void(await Y(P,v));if(Ne(v)){let e=Oe(P.matches,o);return P.fetchers.delete(t),void q({fetchers:new Map(P.fetchers),errors:{[e.route.id]:v.error}})}i(!Be(v),"Unhandled fetcher deferred data");let y={state:"idle",data:v.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};P.fetchers.set(t,y),q({fetchers:new Map(P.fetchers)})}(t,s,v,b,m,y))},revalidate:function(){V(),q({revalidation:"loading"}),"submitting"!==P.navigation.state&&("idle"!==P.navigation.state?W(S||P.historyAction,P.navigation.location,{overrideNavigation:P.navigation}):W(P.historyAction,P.location,{startUninterruptedRevalidation:!0}))},createHref:e=>r.history.createHref(e),encodeLocation:e=>r.history.encodeLocation(e),getFetcher:K,deleteFetcher:X,dispose:function(){h&&h(),f.clear(),x&&x.abort(),P.fetchers.forEach((e,t)=>X(t)),P.blockers.forEach((e,t)=>re(t))},getBlocker:function(e,t){let r=P.blockers.get(e)||ue;return B.get(e)!==t&&B.set(e,t),r},deleteBlocker:re,_internalFetchControllers:_,_internalActiveDeferreds:H,_internalSetRoutes:function(e){o=y(e,a,void 0,n={})}}}const ye=Symbol("deferred");function ge(t,r){i(t.length>0,"You must provide a non-empty routes array to createStaticHandler");let a,o={},n=(r?r.basename:null)||"/";if(null!=r&&r.mapRouteProperties)a=r.mapRouteProperties;else if(null!=r&&r.detectErrorBoundary){let e=r.detectErrorBoundary;a=(t=>({hasErrorBoundary:e(t)}))}else a=me;let s=y(t,a,void 0,o);async function l(t,r,s,l,d){i(t.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(Ve(t.method.toLowerCase())){return await async function(t,r,i,s,l){let d;if(i.route.action||i.route.lazy){if(d=await Me("action",t,i,r,o,a,n,!0,l,s),t.signal.aborted){let e=l?"queryRoute":"query";throw new Error(e+"() call aborted")}}else{let e=Ie(405,{method:t.method,pathname:new URL(t.url).pathname,routeId:i.route.id});if(l)throw e;d={type:p.error,error:e}}if(qe(d))throw new Response(null,{status:d.status,headers:{Location:d.location}});if(Be(d)){let e=Ie(400,{type:"defer-action"});if(l)throw e;d={type:p.error,error:e}}if(l){if(Ne(d))throw d.error;return{matches:[i],loaderData:{},actionData:{[i.route.id]:d.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(Ne(d)){let a=Oe(r,i.route.id),o=await c(t,r,s,void 0,{[a.route.id]:d.error});return e({},o,{statusCode:re(d.error)?d.error.status:500,actionData:null,actionHeaders:e({},d.headers?{[i.route.id]:d.headers}:{})})}let u=new Request(t.url,{headers:t.headers,redirect:t.redirect,signal:t.signal});return e({},await c(u,r,s),d.statusCode?{statusCode:d.statusCode}:{},{actionData:{[i.route.id]:d.data},actionHeaders:e({},d.headers?{[i.route.id]:d.headers}:{})})}(t,s,d||et(s,r),l,null!=d)}let i=await c(t,s,l,d);return We(i)?i:e({},i,{actionData:null,actionHeaders:{}})}catch(u){if(Ye(u)){if(u.type===p.error&&!Ke(u.response))throw u.response;return u.response}if(Ke(u))return u;throw u}}async function c(t,r,i,s,l){let c=null!=s;if(c&&(null==s||!s.route.loader)&&(null==s||!s.route.lazy))throw Ie(400,{method:t.method,pathname:new URL(t.url).pathname,routeId:null==s?void 0:s.route.id});let d=(s?[s]:Re(r,Object.keys(l||{})[0])).filter(e=>e.route.loader||e.route.lazy);if(0===d.length)return{matches:r,loaderData:r.reduce((e,t)=>Object.assign(e,{[t.route.id]:null}),{}),errors:l||null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let u=await Promise.all([...d.map(e=>Me("loader",t,e,r,o,a,n,!0,c,i))]);if(t.signal.aborted){throw new Error((c?"queryRoute":"query")+"() call aborted")}let h=new Map,f=Ue(r,d,u,l,h),p=new Set(d.map(e=>e.route.id));return r.forEach(e=>{p.has(e.route.id)||(f.loaderData[e.route.id]=null)}),e({},f,{matches:r,activeDeferreds:h.size>0?Object.fromEntries(h.entries()):null})}return{dataRoutes:s,query:async function(t,r){let{requestContext:a}=void 0===r?{}:r,o=new URL(t.url),i=t.method,c=d("",u(o),null,"default"),h=g(s,c,n);if(!Je(i)&&"HEAD"!==i){let e=Ie(405,{method:i}),{matches:t,route:r}=Te(s);return{basename:n,location:c,matches:t,loaderData:{},actionData:null,errors:{[r.id]:e},statusCode:e.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(!h){let e=Ie(404,{pathname:c.pathname}),{matches:t,route:r}=Te(s);return{basename:n,location:c,matches:t,loaderData:{},actionData:null,errors:{[r.id]:e},statusCode:e.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let f=await l(t,c,h,a);return We(f)?f:e({location:c,basename:n},f)},queryRoute:async function(e,t){let{routeId:r,requestContext:a}=void 0===t?{}:t,o=new URL(e.url),i=e.method,c=d("",u(o),null,"default"),h=g(s,c,n);if(!Je(i)&&"HEAD"!==i&&"OPTIONS"!==i)throw Ie(405,{method:i});if(!h)throw Ie(404,{pathname:c.pathname});let f=r?h.find(e=>e.route.id===r):et(h,c);if(r&&!f)throw Ie(403,{pathname:c.pathname,routeId:r});if(!f)throw Ie(404,{pathname:c.pathname});let p=await l(e,c,h,a,f);if(We(p))return p;let m=p.errors?Object.values(p.errors)[0]:void 0;if(void 0!==m)throw m;if(p.actionData)return Object.values(p.actionData)[0];if(p.loaderData){var v;let e=Object.values(p.loaderData)[0];return null!=(v=p.activeDeferreds)&&v[f.route.id]&&(e[ye]=p.activeDeferreds[f.route.id]),e}}}}function be(t,r,a){return e({},r,{statusCode:500,errors:{[r._deepestRenderedBoundaryId||t[0].id]:a}})}function we(e){return null!=e&&"formData"in e}function De(e,t,r,a,o,n,i){let s,l;if(null!=n&&"path"!==i){s=[];for(let e of t)if(s.push(e),e.route.id===n){l=e;break}}else s=t,l=t[t.length-1];let c=N(o||".",B(s).map(e=>e.pathnameBase),I(e.pathname,r)||e.pathname,"path"===i);return null==o&&(c.search=e.search,c.hash=e.hash),null!=o&&""!==o&&"."!==o||!l||!l.route.index||Qe(c.search)||(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a&&"/"!==r&&(c.pathname="/"===c.pathname?r:$([r,c.pathname])),u(c)}function Ee(e,t,r,a){if(!a||!we(a))return{path:r};if(a.formMethod&&!Je(a.formMethod))return{path:r,error:Ie(405,{method:a.formMethod})};let o;if(a.formData){let t=a.formMethod||"get";if(Ve((o={formMethod:e?t.toUpperCase():t.toLowerCase(),formAction:ze(r),formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:a.formData}).formMethod))return{path:r,submission:o}}let n=h(r),i=Ce(a.formData);return t&&n.search&&Qe(n.search)&&i.append("index",""),n.search="?"+i,{path:u(n),submission:o}}function Re(e,t){let r=e;if(t){let a=e.findIndex(e=>e.route.id===t);a>=0&&(r=e.slice(0,a))}return r}function xe(t,r,a,o,n,i,s,l,c,d,u,h,f){let p=f?Object.values(f)[0]:h?Object.values(h)[0]:void 0,m=t.createURL(r.location),v=t.createURL(n),y=f?Object.keys(f)[0]:void 0,b=Re(a,y).filter((t,a)=>{if(t.route.lazy)return!0;if(null==t.route.loader)return!1;if(Ae(r.loaderData,r.matches[a],t)||s.some(e=>e===t.route.id))return!0;let n=r.matches[a],l=t;return Se(t,e({currentUrl:m,currentParams:n.params,nextUrl:v,nextParams:l.params},o,{actionResult:p,defaultShouldRevalidate:i||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||Pe(n,l)}))}),w=[];return c.forEach((t,n)=>{if(!a.some(e=>e.route.id===t.routeId))return;let s=g(d,t.path,u);if(!s)return void w.push({key:n,routeId:t.routeId,path:t.path,matches:null,match:null,controller:null});let c=et(s,t.path);l.includes(n)?w.push({key:n,routeId:t.routeId,path:t.path,matches:s,match:c,controller:new AbortController}):Se(c,e({currentUrl:m,currentParams:r.matches[r.matches.length-1].params,nextUrl:v,nextParams:a[a.length-1].params},o,{actionResult:p,defaultShouldRevalidate:i}))&&w.push({key:n,routeId:t.routeId,path:t.path,matches:s,match:c,controller:new AbortController})}),[b,w]}function Ae(e,t,r){let a=!t||r.route.id!==t.route.id,o=void 0===e[r.route.id];return a||o}function Pe(e,t){let r=e.route.path;return e.pathname!==t.pathname||null!=r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Se(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if("boolean"==typeof r)return r}return t.defaultShouldRevalidate}async function Le(t,r,a){if(!t.lazy)return;let o=await t.lazy();if(!t.lazy)return;let n=a[t.id];i(n,"No route found in manifest");let l={};for(let e in o){let t=void 0!==n[e]&&"hasErrorBoundary"!==e;s(!t,'Route "'+n.id+'" has a static property "'+e+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+e+'" will be ignored.'),t||m.has(e)||(l[e]=o[e])}Object.assign(n,l),Object.assign(n,e({},r(n),{lazy:void 0}))}async function Me(e,t,r,a,o,n,s,l,c,d){let u,h,f;void 0===l&&(l=!1),void 0===c&&(c=!1);let m=e=>{let a,o=new Promise((e,t)=>a=t);return f=(()=>a()),t.signal.addEventListener("abort",f),Promise.race([e({request:t,params:r.params,context:d}),o])};try{let a=r.route[e];if(r.route.lazy)if(a){h=(await Promise.all([m(a),Le(r.route,n,o)]))[0]}else{if(await Le(r.route,n,o),!(a=r.route[e])){if("action"===e){let e=new URL(t.url),a=e.pathname+e.search;throw Ie(405,{method:t.method,pathname:a,routeId:r.route.id})}return{type:p.data,data:void 0}}h=await m(a)}else{if(!a){let e=new URL(t.url);throw Ie(404,{pathname:e.pathname+e.search})}h=await m(a)}i(void 0!==h,"You defined "+("action"===e?"an action":"a loader")+' for route "'+r.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(g){u=p.error,h=g}finally{f&&t.signal.removeEventListener("abort",f)}if(We(h)){let e,o=h.status;if(se.has(o)){let e=h.headers.get("Location");if(i(e,"Redirects returned/thrown from loaders/actions must have a Location header"),he.test(e)){if(!l){let r=new URL(t.url),a=e.startsWith("//")?new URL(r.protocol+e):new URL(e),o=null!=I(a.pathname,s);a.origin===r.origin&&o&&(e=a.pathname+a.search+a.hash)}}else e=De(new URL(t.url),a.slice(0,a.indexOf(r)+1),s,!0,e);if(l)throw h.headers.set("Location",e),h;return{type:p.redirect,status:o,location:e,revalidate:null!==h.headers.get("X-Remix-Revalidate")}}if(c)throw{type:u||p.data,response:h};let n=h.headers.get("Content-Type");return e=n&&/\bapplication\/json\b/.test(n)?await h.json():await h.text(),u===p.error?{type:u,error:new te(o,h.statusText,e),headers:h.headers}:{type:p.data,data:e,statusCode:h.status,headers:h.headers}}return u===p.error?{type:u,error:h}:$e(h)?{type:p.deferred,deferredData:h,statusCode:null==(v=h.init)?void 0:v.status,headers:(null==(y=h.init)?void 0:y.headers)&&new Headers(h.init.headers)}:{type:p.data,data:h};var v,y}function ke(e,t,r,a){let o=e.createURL(ze(t)).toString(),n={signal:r};if(a&&Ve(a.formMethod)){let{formMethod:e,formEncType:t,formData:r}=a;n.method=e.toUpperCase(),n.body="application/x-www-form-urlencoded"===t?Ce(r):r}return new Request(o,n)}function Ce(e){let t=new URLSearchParams;for(let[r,a]of e.entries())t.append(r,a instanceof File?a.name:a);return t}function Ue(e,t,r,a,o){let n,s={},l=null,c=!1,d={};return r.forEach((r,u)=>{let h=t[u].route.id;if(i(!qe(r),"Cannot handle redirect results in processLoaderData"),Ne(r)){let t=Oe(e,h),o=r.error;a&&(o=Object.values(a)[0],a=void 0),null==(l=l||{})[t.route.id]&&(l[t.route.id]=o),s[h]=void 0,c||(c=!0,n=re(r.error)?r.error.status:500),r.headers&&(d[h]=r.headers)}else Be(r)?(o.set(h,r.deferredData),s[h]=r.deferredData.data):s[h]=r.data,null==r.statusCode||200===r.statusCode||c||(n=r.statusCode),r.headers&&(d[h]=r.headers)}),a&&(l=a,s[Object.keys(a)[0]]=void 0),{loaderData:s,errors:l,statusCode:n||200,loaderHeaders:d}}function _e(t,r,a,o,n,s,l,c){let{loaderData:d,errors:u}=Ue(r,a,o,n,c);for(let h=0;h<s.length;h++){let{key:r,match:a,controller:o}=s[h];i(void 0!==l&&void 0!==l[h],"Did not find corresponding fetcher result");let n=l[h];if(!o||!o.signal.aborted)if(Ne(n)){let o=Oe(t.matches,null==a?void 0:a.route.id);u&&u[o.route.id]||(u=e({},u,{[o.route.id]:n.error})),t.fetchers.delete(r)}else if(qe(n))i(!1,"Unhandled fetcher revalidation redirect");else if(Be(n))i(!1,"Unhandled fetcher deferred data");else{let e={state:"idle",data:n.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};t.fetchers.set(r,e)}}return{loaderData:d,errors:u}}function je(t,r,a,o){let n=e({},r);for(let e of a){let a=e.route.id;if(r.hasOwnProperty(a)?void 0!==r[a]&&(n[a]=r[a]):void 0!==t[a]&&e.route.loader&&(n[a]=t[a]),o&&o.hasOwnProperty(a))break}return n}function Oe(e,t){return(t?e.slice(0,e.findIndex(e=>e.route.id===t)+1):[...e]).reverse().find(e=>!0===e.route.hasErrorBoundary)||e[0]}function Te(e){let t=e.find(e=>e.index||!e.path||"/"===e.path)||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ie(e,t){let{pathname:r,routeId:a,method:o,type:n}=void 0===t?{}:t,i="Unknown Server Error",s="Unknown @remix-run/router error";return 400===e?(i="Bad Request",o&&r&&a?s="You made a "+o+' request to "'+r+'" but did not provide a `loader` for route "'+a+'", so there is no way to handle the request.':"defer-action"===n&&(s="defer() is not supported in actions")):403===e?(i="Forbidden",s='Route "'+a+'" does not match URL "'+r+'"'):404===e?(i="Not Found",s='No route matches URL "'+r+'"'):405===e&&(i="Method Not Allowed",o&&r&&a?s="You made a "+o.toUpperCase()+' request to "'+r+'" but did not provide an `action` for route "'+a+'", so there is no way to handle the request.':o&&(s='Invalid request method "'+o.toUpperCase()+'"')),new te(e||500,i,new Error(s),!0)}function Fe(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(qe(r))return r}}function ze(t){return u(e({},"string"==typeof t?h(t):t,{hash:""}))}function He(e,t){return e.pathname===t.pathname&&e.search===t.search&&(""===e.hash?""!==t.hash:e.hash===t.hash||""!==t.hash)}function Be(e){return e.type===p.deferred}function Ne(e){return e.type===p.error}function qe(e){return(e&&e.type)===p.redirect}function $e(e){let t=e;return t&&"object"==typeof t&&"object"==typeof t.data&&"function"==typeof t.subscribe&&"function"==typeof t.cancel&&"function"==typeof t.resolveData}function We(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"object"==typeof e.headers&&void 0!==e.body}function Ke(e){if(!We(e))return!1;let t=e.status,r=e.headers.get("Location");return t>=300&&t<=399&&null!=r}function Ye(e){return e&&We(e.response)&&(e.type===p.data||p.error)}function Je(e){return ie.has(e.toLowerCase())}function Ve(e){return oe.has(e.toLowerCase())}async function Ge(e,t,r,a,o,n){for(let s=0;s<r.length;s++){let l=r[s],c=t[s];if(!c)continue;let d=e.find(e=>e.route.id===c.route.id),u=null!=d&&!Pe(d,c)&&void 0!==(n&&n[c.route.id]);if(Be(l)&&(o||u)){let e=a[s];i(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Xe(l,e,o).then(e=>{e&&(r[s]=e||r[s])})}}}async function Xe(e,t,r){if(void 0===r&&(r=!1),!(await e.deferredData.resolveData(t))){if(r)try{return{type:p.data,data:e.deferredData.unwrappedData}}catch(a){return{type:p.error,error:a}}return{type:p.data,data:e.deferredData.data}}}function Qe(e){return new URLSearchParams(e).getAll("index").some(e=>""===e)}function Ze(e,t){let{route:r,pathname:a,params:o}=e;return{id:r.id,pathname:a,params:o,data:t[r.id],handle:r.handle}}function et(e,t){let r="string"==typeof t?h(t).search:t.search;if(e[e.length-1].route.index&&Qe(r||""))return e[e.length-1];let a=B(e);return a[a.length-1]}exports.UNSAFE_DEFERRED_SYMBOL=ye;
},{}],"J2mM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Await=le,exports.MemoryRouter=ne,exports.Navigate=oe,exports.Outlet=ae,exports.Route=ie,exports.Router=ue,exports.RouterProvider=te,exports.Routes=se,exports.UNSAFE_mapRouteProperties=ve,exports.UNSAFE_useRouteId=T,exports.UNSAFE_useRoutesImpl=N,exports.createMemoryRouter=xe,exports.createRoutesFromElements=exports.createRoutesFromChildren=he,exports.renderMatches=fe,exports.unstable_useBlocker=X,exports.useActionData=V,exports.useAsyncError=K,exports.useAsyncValue=G,exports.useHref=d,exports.useInRouterContext=m,exports.useLoaderData=W,exports.useLocation=h,exports.useMatch=v,exports.useMatches=z,exports.useNavigate=E,exports.useNavigation=J,exports.useNavigationType=f,exports.useOutlet=P,exports.useOutletContext=C,exports.useParams=R,exports.useResolvedPath=U,exports.useRevalidator=H,exports.useRouteError=Y,exports.useRouteLoaderData=q,exports.useRoutes=S,Object.defineProperty(exports,"AbortedDeferredError",{enumerable:!0,get:function(){return t.AbortedDeferredError}}),Object.defineProperty(exports,"NavigationType",{enumerable:!0,get:function(){return t.Action}}),Object.defineProperty(exports,"createPath",{enumerable:!0,get:function(){return t.createPath}}),Object.defineProperty(exports,"defer",{enumerable:!0,get:function(){return t.defer}}),Object.defineProperty(exports,"generatePath",{enumerable:!0,get:function(){return t.generatePath}}),Object.defineProperty(exports,"isRouteErrorResponse",{enumerable:!0,get:function(){return t.isRouteErrorResponse}}),Object.defineProperty(exports,"json",{enumerable:!0,get:function(){return t.json}}),Object.defineProperty(exports,"matchPath",{enumerable:!0,get:function(){return t.matchPath}}),Object.defineProperty(exports,"matchRoutes",{enumerable:!0,get:function(){return t.matchRoutes}}),Object.defineProperty(exports,"parsePath",{enumerable:!0,get:function(){return t.parsePath}}),Object.defineProperty(exports,"redirect",{enumerable:!0,get:function(){return t.redirect}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return t.resolvePath}}),exports.UNSAFE_RouteContext=exports.UNSAFE_NavigationContext=exports.UNSAFE_LocationContext=exports.UNSAFE_DataRouterStateContext=exports.UNSAFE_DataRouterContext=void 0;var e=n(require("react")),t=require("@remix-run/router");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const a=e.createContext(null);exports.UNSAFE_DataRouterContext=a;const i=e.createContext(null);exports.UNSAFE_DataRouterStateContext=i;const u=e.createContext(null);const s=e.createContext(null);exports.UNSAFE_NavigationContext=s;const l=e.createContext(null);exports.UNSAFE_LocationContext=l;const c=e.createContext({outlet:null,matches:[],isDataRoute:!1});exports.UNSAFE_RouteContext=c;const p=e.createContext(null);function d(r,n){let{relative:o}=void 0===n?{}:n;m()||(0,t.UNSAFE_invariant)(!1);let{basename:a,navigator:i}=e.useContext(s),{hash:u,pathname:l,search:c}=U(r,{relative:o}),p=l;return"/"!==a&&(p="/"===l?a:(0,t.joinPaths)([a,l])),i.createHref({pathname:p,search:c,hash:u})}function m(){return null!=e.useContext(l)}function h(){return m()||(0,t.UNSAFE_invariant)(!1),e.useContext(l).location}function f(){return e.useContext(l).navigationType}function v(r){m()||(0,t.UNSAFE_invariant)(!1);let{pathname:n}=h();return e.useMemo(()=>(0,t.matchPath)(r,n),[n,r])}const x="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g(t){e.useContext(s).static||e.useLayoutEffect(t)}function E(){let{isDataRoute:t}=e.useContext(c);return t?Z():y()}function y(){m()||(0,t.UNSAFE_invariant)(!1);let r=e.useContext(a),{basename:n,navigator:o}=e.useContext(s),{matches:i}=e.useContext(c),{pathname:u}=h(),l=JSON.stringify((0,t.UNSAFE_getPathContributingMatches)(i).map(e=>e.pathnameBase)),p=e.useRef(!1);return g(()=>{p.current=!0}),e.useCallback(function(e,a){if(void 0===a&&(a={}),!p.current)return;if("number"==typeof e)return void o.go(e);let i=(0,t.resolveTo)(e,JSON.parse(l),u,"path"===a.relative);null==r&&"/"!==n&&(i.pathname="/"===i.pathname?n:(0,t.joinPaths)([n,i.pathname])),(a.replace?o.replace:o.push)(i,a.state,a)},[n,o,l,u,r])}const b=e.createContext(null);function C(){return e.useContext(b)}function P(t){let r=e.useContext(c).outlet;return r?e.createElement(b.Provider,{value:t},r):r}function R(){let{matches:t}=e.useContext(c),r=t[t.length-1];return r?r.params:{}}function U(r,n){let{relative:o}=void 0===n?{}:n,{matches:a}=e.useContext(c),{pathname:i}=h(),u=JSON.stringify((0,t.UNSAFE_getPathContributingMatches)(a).map(e=>e.pathnameBase));return e.useMemo(()=>(0,t.resolveTo)(r,JSON.parse(u),i,"path"===o),[r,u,i,o])}function S(e,t){return N(e,t)}function N(r,n,a){m()||(0,t.UNSAFE_invariant)(!1);let{navigator:i}=e.useContext(s),{matches:u}=e.useContext(c),p=u[u.length-1],d=p?p.params:{},f=(p&&p.pathname,p?p.pathnameBase:"/");p&&p.route;let v,x=h();if(n){var g;let e="string"==typeof n?(0,t.parsePath)(n):n;"/"===f||null!=(g=e.pathname)&&g.startsWith(f)||(0,t.UNSAFE_invariant)(!1),v=e}else v=x;let E=v.pathname||"/",y="/"===f?E:E.slice(f.length)||"/",b=(0,t.matchRoutes)(r,{pathname:y});let C=F(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:(0,t.joinPaths)([f,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?f:(0,t.joinPaths)([f,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),u,a);return n&&C?e.createElement(l.Provider,{value:{location:o({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:t.Action.Pop}},C):C}function _(){let r=Y(),n=(0,t.isRouteErrorResponse)(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),o=r instanceof Error?r.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),o?e.createElement("pre",{style:a},o):null,i)}const A=e.createElement(_,null);class O extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?e.createElement(c.Provider,{value:this.props.routeContext},e.createElement(p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function j(t){let{routeContext:r,match:n,children:o}=t,i=e.useContext(a);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),e.createElement(c.Provider,{value:r},o)}function F(r,n,o){var a;if(void 0===n&&(n=[]),void 0===o&&(o=null),null==r){var i;if(null==(i=o)||!i.errors)return null;r=o.matches}let u=r,s=null==(a=o)?void 0:a.errors;if(null!=s){let e=u.findIndex(e=>e.route.id&&(null==s?void 0:s[e.route.id]));e>=0||(0,t.UNSAFE_invariant)(!1),u=u.slice(0,Math.min(u.length,e+1))}return u.reduceRight((t,r,a)=>{let i=r.route.id?null==s?void 0:s[r.route.id]:null,l=null;o&&(l=r.route.errorElement||A);let c=n.concat(u.slice(0,a+1)),p=()=>{let n;return n=i?l:r.route.Component?e.createElement(r.route.Component,null):r.route.element?r.route.element:t,e.createElement(j,{match:r,routeContext:{outlet:t,matches:c,isDataRoute:null!=o},children:n})};return o&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?e.createElement(O,{location:o.location,revalidation:o.revalidation,component:l,error:i,children:p(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):p()},null)}var D,B;function k(e){return e+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}function M(r){let n=e.useContext(a);return n||(0,t.UNSAFE_invariant)(!1),n}function L(r){let n=e.useContext(i);return n||(0,t.UNSAFE_invariant)(!1),n}function w(r){let n=e.useContext(c);return n||(0,t.UNSAFE_invariant)(!1),n}function I(e){let r=w(e),n=r.matches[r.matches.length-1];return n.route.id||(0,t.UNSAFE_invariant)(!1),n.route.id}function T(){return I(B.UseRouteId)}function J(){return L(B.UseNavigation).navigation}function H(){let e=M(D.UseRevalidator),t=L(B.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function z(){let{matches:t,loaderData:r}=L(B.UseMatches);return e.useMemo(()=>t.map(e=>{let{pathname:t,params:n}=e;return{id:e.route.id,pathname:t,params:n,data:r[e.route.id],handle:e.route.handle}}),[t,r])}function W(){let e=L(B.UseLoaderData),t=I(B.UseLoaderData);if(!e.errors||null==e.errors[t])return e.loaderData[t];console.error("You cannot `useLoaderData` in an errorElement (routeId: "+t+")")}function q(e){return L(B.UseRouteLoaderData).loaderData[e]}function V(){let r=L(B.UseActionData);return e.useContext(c)||(0,t.UNSAFE_invariant)(!1),Object.values((null==r?void 0:r.actionData)||{})[0]}function Y(){var t;let r=e.useContext(p),n=L(B.UseRouteError),o=I(B.UseRouteError);return r||(null==(t=n.errors)?void 0:t[o])}function G(){let t=e.useContext(u);return null==t?void 0:t._data}function K(){let t=e.useContext(u);return null==t?void 0:t._error}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(D||(D={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(B||(B={}));let Q=0;function X(t){let{router:r}=M(D.UseBlocker),n=L(B.UseBlocker),[o]=e.useState(()=>String(++Q)),a=e.useCallback(e=>"function"==typeof t?!!t(e):!!t,[t]),i=r.getBlocker(o,a);return e.useEffect(()=>()=>r.deleteBlocker(o),[r,o]),n.blockers.get(o)||i}function Z(){let{router:t}=M(D.UseNavigateStable),r=I(B.UseNavigateStable),n=e.useRef(!1);return g(()=>{n.current=!0}),e.useCallback(function(e,a){void 0===a&&(a={}),n.current&&("number"==typeof e?t.navigate(e):t.navigate(e,o({fromRouteId:r},a)))},[t,r])}const $={};function ee(e,t,r){t||$[e]||($[e]=!0)}function te(t){let{fallbackElement:r,router:n}=t,[o,u]=e.useState(n.state);e.useLayoutEffect(()=>n.subscribe(u),[n,u]);let s=e.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})}),[n]),l=n.basename||"/",c=e.useMemo(()=>({router:n,navigator:s,static:!1,basename:l}),[n,s,l]);return e.createElement(e.Fragment,null,e.createElement(a.Provider,{value:c},e.createElement(i.Provider,{value:o},e.createElement(ue,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:s},n.state.initialized?e.createElement(re,{routes:n.routes,state:o}):r))),null)}function re(e){let{routes:t,state:r}=e;return N(t,void 0,r)}function ne(r){let{basename:n,children:o,initialEntries:a,initialIndex:i}=r,u=e.useRef();null==u.current&&(u.current=(0,t.createMemoryHistory)({initialEntries:a,initialIndex:i,v5Compat:!0}));let s=u.current,[l,c]=e.useState({action:s.action,location:s.location});return e.useLayoutEffect(()=>s.listen(c),[s]),e.createElement(ue,{basename:n,children:o,location:l.location,navigationType:l.action,navigator:s})}function oe(r){let{to:n,replace:o,state:a,relative:i}=r;m()||(0,t.UNSAFE_invariant)(!1);let{matches:u}=e.useContext(c),{pathname:s}=h(),l=E(),p=(0,t.resolveTo)(n,(0,t.UNSAFE_getPathContributingMatches)(u).map(e=>e.pathnameBase),s,"path"===i),d=JSON.stringify(p);return e.useEffect(()=>l(JSON.parse(d),{replace:o,state:a,relative:i}),[l,d,i,o,a]),null}function ae(e){return P(e.context)}function ie(e){(0,t.UNSAFE_invariant)(!1)}function ue(r){let{basename:n="/",children:o=null,location:a,navigationType:i=t.Action.Pop,navigator:u,static:c=!1}=r;m()&&(0,t.UNSAFE_invariant)(!1);let p=n.replace(/^\/*/,"/"),d=e.useMemo(()=>({basename:p,navigator:u,static:c}),[p,u,c]);"string"==typeof a&&(a=(0,t.parsePath)(a));let{pathname:h="/",search:f="",hash:v="",state:x=null,key:g="default"}=a,E=e.useMemo(()=>{let e=(0,t.stripBasename)(h,p);return null==e?null:{location:{pathname:e,search:f,hash:v,state:x,key:g},navigationType:i}},[p,h,f,v,x,g,i]);return null==E?null:e.createElement(s.Provider,{value:d},e.createElement(l.Provider,{children:o,value:E}))}function se(e){let{children:t,location:r}=e;return S(he(t),r)}function le(t){let{children:r,errorElement:n,resolve:o}=t;return e.createElement(de,{resolve:o,errorElement:n},e.createElement(me,null,r))}var ce;!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ce||(ce={}));const pe=new Promise(()=>{});class de extends e.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:r,errorElement:n,resolve:o}=this.props,a=null,i=ce.pending;if(o instanceof Promise)if(this.state.error){i=ce.error;let e=this.state.error;a=Promise.reject().catch(()=>{}),Object.defineProperty(a,"_tracked",{get:()=>!0}),Object.defineProperty(a,"_error",{get:()=>e})}else o._tracked?i=void 0!==(a=o)._error?ce.error:void 0!==a._data?ce.success:ce.pending:(i=ce.pending,Object.defineProperty(o,"_tracked",{get:()=>!0}),a=o.then(e=>Object.defineProperty(o,"_data",{get:()=>e}),e=>Object.defineProperty(o,"_error",{get:()=>e})));else i=ce.success,a=Promise.resolve(),Object.defineProperty(a,"_tracked",{get:()=>!0}),Object.defineProperty(a,"_data",{get:()=>o});if(i===ce.error&&a._error instanceof t.AbortedDeferredError)throw pe;if(i===ce.error&&!n)throw a._error;if(i===ce.error)return e.createElement(u.Provider,{value:a,children:n});if(i===ce.success)return e.createElement(u.Provider,{value:a,children:r});throw a}}function me(t){let{children:r}=t,n=G(),o="function"==typeof r?r(n):r;return e.createElement(e.Fragment,null,o)}function he(r,n){void 0===n&&(n=[]);let o=[];return e.Children.forEach(r,(r,a)=>{if(!e.isValidElement(r))return;let i=[...n,a];if(r.type===e.Fragment)return void o.push.apply(o,he(r.props.children,i));r.type!==ie&&(0,t.UNSAFE_invariant)(!1),r.props.index&&r.props.children&&(0,t.UNSAFE_invariant)(!1);let u={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:null!=r.props.ErrorBoundary||null!=r.props.errorElement,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=he(r.props.children,i)),o.push(u)}),o}function fe(e){return F(e)}function ve(t){let r={hasErrorBoundary:null!=t.ErrorBoundary||null!=t.errorElement};return t.Component&&Object.assign(r,{element:e.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(r,{errorElement:e.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),r}function xe(e,r){return(0,t.createRouter)({basename:null==r?void 0:r.basename,future:o({},null==r?void 0:r.future,{v7_prependBasename:!0}),history:(0,t.createMemoryHistory)({initialEntries:null==r?void 0:r.initialEntries,initialIndex:null==r?void 0:r.initialIndex}),hydrationData:null==r?void 0:r.hydrationData,routes:e,mapRouteProperties:ve}).initialize()}
},{"react":"n8MK","@remix-run/router":"Shhf"}],"UFqb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BrowserRouter=E,exports.HashRouter=O,exports.ScrollRestoration=L,exports.UNSAFE_useScrollRestoration=X,exports.createBrowserRouter=R,exports.createHashRouter=w,exports.createSearchParams=b,exports.unstable_HistoryRouter=j,exports.unstable_usePrompt=ee,exports.useBeforeUnload=Z,exports.useFetcher=Y,exports.useFetchers=J,exports.useFormAction=z,exports.useLinkClickHandler=B,exports.useSearchParams=H,exports.useSubmit=K,Object.defineProperty(exports,"AbortedDeferredError",{enumerable:!0,get:function(){return t.AbortedDeferredError}}),Object.defineProperty(exports,"Await",{enumerable:!0,get:function(){return t.Await}}),Object.defineProperty(exports,"MemoryRouter",{enumerable:!0,get:function(){return t.MemoryRouter}}),Object.defineProperty(exports,"Navigate",{enumerable:!0,get:function(){return t.Navigate}}),Object.defineProperty(exports,"NavigationType",{enumerable:!0,get:function(){return t.NavigationType}}),Object.defineProperty(exports,"Outlet",{enumerable:!0,get:function(){return t.Outlet}}),Object.defineProperty(exports,"Route",{enumerable:!0,get:function(){return t.Route}}),Object.defineProperty(exports,"Router",{enumerable:!0,get:function(){return t.Router}}),Object.defineProperty(exports,"RouterProvider",{enumerable:!0,get:function(){return t.RouterProvider}}),Object.defineProperty(exports,"Routes",{enumerable:!0,get:function(){return t.Routes}}),Object.defineProperty(exports,"UNSAFE_DataRouterContext",{enumerable:!0,get:function(){return t.UNSAFE_DataRouterContext}}),Object.defineProperty(exports,"UNSAFE_DataRouterStateContext",{enumerable:!0,get:function(){return t.UNSAFE_DataRouterStateContext}}),Object.defineProperty(exports,"UNSAFE_LocationContext",{enumerable:!0,get:function(){return t.UNSAFE_LocationContext}}),Object.defineProperty(exports,"UNSAFE_NavigationContext",{enumerable:!0,get:function(){return t.UNSAFE_NavigationContext}}),Object.defineProperty(exports,"UNSAFE_RouteContext",{enumerable:!0,get:function(){return t.UNSAFE_RouteContext}}),Object.defineProperty(exports,"UNSAFE_useRouteId",{enumerable:!0,get:function(){return t.UNSAFE_useRouteId}}),Object.defineProperty(exports,"createMemoryRouter",{enumerable:!0,get:function(){return t.createMemoryRouter}}),Object.defineProperty(exports,"createPath",{enumerable:!0,get:function(){return t.createPath}}),Object.defineProperty(exports,"createRoutesFromChildren",{enumerable:!0,get:function(){return t.createRoutesFromChildren}}),Object.defineProperty(exports,"createRoutesFromElements",{enumerable:!0,get:function(){return t.createRoutesFromElements}}),Object.defineProperty(exports,"defer",{enumerable:!0,get:function(){return t.defer}}),Object.defineProperty(exports,"generatePath",{enumerable:!0,get:function(){return t.generatePath}}),Object.defineProperty(exports,"isRouteErrorResponse",{enumerable:!0,get:function(){return t.isRouteErrorResponse}}),Object.defineProperty(exports,"json",{enumerable:!0,get:function(){return t.json}}),Object.defineProperty(exports,"matchPath",{enumerable:!0,get:function(){return t.matchPath}}),Object.defineProperty(exports,"matchRoutes",{enumerable:!0,get:function(){return t.matchRoutes}}),Object.defineProperty(exports,"parsePath",{enumerable:!0,get:function(){return t.parsePath}}),Object.defineProperty(exports,"redirect",{enumerable:!0,get:function(){return t.redirect}}),Object.defineProperty(exports,"renderMatches",{enumerable:!0,get:function(){return t.renderMatches}}),Object.defineProperty(exports,"resolvePath",{enumerable:!0,get:function(){return t.resolvePath}}),Object.defineProperty(exports,"unstable_useBlocker",{enumerable:!0,get:function(){return t.unstable_useBlocker}}),Object.defineProperty(exports,"useActionData",{enumerable:!0,get:function(){return t.useActionData}}),Object.defineProperty(exports,"useAsyncError",{enumerable:!0,get:function(){return t.useAsyncError}}),Object.defineProperty(exports,"useAsyncValue",{enumerable:!0,get:function(){return t.useAsyncValue}}),Object.defineProperty(exports,"useHref",{enumerable:!0,get:function(){return t.useHref}}),Object.defineProperty(exports,"useInRouterContext",{enumerable:!0,get:function(){return t.useInRouterContext}}),Object.defineProperty(exports,"useLoaderData",{enumerable:!0,get:function(){return t.useLoaderData}}),Object.defineProperty(exports,"useLocation",{enumerable:!0,get:function(){return t.useLocation}}),Object.defineProperty(exports,"useMatch",{enumerable:!0,get:function(){return t.useMatch}}),Object.defineProperty(exports,"useMatches",{enumerable:!0,get:function(){return t.useMatches}}),Object.defineProperty(exports,"useNavigate",{enumerable:!0,get:function(){return t.useNavigate}}),Object.defineProperty(exports,"useNavigation",{enumerable:!0,get:function(){return t.useNavigation}}),Object.defineProperty(exports,"useNavigationType",{enumerable:!0,get:function(){return t.useNavigationType}}),Object.defineProperty(exports,"useOutlet",{enumerable:!0,get:function(){return t.useOutlet}}),Object.defineProperty(exports,"useOutletContext",{enumerable:!0,get:function(){return t.useOutletContext}}),Object.defineProperty(exports,"useParams",{enumerable:!0,get:function(){return t.useParams}}),Object.defineProperty(exports,"useResolvedPath",{enumerable:!0,get:function(){return t.useResolvedPath}}),Object.defineProperty(exports,"useRevalidator",{enumerable:!0,get:function(){return t.useRevalidator}}),Object.defineProperty(exports,"useRouteError",{enumerable:!0,get:function(){return t.useRouteError}}),Object.defineProperty(exports,"useRouteLoaderData",{enumerable:!0,get:function(){return t.useRouteLoaderData}}),Object.defineProperty(exports,"useRoutes",{enumerable:!0,get:function(){return t.useRoutes}}),exports.NavLink=exports.Link=exports.Form=void 0;var e=o(require("react")),t=require("react-router"),r=require("@remix-run/router");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}const i="get",s="application/x-www-form-urlencoded";function c(e){return null!=e&&"string"==typeof e.tagName}function l(e){return c(e)&&"button"===e.tagName.toLowerCase()}function f(e){return c(e)&&"form"===e.tagName.toLowerCase()}function p(e){return c(e)&&"input"===e.tagName.toLowerCase()}function d(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m(e,t){return!(0!==e.button||t&&"_self"!==t||d(e))}function b(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}function y(e,t){let r=b(e);if(t)for(let n of t.keys())r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)});return r}function g(e,t,n){let o,a,u,d=null;if(f(e)){let c=t.submissionTrigger;if(t.action)d=t.action;else{let t=e.getAttribute("action");d=t?(0,r.stripBasename)(t,n):null}o=t.method||e.getAttribute("method")||i,a=t.encType||e.getAttribute("enctype")||s,u=new FormData(e),c&&c.name&&u.append(c.name,c.value)}else if(l(e)||p(e)&&("submit"===e.type||"image"===e.type)){let c=e.form;if(null==c)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');if(t.action)d=t.action;else{let t=e.getAttribute("formaction")||c.getAttribute("action");d=t?(0,r.stripBasename)(t,n):null}o=t.method||e.getAttribute("formmethod")||c.getAttribute("method")||i,a=t.encType||e.getAttribute("formenctype")||c.getAttribute("enctype")||s,u=new FormData(c),e.name&&u.append(e.name,e.value)}else{if(c(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');if(o=t.method||i,d=t.action||null,a=t.encType||s,e instanceof FormData)u=e;else if(u=new FormData,e instanceof URLSearchParams)for(let[t,r]of e)u.append(t,r);else if(null!=e)for(let t of Object.keys(e))u.append(t,e[t])}return{action:d,method:o.toLowerCase(),encType:a,formData:u}}const h=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],v=["aria-current","caseSensitive","className","end","style","to","children"],x=["reloadDocument","replace","method","action","onSubmit","fetcherKey","routeId","relative","preventScrollReset"];function R(e,n){return(0,r.createRouter)({basename:null==n?void 0:n.basename,future:a({},null==n?void 0:n.future,{v7_prependBasename:!0}),history:(0,r.createBrowserHistory)({window:null==n?void 0:n.window}),hydrationData:(null==n?void 0:n.hydrationData)||P(),routes:e,mapRouteProperties:t.UNSAFE_mapRouteProperties}).initialize()}function w(e,n){return(0,r.createRouter)({basename:null==n?void 0:n.basename,future:a({},null==n?void 0:n.future,{v7_prependBasename:!0}),history:(0,r.createHashHistory)({window:null==n?void 0:n.window}),hydrationData:(null==n?void 0:n.hydrationData)||P(),routes:e,mapRouteProperties:t.UNSAFE_mapRouteProperties}).initialize()}function P(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=a({},t,{errors:S(t.errors)})),t}function S(e){if(!e)return null;let t=Object.entries(e),n={};for(let[o,a]of t)if(a&&"RouteErrorResponse"===a.__type)n[o]=new r.ErrorResponse(a.status,a.statusText,a.data,!0===a.internal);else if(a&&"Error"===a.__type){let e=new Error(a.message);e.stack="",n[o]=e}else n[o]=a;return n}function E(n){let{basename:o,children:a,window:u}=n,i=e.useRef();null==i.current&&(i.current=(0,r.createBrowserHistory)({window:u,v5Compat:!0}));let s=i.current,[c,l]=e.useState({action:s.action,location:s.location});return e.useLayoutEffect(()=>s.listen(l),[s]),e.createElement(t.Router,{basename:o,children:a,location:c.location,navigationType:c.action,navigator:s})}function O(n){let{basename:o,children:a,window:u}=n,i=e.useRef();null==i.current&&(i.current=(0,r.createHashHistory)({window:u,v5Compat:!0}));let s=i.current,[c,l]=e.useState({action:s.action,location:s.location});return e.useLayoutEffect(()=>s.listen(l),[s]),e.createElement(t.Router,{basename:o,children:a,location:c.location,navigationType:c.action,navigator:s})}function j(r){let{basename:n,children:o,history:a}=r;const[u,i]=e.useState({action:a.action,location:a.location});return e.useLayoutEffect(()=>a.listen(i),[a]),e.createElement(t.Router,{basename:n,children:o,location:u.location,navigationType:u.action,navigator:a})}const A="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,N=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F=e.forwardRef(function(n,o){let i,{onClick:s,relative:c,reloadDocument:l,replace:f,state:p,target:d,to:m,preventScrollReset:b}=n,y=u(n,h),{basename:g}=e.useContext(t.UNSAFE_NavigationContext),v=!1;if("string"==typeof m&&N.test(m)&&(i=m,A))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=(0,r.stripBasename)(t.pathname,g);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:v=!0}catch(w){}let x=(0,t.useHref)(m,{relative:c}),R=B(m,{replace:f,state:p,target:d,preventScrollReset:b,relative:c});return e.createElement("a",a({},y,{href:i||x,onClick:v||l?s:function(e){s&&s(e),e.defaultPrevented||R(e)},ref:o,target:d}))});exports.Link=F;const C=e.forwardRef(function(r,n){let{"aria-current":o="page",caseSensitive:i=!1,className:s="",end:c=!1,style:l,to:f,children:p}=r,d=u(r,v),m=(0,t.useResolvedPath)(f,{relative:d.relative}),b=(0,t.useLocation)(),y=e.useContext(t.UNSAFE_DataRouterStateContext),{navigator:g}=e.useContext(t.UNSAFE_NavigationContext),h=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,x=b.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(x=x.toLowerCase(),R=R?R.toLowerCase():null,h=h.toLowerCase());let w,P=x===h||!c&&x.startsWith(h)&&"/"===x.charAt(h.length),S=null!=R&&(R===h||!c&&R.startsWith(h)&&"/"===R.charAt(h.length)),E=P?o:void 0;w="function"==typeof s?s({isActive:P,isPending:S}):[s,P?"active":null,S?"pending":null].filter(Boolean).join(" ");let O="function"==typeof l?l({isActive:P,isPending:S}):l;return e.createElement(F,a({},d,{"aria-current":E,className:w,ref:n,style:O,to:f}),"function"==typeof p?p({isActive:P,isPending:S}):p)});exports.NavLink=C;const U=e.forwardRef((t,r)=>e.createElement(_,a({},t,{ref:r})));exports.Form=U;const _=e.forwardRef((t,r)=>{let{reloadDocument:n,replace:o,method:s=i,action:c,onSubmit:l,fetcherKey:f,routeId:p,relative:d,preventScrollReset:m}=t,b=u(t,x),y=W(f,p),g="get"===s.toLowerCase()?"get":"post",h=z(c,{relative:d});return e.createElement("form",a({ref:r,method:g,action:h,onSubmit:n?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,r=(null==t?void 0:t.getAttribute("formmethod"))||s;y(t||e.currentTarget,{method:r,replace:o,relative:d,preventScrollReset:m})}},b))});function L(e){let{getKey:t,storageKey:r}=e;return X({getKey:t,storageKey:r}),null}var D,k;function T(e){return e+" must be used within a data router.  See https://reactrouter.com/routers/picking-a-router."}function M(n){let o=e.useContext(t.UNSAFE_DataRouterContext);return o||(0,r.UNSAFE_invariant)(!1),o}function I(n){let o=e.useContext(t.UNSAFE_DataRouterStateContext);return o||(0,r.UNSAFE_invariant)(!1),o}function B(r,n){let{target:o,replace:a,state:u,preventScrollReset:i,relative:s}=void 0===n?{}:n,c=(0,t.useNavigate)(),l=(0,t.useLocation)(),f=(0,t.useResolvedPath)(r,{relative:s});return e.useCallback(e=>{if(m(e,o)){e.preventDefault();let n=void 0!==a?a:(0,t.createPath)(l)===(0,t.createPath)(f);c(r,{replace:n,state:u,preventScrollReset:i,relative:s})}},[l,c,f,a,u,o,r,i,s])}function H(r){let n=e.useRef(b(r)),o=e.useRef(!1),a=(0,t.useLocation)(),u=e.useMemo(()=>y(a.search,o.current?null:n.current),[a.search]),i=(0,t.useNavigate)(),s=e.useCallback((e,t)=>{const r=b("function"==typeof e?e(u):e);o.current=!0,i("?"+r,t)},[i,u]);return[u,s]}function K(){return W()}function W(n,o){let{router:u}=M(D.UseSubmitImpl),{basename:i}=e.useContext(t.UNSAFE_NavigationContext),s=(0,t.UNSAFE_useRouteId)();return e.useCallback(function(e,t){if(void 0===t&&(t={}),"undefined"==typeof document)throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.");let{action:c,method:l,encType:f,formData:p}=g(e,t,i),d={preventScrollReset:t.preventScrollReset,formData:p,formMethod:l,formEncType:f};n?(null==o&&(0,r.UNSAFE_invariant)(!1),u.fetch(n,o,c,d)):u.navigate(c,a({},d,{replace:t.replace,fromRouteId:s}))},[u,i,n,o,s])}function z(n,o){let{relative:u}=void 0===o?{}:o,{basename:i}=e.useContext(t.UNSAFE_NavigationContext),s=e.useContext(t.UNSAFE_RouteContext);s||(0,r.UNSAFE_invariant)(!1);let[c]=s.matches.slice(-1),l=a({},(0,t.useResolvedPath)(n||".",{relative:u})),f=(0,t.useLocation)();if(null==n&&(l.search=f.search,l.hash=f.hash,c.route.index)){let e=new URLSearchParams(l.search);e.delete("index"),l.search=e.toString()?"?"+e.toString():""}return n&&"."!==n||!c.route.index||(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),"/"!==i&&(l.pathname="/"===l.pathname?i:(0,r.joinPaths)([i,l.pathname])),(0,t.createPath)(l)}function q(t,r){let n=e.forwardRef((n,o)=>e.createElement(_,a({},n,{ref:o,fetcherKey:t,routeId:r})));return n}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(D||(D={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(k||(k={}));let V=0;function Y(){var n;let{router:o}=M(D.UseFetcher),u=e.useContext(t.UNSAFE_RouteContext);u||(0,r.UNSAFE_invariant)(!1);let i=null==(n=u.matches[u.matches.length-1])?void 0:n.route.id;null==i&&(0,r.UNSAFE_invariant)(!1);let[s]=e.useState(()=>String(++V)),[c]=e.useState(()=>(i||(0,r.UNSAFE_invariant)(!1),q(s,i))),[l]=e.useState(()=>e=>{o||(0,r.UNSAFE_invariant)(!1),i||(0,r.UNSAFE_invariant)(!1),o.fetch(s,i,e)}),f=W(s,i),p=o.getFetcher(s),d=e.useMemo(()=>a({Form:c,submit:f,load:l},p),[p,c,f,l]);return e.useEffect(()=>()=>{o?o.deleteFetcher(s):console.warn("No router available to clean up from useFetcher()")},[o,s]),d}function J(){return[...I(k.UseFetchers).fetchers.values()]}const G="react-router-scroll-positions";let Q={};function X(r){let{getKey:n,storageKey:o}=void 0===r?{}:r,{router:a}=M(D.UseScrollRestoration),{restoreScrollPosition:u,preventScrollReset:i}=I(k.UseScrollRestoration),s=(0,t.useLocation)(),c=(0,t.useMatches)(),l=(0,t.useNavigation)();e.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),$(e.useCallback(()=>{if("idle"===l.state){let e=(n?n(s,c):null)||s.key;Q[e]=window.scrollY}sessionStorage.setItem(o||G,JSON.stringify(Q)),window.history.scrollRestoration="auto"},[o,n,l.state,s,c])),"undefined"!=typeof document&&(e.useLayoutEffect(()=>{try{let t=sessionStorage.getItem(o||G);t&&(Q=JSON.parse(t))}catch(e){}},[o]),e.useLayoutEffect(()=>{let e=null==a?void 0:a.enableScrollRestoration(Q,()=>window.scrollY,n);return()=>e&&e()},[a,n]),e.useLayoutEffect(()=>{if(!1!==u)if("number"!=typeof u){if(s.hash){let e=document.getElementById(s.hash.slice(1));if(e)return void e.scrollIntoView()}!0!==i&&window.scrollTo(0,0)}else window.scrollTo(0,u)},[s,u,i]))}function Z(t,r){let{capture:n}=r||{};e.useEffect(()=>{let e=null!=n?{capture:n}:void 0;return window.addEventListener("beforeunload",t,e),()=>{window.removeEventListener("beforeunload",t,e)}},[t,n])}function $(t,r){let{capture:n}=r||{};e.useEffect(()=>{let e=null!=n?{capture:n}:void 0;return window.addEventListener("pagehide",t,e),()=>{window.removeEventListener("pagehide",t,e)}},[t,n])}function ee(r){let{when:n,message:o}=r,a=(0,t.unstable_useBlocker)(n);e.useEffect(()=>{"blocked"!==a.state||n||a.reset()},[a,n]),e.useEffect(()=>{if("blocked"===a.state){window.confirm(o)?setTimeout(a.proceed,0):a.reset()}},[a,o])}
},{"react":"n8MK","react-router":"J2mM","@remix-run/router":"Shhf"}],"MPph":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.css=u,exports.setup=m,exports.styled=y,exports.keyframes=exports.glob=exports.extractCss=void 0;let e={data:""},t=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||e,r=e=>{let r=t(e),l=r.data;return r.data="",l},l=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s=/\/\*[^]*?\*\/|  +/g,a=/\n+/g,o=(e,t)=>{let r="",l="",s="";for(let a in e){let n=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+n+";":l+="f"==a[1]?o(n,a):a+"{"+o(n,"k"==a[1]?"":t)+"}":"object"==typeof n?l+=o(n,t?t.replace(/([^,])+/g,e=>a.replace(/(^:.*)|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=n&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=o.p?o.p(a,n):a+":"+n+";")}return r+(t&&s?t+"{"+s+"}":s)+l},n={},c=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+c(e[r]);return t}return e},p=(e,t,r,p,i)=>{let u=c(e),d=n[u]||(n[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(u));if(!n[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(s,""));)t[4]?o.shift():t[3]?(r=t[3].replace(a," ").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(a," ").trim();return o[0]})(e);n[d]=o(i?{["@keyframes "+d]:t}:t,r?"":"."+d)}let f=r&&n.g?n.g:null;return r&&(n.g=n[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(n[d],t,p,f),d},i=(e,t,r)=>e.reduce((e,l,s)=>{let a=t[s];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":o(e,""):!1===e?"":e}return e+l+(null==a?"":a)},"");function u(e){let r=this||{},l=e.call?e(r.p):e;return p(l.unshift?l.raw?i(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}exports.extractCss=r;let d,f,g,b=u.bind({g:1}),x=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function y(e,t){let r=this||{};return function(){let l=arguments;function s(a,o){let n=Object.assign({},a),c=n.className||s.className;r.p=Object.assign({theme:f&&f()},n),r.o=/ *go\d+/.test(c),n.className=u.apply(r,l)+(c?" "+c:""),t&&(n.ref=o);let p=e;return e[0]&&(p=n.as||e,delete n.as),g&&p[0]&&g(n),d(p,n)}return t?t(s):s}}exports.keyframes=x,exports.glob=b;
},{}],"Vp88":[function(require,module,exports) {
"use strict";var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,i=(e,r)=>{for(var a in r)t(e,a,{get:r[a],enumerable:!0})},n=(e,o,i,n)=>{if(o&&"object"==typeof o||"function"==typeof o)for(let l of a(o))!s.call(e,l)&&l!==i&&t(e,l,{get:()=>o[l],enumerable:!(n=r(o,l))||n.enumerable});return e},l=(r,a,s)=>(s=null!=r?e(o(r)):{},n(!a&&r&&r.__esModule?s:t(s,"default",{value:r,enumerable:!0}),r)),d=e=>n(t({},"__esModule",{value:!0}),e),c={};i(c,{CheckmarkIcon:()=>K,ErrorIcon:()=>U,LoaderIcon:()=>V,ToastBar:()=>le,ToastIcon:()=>ee,Toaster:()=>ye,default:()=>be,resolveValue:()=>p,toast:()=>q,useToaster:()=>C,useToasterStore:()=>P}),module.exports=d(c);var u=e=>"function"==typeof e,p=(e,t)=>u(e)?e(t):e,m=(()=>{let e=0;return()=>(++e).toString()})(),f=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),y=require("react"),b=20,g=new Map,h=1e3,x=e=>{if(g.has(e))return;let t=setTimeout(()=>{g.delete(e),O({type:4,toastId:e})},h);g.set(e,t)},v=e=>{let t=g.get(e);t&&clearTimeout(t)},w=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,b)};case 1:return t.toast.id&&v(t.toast.id),{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return e.toasts.find(e=>e.id===r.id)?w(e,{type:1,toast:r}):w(e,{type:0,toast:r});case 3:let{toastId:a}=t;return a?x(a):e.toasts.forEach(e=>{x(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+o}))}}},k=[],E={toasts:[],pausedAt:void 0},O=e=>{E=w(E,e),k.forEach(e=>{e(E)})},$={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},P=(e={})=>{let[t,r]=(0,y.useState)(E);(0,y.useEffect)(()=>(k.push(r),()=>{let e=k.indexOf(r);e>-1&&k.splice(e,1)}),[t]);let a=t.toasts.map(t=>{var r,a;return{...e,...e[t.type],...t,duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||$[t.type],style:{...e.style,...null==(a=e[t.type])?void 0:a.style,...t.style}}});return{...t,toasts:a}},I=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||m()}),j=e=>(t,r)=>{let a=I(t,e,r);return O({type:2,toast:a}),a.id},q=(e,t)=>j("blank")(e,t);q.error=j("error"),q.success=j("success"),q.loading=j("loading"),q.custom=j("custom"),q.dismiss=(e=>{O({type:3,toastId:e})}),q.remove=(e=>O({type:4,toastId:e})),q.promise=((e,t,r)=>{let a=q.loading(t.loading,{...r,...null==r?void 0:r.loading});return e.then(e=>(q.success(p(t.success,e),{id:a,...r,...null==r?void 0:r.success}),e)).catch(e=>{q.error(p(t.error,e),{id:a,...r,...null==r?void 0:r.error})}),e});var z=require("react"),D=(e,t)=>{O({type:1,toast:{id:e,height:t}})},T=()=>{O({type:5,time:Date.now()})},C=e=>{let{toasts:t,pausedAt:r}=P(e);(0,z.useEffect)(()=>{if(r)return;let e=Date.now(),a=t.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>q.dismiss(t.id),r);t.visible&&q.dismiss(t.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[t,r]);let a=(0,z.useCallback)(()=>{r&&O({type:6,time:Date.now()})},[r]),o=(0,z.useCallback)((e,r)=>{let{reverseOrder:a=!1,gutter:o=8,defaultPosition:s}=r||{},i=t.filter(t=>(t.position||s)===(e.position||s)&&t.height),n=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<n&&e.visible).length;return i.filter(e=>e.visible).slice(...a?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+o,0)},[t]);return{toasts:t,handlers:{updateHeight:D,startPause:T,endPause:a,calculateOffset:o}}},N=l(require("react")),A=require("goober"),M=l(require("react")),H=require("goober"),S=require("goober"),_=S.keyframes`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,L=S.keyframes`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,B=S.keyframes`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,U=(0,S.styled)("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${L} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${B} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,F=require("goober"),R=F.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V=(0,F.styled)("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${R} 1s linear infinite;
`,Y=require("goober"),G=Y.keyframes`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,J=Y.keyframes`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,K=(0,Y.styled)("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${G} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${J} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Q=(0,H.styled)("div")`
  position: absolute;
`,W=(0,H.styled)("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,X=H.keyframes`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Z=(0,H.styled)("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${X} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ee=({toast:e})=>{let{icon:t,type:r,iconTheme:a}=e;return void 0!==t?"string"==typeof t?M.createElement(Z,null,t):t:"blank"===r?null:M.createElement(W,null,M.createElement(V,{...a}),"loading"!==r&&M.createElement(Q,null,"error"===r?M.createElement(U,{...a}):M.createElement(K,{...a})))},te=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,re=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ae="0%{opacity:0;} 100%{opacity:1;}",oe="0%{opacity:1;} 100%{opacity:0;}",se=(0,A.styled)("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ie=(0,A.styled)("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ne=(e,t)=>{let r=e.includes("top")?1:-1,[a,o]=f()?[ae,oe]:[te(r),re(r)];return{animation:t?`${(0,A.keyframes)(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${(0,A.keyframes)(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},le=N.memo(({toast:e,position:t,style:r,children:a})=>{let o=e.height?ne(e.position||t||"top-center",e.visible):{opacity:0},s=N.createElement(ee,{toast:e}),i=N.createElement(ie,{...e.ariaProps},p(e.message,e));return N.createElement(se,{className:e.className,style:{...o,...r,...e.style}},"function"==typeof a?a({icon:s,message:i}):N.createElement(N.Fragment,null,s,i))}),de=require("goober"),ce=l(require("react"));(0,de.setup)(ce.createElement);var ue=({id:e,className:t,style:r,onHeightUpdate:a,children:o})=>{let s=ce.useCallback(t=>{if(t){let r=()=>{let r=t.getBoundingClientRect().height;a(e,r)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return ce.createElement("div",{ref:s,className:t,style:r},o)},pe=(e,t)=>{let r=e.includes("top"),a=r?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:f()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...a,...o}},me=de.css`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fe=16,ye=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:a,children:o,containerStyle:s,containerClassName:i})=>{let{toasts:n,handlers:l}=C(r);return ce.createElement("div",{style:{position:"fixed",zIndex:9999,top:fe,left:fe,right:fe,bottom:fe,pointerEvents:"none",...s},className:i,onMouseEnter:l.startPause,onMouseLeave:l.endPause},n.map(r=>{let s=r.position||t,i=l.calculateOffset(r,{reverseOrder:e,gutter:a,defaultPosition:t}),n=pe(s,i);return ce.createElement(ue,{id:r.id,key:r.id,onHeightUpdate:l.updateHeight,className:r.visible?me:"",style:n},"custom"===r.type?p(r.message,r):o?o(r):ce.createElement(le,{toast:r,position:s}))}))},be=q;
},{"react":"n8MK","goober":"MPph"}],"vCxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=t,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__esDecorate=i,exports.__runInitializers=c,exports.__propKey=u,exports.__setFunctionName=f,exports.__metadata=l,exports.__awaiter=s,exports.__generator=p,exports.__exportStar=d,exports.__values=h,exports.__read=_,exports.__spread=v,exports.__spreadArrays=b,exports.__spreadArray=w,exports.__await=x,exports.__asyncGenerator=m,exports.__asyncDelegator=g,exports.__asyncValues=O,exports.__makeTemplateObject=j,exports.__importStar=S,exports.__importDefault=E,exports.__classPrivateFieldGet=T,exports.__classPrivateFieldSet=I,exports.__classPrivateFieldIn=k,exports.__createBinding=exports.__assign=void 0;var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};function t(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function o(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function a(e,t){return function(r,n){t(r,n,e)}}function i(e,t,r,n,o,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var c,u=n.kind,f="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?n.static?e:e.prototype:null,s=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p=!1,y=r.length-1;y>=0;y--){var d={};for(var h in n)d[h]="access"===h?{}:n[h];for(var h in n.access)d.access[h]=n.access[h];d.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var _=(0,r[y])("accessor"===u?{get:s.get,set:s.set}:s[f],d);if("accessor"===u){if(void 0===_)continue;if(null===_||"object"!=typeof _)throw new TypeError("Object expected");(c=i(_.get))&&(s.get=c),(c=i(_.set))&&(s.set=c),(c=i(_.init))&&o.push(c)}else(c=i(_))&&("field"===u?o.push(c):s[f]=c)}l&&Object.defineProperty(l,n.name,s),p=!0}function c(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(t){a(t)}}function c(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,c)}u((n=n.apply(e,t||[])).next())})}function p(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&c[0]?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(u){c=[6,u],n=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}exports.__assign=r;var y=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function d(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||y(t,e,r)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e}function b(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function w(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function m(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||c(e,t)})})}function c(e,t){try{(r=o[e](t)).value instanceof x?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(e){c("next",e)}function f(e){c("throw",e)}function l(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function g(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:x(e[n](t)),done:!1}:o?o(t):t}:o}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof h?h(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,o){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,o,(t=e[r](t)).done,t.value)})}}}function j(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}exports.__createBinding=y;var P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&y(t,e,r);return P(t,e),t}function E(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function I(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function k(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}
},{}],"pz6A":[function(require,module,exports) {
module.exports=function(r,e,t,o){var n=t?t.call(o,r,e):void 0;if(void 0!==n)return!!n;if(r===e)return!0;if("object"!=typeof r||!r||"object"!=typeof e||!e)return!1;var i=Object.keys(r),f=Object.keys(e);if(i.length!==f.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(e),v=0;v<i.length;v++){var a=i[v];if(!u(a))return!1;var c=r[a],l=e[a];if(!1===(n=t?t.call(o,c,l,a):void 0)||void 0===n&&c!==l)return!1}return!0};
},{}],"ansa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.alloc=H,exports.append=N,exports.caret=W,exports.char=Y,exports.charat=M,exports.combine=P,exports.comment=oe,exports.commenter=se,exports.compile=ae,exports.copy=D,exports.dealloc=Z,exports.declaration=ue,exports.delimit=q,exports.delimiter=re,exports.escaping=ee,exports.hash=$,exports.identifier=te,exports.indexof=O,exports.match=T,exports.middleware=le,exports.namespace=ve,exports.next=K,exports.node=z,exports.parse=ce,exports.peek=V,exports.prefix=pe,exports.prefixer=he,exports.prev=j,exports.replace=A,exports.ruleset=ne,exports.rulesheet=fe,exports.serialize=ie,exports.sizeof=C,exports.slice=B,exports.stringify=xe,exports.strlen=S,exports.substr=R,exports.token=G,exports.tokenize=J,exports.tokenizer=X,exports.trim=k,exports.whitespace=Q,exports.position=exports.line=exports.length=exports.from=exports.column=exports.characters=exports.character=exports.assign=exports.abs=exports.WEBKIT=exports.VIEWPORT=exports.SUPPORTS=exports.RULESET=exports.PAGE=exports.NAMESPACE=exports.MS=exports.MOZ=exports.MEDIA=exports.LAYER=exports.KEYFRAMES=exports.IMPORT=exports.FONT_FEATURE_VALUES=exports.FONT_FACE=exports.DOCUMENT=exports.DECLARATION=exports.COUNTER_STYLE=exports.COMMENT=exports.CHARSET=void 0;var e="-ms-";exports.MS=e;var r="-moz-";exports.MOZ=r;var s="-webkit-";exports.WEBKIT=s;var t="comm";exports.COMMENT=t;var a="rule";exports.RULESET=a;var c="decl";exports.DECLARATION=c;var n="@page";exports.PAGE=n;var o="@media";exports.MEDIA=o;var u="@import";exports.IMPORT=u;var p="@charset";exports.CHARSET=p;var i="@viewport";exports.VIEWPORT=i;var x="@supports";exports.SUPPORTS=x;var l="@document";exports.DOCUMENT=l;var f="@namespace";exports.NAMESPACE=f;var h="@keyframes";exports.KEYFRAMES=h;var v="@font-face";exports.FONT_FACE=v;var d="@counter-style";exports.COUNTER_STYLE=d;var b="@font-feature-values";exports.FONT_FEATURE_VALUES=b;var m="@layer";exports.LAYER=m;var E=Math.abs;exports.abs=E;var g=String.fromCharCode;exports.from=g;var w=Object.assign;function $(e,r){return 45^M(e,0)?(((r<<2^M(e,0))<<2^M(e,1))<<2^M(e,2))<<2^M(e,3):0}function k(e){return e.trim()}function T(e,r){return(e=r.exec(e))?e[0]:e}function A(e,r,s){return e.replace(r,s)}function O(e,r){return e.indexOf(r)}function M(e,r){return 0|e.charCodeAt(r)}function R(e,r,s){return e.slice(r,s)}function S(e){return e.length}function C(e){return e.length}function N(e,r){return r.push(e),e}function P(e,r){return e.map(r).join("")}exports.assign=w;var y=1;exports.line=y;var U=1;exports.column=U;var F=0;exports.length=F;var I=0;exports.position=I;var L=0;exports.character=L;var _="";function z(e,r,s,t,a,c,n){return{value:e,root:r,parent:s,type:t,props:a,children:c,line:y,column:U,length:n,return:""}}function D(e,r){return w(z("",null,null,"",null,null,0),e,{length:-e.length},r)}function Y(){return L}function j(){var e,r;return exports.character=L=I>0?M(_,exports.position=I=+I-1):0,e=+U,exports.column=U=e-1,10===L&&(exports.column=U=1,r=+y,exports.line=y=r-1),L}function K(){var e,r,s;return exports.character=L=I<F?M(_,(e=+I,exports.position=I=e+1,e)):0,r=+U,exports.column=U=r+1,10===L&&(exports.column=U=1,s=+y,exports.line=y=s+1),L}function V(){return M(_,I)}function W(){return I}function B(e,r){return R(_,e,r)}function G(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H(e){return exports.line=y=exports.column=U=1,exports.length=F=S(exports.characters=_=e),exports.position=I=0,[]}function Z(e){return exports.characters=_="",e}function q(e){return k(B(I-1,re(91===e?e+2:40===e?e+1:e)))}function J(e){return Z(X(H(e)))}function Q(e){for(;(exports.character=L=V())&&L<33;)K();return G(e)>2||G(L)>3?"":" "}function X(e){for(;K();)switch(G(L)){case 0:N(te(I-1),e);break;case 2:N(q(L),e);break;default:N(g(L),e)}return e}function ee(e,r){for(;--r&&K()&&!(L<48||L>102||L>57&&L<65||L>70&&L<97););return B(e,W()+(r<6&&32==V()&&32==K()))}function re(e){for(;K();)switch(L){case e:return I;case 34:case 39:34!==e&&39!==e&&re(L);break;case 40:41===e&&re(e);break;case 92:K()}return I}function se(e,r){for(;K()&&e+L!==57&&(e+L!==84||47!==V()););return"/*"+B(r,I-1)+"*"+g(47===e?e:K())}function te(e){for(;!G(V());)K();return B(e,I)}function ae(e){return Z(ce("",null,null,null,[""],e=H(e),0,[0],e))}function ce(e,r,s,t,a,c,n,o,u){for(var p=0,i=0,x=n,l=0,f=0,h=0,v=1,d=1,b=1,m=0,E="",w=a,$=c,k=t,T=E;d;)switch(h=m,m=K()){case 40:if(108!=h&&58==M(T,x-1)){-1!=O(T+=A(q(m),"&","&\f"),"&\f")&&(b=-1);break}case 34:case 39:case 91:T+=q(m);break;case 9:case 10:case 13:case 32:T+=Q(h);break;case 92:T+=ee(W()-1,7);continue;case 47:switch(V()){case 42:case 47:N(oe(se(K(),W()),r,s),u);break;default:T+="/"}break;case 123*v:o[p++]=S(T)*b;case 125*v:case 59:case 0:switch(m){case 0:case 125:d=0;case 59+i:-1==b&&(T=A(T,/\f/g,"")),f>0&&S(T)-x&&N(f>32?ue(T+";",t,s,x-1):ue(A(T," ","")+";",t,s,x-2),u);break;case 59:T+=";";default:if(N(k=ne(T,r,s,p,i,a,o,E,w=[],$=[],x),c),123===m)if(0===i)ce(T,r,k,k,w,c,x,o,$);else switch(99===l&&110===M(T,3)?100:l){case 100:case 108:case 109:case 115:ce(e,k,k,t&&N(ne(e,k,k,0,0,a,o,E,a,w=[],x),$),a,$,x,o,t?w:$);break;default:ce(T,k,k,k,[""],$,0,o,$)}}p=i=f=0,v=b=1,E=T="",x=n;break;case 58:x=1+S(T),f=h;default:if(v<1)if(123==m)--v;else if(125==m&&0==v++&&125==j())continue;switch(T+=g(m),m*v){case 38:b=i>0?1:(T+="\f",-1);break;case 44:o[p++]=(S(T)-1)*b,b=1;break;case 64:45===V()&&(T+=q(K())),l=V(),i=x=S(E=T+=te(W())),m++;break;case 45:45===h&&2==S(T)&&(v=0)}}return c}function ne(e,r,s,t,c,n,o,u,p,i,x){for(var l=c-1,f=0===c?n:[""],h=C(f),v=0,d=0,b=0;v<t;++v)for(var m=0,g=R(e,l+1,l=E(d=o[v])),w=e;m<h;++m)(w=k(d>0?f[m]+" "+g:A(g,/&\f/g,f[m])))&&(p[b++]=w);return z(e,r,s,0===c?a:u,p,i,x)}function oe(e,r,s){return z(e,r,s,t,g(Y()),R(e,2,-2),0)}function ue(e,r,s,t){return z(e,r,s,c,R(e,0,t),R(e,t+1,-1),t)}function pe(t,a,c){switch($(t,a)){case 5103:return s+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return s+t+t;case 4789:return r+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return s+t+r+t+e+t+t;case 5936:switch(M(t,a+11)){case 114:return s+t+e+A(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return s+t+e+A(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return s+t+e+A(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return s+t+e+t+t;case 6165:return s+t+e+"flex-"+t+t;case 5187:return s+t+A(t,/(\w+).+(:[^]+)/,s+"box-$1$2"+e+"flex-$1$2")+t;case 5443:return s+t+e+"flex-item-"+A(t,/flex-|-self/g,"")+(T(t,/flex-|baseline/)?"":e+"grid-row-"+A(t,/flex-|-self/g,""))+t;case 4675:return s+t+e+"flex-line-pack"+A(t,/align-content|flex-|-self/g,"")+t;case 5548:return s+t+e+A(t,"shrink","negative")+t;case 5292:return s+t+e+A(t,"basis","preferred-size")+t;case 6060:return s+"box-"+A(t,"-grow","")+s+t+e+A(t,"grow","positive")+t;case 4554:return s+A(t,/([^-])(transform)/g,"$1"+s+"$2")+t;case 6187:return A(A(A(t,/(zoom-|grab)/,s+"$1"),/(image-set)/,s+"$1"),t,"")+t;case 5495:case 3959:return A(t,/(image-set\([^]*)/,s+"$1$`$1");case 4968:return A(A(t,/(.+:)(flex-)?(.*)/,s+"box-pack:$3"+e+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+s+t+t;case 4200:if(!T(t,/flex-|baseline/))return e+"grid-column-align"+R(t,a)+t;break;case 2592:case 3360:return e+A(t,"template-","")+t;case 4384:case 3616:return c&&c.some(function(e,r){return a=r,T(e.props,/grid-\w+-end/)})?~O(t+(c=c[a].value),"span")?t:e+A(t,"-start","")+t+e+"grid-row-span:"+(~O(c,"span")?T(c,/\d+/):+T(c,/\d+/)-+T(t,/\d+/))+";":e+A(t,"-start","")+t;case 4896:case 4128:return c&&c.some(function(e){return T(e.props,/grid-\w+-start/)})?t:e+A(A(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return A(t,/(.+)-inline(.+)/,s+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(S(t)-1-a>6)switch(M(t,a+1)){case 109:if(45!==M(t,a+4))break;case 102:return A(t,/(.+:)(.+)-([^]+)/,"$1"+s+"$2-$3$1"+r+(108==M(t,a+3)?"$3":"$2-$3"))+t;case 115:return~O(t,"stretch")?pe(A(t,"stretch","fill-available"),a,c)+t:t}break;case 5152:case 5920:return A(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,a,c,n,o,u){return e+s+":"+a+u+(c?e+s+"-span:"+(n?o:+o-+a)+u:"")+t});case 4949:if(121===M(t,a+6))return A(t,":",":"+s)+t;break;case 6444:switch(M(t,45===M(t,14)?18:11)){case 120:return A(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+s+(45===M(t,14)?"inline-":"")+"box$3$1"+s+"$2$3$1"+e+"$2box$3")+t;case 100:return A(t,":",":"+e)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return A(t,"scroll-","scroll-snap-")+t}return t}function ie(e,r){for(var s="",t=C(e),a=0;a<t;a++)s+=r(e[a],a,e,r)||"";return s}function xe(e,r,s,n){switch(e.type){case m:if(e.children.length)break;case u:case c:return e.return=e.return||e.value;case t:return"";case h:return e.return=e.value+"{"+ie(e.children,n)+"}";case a:e.value=e.props.join(",")}return S(s=ie(e.children,n))?e.return=e.value+"{"+s+"}":""}function le(e){var r=C(e);return function(s,t,a,c){for(var n="",o=0;o<r;o++)n+=e[o](s,t,a,c)||"";return n}}function fe(e){return function(r){r.root||(r=r.return)&&e(r)}}function he(t,n,o,u){if(t.length>-1&&!t.return)switch(t.type){case c:return void(t.return=pe(t.value,t.length,o));case h:return ie([D(t,{value:A(t.value,"@","@"+s)})],u);case a:if(t.length)return P(t.props,function(a){switch(T(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ie([D(t,{props:[A(a,/:(read-\w+)/,":"+r+"$1")]})],u);case"::placeholder":return ie([D(t,{props:[A(a,/:(plac\w+)/,":"+s+"input-$1")]}),D(t,{props:[A(a,/:(plac\w+)/,":"+r+"$1")]}),D(t,{props:[A(a,/:(plac\w+)/,e+"input-$1")]})],u)}return""})}}function ve(e){switch(e.type){case a:e.props=e.props.map(function(r){return P(J(r),function(r,s,t){switch(M(r,0)){case 12:return R(r,1,S(r));case 0:case 40:case 43:case 62:case 126:return r;case 58:"global"===t[++s]&&(t[s]="",t[++s]="\f"+R(t[s],s=1,-1));case 32:return 1===s?"":r;default:switch(s){case 0:return e=r,C(t)>1?"":r;case s=C(t)-1:case 2:return 2===s?r+e+e:r+e;default:return r}}})})}}exports.characters=_;
},{}],"UXEF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};exports.default=o;
},{}],"ylCS":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"tFSs":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.StyleSheetManager=je,exports.ThemeProvider=Le,exports.createGlobalStyle=et,exports.css=Je,exports.isStyledComponent=J,exports.keyframes=tt,exports.useTheme=Be,exports.withTheme=rt,exports.version=exports.styled=exports.default=exports.__PRIVATE__=exports.ThemeContext=exports.ThemeConsumer=exports.StyleSheetContext=exports.StyleSheetConsumer=exports.ServerStyleSheet=void 0;var t=require("tslib"),r=c(require("react")),n=i(require("shallowequal")),o=require("stylis"),s=i(require("@emotion/unitless"));function i(e){return e&&e.__esModule?e:{default:e}}function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var u=(void 0!==e&&e.env,"data-styled"),l="6.0.0-rc.1",f="undefined"!=typeof window&&"HTMLElement"in window,p=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:(void 0!==e&&e.env,void 0!==e&&e.env,!1)),h={},d=/invalid hook call/i,y=new Set,v=function(e,t){},g=Object.freeze([]),m=Object.freeze({});function S(e,t,r){return void 0===r&&(r=m),e.theme!==r.theme&&e.theme||t||r.theme}exports.version=l;var _=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),b=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,w=/(^-|-$)/g;function x(e){return e.replace(b,"-").replace(w,"")}var I=/(a)(d)/gi,P=function(e){return String.fromCharCode(e+(e>25?39:97))};function C(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=P(t%52)+r;return(P(t%52)+r).replace(I,"$1-$2")}var N,A=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},O=function(e){return A(5381,e)};function R(e){return C(O(e)>>>0)}function j(e){return e.displayName||e.name||"Component"}function T(e){return"string"==typeof e&&!0}var E="function"==typeof Symbol&&Symbol.for,M=E?Symbol.for("react.memo"):60115,k=E?Symbol.for("react.forward_ref"):60112,F={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},$={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},z={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},G=((N={})[k]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},N[M]=z,N);function D(e){return("type"in(t=e)&&t.type.$$typeof)===M?z:"$$typeof"in e?G[e.$$typeof]:F;var t}var W=Object.defineProperty,q=Object.getOwnPropertyNames,B=Object.getOwnPropertySymbols,L=Object.getOwnPropertyDescriptor,H=Object.getPrototypeOf,V=Object.prototype;function U(e,t,r){if("string"!=typeof t){if(V){var n=H(t);n&&n!==V&&U(e,n,r)}var o=q(t);B&&(o=o.concat(B(t)));for(var s=D(e),i=D(t),a=0;a<o.length;++a){var c=o[a];if(!(c in $||r&&r[c]||i&&c in i||s&&c in s)){var u=L(t,c);try{W(e,c,u)}catch(e){}}}}return e}function Y(e){return"function"==typeof e}function J(e){return"object"==typeof e&&"styledComponentId"in e}function Z(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function K(e,t){if(0===e.length)return"";for(var r=e[0],n=1;n<e.length;n++)r+=t?t+e[n]:e[n];return r}function Q(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function X(e,t,r){if(void 0===r&&(r=!1),!r&&!Q(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=X(e[n],t[n]);else if(Q(t))for(var n in t)e[n]=X(e[n],t[n]);return e}var ee={};function te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],n=[],o=1,s=e.length;o<s;o+=1)n.push(e[o]);return n.forEach(function(e){r=r.replace(/%[a-z]/,e)}),r}function re(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var ne=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,o=n;e>=o;)if((o<<=1)<0)throw re(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var s=n;s<o;s++)this.groupSizes[s]=0}for(var i=this.indexOfGroup(e+1),a=(s=0,t.length);s<a;s++)this.tag.insertRule(i,t[s])&&(this.groupSizes[e]++,i++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var o=r;o<n;o++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),o=n+r,s=n;s<o;s++)t+="".concat(this.tag.getRule(s)).concat("/*!sc*/\n");return t},e}(),oe=new Map,se=new Map,ie=1,ae=function(e){if(oe.has(e))return oe.get(e);for(;se.has(ie);)ie++;var t=ie++;return oe.set(e,t),se.set(t,e),t},ce=function(e,t){oe.set(e,t),se.set(t,e)},ue="style[".concat(u,"][").concat("data-styled-version",'="').concat("6.0.0-rc.1",'"]'),le=new RegExp("^".concat(u,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),fe=function(e,t,r){for(var n,o=r.split(","),s=0,i=o.length;s<i;s++)(n=o[s])&&e.registerName(t,n)},pe=function(e,t){for(var r,n=(null!==(r=t.textContent)&&void 0!==r?r:"").split("/*!sc*/\n"),o=[],s=0,i=n.length;s<i;s++){var a=n[s].trim();if(a){var c=a.match(le);if(c){var u=0|parseInt(c[1],10),l=c[2];0!==u&&(ce(l,u),fe(e,l,c[3]),e.getTag().insertRules(u,o)),o.length=0}else o.push(a)}}};function he(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null}var de=function(e){var t=document.head,r=e||t,n=document.createElement("style"),o=function(e){for(var t=e.childNodes,r=t.length;r>=0;r--){var n=t[r];if(n&&1===n.nodeType&&n.hasAttribute(u))return n}}(r),s=void 0!==o?o.nextSibling:null;n.setAttribute(u,"active"),n.setAttribute("data-styled-version","6.0.0-rc.1");var i=he();return i&&n.setAttribute("nonce",i),r.insertBefore(n,s),n},ye=function(){function e(e){this.element=de(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,n=t.length;r<n;r++){var o=t[r];if(o.ownerNode===e)return o}throw re(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),ve=function(){function e(e){this.element=de(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),ge=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),me=f,Se={isServer:!f,useCSSOMInjection:!p},_e=function(){function e(e,r,n){void 0===e&&(e=m),void 0===r&&(r={}),this.options=(0,t.__assign)((0,t.__assign)({},Se),e),this.gs=r,this.names=new Map(n),this.server=!!e.isServer,!this.server&&f&&me&&(me=!1,function(e){for(var t=document.querySelectorAll(ue),r=0,n=t.length;r<n;r++){var o=t[r];o&&"active"!==o.getAttribute(u)&&(pe(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}return e.registerId=function(e){return ae(e)},e.prototype.reconstructWithOptions=function(r,n){return void 0===n&&(n=!0),new e((0,t.__assign)((0,t.__assign)({},this.options),r),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,r=e.target;return e.isServer?new ge(r):t?new ye(r):new ve(r)}(this.options),new ne(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(ae(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},e.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(ae(e),r)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(ae(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e.prototype.toString=function(){return function(e){for(var t=e.getTag(),r=t.length,n="",o=function(r){var o=function(e){return se.get(e)}(r);if(void 0===o)return"continue";var s=e.names.get(o),i=t.getGroup(r);if(void 0===s||0===i.length)return"continue";var a="".concat(u,".g").concat(r,'[id="').concat(o,'"]'),c="";void 0!==s&&s.forEach(function(e){e.length>0&&(c+="".concat(e,","))}),n+="".concat(i).concat(a,'{content:"').concat(c,'"}').concat("/*!sc*/\n")},s=0;s<r;s++)o(s);return n}(this)},e}(),be=/&/g,we=/^\s*\/\/.*$/gm;function xe(e,t){return e.map(function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(e){return"".concat(t," ").concat(e)})),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=xe(e.children,t)),e})}function Ie(e){var t,r,n,s=void 0===e?m:e,i=s.options,a=void 0===i?m:i,c=s.plugins,u=void 0===c?g:c,l=function(e,n,o){return o===r||o.startsWith(r)&&o.endsWith(r)&&o.replaceAll(r,"").length>0?".".concat(t):e},f=u.slice();a.prefix&&f.unshift(o.prefixer),f.push(function(e){e.type===o.RULESET&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(be,r).replace(n,l))},o.stringify);var p=function(e,s,i,c){void 0===s&&(s=""),void 0===i&&(i=""),void 0===c&&(c="&"),t=c,r=s,n=new RegExp("\\".concat(r,"\\b"),"g");var u=e.replace(we,""),l=(0,o.compile)(i||s?"".concat(i," ").concat(s," { ").concat(u," }"):u);return a.namespace&&(l=xe(l,a.namespace)),function(e,t){for(var r=[],n=0,o=void 0;n<e.length;n+=1)(o=t(e[n],n,e,t))&&r.push(o);return r}(l,(0,o.middleware)(f))};return p.hash=u.length?u.reduce(function(e,t){return t.name||re(15),A(e,t.name)},5381).toString():"",p}var Pe=new _e,Ce=Ie(),Ne=r.default.createContext({shouldForwardProp:void 0,styleSheet:Pe,stylis:Ce}),Ae=Ne.Consumer,Oe=r.default.createContext(void 0);function Re(){return(0,r.useContext)(Ne)}function je(e){var t=(0,r.useState)(e.stylisPlugins),o=t[0],s=t[1],i=Re().styleSheet,a=(0,r.useMemo)(function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target,i]),c=(0,r.useMemo)(function(){return Ie({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:o})},[e.enableVendorPrefixes,e.namespace,o]);return(0,r.useEffect)(function(){(0,n.default)(o,e.stylisPlugins)||s(e.stylisPlugins)},[e.stylisPlugins]),r.default.createElement(Ne.Provider,{value:{shouldForwardProp:e.shouldForwardProp,styleSheet:a,stylis:c}},r.default.createElement(Oe.Provider,{value:c},e.children))}exports.StyleSheetConsumer=Ae,exports.StyleSheetContext=Ne;var Te=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=Ce);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.toString=function(){throw re(12,String(r.name))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=Ce),this.name+e.hash},e}(),Ee=function(e){return e>="A"&&e<="Z"};function Me(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(1===r&&"-"===n&&"-"===e[0])return e;Ee(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var ke=function(e){return null==e||!1===e||""===e},Fe=function(e){var r,n,o=[];for(var i in e){var a=e[i];e.hasOwnProperty(i)&&!ke(a)&&(Array.isArray(a)&&a.isCss||Y(a)?o.push("".concat(Me(i),":"),a,";"):Q(a)?o.push.apply(o,(0,t.__spreadArray)((0,t.__spreadArray)(["".concat(i," {")],Fe(a),!1),["}"],!1)):o.push("".concat(Me(i),": ").concat((r=i,null==(n=a)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||r in s.default||r.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return o};function $e(e,t,r,n){if(ke(e))return[];if(J(e))return[".".concat(e.styledComponentId)];if(Y(e)){if(!Y(s=e)||s.prototype&&s.prototype.isReactComponent||!t)return[e];var o=e(t);return $e(o,t,r,n)}var s;return e instanceof Te?r?(e.inject(r,n),[e.getName(n)]):[e]:Q(e)?Fe(e):Array.isArray(e)?e.flatMap(function(e){return $e(e,t,r,n)}):[e.toString()]}function ze(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(Y(r)&&!J(r))return!1}return!0}var Ge=O("6.0.0-rc.1"),De=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===r||r.isStatic)&&ze(e),this.componentId=t,this.baseHash=A(Ge,t),this.baseStyle=r,_e.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=Z(n,this.staticRulesId);else{var o=K($e(this.rules,e,t,r)),s=C(A(this.baseHash,o)>>>0);if(!t.hasNameForId(this.componentId,s)){var i=r(o,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,i)}n=Z(n,s),this.staticRulesId=s}else{for(var a=A(this.baseHash,r.hash),c="",u=0;u<this.rules.length;u++){var l=this.rules[u];if("string"==typeof l)c+=l;else if(l){var f=K($e(l,e,t,r));a=A(a,f),c+=f}}if(c){var p=C(a>>>0);t.hasNameForId(this.componentId,p)||t.insertRules(this.componentId,p,r(c,".".concat(p),void 0,this.componentId)),n=Z(n,p)}}return n},e}(),We=r.default.createContext(void 0),qe=We.Consumer;function Be(){return(0,r.useContext)(We)}function Le(e){var n=Be(),o=(0,r.useMemo)(function(){return function(e,r){if(!e)throw re(14);if(Y(e)){var n=e(r);return n}if(Array.isArray(e)||"object"!=typeof e)throw re(8);return r?(0,t.__assign)((0,t.__assign)({},r),e):e}(e.theme,n)},[e.theme,n]);return e.children?r.default.createElement(We.Provider,{value:o},e.children):null}exports.ThemeConsumer=qe,exports.ThemeContext=We;var He={};function Ve(e,n,o){var s=J(e),i=e,a=!T(e),c=n.attrs,u=void 0===c?g:c,l=n.componentId,f=void 0===l?function(e,t){var r="string"!=typeof e?"sc":x(e);He[r]=(He[r]||0)+1;var n="".concat(r,"-").concat(R("6.0.0-rc.1"+r+He[r]));return t?"".concat(t,"-").concat(n):n}(n.displayName,n.parentComponentId):l,p=n.displayName,h=void 0===p?function(e){return T(e)?"styled.".concat(e):"Styled(".concat(j(e),")")}(e):p,d=n.displayName&&n.componentId?"".concat(x(n.displayName),"-").concat(n.componentId):n.componentId||f,y=s&&i.attrs?i.attrs.concat(u).filter(Boolean):u,v=n.shouldForwardProp;if(s&&i.shouldForwardProp){var b=i.shouldForwardProp;if(n.shouldForwardProp){var w=n.shouldForwardProp;v=function(e,t){return b(e,t)&&w(e,t)}}else v=b}var I=new De(o,d,s?i.componentStyle:void 0),P=I.isStatic&&0===u.length;function C(e,n){return function(e,n,o,s){var i=e.attrs,a=e.componentStyle,c=e.defaultProps,u=e.foldedComponentIds,l=e.styledComponentId,f=e.target,p=Be(),h=Re(),d=e.shouldForwardProp||h.shouldForwardProp,y=function(e,r,n){for(var o,s=(0,t.__assign)((0,t.__assign)({},r),{className:void 0,theme:n}),i=0;i<e.length;i+=1){var a=Y(o=e[i])?o(s):o;for(var c in a)s[c]="className"===c?Z(s[c],a[c]):"style"===c?(0,t.__assign)((0,t.__assign)({},s[c]),a[c]):a[c]}return r.className&&(s.className=Z(s.className,r.className)),s}(i,n,S(n,p,c)||m),v=y.as||f,g={};for(var b in y)void 0===y[b]||"$"===b[0]||"as"===b||"theme"===b||("forwardedAs"===b?g.as=y.forwardedAs:d&&!d(b,v)||(g[b]=y[b]));var w=function(e,t,r){var n=Re(),o=e.generateAndInjectStyles(t?m:r,n.styleSheet,n.stylis);return o}(a,s,y),x=Z(u,l);return w&&(x+=" "+w),y.className&&(x+=" "+y.className),g[T(v)&&!_.has(v)?"class":"className"]=x,g.ref=o,(0,r.createElement)(v,g)}(N,e,n,P)}C.displayName=h;var N=r.default.forwardRef(C);return N.attrs=y,N.componentStyle=I,N.displayName=h,N.shouldForwardProp=v,N.foldedComponentIds=s?Z(i.foldedComponentIds,i.styledComponentId):"",N.styledComponentId=d,N.target=s?i.target:e,Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=s?function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,o=t;n<o.length;n++)X(e,o[n],!0);return e}({},i.defaultProps,e):e}}),Object.defineProperty(N,"toString",{value:function(){return".".concat(N.styledComponentId)}}),a&&U(N,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),N}function Ue(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r}var Ye=function(e){return Object.assign(e,{isCss:!0})};function Je(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(Y(e)||Q(e)){var o=e;return Ye($e(Ue(g,(0,t.__spreadArray)([o],r,!0))))}var s=e;return 0===r.length&&1===s.length&&"string"==typeof s[0]?$e(s):Ye($e(Ue(s,r)))}function Ze(e,r,n){if(void 0===n&&(n=m),!r)throw re(1,r);var o=function(o){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];return e(r,n,Je.apply(void 0,(0,t.__spreadArray)([o],s,!1)))};return o.attrs=function(o){return Ze(e,r,(0,t.__assign)((0,t.__assign)({},n),{attrs:Array.prototype.concat(n.attrs,o).filter(Boolean)}))},o.withConfig=function(o){return Ze(e,r,(0,t.__assign)((0,t.__assign)({},n),o))},o}var Ke=function(e){return Ze(Ve,e)},Qe=Ke;exports.styled=exports.default=Qe,_.forEach(function(e){Qe[e]=Ke(e)});var Xe=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=ze(e),_e.registerId(this.componentId+1)}return e.prototype.createStyles=function(e,t,r,n){var o=n(K($e(this.rules,t,r,n)),""),s=this.componentId+e;r.insertRules(s,s,o)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,r,n){e>2&&_e.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,t,r,n)},e}();function et(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var s=Je.apply(void 0,(0,t.__spreadArray)([e],n,!1)),i="sc-global-".concat(R(JSON.stringify(s))),a=new Xe(s,i),c=function(e){var t=Re(),n=Be(),o=r.default.useRef(t.styleSheet.allocateGSInstance(i)).current;return t.styleSheet.server&&u(o,e,t.styleSheet,n,t.stylis),(r.default.useInsertionEffect||r.default.useLayoutEffect)(function(){if(!t.styleSheet.server)return u(o,e,t.styleSheet,n,t.stylis),function(){return a.removeStyles(o,t.styleSheet)}},[o,e,t.styleSheet,n,t.stylis]),null};function u(e,r,n,o,s){if(a.isStatic)a.renderStyles(e,h,n,s);else{var i=(0,t.__assign)((0,t.__assign)({},r),{theme:S(r,o,c.defaultProps)});a.renderStyles(e,i,n,s)}}return r.default.memo(c)}function tt(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=K(Je.apply(void 0,(0,t.__spreadArray)([e],r,!1))),s=R(o);return new Te(s,o)}function rt(e){var n=r.default.forwardRef(function(n,o){var s=S(n,Be(),e.defaultProps);return r.default.createElement(e,(0,t.__assign)({},n,{theme:s,ref:o}))});return n.displayName="WithTheme(".concat(j(e),")"),U(n,e)}var nt=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),r=he(),n=K([r&&'nonce="'.concat(r,'"'),"".concat(u,'="true"'),"".concat("data-styled-version",'="').concat("6.0.0-rc.1",'"')].filter(Boolean)," ");return"<style ".concat(n,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw re(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw re(2);var o=((n={})[u]="",n["data-styled-version"]="6.0.0-rc.1",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),s=he();return s&&(o.nonce=s),[r.default.createElement("style",(0,t.__assign)({},o,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new _e({isServer:!0}),this.sealed=!1}return e.prototype.collectStyles=function(e){if(this.sealed)throw re(2);return r.default.createElement(je,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw re(3)},e}(),ot={StyleSheet:_e,mainSheet:Pe};exports.__PRIVATE__=ot,exports.ServerStyleSheet=nt;var st="__sc-".concat(u,"__");
},{"tslib":"vCxL","react":"n8MK","shallowequal":"pz6A","stylis":"ansa","@emotion/unitless":"UXEF","process":"ylCS"}],"mfdx":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.waitForNone=exports.waitForAny=exports.waitForAllSettled=exports.waitForAll=exports.useSetRecoilState=exports.useRetain=exports.useResetRecoilState=exports.useRecoilValue_TRANSITION_SUPPORT_UNSTABLE=exports.useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE=exports.useRecoilValueLoadable=exports.useRecoilValue=exports.useRecoilTransaction_UNSTABLE=exports.useRecoilTransactionObserver_UNSTABLE=exports.useRecoilStoreID=exports.useRecoilState_TRANSITION_SUPPORT_UNSTABLE=exports.useRecoilStateLoadable=exports.useRecoilState=exports.useRecoilSnapshot=exports.useRecoilRefresher_UNSTABLE=exports.useRecoilCallback=exports.useRecoilBridgeAcrossReactRoots_UNSTABLE=exports.useGotoRecoilSnapshot=exports.useGetRecoilValueInfo_UNSTABLE=exports.snapshot_UNSTABLE=exports.selectorFamily=exports.selector=exports.retentionZone=exports.readOnlySelector=exports.noWait=exports.isRecoilValue=exports.errorSelector=exports.constSelector=exports.atomFamily=exports.atom=exports.RecoilRoot=exports.RecoilLoadable=exports.RecoilEnv=exports.DefaultValue=exports.default=void 0;var t=o(require("react")),n=o(require("react-dom"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e){const t=new Error(e);if(void 0===t.stack)try{throw t}catch(n){}return t}var a=r,s=a;function i(e){return!!e&&"function"==typeof e.then}var l=i;function u(e,t){if(null!=e)return e;throw s(null!=t?t:"Got unexpected null or undefined")}var c=u;function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f{getValue(){throw s("BaseLoadable")}toPromise(){throw s("BaseLoadable")}valueMaybe(){throw s("BaseLoadable")}valueOrThrow(){throw s(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw s("BaseLoadable")}promiseOrThrow(){throw s(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw s("BaseLoadable")}errorOrThrow(){throw s(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw s("BaseLoadable")}}class h extends f{constructor(e){super(),d(this,"state","hasValue"),d(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return l(n)?S(n):T(n)?n:_(n)}catch(t){return l(t)?S(t.next(()=>this.map(e))):y(t)}}}class p extends f{constructor(e){super(),d(this,"state","hasError"),d(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class v extends f{constructor(e){super(),d(this,"state","loading"),d(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return S(this.contents.then(t=>{const n=e(t);if(T(n)){const e=n;switch(e.state){case"hasValue":return e.contents;case"hasError":throw e.contents;case"loading":return e.contents}}return n}).catch(t=>{if(l(t))return t.then(()=>this.map(e).contents);throw t}))}}function _(e){return Object.freeze(new h(e))}function y(e){return Object.freeze(new p(e))}function S(e){return Object.freeze(new v(e))}function m(){return Object.freeze(new v(new Promise(()=>{})))}function g(e){return e.every(e=>"hasValue"===e.state)?_(e.map(e=>e.contents)):e.some(e=>"hasError"===e.state)?y(c(e.find(e=>"hasError"===e.state),"Invalid loadable passed to loadableAll").contents):S(Promise.all(e.map(e=>e.contents)))}function R(e){const t=g((Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])).map(e=>T(e)?e:l(e)?S(e):_(e)));return Array.isArray(e)?t:t.map(t=>Object.getOwnPropertyNames(e).reduce((e,n,o)=>({...e,[n]:t[o]}),{}))}function T(e){return e instanceof f}const b={of:e=>l(e)?S(e):T(e)?e:_(e),error:e=>y(e),loading:()=>m(),all:R,isLoadable:T};var w={loadableWithValue:_,loadableWithError:y,loadableWithPromise:S,loadableLoading:m,loadableAll:R,isLoadable:T,RecoilLoadable:b},A=w.loadableWithValue,E=w.loadableWithError,N=w.loadableWithPromise,L=w.loadableLoading,k=w.loadableAll,V=w.isLoadable,U=w.RecoilLoadable,C=Object.freeze({__proto__:null,loadableWithValue:A,loadableWithError:E,loadableWithPromise:N,loadableLoading:L,loadableAll:k,isLoadable:V,RecoilLoadable:U});const M={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function x(t,n){var o,r;const a=null===(o=e.env[t])||void 0===o?void 0:null===(r=o.toLowerCase())||void 0===r?void 0:r.trim();if(null==a||""===a)return;if(!["true","false"].includes(a))throw s(`process.env.${t} value must be 'true', 'false', or empty: ${a}`);n("true"===a)}function B(t,n){var o;const r=null===(o=e.env[t])||void 0===o?void 0:o.trim();null!=r&&""!==r&&n(r.split(/\s*,\s*|\s+/))}function I(){var t;void 0!==e&&null!=(null===(t=e)||void 0===t?void 0:t.env)&&(x("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{M.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),B("RECOIL_GKS_ENABLED",e=>{e.forEach(e=>{M.RECOIL_GKS_ENABLED.add(e)})}))}I();var D=M;function O(e){return D.RECOIL_GKS_ENABLED.has(e)}O.setPass=(e=>{D.RECOIL_GKS_ENABLED.add(e)}),O.setFail=(e=>{D.RECOIL_GKS_ENABLED.delete(e)}),O.clear=(()=>{D.RECOIL_GKS_ENABLED.clear()});var P=O;function F(e,t,{error:n}={}){return null}var z,W,G,$=F,j=$;const K=null!==(z=t.default.createMutableSource)&&void 0!==z?z:t.default.unstable_createMutableSource,H=null!==(W=t.default.useMutableSource)&&void 0!==W?W:t.default.unstable_useMutableSource,q=null!==(G=t.default.useSyncExternalStore)&&void 0!==G?G:t.default.unstable_useSyncExternalStore;let Z=!1;function Y(){var e;const{ReactCurrentDispatcher:n,ReactCurrentOwner:o}=t.default.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=null!=(null!==(e=null==n?void 0:n.current)&&void 0!==e?e:o.currentDispatcher).useSyncExternalStore;return!q||r||Z||(Z=!0,j("A React renderer without React 18+ API support is being used with React 18+.")),r}function J(){return P("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:P("recoil_sync_external_store")&&null!=q?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:P("recoil_mutable_source")&&null!=H&&"undefined"!=typeof window&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?P("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:P("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function X(){return!1}var Q={createMutableSource:K,useMutableSource:H,useSyncExternalStore:q,currentRendererSupportsUseSyncExternalStore:Y,reactMode:J,isFastRefreshEnabled:X};class ee{constructor(e){d(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class te extends ee{}class ne extends ee{}function oe(e){return e instanceof te||e instanceof ne}var re={AbstractRecoilValue:ee,RecoilState:te,RecoilValueReadOnly:ne,isRecoilValue:oe},ae=re.AbstractRecoilValue,se=re.RecoilState,ie=re.RecoilValueReadOnly,le=re.isRecoilValue,ue=Object.freeze({__proto__:null,AbstractRecoilValue:ae,RecoilState:se,RecoilValueReadOnly:ie,isRecoilValue:le});function ce(e,...t){let n=0;return e.replace(/%s/g,()=>String(t[n++]))}var de=ce;function fe(e,...t){0}var he=fe,pe=he;function ve(e,t){return function*(){let n=0;for(const o of e)yield t(o,n++)}()}var _e=ve;const{isFastRefreshEnabled:ye}=Q;class Se{}const me=new Se,ge=new Map,Re=new Map;function Te(e){return _e(e,e=>c(Re.get(e)))}function be(e){if(ge.has(e)){const t=`Duplicate atom key "${e}". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.`;console.warn(t)}}function we(e){D.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&be(e.key),ge.set(e.key,e);const t=null==e.set?new ue.RecoilValueReadOnly(e.key):new ue.RecoilState(e.key);return Re.set(e.key,t),t}class Ae extends Error{}function Ee(e){const t=ge.get(e);if(null==t)throw new Ae(`Missing definition for RecoilValue: "${e}""`);return t}function Ne(e){return ge.get(e)}const Le=new Map;function ke(e){var t;if(!P("recoil_memory_managament_2020"))return;const n=ge.get(e);var o;null!=n&&null!==(t=n.shouldDeleteConfigOnRelease)&&void 0!==t&&t.call(n)&&(ge.delete(e),null===(o=Ue(e))||void 0===o||o(),Le.delete(e))}function Ve(e,t){P("recoil_memory_managament_2020")&&(void 0===t?Le.delete(e):Le.set(e,t))}function Ue(e){return Le.get(e)}var Ce={nodes:ge,recoilValues:Re,registerNode:we,getNode:Ee,getNodeMaybe:Ne,deleteNodeConfigIfPossible:ke,setConfigDeletionHandler:Ve,getConfigDeletionHandler:Ue,recoilValuesForKeys:Te,NodeMissingError:Ae,DefaultValue:Se,DEFAULT_VALUE:me};function Me(e,t){t()}var xe={enqueueExecution:Me};function Be(e,t){return e(t={exports:{}},t.exports),t.exports}var Ie=Be(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},o=Math.pow(2,5),r=o-1,a=o/2,s=o/4,i={},l=function(e){return function(){return e}},u=n.hash=function(e){var n=void 0===e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var o=0,r=0,a=e.length;r<a;++r){o=(o<<5)-o+e.charCodeAt(r)|0}return o},c=function(e,t){return t>>>e&r},d=function(e){return 1<<e},f=function(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,n+=n>>8,127&(n+=n>>16);var n},h=function(e,t,n,o){var r=o;if(!e){var a=o.length;r=new Array(a);for(var s=0;s<a;++s)r[s]=o[s]}return r[t]=n,r},p=function(e,t,n){var o=n.length-1,r=0,a=0,s=n;if(e)r=a=t;else for(s=new Array(o);r<t;)s[a++]=n[r++];for(++r;r<=o;)s[a++]=n[r++];return e&&(s.length=o),s},v={__hamt_isEmpty:!0},_=function(e){return e===v||e&&e.__hamt_isEmpty},y=function(e,t,n,o){return{type:1,edit:e,hash:t,key:n,value:o,_modify:b}},S=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:w}},m=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:A}},g=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:E}},R=function e(t,n,o,r,a,s){if(o===a)return S(t,o,[s,r]);var i=c(n,o),l=c(n,a);return m(t,d(i)|d(l),i===l?[e(t,n+5,o,r,a,s)]:i<l?[r,s]:[s,r])},T=function(e,t){return e===t.edit},b=function(e,t,n,o,r,a,s){if(t(a,this.key)){var l=o(this.value);return l===this.value?this:l===i?(--s.value,v):T(e,this)?(this.value=l,this):y(e,r,a,l)}var u=o();return u===i?this:(++s.value,R(e,n,this.hash,this,r,y(e,r,a,u)))},w=function(e,t,n,o,r,a,s){if(r===this.hash){var l=function(e,t,n,o,r,a,s,l){for(var u=r.length,c=0;c<u;++c){var d=r[c];if(n(s,d.key)){var f=d.value,v=a(f);return v===f?r:v===i?(--l.value,p(e,c,r)):h(e,c,y(t,o,s,v),r)}}var _=a();return _===i?r:(++l.value,h(e,u,y(t,o,s,_),r))}(T(e,this),e,t,this.hash,this.children,o,a,s);return l===this.children?this:l.length>1?S(e,this.hash,l):l[0]}var u=o();return u===i?this:(++s.value,R(e,n,this.hash,this,r,y(e,r,a,u)))},A=function(e,t,n,o,r,s,i){var l=this.mask,u=this.children,y=c(n,r),S=d(y),R=f(l,S),b=l&S,w=b?u[R]:v,A=w._modify(e,t,n+5,o,r,s,i);if(w===A)return this;var E,N=T(e,this),L=l,k=void 0;if(b&&_(A)){if(!(L&=~S))return v;if(u.length<=2&&((E=u[1^R])===v||1===E.type||2===E.type))return u[1^R];k=p(N,R,u)}else if(b||_(A))k=h(N,R,A,u);else{if(u.length>=a)return function(e,t,n,o,r){for(var a=[],s=o,i=0,l=0;s;++l)1&s&&(a[l]=r[i++]),s>>>=1;return a[t]=n,g(e,i+1,a)}(e,y,A,l,u);L|=S,k=function(e,t,n,o){var r=o.length;if(e){for(var a=r;a>=t;)o[a--]=o[a];return o[t]=n,o}for(var s=0,i=0,l=new Array(r+1);s<t;)l[i++]=o[s++];for(l[t]=n;s<r;)l[++i]=o[s++];return l}(N,R,A,u)}return N?(this.mask=L,this.children=k,this):m(e,L,k)},E=function(e,t,n,o,r,a,i){var l=this.size,u=this.children,d=c(n,r),f=u[d],p=(f||v)._modify(e,t,n+5,o,r,a,i);if(f===p)return this;var y=T(e,this),S=void 0;if(_(f)&&!_(p))++l,S=h(y,d,p,u);else if(!_(f)&&_(p)){if(--l<=s)return function(e,t,n,o){for(var r=new Array(t-1),a=0,s=0,i=0,l=o.length;i<l;++i)if(i!==n){var u=o[i];u&&!_(u)&&(r[a++]=u,s|=1<<i)}return m(e,s,r)}(e,l,d,u);S=h(y,d,v,u)}else S=h(y,d,p,u);return y?(this.size=l,this.children=S,this):g(e,l,S)};function N(e,t,n,o,r){this._editable=e,this._edit=t,this._config=n,this._root=o,this._size=r}v._modify=function(e,t,n,o,r,a,s){var l=o();return l===i?v:(++s.value,y(e,r,a,l))},N.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new N(this._editable,this._edit,this._config,e,t)};var L=n.tryGetHash=function(e,t,n,o){for(var r=o._root,a=0,s=o._config.keyEq;;)switch(r.type){case 1:return s(n,r.key)?r.value:e;case 2:if(t===r.hash)for(var i=r.children,l=0,u=i.length;l<u;++l){var h=i[l];if(s(n,h.key))return h.value}return e;case 3:var p=c(a,t),v=d(p);if(r.mask&v){r=r.children[f(r.mask,v)],a+=5;break}return e;case 4:if(r=r.children[c(a,t)]){a+=5;break}return e;default:return e}};N.prototype.tryGetHash=function(e,t,n){return L(e,t,n,this)};var k=n.tryGet=function(e,t,n){return L(e,n._config.hash(t),t,n)};N.prototype.tryGet=function(e,t){return k(e,t,this)};var V=n.getHash=function(e,t,n){return L(void 0,e,t,n)};N.prototype.getHash=function(e,t){return V(e,t,this)};n.get=function(e,t){return L(void 0,t._config.hash(e),e,t)};N.prototype.get=function(e,t){return k(t,e,this)};var U=n.has=function(e,t,n){return L(i,e,t,n)!==i};N.prototype.hasHash=function(e,t){return U(e,t,this)};var C=n.has=function(e,t){return U(t._config.hash(e),e,t)};N.prototype.has=function(e){return C(e,this)};var M=function(e,t){return e===t};n.make=function(e){return new N(0,0,{keyEq:e&&e.keyEq||M,hash:e&&e.hash||u},v,0)},n.empty=n.make();var x=n.isEmpty=function(e){return e&&!!_(e._root)};N.prototype.isEmpty=function(){return x(this)};var B=n.modifyHash=function(e,t,n,o){var r={value:o._size},a=o._root._modify(o._editable?o._edit:NaN,o._config.keyEq,0,e,t,n,r);return o.setTree(a,r.value)};N.prototype.modifyHash=function(e,t,n){return B(n,e,t,this)};var I=n.modify=function(e,t,n){return B(e,n._config.hash(t),t,n)};N.prototype.modify=function(e,t){return I(t,e,this)};var D=n.setHash=function(e,t,n,o){return B(l(n),e,t,o)};N.prototype.setHash=function(e,t,n){return D(e,t,n,this)};var O=n.set=function(e,t,n){return D(n._config.hash(e),e,t,n)};N.prototype.set=function(e,t){return O(e,t,this)};var P=l(i),F=n.removeHash=function(e,t,n){return B(P,e,t,n)};N.prototype.removeHash=N.prototype.deleteHash=function(e,t){return F(e,t,this)};var z=n.remove=function(e,t){return F(t._config.hash(e),e,t)};N.prototype.remove=N.prototype.delete=function(e){return z(e,this)};var W=n.beginMutation=function(e){return new N(e._editable+1,e._edit+1,e._config,e._root,e._size)};N.prototype.beginMutation=function(){return W(this)};var G=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};N.prototype.endMutation=function(){return G(this)};var $=n.mutate=function(e,t){var n=W(t);return e(n),G(n)};N.prototype.mutate=function(e){return $(e,this)};var j=function(e){return e&&K(e[0],e[1],e[2],e[3],e[4])},K=function(e,t,n,o,r){for(;n<e;){var a=t[n++];if(a&&!_(a))return H(a,o,[e,t,n,o,r])}return j(r)},H=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var o=e.children;return K(o.length,o,0,t,n);default:return j(n)}},q={done:!0};function Z(e){this.v=e}Z.prototype.next=function(){if(!this.v)return q;var e=this.v;return this.v=j(e.rest),e},Z.prototype[Symbol.iterator]=function(){return this};var Y=function(e,t){return new Z(H(e._root,t))},J=function(e){return[e.key,e.value]},X=n.entries=function(e){return Y(e,J)};N.prototype.entries=N.prototype[Symbol.iterator]=function(){return X(this)};var Q=function(e){return e.key},ee=n.keys=function(e){return Y(e,Q)};N.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=N.prototype.values=function(e){return Y(e,te)};N.prototype.values=function(){return ne(this)};var oe=n.fold=function(e,t,n){var o=n._root;if(1===o.type)return e(t,o.value,o.key);for(var r=[o.children],a=void 0;a=r.pop();)for(var s=0,i=a.length;s<i;){var l=a[s++];l&&l.type&&(1===l.type?t=e(t,l.value,l.key):r.push(l.children))}return t};N.prototype.fold=function(e,t){return oe(e,t,this)};var re=n.forEach=function(e,t){return oe(function(n,o,r){return e(o,r,t)},null,t)};N.prototype.forEach=function(e){return re(e,this)};var ae=n.count=function(e){return e._size};N.prototype.count=function(){return ae(this)},Object.defineProperty(N.prototype,"size",{get:N.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n});class De{constructor(e){d(this,"_map",void 0),this._map=new Map(null==e?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return Pe(this)}toMap(){return new Map(this._map)}}class Oe{constructor(e){if(d(this,"_hamt",Ie.empty.beginMutation()),e instanceof Oe){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return Pe(this)}toMap(){return new Map(this._hamt)}}function Pe(e){return P("recoil_hamt_2020")?new Oe(e):new De(e)}var Fe={persistentMap:Pe},ze=Fe.persistentMap,We=Object.freeze({__proto__:null,persistentMap:ze});function Ge(e,...t){const n=new Set;e:for(const o of e){for(const e of t)if(e.has(o))continue e;n.add(o)}return n}var $e=Ge;function je(e,t){const n=new Map;return e.forEach((e,o)=>{n.set(o,t(e,o))}),n}var Ke=je;function He(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function qe(e){return{nodeDeps:Ke(e.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Ke(e.nodeToNodeSubscriptions,e=>new Set(e))}}function Ze(e,t,n,o){const{nodeDeps:r,nodeToNodeSubscriptions:a}=n,s=r.get(e);if(s&&o&&s!==o.nodeDeps.get(e))return;r.set(e,t);const i=null==s?t:$e(t,s);for(const l of i){a.has(l)||a.set(l,new Set),c(a.get(l)).add(e)}if(s){const n=$e(s,t);for(const t of n){if(!a.has(t))return;const n=c(a.get(t));n.delete(e),0===n.size&&a.delete(t)}}}function Ye(e,t,n,o){var r,a,s,i;const l=n.getState();o!==l.currentTree.version&&o!==(null===(r=l.nextTree)||void 0===r?void 0:r.version)&&o!==(null===(a=l.previousTree)||void 0===a?void 0:a.version)&&j("Tried to save dependencies to a discarded tree");const u=n.getGraph(o);if(Ze(e,t,u),o===(null===(s=l.previousTree)||void 0===s?void 0:s.version)){Ze(e,t,n.getGraph(l.currentTree.version),u)}if(o===(null===(i=l.previousTree)||void 0===i?void 0:i.version)||o===l.currentTree.version){var c;const o=null===(c=l.nextTree)||void 0===c?void 0:c.version;if(void 0!==o){Ze(e,t,n.getGraph(o),u)}}}var Je={cloneGraph:qe,graph:He,saveDepsToStore:Ye};let Xe=0;const Qe=()=>Xe++;let et=0;const tt=()=>et++;let nt=0;const ot=()=>nt++;var rt={getNextTreeStateVersion:Qe,getNextStoreID:tt,getNextComponentID:ot};const{persistentMap:at}=We,{graph:st}=Je,{getNextTreeStateVersion:it}=rt;function lt(){const e=it();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:at(),nonvalidatedAtoms:at()}}function ut(){const e=lt();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,st()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var ct={makeEmptyTreeState:lt,makeEmptyStoreState:ut,getNextTreeStateVersion:it};class dt{}function ft(){return new dt}var ht={RetentionZone:dt,retentionZone:ft};function pt(e,t){const n=new Set(e);return n.add(t),n}function vt(e,t){const n=new Set(e);return n.delete(t),n}function _t(e,t,n){const o=new Map(e);return o.set(t,n),o}function yt(e,t,n){const o=new Map(e);return o.set(t,n(o.get(t))),o}function St(e,t){const n=new Map(e);return n.delete(t),n}function mt(e,t){const n=new Map(e);return t.forEach(e=>n.delete(e)),n}var gt={setByAddingToSet:pt,setByDeletingFromSet:vt,mapBySettingInMap:_t,mapByUpdatingInMap:yt,mapByDeletingFromMap:St,mapByDeletingMultipleFromMap:mt};function*Rt(e,t){let n=0;for(const o of e)t(o,n++)&&(yield o)}var Tt=Rt;function bt(e,t){return new Proxy(e,{get:(e,n)=>(!(n in e)&&n in t&&(e[n]=t[n]()),e[n]),ownKeys:e=>Object.keys(e)})}var wt=bt;const{getNode:At,getNodeMaybe:Et,recoilValuesForKeys:Nt}=Ce,{RetentionZone:Lt}=ht,{setByAddingToSet:kt}=gt,Vt=Object.freeze(new Set);class Ut extends Error{}function Ct(e,t,n){if(!P("recoil_memory_managament_2020"))return()=>void 0;const{nodesRetainedByZone:o}=e.getState().retention;function r(e){let n=o.get(e);n||o.set(e,n=new Set),n.add(t)}if(n instanceof Lt)r(n);else if(Array.isArray(n))for(const a of n)r(a);return()=>{if(!P("recoil_memory_managament_2020"))return;const{retention:o}=e.getState();function r(e){const n=o.nodesRetainedByZone.get(e);null==n||n.delete(t),n&&0===n.size&&o.nodesRetainedByZone.delete(e)}if(n instanceof Lt)r(n);else if(Array.isArray(n))for(const e of n)r(e)}}function Mt(e,t,n,o){const r=e.getState();if(r.nodeCleanupFunctions.has(n))return;const a=At(n),s=Ct(e,n,a.retainedBy),i=a.init(e,t,o);r.nodeCleanupFunctions.set(n,()=>{i(),s()})}function xt(e,t,n){Mt(e,e.getState().currentTree,t,n)}function Bt(e,t){var n;const o=e.getState();null===(n=o.nodeCleanupFunctions.get(t))||void 0===n||n(),o.nodeCleanupFunctions.delete(t)}function It(e,t,n){return Mt(e,t,n,"get"),At(n).get(e,t)}function Dt(e,t,n){return At(n).peek(e,t)}function Ot(e,t,n){var o;const r=Et(t);return null==r||null===(o=r.invalidate)||void 0===o||o.call(r,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:kt(e.dirtyAtoms,t)}}function Pt(e,t,n,o){const r=At(n);if(null==r.set)throw new Ut(`Attempt to set read-only RecoilValue: ${n}`);const a=r.set;return Mt(e,t,n,"set"),a(e,t,o)}function Ft(e,t,n){const o=e.getState(),r=e.getGraph(t.version),a=At(n).nodeType;return wt({type:a},{loadable:()=>Dt(e,t,n),isActive:()=>o.knownAtoms.has(n)||o.knownSelectors.has(n),isSet:()=>"selector"!==a&&t.atomValues.has(n),isModified:()=>t.dirtyAtoms.has(n),deps:()=>{var e;return Nt(null!==(e=r.nodeDeps.get(n))&&void 0!==e?e:[])},subscribers:()=>{var r,a;return{nodes:Nt(Tt(zt(e,t,new Set([n])),e=>e!==n)),components:_e(null!==(r=null===(a=o.nodeToComponentSubscriptions.get(n))||void 0===a?void 0:a.values())&&void 0!==r?r:[],([e])=>({name:e}))}}})}function zt(e,t,n){const o=new Set,r=Array.from(n),a=e.getGraph(t.version);for(let i=r.pop();i;i=r.pop()){var s;o.add(i);const e=null!==(s=a.nodeToNodeSubscriptions.get(i))&&void 0!==s?s:Vt;for(const t of e)o.has(t)||r.push(t)}return o}var Wt={getNodeLoadable:It,peekNodeLoadable:Dt,setNodeValue:Pt,initializeNode:xt,cleanUpNode:Bt,setUnvalidatedAtomValue_DEPRECATED:Ot,peekNodeInfo:Ft,getDownstreamNodes:zt};let Gt=null;function $t(e){Gt=e}function jt(){var e;null===(e=Gt)||void 0===e||e()}var Kt={setInvalidateMemoizedSnapshot:$t,invalidateMemoizedSnapshot:jt};const{getDownstreamNodes:Ht,getNodeLoadable:qt,setNodeValue:Zt}=Wt,{getNextComponentID:Yt}=rt,{getNode:Jt,getNodeMaybe:Xt}=Ce,{DefaultValue:Qt}=Ce,{reactMode:en}=Q,{AbstractRecoilValue:tn,RecoilState:nn,RecoilValueReadOnly:on,isRecoilValue:rn}=ue,{invalidateMemoizedSnapshot:an}=Kt;function sn(e,{key:t},n=e.getState().currentTree){var o,r;const a=e.getState();n.version!==a.currentTree.version&&n.version!==(null===(o=a.nextTree)||void 0===o?void 0:o.version)&&n.version!==(null===(r=a.previousTree)||void 0===r?void 0:r.version)&&j("Tried to read from a discarded tree");const s=qt(e,n,t);return"loading"===s.state&&s.contents.catch(()=>{}),s}function ln(e,t){const n=e.clone();return t.forEach((e,t)=>{"hasValue"===e.state&&e.contents instanceof Qt?n.delete(t):n.set(t,e)}),n}function un(e,t,{key:n},o){if("function"==typeof o){const r=qt(e,t,n);if("loading"===r.state){const e=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw j(e),s(e)}if("hasError"===r.state)throw r.contents;return o(r.contents)}return o}function cn(e,t,n){if("set"===n.type){const{recoilValue:o,valueOrUpdater:r}=n,a=un(e,t,o,r),s=Zt(e,t,o.key,a);for(const[e,n]of s.entries())dn(t,e,n)}else if("setLoadable"===n.type){const{recoilValue:{key:e},loadable:o}=n;dn(t,e,o)}else if("markModified"===n.type){const{recoilValue:{key:e}}=n;t.dirtyAtoms.add(e)}else if("setUnvalidated"===n.type){var o;const{recoilValue:{key:e},unvalidatedValue:r}=n,a=Xt(e);null==a||null===(o=a.invalidate)||void 0===o||o.call(a,t),t.atomValues.delete(e),t.nonvalidatedAtoms.set(e,r),t.dirtyAtoms.add(e)}else j(`Unknown action ${n.type}`)}function dn(e,t,n){"hasValue"===n.state&&n.contents instanceof Qt?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function fn(e,t){e.replaceState(n=>{const o=_n(n);for(const r of t)cn(e,o,r);return yn(e,o),an(),o})}function hn(e,t){if(pn.length){const n=pn[pn.length-1];let o=n.get(e);o||n.set(e,o=[]),o.push(t)}else fn(e,[t])}const pn=[];function vn(){const e=new Map;return pn.push(e),()=>{for(const[t,n]of e)fn(t,n);pn.pop()!==e&&j("Incorrect order of batch popping")}}function _n(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function yn(e,t){const n=Ht(e,t,t.dirtyAtoms);for(const a of n){var o,r;null===(o=Xt(a))||void 0===o||null===(r=o.invalidate)||void 0===r||r.call(o,t)}}function Sn(e,t,n){hn(e,{type:"set",recoilValue:t,valueOrUpdater:n})}function mn(e,t,n){if(n instanceof Qt)return Sn(e,t,n);hn(e,{type:"setLoadable",recoilValue:t,loadable:n})}function gn(e,t){hn(e,{type:"markModified",recoilValue:t})}function Rn(e,t,n){hn(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})}function Tn(e,{key:t},n,o=null){const r=Yt(),a=e.getState();a.nodeToComponentSubscriptions.has(t)||a.nodeToComponentSubscriptions.set(t,new Map),c(a.nodeToComponentSubscriptions.get(t)).set(r,[null!=o?o:"<not captured>",n]);const s=en();if(s.early&&("LEGACY"===s.mode||"MUTABLE_SOURCE"===s.mode)){const o=e.getState().nextTree;o&&o.dirtyAtoms.has(t)&&n(o)}return{release:()=>{const n=e.getState(),o=n.nodeToComponentSubscriptions.get(t);void 0!==o&&o.has(r)?(o.delete(r),0===o.size&&n.nodeToComponentSubscriptions.delete(t)):j(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`)}}}function bn(e,t){var n;const{currentTree:o}=e.getState(),r=Jt(t.key);null===(n=r.clearCache)||void 0===n||n.call(r,e,o)}var wn={RecoilValueReadOnly:on,AbstractRecoilValue:tn,RecoilState:nn,getRecoilValueAsLoadable:sn,setRecoilValue:Sn,setRecoilValueLoadable:mn,markRecoilValueModified:gn,setUnvalidatedRecoilValue:Rn,subscribeToRecoilValue:Tn,isRecoilValue:rn,applyAtomValueWrites:ln,batchStart:vn,writeLoadableToTreeState:dn,invalidateDownstreams:yn,copyTreeState:_n,refreshRecoilValue:bn};function An(e,t,n){const o=e.entries();let r=o.next();for(;!r.done;){const a=r.value;if(t.call(n,a[1],a[0],e))return!0;r=o.next()}return!1}var En=An;const{cleanUpNode:Nn}=Wt,{deleteNodeConfigIfPossible:Ln,getNode:kn}=Ce,{RetentionZone:Vn}=ht,Un=12e4,Cn=new Set;function Mn(e,t){const n=e.getState(),o=n.currentTree;if(n.nextTree)return void j("releaseNodesNowOnCurrentTree should only be called at the end of a batch");const r=new Set;for(const s of t)if(s instanceof Vn)for(const e of Dn(n,s))r.add(e);else r.add(s);const a=xn(e,r);for(const s of a)In(e,o,s)}function xn(e,t){const n=e.getState(),o=n.currentTree,r=e.getGraph(o.version),a=new Set,s=new Set;return function t(i){const l=new Set;const u=Bn(e,o,i,a,s);for(const e of u){var c;if("recoilRoot"===kn(e).retainedBy){s.add(e);continue}if((null!==(c=n.retention.referenceCounts.get(e))&&void 0!==c?c:0)>0){s.add(e);continue}if(On(e).some(e=>n.retention.referenceCounts.get(e))){s.add(e);continue}const t=r.nodeToNodeSubscriptions.get(e);t&&En(t,e=>s.has(e))?s.add(e):(a.add(e),l.add(e))}const d=new Set;for(const e of l)for(const t of null!==(f=r.nodeDeps.get(e))&&void 0!==f?f:Cn){var f;a.has(t)||d.add(t)}d.size&&t(d)}(t),a}function Bn(e,t,n,o,r){const a=e.getGraph(t.version),s=[],i=new Set;for(;n.size>0;)l(c(n.values().next().value));return s;function l(e){if(o.has(e)||r.has(e))return void n.delete(e);if(i.has(e))return;const t=a.nodeToNodeSubscriptions.get(e);if(t)for(const n of t)l(n);i.add(e),n.delete(e),s.push(e)}}function In(e,t,n){if(!P("recoil_memory_managament_2020"))return;Nn(e,n);const o=e.getState();o.knownAtoms.delete(n),o.knownSelectors.delete(n),o.nodeTransactionSubscriptions.delete(n),o.retention.referenceCounts.delete(n);const r=On(n);for(const l of r){var a;null===(a=o.retention.nodesRetainedByZone.get(l))||void 0===a||a.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const s=o.graphsByVersion.get(t.version);if(s){const e=s.nodeDeps.get(n);if(void 0!==e){s.nodeDeps.delete(n);for(const t of e){var i;null===(i=s.nodeToNodeSubscriptions.get(t))||void 0===i||i.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}Ln(n)}function Dn(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:Cn}function On(e){const t=kn(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof Vn?[t]:t}function Pn(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):Mn(e,new Set([t]))}function Fn(e,t,n){var o;if(!P("recoil_memory_managament_2020"))return;const r=e.getState().retention.referenceCounts,a=(null!==(o=r.get(t))&&void 0!==o?o:0)+n;0===a?zn(e,t):r.set(t,a)}function zn(e,t){if(!P("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),Pn(e,t)}function Wn(e){if(!P("recoil_memory_managament_2020"))return;const t=e.getState();Mn(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function Gn(e){return void 0===e?"recoilRoot":e}var $n={SUSPENSE_TIMEOUT_MS:12e4,updateRetainCount:Fn,updateRetainCountToZero:zn,releaseScheduledRetainablesNow:Wn,retainedByOptionWithDefault:Gn};const{unstable_batchedUpdates:jn}=n.default;var Kn={unstable_batchedUpdates:jn};const{unstable_batchedUpdates:Hn}=Kn;var qn={unstable_batchedUpdates:Hn};const{batchStart:Zn}=wn,{unstable_batchedUpdates:Yn}=qn;let Jn=Yn||(e=>e());const Xn=e=>{Jn=e},Qn=()=>Jn,eo=e=>{Jn(()=>{let t=()=>void 0;try{t=Zn(),e()}finally{t()}})};var to={getBatcher:Qn,setBatcher:Xn,batchUpdates:eo};function*no(e){for(const t of e)for(const e of t)yield e}var oo=no;const ro="undefined"==typeof Window||"undefined"==typeof window,ao=e=>!ro&&(e===window||e instanceof Window),so="undefined"!=typeof navigator&&"ReactNative"===navigator.product;var io={isSSR:ro,isReactNative:so,isWindow:ao};function lo(e,t){let n;return(...o)=>{n||(n={});const r=t(...o);return Object.hasOwnProperty.call(n,r)||(n[r]=e(...o)),n[r]}}function uo(e,t){let n,o;return(...r)=>{const a=t(...r);return n===a?o:(n=a,o=e(...r))}}function co(e,t){let n,o;return[(...r)=>{const a=t(...r);return n===a?o:(n=a,o=e(...r))},()=>{n=null}]}var fo={memoizeWithArgsHash:lo,memoizeOneWithArgsHash:uo,memoizeOneWithArgsHashAndInvalidation:co};const{batchUpdates:ho}=to,{initializeNode:po,peekNodeInfo:vo}=Wt,{graph:_o}=Je,{getNextStoreID:yo}=rt,{DEFAULT_VALUE:So,recoilValues:mo,recoilValuesForKeys:go}=Ce,{AbstractRecoilValue:Ro,getRecoilValueAsLoadable:To,setRecoilValue:bo,setUnvalidatedRecoilValue:wo}=wn,{updateRetainCount:Ao}=$n,{setInvalidateMemoizedSnapshot:Eo}=Kt,{getNextTreeStateVersion:No,makeEmptyStoreState:Lo}=ct,{isSSR:ko}=io,{memoizeOneWithArgsHashAndInvalidation:Vo}=fo,Uo="\nRecoil Snapshots only last for the duration of the callback they are provided to. To keep a Snapshot longer, do this:\n\n  const release = snapshot.retain();\n  try {\n    await doSomethingWithSnapshot(snapshot);\n  } finally {\n    release();\n  }\n\nThis is currently a DEV-only warning but will become a thrown exception in the next release of Recoil.\n";class Co{constructor(e,t){d(this,"_store",void 0),d(this,"_refCount",1),d(this,"getLoadable",e=>(this.checkRefCount_INTERNAL(),To(this._store,e))),d(this,"getPromise",e=>(this.checkRefCount_INTERNAL(),this.getLoadable(e).toPromise())),d(this,"getNodes_UNSTABLE",e=>{if(this.checkRefCount_INTERNAL(),!0===(null==e?void 0:e.isModified)){if(!1===(null==e?void 0:e.isInitialized))return[];const t=this._store.getState().currentTree;return go(t.dirtyAtoms)}const t=this._store.getState().knownAtoms,n=this._store.getState().knownSelectors;return null==(null==e?void 0:e.isInitialized)?mo.values():!0===e.isInitialized?go(oo([t,n])):Tt(mo.values(),({key:e})=>!t.has(e)&&!n.has(e))}),d(this,"getInfo_UNSTABLE",({key:e})=>(this.checkRefCount_INTERNAL(),vo(this._store,this._store.getState().currentTree,e))),d(this,"map",e=>{this.checkRefCount_INTERNAL();const t=new Oo(this,ho);return e(t),t}),d(this,"asyncMap",async e=>{this.checkRefCount_INTERNAL();const t=new Oo(this,ho);return t.retain(),await e(t),t.autoRelease_INTERNAL(),t}),this._store={storeID:yo(),parentStoreID:t,getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{const n=e.graphsByVersion;if(n.has(t))return c(n.get(t));const o=_o();return n.set(t,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw s("Cannot subscribe to Snapshots")}};for(const n of this._store.getState().knownAtoms)po(this._store,n,"get"),Ao(this._store,n,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0&&j("Attempt to retain() Snapshot that was already released."),this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){ko||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,0===this._refCount){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!P("recoil_memory_managament_2020"))return}else this._refCount}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){P("recoil_memory_managament_2020")&&this._refCount}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function Mo(e,t,n=!1){const o=e.getState(),r=n?No():t.version;return{currentTree:{version:n?r:t.version,stateID:n?r:t.stateID,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(o.knownAtoms),knownSelectors:new Set(o.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(r,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(_e(o.nodeCleanupFunctions.entries(),([e])=>[e,()=>{}]))}}function xo(e){const t=new Co(Lo());return null!=e?t.map(e):t}const[Bo,Io]=Vo((e,t)=>{var n;const o=e.getState(),r="latest"===t?null!==(n=o.nextTree)&&void 0!==n?n:o.currentTree:c(o.previousTree);return new Co(Mo(e,r),e.storeID)},(e,t)=>{var n,o;return String(t)+String(e.storeID)+String(null===(n=e.getState().nextTree)||void 0===n?void 0:n.version)+String(e.getState().currentTree.version)+String(null===(o=e.getState().previousTree)||void 0===o?void 0:o.version)});function Do(e,t="latest"){const n=Bo(e,t);return n.isRetained()?n:(Io(),Bo(e,t))}Eo(Io);class Oo extends Co{constructor(e,t){super(Mo(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),d(this,"_batch",void 0),d(this,"set",(e,t)=>{this.checkRefCount_INTERNAL();const n=this.getStore_INTERNAL();this._batch(()=>{Ao(n,e.key,1),bo(this.getStore_INTERNAL(),e,t)})}),d(this,"reset",e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();this._batch(()=>{Ao(t,e.key,1),bo(this.getStore_INTERNAL(),e,So)})}),d(this,"setUnvalidatedAtomValues_DEPRECATED",e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();ho(()=>{for(const[n,o]of e.entries())Ao(t,n,1),wo(t,new Ro(n),o)})}),this._batch=t}}var Po={Snapshot:Co,MutableSnapshot:Oo,freshSnapshot:xo,cloneSnapshot:Do},Fo=Po.Snapshot,zo=Po.MutableSnapshot,Wo=Po.freshSnapshot,Go=Po.cloneSnapshot,$o=Object.freeze({__proto__:null,Snapshot:Fo,MutableSnapshot:zo,freshSnapshot:Wo,cloneSnapshot:Go});function jo(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return t}var Ko=jo;const{useRef:Ho}=t.default;function qo(e){const t=Ho(e);return t.current===e&&"function"==typeof e&&(t.current=e()),t}var Zo=qo;const{getNextTreeStateVersion:Yo,makeEmptyStoreState:Jo}=ct,{cleanUpNode:Xo,getDownstreamNodes:Qo,initializeNode:er,setNodeValue:tr,setUnvalidatedAtomValue_DEPRECATED:nr}=Wt,{graph:or}=Je,{cloneGraph:rr}=Je,{getNextStoreID:ar}=rt,{createMutableSource:sr,reactMode:ir}=Q,{applyAtomValueWrites:lr}=wn,{releaseScheduledRetainablesNow:ur}=$n,{freshSnapshot:cr}=$o,{useCallback:dr,useContext:fr,useEffect:hr,useMemo:pr,useRef:vr,useState:_r}=t.default;function yr(){throw s("This component must be used inside a <RecoilRoot> component.")}const Sr=Object.freeze({storeID:ar(),getState:yr,replaceState:yr,getGraph:yr,subscribeToTransactions:yr,addTransactionMetadata:yr});let mr=!1;function gr(e){if(mr)throw s("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(null===t.nextTree){P("recoil_memory_managament_2020")&&P("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&ur(e);const n=t.currentTree.version,o=Yo();t.nextTree={...t.currentTree,version:o,stateID:o,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(o,rr(c(t.graphsByVersion.get(n))))}}const Rr=t.default.createContext({current:Sr}),Tr=()=>fr(Rr),br=t.default.createContext(null);function wr(){const e=fr(br);return null==e&&pe("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e}function Ar(e,t,n){const o=Qo(e,n,n.dirtyAtoms);for(const r of o){const e=t.nodeToComponentSubscriptions.get(r);if(e)for(const[t,[o,r]]of e)r(n)}}function Er(e){const t=e.getState(),n=t.currentTree,o=n.dirtyAtoms;if(o.size){for(const[n,r]of t.nodeTransactionSubscriptions)if(o.has(n))for(const[t,o]of r)o(e);for(const[n,o]of t.transactionSubscriptions)o(e);(!ir().early||t.suspendedComponentResolvers.size>0)&&(Ar(e,t,n),t.suspendedComponentResolvers.forEach(e=>e()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(e=>e(n)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function Nr(e){const t=e.getState();t.commitDepth++;try{const{nextTree:n}=t;if(null==n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,Er(e),null!=t.previousTree?t.graphsByVersion.delete(t.previousTree.version):j("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,P("recoil_memory_managament_2020")&&null==n&&ur(e)}finally{t.commitDepth--}}function Lr({setNotifyBatcherOfChange:e}){const t=Tr(),[,n]=_r([]);return e(()=>n({})),hr(()=>(e(()=>n({})),()=>{e(()=>{})}),[e]),hr(()=>{xe.enqueueExecution("Batcher",()=>{Nr(t.current)})}),null}function kr(e,t){const n=Jo();return t({set:(t,o)=>{const r=n.currentTree,a=tr(e,r,t.key,o),s=new Set(a.keys()),i=r.nonvalidatedAtoms.clone();for(const e of s)i.delete(e);n.currentTree={...r,dirtyAtoms:Ko(r.dirtyAtoms,s),atomValues:lr(r.atomValues,a),nonvalidatedAtoms:i}},setUnvalidatedAtomValues:e=>{e.forEach((e,t)=>{n.currentTree=nr(n.currentTree,t,e)})}}),n}function Vr(e){const t=cr(e),n=t.getStore_INTERNAL().getState();return t.retain(),n.nodeCleanupFunctions.forEach(e=>e()),n.nodeCleanupFunctions.clear(),n}let Ur=0;function Cr({initializeState_DEPRECATED:e,initializeState:n,store_INTERNAL:o,children:r}){let a;const s=e=>{const t=a.current.graphsByVersion;if(t.has(e))return c(t.get(e));const n=or();return t.set(e,n),n},i=(e,t)=>{if(null==t){const{transactionSubscriptions:t}=h.current.getState(),n=Ur++;return t.set(n,e),{release:()=>{t.delete(n)}}}{const{nodeTransactionSubscriptions:n}=h.current.getState();n.has(t)||n.set(t,new Map);const o=Ur++;return c(n.get(t)).set(o,e),{release:()=>{const e=n.get(t);e&&(e.delete(o),0===e.size&&n.delete(t))}}}},l=e=>{gr(h.current);for(const t of Object.keys(e))c(h.current.getState().nextTree).transactionMetadata[t]=e[t]},u=e=>{gr(h.current);const t=c(a.current.nextTree);let n;try{mr=!0,n=e(t)}finally{mr=!1}n!==t&&(a.current.nextTree=n,ir().early&&Ar(h.current,a.current,n),c(d.current)())},d=vr(null),f=dr(e=>{d.current=e},[d]),h=Zo(()=>null!=o?o:{storeID:ar(),getState:()=>a.current,replaceState:u,getGraph:s,subscribeToTransactions:i,addTransactionMetadata:l});null!=o&&(h.current=o),a=Zo(()=>null!=e?kr(h.current,e):null!=n?Vr(n):Jo());const p=pr(()=>null==sr?void 0:sr(a,()=>a.current.currentTree.version),[a]);return hr(()=>{const e=h.current;for(const t of new Set(e.getState().knownAtoms))er(e,t,"get");return()=>{for(const t of e.getState().knownAtoms)Xo(e,t)}},[h]),t.default.createElement(Rr.Provider,{value:h},t.default.createElement(br.Provider,{value:p},t.default.createElement(Lr,{setNotifyBatcherOfChange:f}),r))}function Mr(e){const{override:n,...o}=e,r=Tr();return!1===n&&r.current!==Sr?e.children:t.default.createElement(Cr,o)}function xr(){return Tr().current.storeID}var Br={RecoilRoot:Mr,useStoreRef:Tr,useRecoilMutableSource:wr,useRecoilStoreID:xr,notifyComponents_FOR_TESTING:Ar,sendEndOfBatchNotifications_FOR_TESTING:Er};function Ir(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,o=e.length;n<o;n++)if(e[n]!==t[n])return!1;return!0}var Dr=Ir;const{useEffect:Or,useRef:Pr}=t.default;function Fr(e){const t=Pr();return Or(()=>{t.current=e}),t.current}var zr=Fr;const{useStoreRef:Wr}=Br,{SUSPENSE_TIMEOUT_MS:Gr}=$n,{updateRetainCount:$r}=$n,{RetentionZone:jr}=ht,{useEffect:Kr,useRef:Hr}=t.default,{isSSR:qr}=io;function Zr(e){if(P("recoil_memory_managament_2020"))return Yr(e)}function Yr(e){const t=(Array.isArray(e)?e:[e]).map(e=>e instanceof jr?e:e.key),n=Wr();Kr(()=>{if(!P("recoil_memory_managament_2020"))return;const e=n.current;if(o.current&&!qr)window.clearTimeout(o.current),o.current=null;else for(const n of t)$r(e,n,1);return()=>{for(const n of t)$r(e,n,-1)}},[n,...t]);const o=Hr(),r=zr(t);if(!(qr||void 0!==r&&Dr(r,t))){const e=n.current;for(const n of t)$r(e,n,1);if(r)for(const t of r)$r(e,t,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(const n of t)$r(e,n,-1)},Gr)}}var Jr=Zr;function Xr(){return"<component name not available>"}var Qr=Xr;const{batchUpdates:ea}=to,{DEFAULT_VALUE:ta}=Ce,{currentRendererSupportsUseSyncExternalStore:na,reactMode:oa,useMutableSource:ra,useSyncExternalStore:aa}=Q,{useRecoilMutableSource:sa,useStoreRef:ia}=Br,{isRecoilValue:la}=ue,{AbstractRecoilValue:ua,getRecoilValueAsLoadable:ca,setRecoilValue:da,setUnvalidatedRecoilValue:fa,subscribeToRecoilValue:ha}=wn,{useCallback:pa,useEffect:va,useMemo:_a,useRef:ya,useState:Sa}=t.default,{setByAddingToSet:ma}=gt,{isSSR:ga}=io;function Ra(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state){throw new Promise(t=>{const o=n.current.getState().suspendedComponentResolvers;o.add(t),ga&&l(e.contents)&&e.contents.finally(()=>{o.delete(t)})})}throw"hasError"===e.state?e.contents:s(`Invalid value of loadable atom "${t.key}"`)}function Ta(e,t){if(!la(e))throw s(`Invalid argument to ${t}: expected an atom or selector but got ${String(e)}`)}function ba(){const e=Qr(),t=ia(),[,n]=Sa([]),o=ya(new Set);o.current=new Set;const r=ya(new Set),a=ya(new Map),s=pa(e=>{const t=a.current.get(e);t&&(t.release(),a.current.delete(e))},[a]),i=pa((e,t)=>{a.current.has(t)&&n([])},[]);return va(()=>{const n=t.current;$e(o.current,r.current).forEach(t=>{if(a.current.has(t))return void pe(`Double subscription to RecoilValue "${t}"`);const o=ha(n,new ua(t),e=>i(e,t),e);a.current.set(t,o),n.getState().nextTree?n.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{i(n.getState(),t)}):i(n.getState(),t)}),$e(r.current,o.current).forEach(e=>{s(e)}),r.current=o.current}),va(()=>{const n=a.current;return $e(o.current,new Set(n.keys())).forEach(o=>{const r=ha(t.current,new ua(o),e=>i(e,o),e);n.set(o,r)}),()=>n.forEach((e,t)=>s(t))},[e,t,s,i]),_a(()=>{function e(e){return n=>{da(t.current,e,n)}}function n(e){var n;o.current.has(e.key)||(o.current=ma(o.current,e.key));const r=t.current.getState();return ca(t.current,e,oa().early&&null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree)}function r(e){return Ra(n(e),e,t)}return{getRecoilValue:r,getRecoilValueLoadable:n,getRecoilState:function(t){return[r(t),e(t)]},getRecoilStateLoadable:function(t){return[n(t),e(t)]},getSetRecoilState:e,getResetRecoilState:function(e){return()=>da(t.current,e,ta)}}},[o,t])}const wa={current:0};function Aa(e){const t=ia(),n=Qr(),o=pa(()=>{var n;const o=t.current,r=o.getState(),a=oa().early&&null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree;return{loadable:ca(o,e,a),key:e.key}},[t,e]),r=pa(e=>{let t;return()=>{var n,o;const r=e();return null!==(n=t)&&void 0!==n&&n.loadable.is(r.loadable)&&(null===(o=t)||void 0===o?void 0:o.key)===r.key?t:(t=r,r)}},[]),a=_a(()=>r(o),[o,r]),s=pa(o=>{const r=t.current;return ha(r,e,o,n).release},[t,e,n]);return aa(s,a,a).loadable}function Ea(e){const t=ia(),n=pa(()=>{var n;const o=t.current,r=o.getState(),a=oa().early&&null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree;return ca(o,e,a)},[t,e]),o=pa(()=>n(),[n]),r=Qr(),a=pa((o,a)=>{const s=t.current;return ha(s,e,()=>{if(!P("recoil_suppress_rerender_in_callback"))return a();const e=n();u.current.is(e)||a(),u.current=e},r).release},[t,e,r,n]),i=sa();if(null==i)throw s("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const l=ra(i,o,a),u=ya(l);return va(()=>{u.current=l}),l}function Na(e){const t=ia(),n=Qr(),o=pa(()=>{var n;const o=t.current,r=o.getState(),a=oa().early&&null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree;return ca(o,e,a)},[t,e]),r=pa(()=>({loadable:o(),key:e.key}),[o,e.key]),a=pa(e=>{const t=r();return e.loadable.is(t.loadable)&&e.key===t.key?e:t},[r]);va(()=>{const o=ha(t.current,e,e=>{i(a)},n);return i(a),o.release},[n,e,t,a]);const[s,i]=Sa(r);return s.key!==e.key?r().loadable:s.loadable}function La(e){const t=ia(),[,n]=Sa([]),o=Qr(),r=pa(()=>{var n;const o=t.current,r=o.getState(),a=oa().early&&null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree;return ca(o,e,a)},[t,e]),a=r(),s=ya(a);return va(()=>{s.current=a}),va(()=>{const a=t.current,i=a.getState(),l=ha(a,e,e=>{var t;if(!P("recoil_suppress_rerender_in_callback"))return n([]);const o=r();null!==(t=s.current)&&void 0!==t&&t.is(o)||n(o),s.current=o},o);if(i.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{s.current=null,n([])});else{var u;if(!P("recoil_suppress_rerender_in_callback"))return n([]);const e=r();null!==(u=s.current)&&void 0!==u&&u.is(e)||n(e),s.current=e}return l.release},[o,r,e,t]),a}function ka(e){return P("recoil_memory_managament_2020")&&Jr(e),{TRANSITION_SUPPORT:Na,SYNC_EXTERNAL_STORE:na()?Aa:Na,MUTABLE_SOURCE:Ea,LEGACY:La}[oa().mode](e)}function Va(e){const t=ia();return Ra(ka(e),e,t)}function Ua(e){const t=ia();return pa(n=>{da(t.current,e,n)},[t,e])}function Ca(e){const t=ia();return pa(()=>{da(t.current,e,ta)},[t,e])}function Ma(e){return[Va(e),Ua(e)]}function xa(e){return[ka(e),Ua(e)]}function Ba(){const e=ia();return(t,n={})=>{ea(()=>{e.current.addTransactionMetadata(n),t.forEach((t,n)=>fa(e.current,new ua(n),t))})}}function Ia(e){return P("recoil_memory_managament_2020")&&Jr(e),Na(e)}function Da(e){const t=ia();return Ra(Ia(e),e,t)}function Oa(e){return[Da(e),Ua(e)]}var Pa={recoilComponentGetRecoilValueCount_FOR_TESTING:wa,useRecoilInterface:ba,useRecoilState:Ma,useRecoilStateLoadable:xa,useRecoilValue:Va,useRecoilValueLoadable:ka,useResetRecoilState:Ca,useSetRecoilState:Ua,useSetUnvalidatedAtomValues:Ba,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Ia,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Da,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Oa};function Fa(e,t){const n=new Map;for(const[o,r]of e)t(r,o)&&n.set(o,r);return n}var za=Fa;function Wa(e,t){const n=new Set;for(const o of e)t(o)&&n.add(o);return n}var Ga=Wa;function $a(...e){const t=new Map;for(let n=0;n<e.length;n++){const o=e[n].keys();let r;for(;!(r=o.next()).done;)t.set(r.value,e[n].get(r.value))}return t}var ja=$a;const{batchUpdates:Ka}=to,{DEFAULT_VALUE:Ha,getNode:qa,nodes:Za}=Ce,{useStoreRef:Ya}=Br,{AbstractRecoilValue:Ja,setRecoilValueLoadable:Xa}=wn,{SUSPENSE_TIMEOUT_MS:Qa}=$n,{cloneSnapshot:es}=$o,{useCallback:ts,useEffect:ns,useRef:os,useState:rs}=t.default,{isSSR:as}=io;function ss(e){const t=Ya();ns(()=>{return t.current.subscribeToTransactions(e).release},[e,t])}function is(e){const t=e.atomValues.toMap(),n=Ke(za(t,(e,t)=>{const n=qa(t).persistence_UNSTABLE;return null!=n&&"none"!==n.type&&"hasValue"===e.state}),e=>e.contents);return ja(e.nonvalidatedAtoms.toMap(),n)}function ls(e){ss(ts(t=>{let n=t.getState().previousTree;const o=t.getState().currentTree;n||(j("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),n=t.getState().currentTree);const r=is(o),a=is(n),s=Ke(Za,e=>{var t,n,o,r;return{persistence_UNSTABLE:{type:null!==(t=null===(n=e.persistence_UNSTABLE)||void 0===n?void 0:n.type)&&void 0!==t?t:"none",backButton:null!==(o=null===(r=e.persistence_UNSTABLE)||void 0===r?void 0:r.backButton)&&void 0!==o&&o}}}),i=Ga(o.dirtyAtoms,e=>r.has(e)||a.has(e));e({atomValues:r,previousAtomValues:a,atomInfo:s,modifiedAtoms:i,transactionMetadata:{...o.transactionMetadata}})},[e]))}function us(e){ss(ts(t=>{const n=es(t,"latest"),o=es(t,"previous");e({snapshot:n,previousSnapshot:o})},[e]))}function cs(){const e=Ya(),[t,n]=rs(()=>es(e.current)),o=zr(t),r=os(),a=os();if(ss(ts(e=>n(es(e)),[])),ns(()=>{const e=t.retain();var n;r.current&&!as&&(window.clearTimeout(r.current),r.current=null,null===(n=a.current)||void 0===n||n.call(a),a.current=null);return()=>{window.setTimeout(e,10)}},[t]),o!==t&&!as){var s;if(r.current)window.clearTimeout(r.current),r.current=null,null===(s=a.current)||void 0===s||s.call(a),a.current=null;a.current=t.retain(),r.current=window.setTimeout(()=>{var e;r.current=null,null===(e=a.current)||void 0===e||e.call(a),a.current=null},Qa)}return t}function ds(e,t){var n;const o=e.getState(),r=null!==(n=o.nextTree)&&void 0!==n?n:o.currentTree,a=t.getStore_INTERNAL().getState().currentTree;Ka(()=>{const n=new Set;for(const e of[r.atomValues.keys(),a.atomValues.keys()])for(const t of e){var o,s;(null===(o=r.atomValues.get(t))||void 0===o?void 0:o.contents)!==(null===(s=a.atomValues.get(t))||void 0===s?void 0:s.contents)&&qa(t).shouldRestoreFromSnapshots&&n.add(t)}n.forEach(t=>{Xa(e,new Ja(t),a.atomValues.has(t)?c(a.atomValues.get(t)):Ha)}),e.replaceState(e=>({...e,stateID:t.getID()}))})}function fs(){const e=Ya();return ts(t=>ds(e.current,t),[e])}var hs={useRecoilSnapshot:cs,gotoSnapshot:ds,useGotoRecoilSnapshot:fs,useRecoilTransactionObserver:us,useTransactionObservation_DEPRECATED:ls,useTransactionSubscription_DEPRECATED:ss};const{peekNodeInfo:ps}=Wt,{useStoreRef:vs}=Br;function _s(){const e=vs();return({key:t})=>ps(e.current,e.current.getState().currentTree,t)}var ys=_s;const{reactMode:Ss}=Q,{RecoilRoot:ms,useStoreRef:gs}=Br,{useMemo:Rs}=t.default;function Ts(){"MUTABLE_SOURCE"===Ss().mode&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const e=gs().current;return Rs(()=>{return function({children:n}){return t.default.createElement(ms,{store_INTERNAL:e},n)}},[e])}var bs=Ts;const{loadableWithValue:ws}=C,{initializeNode:As}=Wt,{DEFAULT_VALUE:Es,getNode:Ns}=Ce,{copyTreeState:Ls,getRecoilValueAsLoadable:ks,invalidateDownstreams:Vs,writeLoadableToTreeState:Us}=wn;function Cs(e){return"atom"===Ns(e.key).nodeType}class Ms{constructor(e,t){d(this,"_store",void 0),d(this,"_treeState",void 0),d(this,"_changes",void 0),d(this,"get",e=>{if(this._changes.has(e.key))return this._changes.get(e.key);if(!Cs(e))throw s("Reading selectors within atomicUpdate is not supported");const t=ks(this._store,e,this._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:s(`Expected Recoil atom ${e.key} to have a value, but it is in a loading state.`)}),d(this,"set",(e,t)=>{if(!Cs(e))throw s("Setting selectors within atomicUpdate is not supported");if("function"==typeof t){const n=this.get(e);this._changes.set(e.key,t(n))}else As(this._store,e.key,"set"),this._changes.set(e.key,t)}),d(this,"reset",e=>{this.set(e,Es)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(0===this._changes.size)return this._treeState;const e=Ls(this._treeState);for(const[t,n]of this._changes)Us(e,t,ws(n));return Vs(this._store,e),e}}function xs(e){return t=>{e.replaceState(n=>{const o=new Ms(e,n);return t(o),o.newTreeState_INTERNAL()})}}var Bs={atomicUpdater:xs},Is=Bs.atomicUpdater,Ds=Object.freeze({__proto__:null,atomicUpdater:Is});function Os(e,t){if(!e)throw new Error(t)}var Ps=Os,Fs=Ps;const{atomicUpdater:zs}=Ds,{batchUpdates:Ws}=to,{DEFAULT_VALUE:Gs}=Ce,{useStoreRef:$s}=Br,{refreshRecoilValue:js,setRecoilValue:Ks}=wn,{cloneSnapshot:Hs}=$o,{gotoSnapshot:qs}=hs,{useCallback:Zs}=t.default;class Ys{}const Js=new Ys;function Xs(e,t,n,o){let r,a=Js;var i;(Ws(()=>{const i="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!=typeof t)throw s(i);const l=wt({...null!=o?o:{},set:(t,n)=>Ks(e,t,n),reset:t=>Ks(e,t,Gs),refresh:t=>js(e,t),gotoSnapshot:t=>qs(e,t),transact_UNSTABLE:t=>zs(e)(t)},{snapshot:()=>{const t=Hs(e);return r=t.retain(),t}}),u=t(l);if("function"!=typeof u)throw s(i);a=u(...n)}),a instanceof Ys&&Fs(!1),l(a))?a=a.finally(()=>{var e;null===(e=r)||void 0===e||e()}):null===(i=r)||void 0===i||i();return a}function Qs(e,t){const n=$s();return Zs((...t)=>Xs(n.current,e,t),null!=t?[...t,n]:void 0)}var ei={recoilCallback:Xs,useRecoilCallback:Qs};const{useStoreRef:ti}=Br,{refreshRecoilValue:ni}=wn,{useCallback:oi}=t.default;function ri(e){const t=ti();return oi(()=>{const n=t.current;ni(n,e)},[e,t])}var ai=ri;const{atomicUpdater:si}=Ds,{useStoreRef:ii}=Br,{useMemo:li}=t.default;function ui(e,t){const n=ii();return li(()=>(...t)=>{si(n.current)(n=>{e(n)(...t)})},null!=t?[...t,n]:void 0)}var ci=ui;class di{constructor(e){d(this,"value",void 0),this.value=e}}var fi={WrappedValue:di},hi=fi.WrappedValue,pi=Object.freeze({__proto__:null,WrappedValue:hi});const{isFastRefreshEnabled:vi}=Q;class _i extends Error{}class yi{constructor(e){var t,n,o;d(this,"_name",void 0),d(this,"_numLeafs",void 0),d(this,"_root",void 0),d(this,"_onHit",void 0),d(this,"_onSet",void 0),d(this,"_mapNodeValue",void 0),this._name=null==e?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=null!==(t=null==e?void 0:e.onHit)&&void 0!==t?t:()=>{},this._onSet=null!==(n=null==e?void 0:e.onSet)&&void 0!==n?n:()=>{},this._mapNodeValue=null!==(o=null==e?void 0:e.mapNodeValue)&&void 0!==o?o:e=>e}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}getLeafNode(e,t){if(null==this._root)return;let n=this._root;for(;n;){if(null==t||t.onNodeVisit(n),"leaf"===n.type)return this._onHit(n),n;const o=this._mapNodeValue(e(n.nodeKey));n=n.branches.get(o)}}set(e,t,n){const o=()=>{var o,r,a,s;let i,l;for(const[t,p]of e){var u,c,d;const e=this._root;if("leaf"===(null==e?void 0:e.type))throw this.invalidCacheError();const o=i;if("branch"!==(i=null!==(u=i=o?o.branches.get(l):e)&&void 0!==u?u:{type:"branch",nodeKey:t,parent:o,branches:new Map,branchKey:l}).type||i.nodeKey!==t)throw this.invalidCacheError();null==o||o.branches.set(l,i),null==n||null===(c=n.onNodeVisit)||void 0===c||c.call(n,i),l=this._mapNodeValue(p),this._root=null!==(d=this._root)&&void 0!==d?d:i}const f=i?null===(o=i)||void 0===o?void 0:o.branches.get(l):this._root;if(null!=f&&("leaf"!==f.type||f.branchKey!==l))throw this.invalidCacheError();const h={type:"leaf",value:t,parent:i,branchKey:l};null===(r=i)||void 0===r||r.branches.set(l,h),this._root=null!==(a=this._root)&&void 0!==a?a:h,this._numLeafs++,this._onSet(h),null==n||null===(s=n.onNodeVisit)||void 0===s||s.call(n,h)};try{o()}catch(r){if(!(r instanceof _i))throw r;this.clear(),o()}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let n=e.parent,o=e.branchKey;for(;n;){var r;if(n.branches.delete(o),n===t)return 0===n.branches.size?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(n.branches.size>0)break;o=null===(r=n)||void 0===r?void 0:r.branchKey,n=n.parent}for(;n!==t;n=n.parent)if(null==n)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=vi()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw j(e+(null!=this._name?` - ${this._name}`:"")),new _i}}var Si={TreeCache:yi},mi=Si.TreeCache,gi=Object.freeze({__proto__:null,TreeCache:mi});class Ri{constructor(e){var t;d(this,"_maxSize",void 0),d(this,"_size",void 0),d(this,"_head",void 0),d(this,"_tail",void 0),d(this,"_map",void 0),d(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(t=e.mapKey)&&void 0!==t?t:e=>e}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){const n=this._keyMapper(e);this._map.get(n)&&this.delete(e);const o=this.head(),r={key:e,right:o,left:null,value:t};o?o.left=r:this._tail=r,this._map.set(n,r),this._head=r,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const n=c(this._map.get(t)),o=n.right,r=n.left;o&&(o.left=n.left),r&&(r.right=n.right),n===this.head()&&(this._head=o),n===this.tail()&&(this._tail=r),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Ti={LRUCache:Ri},bi=Ti.LRUCache,wi=Object.freeze({__proto__:null,LRUCache:bi});const{LRUCache:Ai}=wi,{TreeCache:Ei}=gi;function Ni({name:e,maxSize:t,mapNodeValue:n=(e=>e)}){const o=new Ai({maxSize:t}),r=new Ei({name:e,mapNodeValue:n,onHit:e=>{o.set(e,!0)},onSet:e=>{const n=o.tail();o.set(e,!0),n&&r.size()>t&&r.delete(n.key)}});return r}var Li=Ni;const ki=15;function Vi(e,t,n){if("string"==typeof e&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null==t?void 0:t.allowFunctions))throw s("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(null===e)return"null";var o;if("object"!=typeof e)return null!==(o=JSON.stringify(e))&&void 0!==o?o:"";if(l(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((e,n)=>Vi(e,t,n.toString()))}]`;if("function"==typeof e.toJSON)return Vi(e.toJSON(n),t,n);if(e instanceof Map){const o={};for(const[n,r]of e)o["string"==typeof n?n:Vi(n,t)]=r;return Vi(o,t,n)}return e instanceof Set?Vi(Array.from(e).sort((e,n)=>Vi(e,t).localeCompare(Vi(n,t))),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]?Vi(Array.from(e),t,n):`{${Object.keys(e).filter(t=>void 0!==e[t]).sort().map(n=>`${Vi(n,t)}:${Vi(e[n],t,n)}`).join(",")}}`}function Ui(e,t={allowFunctions:!1}){return Vi(e,t)}var Ci=Ui;const{TreeCache:Mi}=gi,xi={equality:"reference",eviction:"keep-all",maxSize:1/0};function Bi({equality:e=xi.equality,eviction:t=xi.eviction,maxSize:n=xi.maxSize}=xi,o){return Di(t,n,Ii(e),o)}function Ii(e){switch(e){case"reference":return e=>e;case"value":return e=>Ci(e)}throw s(`Unrecognized equality policy ${e}`)}function Di(e,t,n,o){switch(e){case"keep-all":return new Mi({name:o,mapNodeValue:n});case"lru":return Li({name:o,maxSize:c(t),mapNodeValue:n});case"most-recent":return Li({name:o,maxSize:1,mapNodeValue:n})}throw s(`Unrecognized eviction policy ${e}`)}var Oi=Bi;function Pi(e){var t,n;if("undefined"==typeof window)return!1;const o=null!==(n=(null!=e?null!==(t=e.ownerDocument)&&void 0!==t?t:e:document).defaultView)&&void 0!==n?n:window;return!(null==e||!("function"==typeof o.Node?e instanceof o.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}var Fi=Pi;const{isReactNative:zi,isWindow:Wi}=io;function Gi(e){if(null===e||"object"!=typeof e)return!0;switch(typeof e.$$typeof){case"symbol":case"number":return!0}return null!=e["@@__IMMUTABLE_ITERABLE__@@"]||null!=e["@@__IMMUTABLE_KEYED__@@"]||null!=e["@@__IMMUTABLE_INDEXED__@@"]||null!=e["@@__IMMUTABLE_ORDERED__@@"]||null!=e["@@__IMMUTABLE_RECORD__@@"]||(!!Fi(e)||(!!l(e)||(e instanceof Error||(!!ArrayBuffer.isView(e)||!(zi||!Wi(e))))))}function $i(e){if("object"==typeof e&&!Gi(e)){Object.freeze(e);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];"object"!=typeof n||null==n||Object.isFrozen(n)||$i(n)}Object.seal(e)}}var ji=$i;function Ki(e){return()=>null}var Hi={startPerfBlock:Ki};const{isLoadable:qi,loadableWithError:Zi,loadableWithPromise:Yi,loadableWithValue:Ji}=C,{WrappedValue:Xi}=pi,{getNodeLoadable:Qi,peekNodeLoadable:el,setNodeValue:tl}=Wt,{saveDepsToStore:nl}=Je,{DEFAULT_VALUE:ol,getConfigDeletionHandler:rl,getNode:al,registerNode:sl}=Ce,{isRecoilValue:il}=ue,{markRecoilValueModified:ll}=wn,{retainedByOptionWithDefault:ul}=$n,{recoilCallback:cl}=ei,{startPerfBlock:dl}=Hi;class fl{}const hl=new fl,pl=[],vl=new Map,_l=(()=>{let e=0;return()=>e++})();function yl(e){let t=null;const{key:n,get:o,cachePolicy_UNSTABLE:r}=e,a=null!=e.set?e.set:void 0;const i=new Set,u=Oi(null!=r?r:{equality:"reference",eviction:"keep-all"},n),d=ul(e.retainedBy_UNSTABLE),f=new Map;let h=0;function p(){return!P("recoil_memory_managament_2020")||h>0}function v(e){return e.getState().knownSelectors.add(n),h++,()=>{h--}}function _(){return void 0!==rl(n)&&!p()}function y(e,t,n,o,r){V(t,o,r),S(e,n)}function S(e,t){k(e,t)&&L(e),m(t,!0)}function m(e,n){const o=vl.get(e);if(null!=o){for(const e of o)ll(e,c(t));n&&vl.delete(e)}}function g(e,t){let n=vl.get(t);null==n&&vl.set(t,n=new Set),n.add(e)}function R(e,t,n,o,r,a){return t.then(o=>{if(!p())throw L(e),hl;null!=a.loadingDepKey&&a.loadingDepPromise===t?n.atomValues.set(a.loadingDepKey,Ji(o)):e.getState().knownSelectors.forEach(e=>{n.atomValues.delete(e)});const s=w(e,n);if(s&&"loading"!==s.state){if((k(e,r)||null==N(e))&&S(e,r),"hasValue"===s.state)return s.contents;throw s.contents}if(!k(e,r)){const t=E(e,n);if(null!=t)return t.loadingLoadable.contents}const[i,l]=b(e,n,r);if("loading"!==i.state&&y(e,n,r,i,l),"hasError"===i.state)throw i.contents;return i.contents}).catch(t=>{if(t instanceof fl)throw hl;if(!p())throw L(e),hl;const a=Zi(t);throw y(e,n,r,a,o),t})}function T(e,t,o,r){var a,s,l,u,c,d,f;(k(e,r)||t.version===(null===(a=e.getState())||void 0===a?void 0:null===(s=a.currentTree)||void 0===s?void 0:s.version)||t.version===(null===(l=e.getState())||void 0===l?void 0:null===(u=l.nextTree)||void 0===u?void 0:u.version))&&nl(n,o,e,null!==(c=null===(d=e.getState())||void 0===d?void 0:null===(f=d.nextTree)||void 0===f?void 0:f.version)&&void 0!==c?c:e.getState().currentTree.version);for(const n of o)i.add(n)}function b(e,r,a){const i=dl(n);let u=!0,d=!0;const f=()=>{i(),d=!1};let h,v,_=!1;const S={loadingDepKey:null,loadingDepPromise:null},g=new Map;function b({key:t}){const n=Qi(e,r,t);switch(g.set(t,n),u||(T(e,r,new Set(g.keys()),a),function(e,t){k(e,t)&&(c(N(e)).stateVersions.clear(),m(t,!1))}(e,a)),n.state){case"hasValue":return n.contents;case"hasError":throw n.contents;case"loading":throw S.loadingDepKey=t,S.loadingDepPromise=n.contents,n.contents}throw s("Invalid Loadable state")}const w=n=>(...o)=>{if(d)throw s("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return null==t&&Fs(!1),cl(e,n,o,{node:t})};try{h=o({get:b,getCallback:w}),h=il(h)?b(h):h,qi(h)&&("hasError"===h.state&&(_=!0),h=h.contents),l(h)?h=function(e,t,n,o,r,a){return t.then(t=>{if(!p())throw L(e),hl;const a=Ji(t);return y(e,n,r,a,o),t}).catch(t=>{if(!p())throw L(e),hl;if(l(t))return R(e,t,n,o,r,a);const s=Zi(t);throw y(e,n,r,s,o),t})}(e,h,r,g,a,S).finally(f):f(),h=h instanceof Xi?h.value:h}catch(A){l(h=A)?h=R(e,h,r,g,a,S).finally(f):(_=!0,f())}return v=_?Zi(h):l(h)?Yi(h):Ji(h),u=!1,function(e,t,n){if(k(e,t)){const t=N(e);null!=t&&(t.depValuesDiscoveredSoFarDuringAsyncWork=n)}}(e,a,g),T(e,r,new Set(g.keys()),a),[v,g]}function w(e,t){let o=t.atomValues.get(n);if(null!=o)return o;const r=new Set;try{o=u.get(n=>("string"!=typeof n&&Fs(!1),Qi(e,t,n).contents),{onNodeVisit:e=>{"branch"===e.type&&e.nodeKey!==n&&r.add(e.nodeKey)}})}catch(i){throw s(`Problem with cache lookup for selector "${n}": ${i.message}`)}var a;o&&(t.atomValues.set(n,o),T(e,t,r,null===(a=N(e))||void 0===a?void 0:a.executionID));return o}function A(e,t){const n=w(e,t);if(null!=n)return L(e),n;const o=E(e,t);var r;if(null!=o)return"loading"===(null===(r=o.loadingLoadable)||void 0===r?void 0:r.state)&&g(e,o.executionID),o.loadingLoadable;const a=_l(),[s,i]=b(e,t,a);return"loading"===s.state?(!function(e,t,n,o,r){f.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:o,executionID:t,loadingLoadable:n,stateVersions:new Map([[r.version,!0]])})}(e,a,s,i,t),g(e,a)):(L(e),V(t,s,i)),s}function E(e,t){const n=oo([f.has(e)?[c(f.get(e))]:[],_e(Tt(f,([t])=>t!==e),([,e])=>e)]);function o(n){for(const[o,r]of n)if(!Qi(e,t,o).is(r))return!0;return!1}for(const r of n){if(r.stateVersions.get(t.version)||!o(r.depValuesDiscoveredSoFarDuringAsyncWork))return r.stateVersions.set(t.version,!0),r;r.stateVersions.set(t.version,!1)}}function N(e){return f.get(e)}function L(e){f.delete(e)}function k(e,t){var n;return t===(null===(n=N(e))||void 0===n?void 0:n.executionID)}function V(e,t,o){e.atomValues.set(n,t);try{u.set(function(e){return Array.from(e.entries()).map(([e,t])=>[e,t.contents])}(o),t)}catch(r){throw s(`Problem with setting cache for selector "${n}": ${r.message}`)}}function U(e,t){const o=t.atomValues.get(n);return null!=o?o:u.get(n=>{var o;return"string"!=typeof n&&Fs(!1),null===(o=el(e,t,n))||void 0===o?void 0:o.contents})}function C(e,t){return function(e){if(pl.includes(n)){const e=`Recoil selector has circular dependencies: ${pl.slice(pl.indexOf(n)).join("  ")}`;return Zi(s(e))}pl.push(n);try{return e()}finally{pl.pop()}}(()=>A(e,t))}function M(e){e.atomValues.delete(n)}function x(e,n){null==t&&Fs(!1);for(const t of i){var o;const r=al(t);null===(o=r.clearCache)||void 0===o||o.call(r,e,n)}i.clear(),M(n),u.clear(),ll(e,t)}if(null!=a){return t=sl({key:n,nodeType:"selector",peek:U,get:C,set:(e,t,o)=>{let r=!1;const i=new Map;function u({key:o}){if(r)throw s("Recoil: Async selector sets are not currently supported.");const a=Qi(e,t,o);if("hasValue"===a.state)return a.contents;if("loading"===a.state){const e=`Getting value of asynchronous atom or selector "${o}" in a pending state while setting selector "${n}" is not yet supported.`;throw j(e),s(e)}throw a.contents}function c(n,o){if(r){const e="Recoil: Async selector sets are not currently supported.";throw j(e),s(e)}const a="function"==typeof o?o(u(n)):o;tl(e,t,n.key,a).forEach((e,t)=>i.set(t,e))}const d=a({set:c,get:u,reset:function(e){c(e,ol)}},o);if(void 0!==d)throw l(d)?s("Recoil: Async selector sets are not currently supported."):s("Recoil: selector set should be a void function.");return r=!0,i},init:v,invalidate:M,clearCache:x,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:d})}return t=sl({key:n,nodeType:"selector",peek:U,get:C,init:v,invalidate:M,clearCache:x,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:d})}yl.value=(e=>new Xi(e));var Sl=yl;const{isLoadable:ml,loadableWithError:gl,loadableWithPromise:Rl,loadableWithValue:Tl}=C,{WrappedValue:bl}=pi,{peekNodeInfo:wl}=Wt,{DEFAULT_VALUE:Al,DefaultValue:El,getConfigDeletionHandler:Nl,registerNode:Ll,setConfigDeletionHandler:kl}=Ce,{isRecoilValue:Vl}=ue,{getRecoilValueAsLoadable:Ul,markRecoilValueModified:Cl,setRecoilValue:Ml,setRecoilValueLoadable:xl}=wn,{retainedByOptionWithDefault:Bl}=$n,Il=e=>e instanceof bl?e.value:e;function Dl(e){const{key:t,persistence_UNSTABLE:n}=e,o=Bl(e.retainedBy_UNSTABLE);let r=0;function a(e){return Rl(e.then(e=>(i=Tl(e),e)).catch(e=>{throw i=gl(e),e}))}let i=l(e.default)?a(e.default):ml(e.default)?"loading"===e.default.state?a(e.default.contents):e.default:Tl(Il(e.default));f(i.contents);let u=void 0;const d=new Map;function f(e){return e}function h(e,n){var o,r;return null!==(o=null!==(r=n.atomValues.get(t))&&void 0!==r?r:u)&&void 0!==o?o:i}const p=Ll({key:t,nodeType:"atom",peek:h,get:function(e,o){if(o.atomValues.has(t))return c(o.atomValues.get(t));if(o.nonvalidatedAtoms.has(t)){if(null!=u)return u;if(null==n)return pe(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),i;const e=o.nonvalidatedAtoms.get(t),r=n.validator(e,Al),a=r instanceof El?i:Tl(r);return u=a}return i},set:function(e,n,o){if(n.atomValues.has(t)){const e=c(n.atomValues.get(t));if("hasValue"===e.state&&o===e.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&o instanceof El)return new Map;return f(o),u=void 0,(new Map).set(t,Tl(o))},init:function(n,o,a){var u;if(r++,n.getState().knownAtoms.add(t),"loading"===i.state){const e=()=>{var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||Cl(n,p)};i.contents.finally(e)}const c=null!==(u=e.effects)&&void 0!==u?u:e.effects_UNSTABLE;if(null!=c){let e=Al,r=!0,u=!1,R=null;function v(a){if(r&&a.key===t){const t=e;return t instanceof El?h(0,o):l(t)?Rl(t.then(e=>e instanceof El?i.toPromise():e)):Tl(t)}return Ul(n,a)}function _(e){return v(e).toPromise()}function y(o){var a;const s=wl(n,null!==(a=n.getState().nextTree)&&void 0!==a?a:n.getState().currentTree,o.key);return!r||o.key!==t||e instanceof El?s:{...s,isSet:!0,loadable:v(o)}}const T=t=>o=>{if(r){const n=v(p),r="hasValue"===n.state?n.contents:Al;e="function"==typeof o?o(r):o,l(e)&&(e=e.then(e=>(R={effect:t,value:e},e)))}else{if(l(o))throw s("Setting atoms to async values is not implemented.");"function"!=typeof o&&(R={effect:t,value:Il(o)}),Ml(n,p,"function"==typeof o?e=>{const n=Il(o(e));return R={effect:t,value:n},n}:Il(o))}},b=e=>()=>T(e)(Al),w=e=>o=>{var r;const{release:a}=n.subscribeToTransactions(n=>{var r;let{currentTree:a,previousTree:s}=n.getState();s||(j("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),s=a);const l=null!==(r=a.atomValues.get(t))&&void 0!==r?r:i;if("hasValue"===l.state){var u,c,d,f;const n=l.contents,r=null!==(u=s.atomValues.get(t))&&void 0!==u?u:i,h="hasValue"===r.state?r.contents:Al;(null===(c=R)||void 0===c?void 0:c.effect)!==e||(null===(d=R)||void 0===d?void 0:d.value)!==n?o(n,h,!a.atomValues.has(t)):(null===(f=R)||void 0===f?void 0:f.effect)===e&&(R=null)}},t);d.set(n,[...null!==(r=d.get(n))&&void 0!==r?r:[],a])};for(const t of c)try{const o=t({node:p,storeID:n.storeID,parentStoreID_UNSTABLE:n.parentStoreID,trigger:a,setSelf:T(t),resetSelf:b(t),onSet:w(t),getPromise:_,getLoadable:v,getInfo_UNSTABLE:y});var S;null!=o&&d.set(n,[...null!==(S=d.get(n))&&void 0!==S?S:[],o])}catch(g){e=g,u=!0}if(r=!1,!(e instanceof El)){var m;const r=u?gl(e):l(e)?Rl(function(e,n){const o=n.then(n=>{var r,a;return(null===(a=(null!==(r=e.getState().nextTree)&&void 0!==r?r:e.getState().currentTree).atomValues.get(t))||void 0===a?void 0:a.contents)===o&&Ml(e,p,n),n}).catch(n=>{var r,a;throw(null===(a=(null!==(r=e.getState().nextTree)&&void 0!==r?r:e.getState().currentTree).atomValues.get(t))||void 0===a?void 0:a.contents)===o&&xl(e,p,gl(n)),n});return o}(n,e)):Tl(Il(e));f(r.contents),o.atomValues.set(t,r),null===(m=n.getState().nextTree)||void 0===m||m.atomValues.set(t,r)}}return()=>{var e;r--,null===(e=d.get(n))||void 0===e||e.forEach(e=>e()),d.delete(n)}},invalidate:function(){u=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==Nl(t)&&r<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:o});return p}function Ol(e){const{...t}=e,n="default"in e?e.default:new Promise(()=>{});return Vl(n)?Pl({...t,default:n}):Dl({...t,default:n})}function Pl(e){const t=Ol({...e,default:Al,persistence_UNSTABLE:void 0===e.persistence_UNSTABLE?void 0:{...e.persistence_UNSTABLE,validator:t=>t instanceof El?t:c(e.persistence_UNSTABLE).validator(t,Al)},effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE}),n=Sl({key:`${e.key}__withFallback`,get:({get:n})=>{const o=n(t);return o instanceof El?e.default:o},set:({set:e},n)=>e(t,n),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return kl(n.key,Nl(e.key)),n}Ol.value=(e=>new bl(e));var Fl=Ol;class zl{constructor(e){var t;d(this,"_map",void 0),d(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(t=null==e?void 0:e.mapKey)&&void 0!==t?t:e=>e}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var Wl={MapCache:zl},Gl=Wl.MapCache,$l=Object.freeze({__proto__:null,MapCache:Gl});const{LRUCache:jl}=wi,{MapCache:Kl}=$l,Hl={equality:"reference",eviction:"none",maxSize:1/0};function ql({equality:e=Hl.equality,eviction:t=Hl.eviction,maxSize:n=Hl.maxSize}=Hl){return Yl(t,n,Zl(e))}function Zl(e){switch(e){case"reference":return e=>e;case"value":return e=>Ci(e)}throw s(`Unrecognized equality policy ${e}`)}function Yl(e,t,n){switch(e){case"keep-all":return new Kl({mapKey:n});case"lru":return new jl({mapKey:n,maxSize:c(t)});case"most-recent":return new jl({mapKey:n,maxSize:1})}throw s(`Unrecognized eviction policy ${e}`)}var Jl=ql;const{setConfigDeletionHandler:Xl}=Ce;function Ql(e){var t,n;const o=Jl({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n,r;const a=o.get(t);if(null!=a)return a;const{cachePolicyForParams_UNSTABLE:s,...i}=e,l="default"in e?e.default:new Promise(()=>{}),u=Fl({...i,key:`${e.key}__${null!==(n=Ci(t))&&void 0!==n?n:"void"}`,default:"function"==typeof l?l(t):l,retainedBy_UNSTABLE:"function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects:"function"==typeof e.effects?e.effects(t):"function"==typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):null!==(r=e.effects)&&void 0!==r?r:e.effects_UNSTABLE});return o.set(t,u),Xl(u.key,()=>{o.delete(t)}),u}}var eu=Ql;const{setConfigDeletionHandler:tu}=Ce;let nu=0;function ou(e){var t,n;const o=Jl({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;let r;try{r=o.get(t)}catch(d){throw s(`Problem with cache lookup for selector ${e.key}: ${d.message}`)}if(null!=r)return r;const a=`${e.key}__selectorFamily/${null!==(n=Ci(t,{allowFunctions:!0}))&&void 0!==n?n:"void"}/${nu++}`,i=n=>e.get(t)(n),l=e.cachePolicy_UNSTABLE,u="function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;let c;if(null!=e.set){const n=e.set;c=Sl({key:a,get:i,set:(e,o)=>n(t)(e,o),cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else c=Sl({key:a,get:i,cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return o.set(t,c),tu(c.key,()=>{o.delete(t)}),c}}var ru=ou;const au=ru({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function su(e){return au(e)}var iu=su;const lu=ru({key:"__error",get:e=>()=>{throw s(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function uu(e){return lu(e)}var cu=uu;function du(e){return e}var fu=du;const{loadableWithError:hu,loadableWithPromise:pu,loadableWithValue:vu}=C;function _u(e,t){const n=Array(t.length).fill(void 0),o=Array(t.length).fill(void 0);for(const[a,s]of t.entries())try{n[a]=e(s)}catch(r){o[a]=r}return[n,o]}function yu(e){return null!=e&&!l(e)}function Su(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function mu(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((e,n,o)=>({...e,[n]:t[o]}),{})}function gu(e,t,n){return mu(e,n.map((e,n)=>null==e?vu(t[n]):l(e)?pu(e):hu(e)))}function Ru(e,t){return t.map((t,n)=>void 0===t?e[n]:t)}const Tu=ru({key:"__waitForNone",get:e=>({get:t})=>{const n=Su(e),[o,r]=_u(t,n);return gu(e,o,r)},dangerouslyAllowMutability:!0}),bu=ru({key:"__waitForAny",get:e=>({get:t})=>{const n=Su(e),[o,r]=_u(t,n);return r.some(e=>!l(e))?gu(e,o,r):new Promise(t=>{for(const[n,a]of r.entries())l(a)&&a.then(a=>{o[n]=a,r[n]=void 0,t(gu(e,o,r))}).catch(a=>{r[n]=a,t(gu(e,o,r))})})},dangerouslyAllowMutability:!0}),wu=ru({key:"__waitForAll",get:e=>({get:t})=>{const n=Su(e),[o,r]=_u(t,n);if(r.every(e=>null==e))return mu(e,o);const a=r.find(yu);if(null!=a)throw a;return Promise.all(r).then(t=>mu(e,Ru(o,t)))},dangerouslyAllowMutability:!0}),Au=ru({key:"__waitForAllSettled",get:e=>({get:t})=>{const n=Su(e),[o,r]=_u(t,n);return r.every(e=>!l(e))?gu(e,o,r):Promise.all(r.map((e,t)=>l(e)?e.then(e=>{o[t]=e,r[t]=void 0}).catch(e=>{o[t]=void 0,r[t]=e}):null)).then(()=>gu(e,o,r))},dangerouslyAllowMutability:!0}),Eu=ru({key:"__noWait",get:e=>({get:t})=>{try{return Sl.value(vu(t(e)))}catch(n){return Sl.value(l(n)?pu(n):hu(n))}},dangerouslyAllowMutability:!0});var Nu={waitForNone:Tu,waitForAny:bu,waitForAll:wu,waitForAllSettled:Au,noWait:Eu};const{RecoilLoadable:Lu}=C,{DefaultValue:ku}=Ce,{RecoilRoot:Vu,useRecoilStoreID:Uu}=Br,{isRecoilValue:Cu}=ue,{retentionZone:Mu}=ht,{freshSnapshot:xu}=$o,{useRecoilState:Bu,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Iu,useRecoilStateLoadable:Du,useRecoilValue:Ou,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Pu,useRecoilValueLoadable:Fu,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:zu,useResetRecoilState:Wu,useSetRecoilState:Gu}=Pa,{useGotoRecoilSnapshot:$u,useRecoilSnapshot:ju,useRecoilTransactionObserver:Ku}=hs,{useRecoilCallback:Hu}=ei,{noWait:qu,waitForAll:Zu,waitForAllSettled:Yu,waitForAny:Ju,waitForNone:Xu}=Nu;var Qu={DefaultValue:ku,isRecoilValue:Cu,RecoilLoadable:Lu,RecoilEnv:D,RecoilRoot:Vu,useRecoilStoreID:Uu,useRecoilBridgeAcrossReactRoots_UNSTABLE:bs,atom:Fl,selector:Sl,atomFamily:eu,selectorFamily:ru,constSelector:iu,errorSelector:cu,readOnlySelector:fu,noWait:qu,waitForNone:Xu,waitForAny:Ju,waitForAll:Zu,waitForAllSettled:Yu,useRecoilValue:Ou,useRecoilValueLoadable:Fu,useRecoilState:Bu,useRecoilStateLoadable:Du,useSetRecoilState:Gu,useResetRecoilState:Wu,useGetRecoilValueInfo_UNSTABLE:ys,useRecoilRefresher_UNSTABLE:ai,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:zu,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Pu,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Iu,useRecoilCallback:Hu,useRecoilTransaction_UNSTABLE:ci,useGotoRecoilSnapshot:$u,useRecoilSnapshot:ju,useRecoilTransactionObserver_UNSTABLE:Ku,snapshot_UNSTABLE:xu,useRetain:Jr,retentionZone:Mu},ec=Qu.DefaultValue;exports.DefaultValue=ec;var tc=Qu.isRecoilValue;exports.isRecoilValue=tc;var nc=Qu.RecoilLoadable;exports.RecoilLoadable=nc;var oc=Qu.RecoilEnv;exports.RecoilEnv=oc;var rc=Qu.RecoilRoot;exports.RecoilRoot=rc;var ac=Qu.useRecoilStoreID;exports.useRecoilStoreID=ac;var sc=Qu.useRecoilBridgeAcrossReactRoots_UNSTABLE;exports.useRecoilBridgeAcrossReactRoots_UNSTABLE=sc;var ic=Qu.atom;exports.atom=ic;var lc=Qu.selector;exports.selector=lc;var uc=Qu.atomFamily;exports.atomFamily=uc;var cc=Qu.selectorFamily;exports.selectorFamily=cc;var dc=Qu.constSelector;exports.constSelector=dc;var fc=Qu.errorSelector;exports.errorSelector=fc;var hc=Qu.readOnlySelector;exports.readOnlySelector=hc;var pc=Qu.noWait;exports.noWait=pc;var vc=Qu.waitForNone;exports.waitForNone=vc;var _c=Qu.waitForAny;exports.waitForAny=_c;var yc=Qu.waitForAll;exports.waitForAll=yc;var Sc=Qu.waitForAllSettled;exports.waitForAllSettled=Sc;var mc=Qu.useRecoilValue;exports.useRecoilValue=mc;var gc=Qu.useRecoilValueLoadable;exports.useRecoilValueLoadable=gc;var Rc=Qu.useRecoilState;exports.useRecoilState=Rc;var Tc=Qu.useRecoilStateLoadable;exports.useRecoilStateLoadable=Tc;var bc=Qu.useSetRecoilState;exports.useSetRecoilState=bc;var wc=Qu.useResetRecoilState;exports.useResetRecoilState=wc;var Ac=Qu.useGetRecoilValueInfo_UNSTABLE;exports.useGetRecoilValueInfo_UNSTABLE=Ac;var Ec=Qu.useRecoilRefresher_UNSTABLE;exports.useRecoilRefresher_UNSTABLE=Ec;var Nc=Qu.useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE;exports.useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE=Nc;var Lc=Qu.useRecoilValue_TRANSITION_SUPPORT_UNSTABLE;exports.useRecoilValue_TRANSITION_SUPPORT_UNSTABLE=Lc;var kc=Qu.useRecoilState_TRANSITION_SUPPORT_UNSTABLE;exports.useRecoilState_TRANSITION_SUPPORT_UNSTABLE=kc;var Vc=Qu.useRecoilCallback;exports.useRecoilCallback=Vc;var Uc=Qu.useRecoilTransaction_UNSTABLE;exports.useRecoilTransaction_UNSTABLE=Uc;var Cc=Qu.useGotoRecoilSnapshot;exports.useGotoRecoilSnapshot=Cc;var Mc=Qu.useRecoilSnapshot;exports.useRecoilSnapshot=Mc;var xc=Qu.useRecoilTransactionObserver_UNSTABLE;exports.useRecoilTransactionObserver_UNSTABLE=xc;var Bc=Qu.snapshot_UNSTABLE;exports.snapshot_UNSTABLE=Bc;var Ic=Qu.useRetain;exports.useRetain=Ic;var Dc=Qu.retentionZone;exports.retentionZone=Dc;var Oc=Qu;exports.default=Oc;
},{"react":"n8MK","react-dom":"NKHc","process":"ylCS"}],"itQ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.months=exports.attdEmojis=exports.sections=exports.grades=exports.faceLabels=exports.facesUrl=exports.modelsUrl=exports.serverBaseUrl=exports.authConfig=exports.links=exports.routePathList=exports.colors=void 0;const e={primary:"teal"};exports.colors=e;const t={teacherHome:"/",studentProfile:"/student/",viewIssues:"/viewissues/",viewAttd:"/viewattd/",editDay:"/editday/",adminHome:"/admin/",adminLogin:"/login/"};exports.routePathList=t;const s={teacherHome:"/",studentProfile:"/student/",viewIssues:"/viewissues/",viewAttd:"/viewattd/",editDay:"/editday/",adminHome:"/admin/",adminLogin:"/login/"};exports.links=s;const o={email:"admin",password:"admin"};exports.authConfig=o;const r="https://incorporeal-yaw.000webhostapp.com/attd/";exports.serverBaseUrl=r;const a="https://incorporeal-yaw.000webhostapp.com/attd/models/";exports.modelsUrl=a;const i="https://incorporeal-yaw.000webhostapp.com/attd/faces/";exports.facesUrl=i;const n=["1"];exports.faceLabels=n;const p=["9","10","11","12"];exports.grades=p;const d=["A","B","C","D","E","F","G","H"];exports.sections=d;const c={T:"",A:"",P:"",S:"",L:"",[void 0]:""};exports.attdEmojis=c;const l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.months=l;
},{}],"FOZT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageLink=exports.removeWholeImgFromEntries=exports.extractImagesFromEntries=exports.calcDaysDiff=exports.sleep=exports.dateToHeader=exports.displayAttdFromEntries=exports.getAttdFromEntries=exports.fromToDate=exports.maxDate=exports.minDate=exports.sortWithIssues=exports.calculateNOfIssues=exports.findMostCommonDay=exports.dateToHuman=exports.getDate=exports.addDateToEntries=exports.addTimeToEntries=exports.genEntriesFromStudents=exports.generateId=exports.filterByClass=exports.toggle=exports.nullFn=void 0;var t=require("src/config");const e=()=>null;exports.nullFn=e;const s=t=>!t;exports.toggle=s;const r=(t,e,s)=>t.filter(t=>t.grade==e&&t.section==s);exports.filterByClass=r;const o=(t=32)=>{let e="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length;let o=0;for(;o<t;)e+=s.charAt(Math.floor(Math.random()*r)),o+=1;return e};exports.generateId=o;const n=t=>t.map(t=>({entryId:o(),studentId:t.studentId,name:t.name,grade:t.grade,section:t.section,note:"",img:"",attd:"A"}));exports.genEntriesFromStudents=n;const a=(t,e)=>"M"==e||"A"==e?t.map(t=>({...t,time:e})):[...t.map(t=>({...t,time:"M",entryId:o()})),...t.map(t=>({...t,time:"A",entryId:o()}))];exports.addTimeToEntries=a;const d=(t,e)=>t.map(t=>({...t,date:e}));exports.addDateToEntries=d;const p=()=>{const t=new Date;return i(t)};exports.getDate=p;const i=t=>{const e=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0");return t.getFullYear()+"-"+s+"-"+e};exports.dateToHuman=i;const m=t=>{const e=[0,0,0,0,0,0,0];return t.filter(t=>"T"!=t.attd).forEach(t=>{const s=new Date(t.date).getDay();e[s]+=1}),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.indexOf(Math.max(...e))]};exports.findMostCommonDay=m;const c=(t,e)=>e.filter(e=>e.studentId==t).filter(t=>"T"!=t.attd).length;exports.calculateNOfIssues=c;const x=t=>(e,s)=>c(e.studentId,t)>c(s.studentId,t)?-1:1;exports.sortWithIssues=x;const l=t=>Math.min(...t.map(t=>Date.parse(t)));exports.minDate=l;const g=t=>Math.max(...t.map(t=>Date.parse(t)));exports.maxDate=g;const u=(t,e,s)=>{let r=t,o=[];do{console.log("one etter"),o.push(s(i(new Date(r)))),r+=864e5}while(r<=e);return o};exports.fromToDate=u;const D=(t,e,s)=>{const r={};return t.filter(t=>t.studentId==e&&t.date==s).forEach(t=>{r[t.time]=t.attd}),[r.M,r.A]};exports.getAttdFromEntries=D;const f=(e,s,r)=>{const[o,n]=D(e,s,r);return t.attdEmojis[o]+""+t.attdEmojis[n]};exports.displayAttdFromEntries=f;const h=e=>{const s=new Date(e);return t.months[s.getMonth()]+" "+s.getDate()};exports.dateToHeader=h;const I=t=>e=>new Promise(s=>{setTimeout(()=>s(e),t)});exports.sleep=I;const y=(t,e)=>{const s=new Date(t),r=new Date(e),o=Math.abs(r-s);return Math.ceil(o/864e5)};exports.calcDaysDiff=y;const E=t=>{let e={};return t.forEach(t=>{t.img&&(e={...e,[t.entryId]:t.img})}),e};exports.extractImagesFromEntries=E;const T=t=>t.map(t=>({...t,img:t.img?"1":""}));exports.removeWholeImgFromEntries=T;const M=e=>`${t.serverBaseUrl}notes-images/${e}.png`;exports.getImageLink=M;
},{"src/config":"itQ5"}],"Z4Oe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("react")),t=i(require("styled-components")),r=require("src/utils"),l=require("src/config");function i(e){return e&&e.__esModule?e:{default:e}}const n=({value:t="T",onClick:i=r.nullFn})=>{return e.default.createElement(o,null,["T","A","P","S","L"].map(r=>e.default.createElement(a,{key:r,active:r==t?"good":null,onClick:()=>i(r)},l.attdEmojis[r])))},a=t.default.div`
	height: 2rem;
	width: 3rem;
	border: 1px solid #ccc;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
	background: ${e=>e.active?"teal":"white"};
`,o=t.default.div`
	display: flex;
	background: rgba(255, 255, 255, 0.9);
	box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.25);
	width: min-content;
`;var u=n;exports.default=u;
},{"react":"n8MK","styled-components":"tFSs","src/utils":"FOZT","src/config":"itQ5"}],"hp4X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("react")),t=l(require("styled-components")),r=require("src/utils");function l(e){return e&&e.__esModule?e:{default:e}}const o=({value:t="M",onClick:l=r.nullFn})=>{return e.default.createElement(i,null,["M","A","Both"].map(r=>e.default.createElement(a,{key:r,active:r==t?"good":null,onClick:()=>l(r)},r)))},a=t.default.div`
	height: 2rem;
	padding: 1rem;
	font-weight: bold;
	border: 1px solid #ccc;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
	background: ${e=>e.active?"teal":"white"};
	color: ${e=>e.active?"white":"black"};
`,i=t.default.div`
	display: flex;
	background: rgba(255, 255, 255, 0.9);
	box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.25);
	width: min-content;
`;var n=o;exports.default=n;
},{"react":"n8MK","styled-components":"tFSs","src/utils":"FOZT"}],"fXzy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("react"));function t(e){return e&&e.__esModule?e:{default:e}}const l=({size:t="1rem",style:l,onClick:r})=>e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:t,style:l,onClick:r,viewBox:"0 96 960 960",width:t},e.default.createElement("path",{d:"M479.5 790q72.5 0 121.5-49t49-121.5q0-72.5-49-121T479.5 450q-72.5 0-121 48.5t-48.5 121q0 72.5 48.5 121.5t121 49Zm0-60q-47.5 0-78.5-31.5t-31-79q0-47.5 31-78.5t78.5-31q47.5 0 79 31t31.5 78.5q0 47.5-31.5 79t-79 31.5ZM140 936q-24 0-42-18t-18-42V363q0-23 18-41.5t42-18.5h147l73-87h240l73 87h147q23 0 41.5 18.5T880 363v513q0 24-18.5 42T820 936H140Zm680-60V363H645l-73-87H388l-73 87H140v513h680ZM480 620Z"}));var r=l;exports.default=r;
},{"react":"n8MK"}],"pMb3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("react")),t=n(require("styled-components")),r=n(require("src/icons/CameraIcon"));function n(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(r,u,a):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}const a=({onClick:t})=>{const n=(0,e.useRef)();return e.default.createElement(i,null,e.default.createElement(r.default,{style:{cursor:"pointer"},onClick:()=>{n.current.click()},size:"2rem"}),e.default.createElement(o,null,e.default.createElement("input",{ref:n,type:"file",accept:"image/*;capture=camera",onChange:e=>{t(e.target.files[0]),console.log("file-selected",e.target.files[0])}})))},i=t.default.div`
	display: flex;
	justify-content: center;
	padding: 4px;
`,o=t.default.div`
	visibility: hidden;
`;var c=a;exports.default=c;
},{"react":"n8MK","styled-components":"tFSs","src/icons/CameraIcon":"fXzy"}],"RiWY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Space=exports.Block=exports.FlexGrow=exports.Row=void 0;var e=r(require("styled-components"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var c=n?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}const o=e.default.div`
	display: flex;
	align-items: center;

	${t=>t.center&&e.css`
		justify-content: center;
	`}
`;exports.Row=o;const n=e.default.div`
	flex-grow: 1;
`;exports.FlexGrow=n;const i=e.default.div`
	height: 50px;
	background: teal;
`;exports.Block=i;const c=e.default.div`
	height: ${e=>e.h||0};
	width: ${e=>e.w||0};

	@media screen and (max-width: 64em) {
		height: ${e=>e.mh||e.h||0};
		width: ${e=>e.mw||e.w||0}
	}
`;exports.Space=c;
},{"styled-components":"tFSs"}],"j3eL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Select=exports.InputMultiple=exports.Input=void 0;var e=t(require("styled-components"));function t(e){return e&&e.__esModule?e:{default:e}}const r=e.default.input`
	box-sizing: border-box;
	background: #fff;
	border: 1px solid #ddd;
	box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
	border-radius: 8px;
	padding: 0.7rem 1rem;
	color: #363636;
`;exports.Input=r;const o=(0,e.default)(r).attrs({as:"textarea"})`
	font-family: sans-serif;
`;exports.InputMultiple=o;const s=(0,e.default)(r).attrs({as:"select"})`
`;exports.Select=s;
},{"styled-components":"tFSs"}],"aQX2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=i(require("react")),e=o(require("styled-components")),t=require("src/utils");function a(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return a=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=a();if(e&&e.has(r))return e.get(r);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var l=o?Object.getOwnPropertyDescriptor(r,i):null;l&&(l.get||l.set)?Object.defineProperty(t,i,l):t[i]=r[i]}return t.default=r,e&&e.set(r,t),t}function i(r){return r&&r.__esModule?r:{default:r}}const l=e.default.div`
	display: flex;
	flex-direction: row;
	width: ${r=>r.width||"auto"};
	justify-content: center;
	align-items: center;
	gap: 0.6rem;
	border-radius: 8px;
	font-weight: bold;
	cursor: pointer;

	${r=>"default"==r.size&&e.css`
		padding: 1rem 3rem;
		font-size: 1.1rem;
	`}

	${r=>"small"==r.size&&e.css`
		padding: 0.7rem 1rem;
	`}

	${r=>"default"==r.type&&e.css`
		background: var(--primary);
		box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.25);
		color: #fff;

		:hover {
			background: var(--primary-lighter);
			${r=>0==r.active&&e.css`
				background: #aaa;
				color: #545454;
			`}
		}

		${r=>0==r.active&&e.css`
			background: #aaa;
			color: #545454;
		`}
	`}

	${r=>"outline"==r.type&&e.css`
		background: rgba(255, 255, 255, 0.9);
		border: 4px solid var(--primary);
		box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.25);
		color: var(--primary);

		:hover {
			color: var(--primary-lighter);
			border: 4px solid var(--primary-lighter);
		}
	`}

	${r=>"outline-thin"==r.type&&e.css`
		color: var(--primary);
		padding: 0.5rem 0.7rem;
		border: 1px solid #ddd;
		
		:hover {
			color: var(--primary-lighter);
		}
	`}

	${r=>"text"==r.type&&e.css`
		padding: 0.5rem 0.7rem;
		color: var(--primary);

		:hover {
			color: var(--primary-lighter);
		}
	`}

`,n=({className:e,children:a,style:o,onClick:i,type:n="default",size:c="default",width:s,active:d="true"})=>r.default.createElement(l,{className:e,style:o,onClick:d?i:t.nullFn,type:n,size:c,width:s,active:d},a);var c=n;exports.default=c;
},{"react":"n8MK","styled-components":"tFSs","src/utils":"FOZT"}],"Lmzq":[function(require,module,exports) {

},{}],"X9sJ":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"NgrL":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"Me4q":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"qrgL":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"X9sJ","ieee754":"NgrL","isarray":"Me4q","buffer":"qrgL"}],"FZBM":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var Buffer = require("buffer").Buffer;
var t=arguments[3],e=require("process"),n=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.backend=fn,exports.buffer=mr,exports.customGrad=xo,exports.deprecationWarn=Qe,exports.disableDeprecationWarnings=$e,exports.dispose=rn,exports.disposeVariables=Je,exports.enableDebugMode=Ye,exports.enableProdMode=Xe,exports.engine=Ze,exports.env=c,exports.fill=jn,exports.findBackend=pn,exports.findBackendFactory=hn,exports.getBackend=cn,exports.getGradient=f,exports.getKernel=d,exports.getKernelsForBackend=v,exports.grad=ho,exports.grads=fo,exports.keep=on,exports.linspace=Xn,exports.memory=tn,exports.nextFrame=Fd,exports.ones=Hn,exports.op=Tn,exports.print=gr,exports.profile=en,exports.range=Yn,exports.ready=un,exports.registerBackend=dn,exports.registerGradient=g,exports.registerKernel=m,exports.removeBackend=ln,exports.scalar=Pn,exports.setBackend=sn,exports.setPlatform=vn,exports.sumOutType=_t,exports.tensor=Mn,exports.tensor1d=Ln,exports.tensor2d=Wn,exports.tensor3d=zn,exports.tensor4d=Un,exports.tensor5d=Vn,exports.tensor6d=Gn,exports.tidy=nn,exports.time=an,exports.unregisterGradient=y,exports.unregisterKernel=x,exports.valueAndGrad=vo,exports.valueAndGrads=mo,exports.variable=qn,exports.variableGrads=go,exports.zeros=Kn,exports.inTopKAsync=exports.image=exports.imag=exports.ifft=exports.hannWindow=exports.hammingWindow=exports.greaterStrict=exports.greaterEqualStrict=exports.greaterEqual=exports.greater=exports.gather_util=exports.gatherND=exports.gather=exports.fused=exports.frame=exports.floorDiv=exports.floor=exports.fft=exports.eye=exports.expm1=exports.expandDims=exports.exp=exports.erf=exports.equalStrict=exports.equal=exports.elu=exports.dropout=exports.dot=exports.divStrict=exports.divNoNan=exports.div=exports.diag=exports.depthwiseConv2d=exports.depthToSpace=exports.cumsum=exports.cosh=exports.cos=exports.conv3dTranspose=exports.conv3d=exports.conv2dTranspose=exports.conv2d=exports.conv1d=exports.concat4d=exports.concat3d=exports.concat2d=exports.concat1d=exports.concat=exports.complex=exports.clone=exports.clipByValue=exports.ceil=exports.cast=exports.browser=exports.broadcastTo=exports.booleanMaskAsync=exports.batchToSpaceND=exports.batchNormalization4d=exports.batchNormalization3d=exports.batchNormalization2d=exports.batchNormalization=exports.batchNorm4d=exports.batchNorm3d=exports.batchNorm2d=exports.batchNorm=exports.basicLSTMCell=exports.backend_util=exports.avgPool3d=exports.avgPool=exports.atanh=exports.atan2=exports.atan=exports.asinh=exports.asin=exports.argMin=exports.argMax=exports.any=exports.all=exports.addStrict=exports.addN=exports.add=exports.acosh=exports.acos=exports.abs=exports.Variable=exports.TensorBuffer=exports.Tensor=exports.SGDOptimizer=exports.Reduction=exports.Rank=exports.RMSPropOptimizer=exports.Optimizer=exports.MomentumOptimizer=exports.KernelBackend=exports.Environment=exports.ENV=exports.DataStorage=exports.AdamaxOptimizer=exports.AdamOptimizer=exports.AdagradOptimizer=exports.AdadeltaOptimizer=void 0,exports.square=exports.sqrt=exports.split=exports.spectral=exports.sparseToDense=exports.spaceToBatchND=exports.softplus=exports.softmax=exports.slice_util=exports.slice4d=exports.slice3d=exports.slice2d=exports.slice1d=exports.slice=exports.sinh=exports.sin=exports.signal=exports.sign=exports.sigmoid=exports.setdiff1dAsync=exports.serialization=exports.separableConv2d=exports.selu=exports.scatter_util=exports.scatterND=exports.rsqrt=exports.round=exports.rfft=exports.reverse4d=exports.reverse3d=exports.reverse2d=exports.reverse1d=exports.reverse=exports.reshape=exports.relu6=exports.relu=exports.reciprocal=exports.real=exports.randomUniform=exports.randomNormal=exports.randomGamma=exports.rand=exports.prod=exports.prelu=exports.powStrict=exports.pow=exports.pool=exports.pad4d=exports.pad3d=exports.pad2d=exports.pad1d=exports.pad=exports.outerProduct=exports.onesLike=exports.oneHot=exports.notEqualStrict=exports.notEqual=exports.norm=exports.neg=exports.multinomial=exports.multiRNNCell=exports.mulStrict=exports.mul=exports.movingAverage=exports.moments=exports.modStrict=exports.mod=exports.minimumStrict=exports.minimum=exports.min=exports.mean=exports.maximumStrict=exports.maximum=exports.maxPool3d=exports.maxPool=exports.max=exports.math=exports.matMul=exports.losses=exports.logicalXor=exports.logicalOr=exports.logicalNot=exports.logicalAnd=exports.logSumExp=exports.logSoftmax=exports.logSigmoid=exports.log1p=exports.log=exports.localResponseNormalization=exports.linalg=exports.lessStrict=exports.lessEqualStrict=exports.lessEqual=exports.less=exports.leakyRelu=exports.isNaN=exports.isInf=exports.isFinite=exports.irfft=exports.io=void 0,exports.zerosLike=exports.whereAsync=exports.where=exports.webgl=exports.version_core=exports.util=exports.unstack=exports.unsortedSegmentSum=exports.truncatedNormal=exports.transpose=exports.train=exports.topk=exports.tile=exports.test_util=exports.tensor_util=exports.tanh=exports.tan=exports.sum=exports.subStrict=exports.sub=exports.stridedSlice=exports.stft=exports.step=exports.stack=exports.squeeze=exports.squaredDifferenceStrict=exports.squaredDifference=void 0;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})}function i(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var s=function(){function t(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},t.prototype.registerFlag=function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+r+"."),this.set(t,r)}},t.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},t.prototype.getNumber=function(t){return this.get(t)},t.prototype.getBool=function(t){return this.get(t)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},t.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},t.prototype.setFlags=function(t){this.flags=Object.assign({},t)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var e,n,r=(e=this.global.location.search,n={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return u(n,e[0],e[1]),e.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(e){var n=e.split(":"),r=n[0],o=n[1];t.urlFlags[r]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}(r,o)})}},t}();function u(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function c(){return l}exports.Environment=s;var l=null;exports.ENV=l;var p=new Map,h=new Map;function d(t,e){var n=b(t,e);return p.get(n)}function f(t){return h.get(t)}function v(t){for(var e=p.entries(),n=[];;){var r=e.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===t&&n.push(s)}return n}function m(t){var e=t.kernelName,n=t.backendName,r=b(e,n);if(p.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");p.set(r,t)}function g(t){var e=t.kernelName;h.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),h.set(e,t)}function x(t,e){var n=b(t,e);if(!p.has(n))throw new Error("The kernel '"+t+"' for backend '"+e+"' is not registered");p.delete(n)}function y(t){if(!h.has(t))throw new Error("The gradient '"+t+"' for backend is not registered");h.delete(t)}function b(t,e){return e+"_"+t}function w(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function C(t,e,n){return Math.max(t,Math.min(e,n))}function E(t){return t%2==0?t:t+1}function R(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function I(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function k(t,e,n){void 0===n&&(n=""),I(N(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function S(t){I(null!=t,function(){return"The input to the tensor constructor must be a non-null value."})}function A(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=!1),null==e&&(e=[]),Array.isArray(t)||q(t)&&!n)for(var r=0;r<t.length;++r)A(t[r],e,n);else e.push(t);return e}function D(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function N(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function T(t){return t%1==0}function F(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function _(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function O(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function M(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,o){var a=0,i=function(){if(t())r();else{var s=e(++a);null!=n&&a>=n?o():setTimeout(i,s)}};i()})}function B(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function P(t,e){var n=e.length;return I((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),I(t.every(function(t){return T(t)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(t){return t<0?n+t:t})}function L(t,e){for(var n=[],r=[],o=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||o?null:P(e,t).sort(),i=0,s=0;s<t.length;++s){if(null!=a){if(a[i]===s&&1!==t[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(null==a[i]||a[i]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),a[i]<=s&&i++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function W(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function z(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function U(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function V(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function G(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function q(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function H(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function K(t){if(null==t)return 0;var e=0;return t.forEach(function(t){return e+=t.length}),e}function j(t){return"string"==typeof t||t instanceof String}function X(t){return"boolean"==typeof t}function Y(t){return"number"==typeof t}function $(t){return Array.isArray(t)?$(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Y(t)?"float32":j(t)?"string":X(t)?"bool":"float32"}function Q(t){return!!(t&&t.constructor&&t.call&&t.apply)}function J(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Z(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function tt(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=A(t)),n&&U(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)0!==Math.round(t[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function et(t,e){if(0===t.length)return e[0];var n=t.reduce(function(t,e){return t*e});if(0===n)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function t(e,n,r){var o=new Array;if(1===n.length)for(var a=n[0],i=0;i<a;i++)o[i]=r[e+i];else{a=n[0];var s=n.slice(1),u=s.reduce(function(t,e){return t*e});for(i=0;i<a;i++)o[i]=t(e+i*u,s,r)}return o}(0,t,e)}function nt(t,e){for(var n=rt(t,e),r=0;r<n.length;r++)n[r]=1;return n}function rt(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function ot(){return c().platform.now()}function at(t){t.forEach(function(e){I(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function it(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",c().platform.encode(t,e)}function st(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",c().platform.decode(t,e)}function ut(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function ct(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}var lt=Object.freeze({shuffle:w,clamp:C,nearestLargerEven:E,sum:R,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},assert:I,assertShapesMatch:k,assertNonNull:S,flatten:A,sizeFromShape:D,isScalarShape:function(t){return 0===t.length},arraysEqual:N,isInt:T,tanh:F,sizeToSquarishShape:_,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return w(e),e},rightPad:O,repeatedTry:M,inferFromImplicitShape:B,parseAxisParam:P,squeezeShape:L,getTypedArrayFromDType:W,getArrayFromDType:z,checkConversionForErrors:U,isValidDtype:V,hasEncodingLoss:G,isTypedArray:q,bytesPerElement:H,bytesFromStringArray:K,isString:j,isBoolean:X,isNumber:Y,inferDtype:$,isFunction:Q,nearestDivisor:J,computeStrides:Z,toTypedArray:tt,toNestedArray:et,makeOnesTypedArray:nt,makeZerosTypedArray:rt,now:ot,assertNonNegativeIntegerDimensions:at,fetch:function(t,e){return c().platform.fetch(t,e)},encodeString:it,decodeString:st,locToIndex:ut,indexToLoc:ct}),pt=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new ht)}return t.prototype.profileKernel=function(t,e,n){var r,o=this,a=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var o=t[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,t),a.then(function(a){var i="";null!=a.getExtraProfileInfo&&(i=a.getExtraProfileInfo()),o.logger.logKernelProfile(t,n,r,a.kernelMs,e,i)})})}),r},t}();exports.util=lt;var ht=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,o,a){var i="number"==typeof r?O(r+"ms",9):r.error,s=O(t,25),u=e.rank,c=e.size,l=O(e.shape.toString(),14),p="";for(var h in o){var d=o[h].shape||e.shape,f=d.length;p+=h+": "+f+"D "+(f>0?d:"")+" "}console.log("%c"+s+"\t%c"+i+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+p+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),dt=20,ft=3,vt=7;function mt(t,e,n,r){var o=Z(e),a=function(t,e,n,r){var o=D(e),a=r[r.length-1],i=new Array(a).fill(0),s=e.length,u="complex64"===n?yt(t):t;if(s>1)for(var c=0;c<o/a;c++)for(var l=c*a,p=0;p<a;p++)i[p]=Math.max(i[p],gt(u[l+p],0,n).length);return i}(t,e,n,o),i=e.length,s=function t(e,n,r,o,a,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[gt(yt(e)[0],0,r)]:"bool"===r?[xt(e[0])]:[e[0].toString()];if(1===c){if(u>dt){var l=ft*s,p=Array.from(e.slice(0,l)),h=Array.from(e.slice((u-ft)*s,u*s));return"complex64"===r&&(p=yt(p),h=yt(h)),["["+p.map(function(t,e){return gt(t,a[e],r)}).join(", ")+", ..., "+h.map(function(t,e){return gt(t,a[u-ft+e],r)}).join(", ")+"]"]}return["["+("complex64"===r?yt(e):Array.from(e)).map(function(t,e){return gt(t,a[e],r)}).join(", ")+"]"]}var d=n.slice(1),f=o.slice(1),v=o[0]*s,m=[];if(u>dt){for(var g=0;g<ft;g++){var x=(y=g*v)+v;m.push.apply(m,t(e.slice(y,x),d,r,f,a,!1))}for(m.push("..."),g=u-ft;g<u;g++)x=(y=g*v)+v,m.push.apply(m,t(e.slice(y,x),d,r,f,a,g===u-1))}else for(g=0;g<u;g++){var y;x=(y=g*v)+v,m.push.apply(m,t(e.slice(y,x),d,r,f,a,g===u-1))}var b=2===c?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var w=",\n";for(g=2;g<c;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":w),m}(t,e,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(t){return"    "+t}).join("\n")),u.join("\n")}function gt(t,e,n){return O(Array.isArray(t)?parseFloat(t[0].toFixed(vt))+" + "+parseFloat(t[1].toFixed(vt))+"j":j(t)?"'"+t+"'":"bool"===n?xt(t):parseFloat(t.toFixed(vt)).toString(),e)}function xt(t){return 0===t?"false":"true"}function yt(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var bt=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=D(t),null!=n){var o=n.length;I(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||z(e,this.size),this.strides=Z(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),I(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(n);this.values[o]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=0,r=0,o=t;r<o.length;r++){var a=o[r];if(a<0||a>=this.shape[n]){var i="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=t[t.length-1],u=0;u<t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return wt().makeTensor(this.values,this.shape,this.dtype)},t}(),wt=null,Ct=null,Et=null;exports.TensorBuffer=bt;var Rt=function(){function t(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=D(t),this.strides=Z(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),I(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),this.reshape([t,e,n,r,o])},t.prototype.asType=function(t){return this.throwIfDisposed(),Ct.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,Ct.buffer(this.shape,this.dtype,t)]}})})},t.prototype.bufferSync=function(){return Ct.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,et(this.shape,t)]}})})},t.prototype.arraySync=function(){return et(this.shape,this.dataSync())},t.prototype.data=function(){return a(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=wt().read(this.dataId),"string"!==this.dtype?[3,2]:[4,t];case 1:e=n.sent();try{return[2,e.map(function(t){return st(t)})]}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var t=wt().readSync(this.dataId);if("string"===this.dtype)try{return t.map(function(t){return st(t)})}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},t.prototype.bytes=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,wt().read(this.dataId)];case 1:return t=e.sent(),"string"===this.dtype?[2,t]:[2,new Uint8Array(t.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(wt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),Ct.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),Ct.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),Ct.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),Ct.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),Ct.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),Ct.clone(this)},t.prototype.oneHot=function(t,e,n){return this.throwIfDisposed(),Ct.oneHot(this,t,e,n)},t.prototype.toString=function(t){return void 0===t&&(t=!1),mt(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),Ct.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Ct.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Ct.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),Ct.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),Ct.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),Ct.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),Ct.reverse(this,t)},t.prototype.concat=function(e,n){return void 0===n&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),Ct.concat([this].concat(e),n)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Ct.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),Ct.stack([this,t],e)},t.prototype.unstack=function(t){return void 0===t&&(t=0),Ct.unstack(this,t)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),Ct.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&&(n=.001),Et("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,o,r,n)},t.prototype.batchNorm=function(t,e,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),Ct.batchNorm(this,t,e,n,r,o)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.sum(this,t,e)},t.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.prod(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),Ct.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),Ct.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),Ct.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),Ct.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),Ct.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),Ct.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),Ct.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),Ct.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),Ct.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),Ct.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),Ct.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),Ct.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),Ct.div(this,t)},t.prototype.divNoNan=function(t){return this.throwIfDisposed(),Ct.divNoNan(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),Ct.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),Ct.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),Ct.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Ct.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),Ct.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Ct.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),Ct.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),Ct.modStrict(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Ct.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),Ct.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),Ct.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Ct.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),Ct.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),Ct.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),Ct.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),Ct.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),Ct.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Ct.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),Ct.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Ct.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ct.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Ct.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ct.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),Ct.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Ct.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),Ct.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),Ct.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),Ct.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Ct.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Ct.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Ct.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),Ct.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),Ct.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),Ct.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Ct.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Ct.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Ct.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Ct.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Ct.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Ct.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Ct.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Ct.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Ct.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ct.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),Ct.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),Ct.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Ct.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Ct.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),Ct.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),Ct.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Ct.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ct.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Ct.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Ct.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Ct.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Ct.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Ct.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Ct.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Ct.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Ct.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Ct.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Ct.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Ct.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Ct.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Ct.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Ct.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Ct.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Ct.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Ct.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),Ct.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),Ct.softmax(this,t)},t.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),Ct.logSoftmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),Ct.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),Ct.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,o,a){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),Ct.conv1d(this,t,e,n,r,o,a)},t.prototype.conv2d=function(t,e,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Ct.conv2d(this,t,e,n,r,o,a)},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),Ct.conv2dTranspose(this,t,e,n,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Ct.depthwiseConv2d(this,t,e,n,r,o,a)},t.prototype.separableConv2d=function(t,e,n,r,o,a){return void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),Ct.separableConv2d(this,t,e,n,r,o,a)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Ct.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Ct.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),Ct.localResponseNormalization(this,t,e,n,r)},t.prototype.pool=function(t,e,n,r,o){return this.throwIfDisposed(),Ct.pool(this,t,e,n,r,o)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),wt().makeVariable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Ct.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Ct.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Ct.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),Ct.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,o,a,i,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),Ct.stridedSlice(this,t,e,n,r,o,a,i,s)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Ct.depthToSpace(this,t,e)},t.prototype.fft=function(){return this.throwIfDisposed(),Ct.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Ct.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Ct.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Ct.spectral.irfft(this)},t}();exports.Tensor=Rt,Object.defineProperty(Rt,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var It,kt,St,At,Dt,Nt=function(t){function e(e,n,r,o){var a=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=n,a.name=r,a}return o(e,t),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!N(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");wt().disposeTensor(this),this.dataId=t.dataId,wt().incRef(this,null)},e.prototype.dispose=function(){wt().disposeVariable(this),this.isDisposedInternal=!0},e}(Rt);exports.Variable=Nt,exports.Rank=It,Object.defineProperty(Nt,Symbol.hasInstance,{value:function(t){return t instanceof Rt&&null!=t.assign&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(It||(exports.Rank=It={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(kt||(kt={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(St||(St={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(At||(At={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Dt||(Dt={}));var Tt={float32:At,int32:kt,bool:St,complex64:Dt};function Ft(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast "+t+" with "+e)}return Tt[t][e]}function _t(t){return Ft(t,"int32")}function Ot(t,e){if(t.dtype===e.dtype)return[t,e];var n=Ft(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Mt(t,e){I(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function Bt(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof Rt)n.push(e);else if(o=e,Array.isArray(o)||"object"==typeof o){var o,a=e;for(var i in a){var s=a[i];r.has(s)||(r.add(s),t(s,n,r))}}}(t,e,new Set),e}var Pt,Lt=Object.freeze({makeTypesMatch:Ot,assertTypesMatch:Mt,isTensorInList:function(t,e){return e.some(function(e){return e.id===t.id})},getTensorsInContainer:Bt}),Wt=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},t}(),zt=function(){function t(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Wt}return t.prototype.ready=function(){return a(this,void 0,void 0,function(){var t,e,n;return i(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,r.label=1;case 1:return e<t.length?(n=t[e],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},t.prototype.registerBackend=function(t,e,n){return void 0===n&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)},t.prototype.setBackend=function(t){return a(this,void 0,void 0,function(){var e,n,r;return i(this,function(o){switch(o.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),n=e.success,e.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new pt(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var t=this;v(this.backendName).forEach(function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)})},t.prototype.disposeRegisteredKernels=function(t){var e=this;v(t).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])})},t.prototype.initializeBackend=function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,a=r.then(function(n){return!(o<e.pendingBackendInitId||(e.registry[t]=n,e.pendingBackendInit=null,0))}).catch(function(n){return!(o<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(n.stack||n.message),1))});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(e){return console.warn("Initialization of backend "+t+" failed"),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),o=r.success,a=r.asyncInit;if(a||o)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,o=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(t,e){var n,r=this,o=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun(function(){return r.startScope(o)},function(){return r.endScope(n)},function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],function(t){return{x:function(){return t.toFloat()}}},[]),e},t.prototype.runKernel=function(t,e,n,r,o){return this.runKernelFunc(null,e,null,t,n,r,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(t,e,n){var r=this.backend.numDataIds(),o=0;n.forEach(function(t){o+="complex64"===t.dtype?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-e-o-a;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+t+"'")},t.prototype.runKernelFunc=function(t,e,n,r,o,a,i){var s,u=this;void 0===a&&(a=[]),void 0===i&&(i=[]);var c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var p,h=function(t){l&&(c=t.map(function(t){return u.keep(u.clone(t))}))},f=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=d(r,this.backendName);return p=null!=g?function(){var t=u.backend.numDataIds();m=g.kernelFunc({inputs:e,attrs:o,backend:u.backend});var n=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n);var s=n.map(function(t){var e=t.dataId,n=t.shape,r=t.dtype;return u.makeTensorFromDataId(e,n,r)}),c=s.filter(function(t,e){return i[e]});return h((a||[]).slice().concat(c)),s}:function(){var e=u.backend.numDataIds();m=u.tidy(function(){return t(u.backend,h)});var n=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n),n},this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,e,function(){return p()}):p()}),l&&this.addTapeNode(r,e,s,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(t){return e[t].shape}),outputShapes:s.map(function(t){return t.shape})}),Array.isArray(m)?s:s[0]},t.prototype.makeTensor=function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=t;"string"===n&&j(t[0])&&(o=t.map(function(t){return it(t)}));var a=r.write(o,e,n),i=new Rt(e,n,a,this.nextTensorId());if(this.incRef(i,r),"string"===n){var s=this.state.tensorInfo.get(a),u=K(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return i},t.prototype.makeTensorFromDataId=function(t,e,n,r){var o=new Rt(e,n=n||"float32",t,this.nextTensorId());return this.incRef(o,r),o},t.prototype.makeVariable=function(t,e,n,r){void 0===e&&(e=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.asType(r));var o=new Nt(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(t,e){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(r=t.size*H(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Nt||this.track(t)},t.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}},t.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},t.prototype.profile=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){return this.state.profiling=!0,e=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(t){return t.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(t,e,n,r,o){var a=this,i={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:o},s=f(t);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=function(t){return t=t.map(function(t,e){if(null==t){var r=n[e],o=rt(r.size,r.dtype);return a.makeTensor(o,r.shape,r.dtype)}return t}),r(t.length>1?t:t[0],o)}),this.state.activeTape.push(i)},t.prototype.keep=function(t){return t.kept=!0,t},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=Bt(t),r=new Set(n.map(function(t){return t.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||r.has(a.id)||a.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(t){t.kept||t.scopeId!==i.id||e.track(t)})},t.prototype.gradients=function(t,e,n,r){var o=this;if(void 0===r&&(r=!1),I(e.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",t)});I(a instanceof Rt,function(){return"The result y returned by f() must be a tensor."});var i=function(t,e,n){for(var r={},o={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var i=(f=t[a]).inputs;for(var s in i){for(var u=i[s],c=!1,l=0;l<e.length;l++)if(r[u.id]){f.outputs.forEach(function(t){return r[t.id]=!0}),c=!0,o[f.id]=!0;break}if(c)break}}var p={};p[n.id]=!0;var h={};for(a=t.length-1;a>=0;a--)for(i=(f=t[a]).inputs,l=0;l<f.outputs.length;l++)if(p[f.outputs[l].id]){for(var s in i)p[i[s].id]=!0,h[f.id]=!0;break}var d=[];for(a=0;a<t.length;a++){var f;if(o[(f=t[a]).id]&&h[f.id]){var v={};for(var s in f.inputs){var m=f.inputs[s];r[m.id]&&(v[s]=m)}var g=Object.assign({},f);g.inputs=v,g.outputs=f.outputs,d.push(g)}}return d}(this.state.activeTape,e,a);if(!r&&0===i.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var t,r,s={};s[a.id]=null==n?(r=nt(D(t=a.shape),"float32"),Ut.makeTensor(r,t,"float32")):n,function(t,e,n){for(var r=function(r){var o=e[r],a=[];if(o.outputs.forEach(function(e){var n=t[e.id];null!=n?a.push(n):a.push(null)}),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var i=o.gradient(a),s=function(e){if(!(e in i))throw new Error("Cannot backprop through input "+e+". Available gradients found: "+Object.keys(i)+".");var r=n(function(){return i[e]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+e+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=o.inputs[e];if(!N(r.shape,a.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+e+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==t[a.id])t[a.id]=r;else{var s=t[a.id];t[a.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=e.length-1;o>=0;o--)r(o)}(s,i,function(t){return o.tidy(t)});var u=e.map(function(t){return s[t.id]});return 0===o.state.gradientDepth&&(o.state.activeTape.forEach(function(t){for(var e=0,n=t.saved;e<n.length;e++)n[e].dispose()}),o.state.activeTape=null),{value:a,grads:u}})},t.prototype.customGrad=function(t){var e=this;return I(Q(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];I(r.every(function(t){return t instanceof Rt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return r.forEach(function(t,e){a[e]=t}),e.runKernelFunc(function(e,o){return I((n=t.apply(void 0,r.concat([o]))).value instanceof Rt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),I(Q(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},a,function(t,e){var o=n.gradFunc(t,e),a=Array.isArray(o)?o:[o];I(a.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),I(a.every(function(t){return t instanceof Rt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var i={};return a.forEach(function(t,e){i[e]=function(){return t}}),i})}},t.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},t.prototype.time=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=ot(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=ot()-e,[2,n]}})})},t.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Wt,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}();exports.tensor_util=Lt;var Ut=function(){var n=function(){if(null==Pt){var n=void 0;if("undefined"!=typeof window)n=window;else if(void 0!==t)n=t;else if(void 0!==e)n=e;else{if("undefined"==typeof self)throw new Error("Could not find a global object");n=self}Pt=n}return Pt}();if(null==n._tfengine){var r=new s(n);n._tfengine=new zt(r)}return function(t){exports.ENV=l=t}(n._tfengine.ENV),wt=function(){return n._tfengine},n._tfengine}();function Vt(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Gt=c();Gt.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Gt.registerFlag("IS_BROWSER",function(){return Vt()}),Gt.registerFlag("IS_NODE",function(){return void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node}),Gt.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Gt.registerFlag("PROD",function(){return!1}),Gt.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Gt.getBool("DEBUG")}),Gt.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Gt.registerFlag("IS_TEST",function(){return!1});var qt,Ht,Kt,jt={},Xt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Yt(t,e){jt[t]=e}function $t(t){t in jt||(jt[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",function(e){e.preventDefault(),delete jt[t]},!1),1===t?e.getContext("webgl",Xt)||e.getContext("experimental-webgl",Xt):e.getContext("webgl2",Xt)}(t));var e=jt[t];return e.isContextLost()?(delete jt[t],$t(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),jt[t])}function Qt(t,e){return[e,t]}function Jt(t){var e=D(t);return _(Math.ceil(e/4))}function Zt(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function te(t,e){var n,r,o,a,i,s,u,l,p,h=t;return 2===c().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,o=h.RGBA16F,a=h.RGBA32F,i=h.RED,s=4,u=1,l=h.HALF_FLOAT,p=h.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,a=h.RGBA,i=t.RGBA,s=4,u=4,l=null!=e?e.HALF_FLOAT_OES:null,p=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:p}}function ee(t,e,n){var r=n();return e&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+ae(t,e))}(t),r}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(qt||(qt={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Ht||(Ht={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Kt||(Kt={}));var ne=5.96e-8,re=65504;function oe(t){return!!(c().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||ne<Math.abs(t)&&Math.abs(t)<re)}function ae(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function ie(t,e,n){return De(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function se(t,e,n){var r=De(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ee(t,e,function(){return t.shaderSource(r,n)}),ee(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function ue(t,e,n){var r=De(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ee(t,e,function(){return t.shaderSource(r,n)}),ee(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=pe.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split("\n"),a=o.length.toString().length+2,i=o.map(function(t,e){return O((e+1).toString(),a)+t}),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),p=i.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+O(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var ce,le,pe=/ERROR: [0-9]+:([0-9]+):/g;function he(t,e){return De(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function de(t,e,n){if(ee(t,e,function(){return t.linkProgram(n)}),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function fe(t,e,n){if(ee(t,e,function(){return t.validateProgram(n)}),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function ve(t,e,n){var r=De(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ee(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ee(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function me(t,e,n){var r=De(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ee(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ee(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function ge(t,e){return De(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function xe(t,e){var n=c().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function ye(t,e){return De(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function be(t,e,n,r,o,a,i,s){var u=t.getAttribLocation(n,r);return-1!==u&&(ee(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),ee(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,i,s)}),ee(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function we(t,e,n,r){Ne(t,r),ee(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function Ce(t,e,n,r){return De(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Ee(t,e,n){return t.getUniformLocation(e,n)}function Re(t,e,n,r,o,a){ee(t,e,function(){return we(t,e,r,a)}),ee(t,e,function(){return t.uniform1i(o,a)})}function Ie(t,e,n,r){ee(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ee(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function ke(t,e,n){ee(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),ee(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Se(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ae(t,e))}function Ae(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function De(t,e,n,r){var o=ee(t,e,function(){return n()});if(null==o)throw new Error(r);return o}function Ne(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Te(t,e){return void 0===e&&(e=2),D(t.slice(0,t.length-e))}function Fe(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _e(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[Te(t)].concat(Fe(t))),e}function Oe(t,e){var n;void 0===e&&(e=!1);var r=c().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,1===(t=t.map(function(e,n){return n>=t.length-2?E(t[n]):t[n]})).length&&(t=[2,t[0]])),2!==t.length){var o=L(t);t=o.newShape}var a=D(t);if(t.length<=1&&a<=r)return[1,a];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=Te(t),s=2,u=2;return t.length&&(s=(n=Fe(t))[0],u=n[1]),_(a=i*(s/2)*(u/2)).map(function(t){return 2*t})}return _(a)}function Me(t){return t%2==0}function Be(t,e){if(N(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(Me(n)&&Me(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&Me(t[0])&&Me(e[0])}function Pe(t){if(null==ce){var e=$t(t);ce=e.getParameter(e.MAX_TEXTURE_SIZE)}return ce}function Le(t){if(null==le){var e=$t(t);le=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,le)}function We(t){if(0===t)return 0;var e=$t(t);return ze(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:ze(e,"EXT_disjoint_timer_query")?1:0}function ze(t,e){return null!=t.getExtension(e)}function Ue(t){try{if(null!=$t(t))return!0}catch(t){return!1}return!1}function Ve(t){if(0===t)return!1;var e=$t(t);if(1===t){if(!ze(e,"OES_texture_float"))return!1}else if(!ze(e,"EXT_color_buffer_float"))return!1;return qe(e)}function Ge(t){if(0===t)return!1;var e=$t(t);if(1!==t){if(ze(e,"EXT_color_buffer_float"))return qe(e);if(ze(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(t,e){var n=te(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}(e,n)}return!1}return!!ze(e,"OES_texture_float")&&!!ze(e,"WEBGL_color_buffer_float")&&qe(e)}function qe(t){var e=te(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function He(t){return 2===t&&null!=$t(t).fenceSync}var Ke=Object.freeze({callAndCheck:ee,canBeRepresented:oe,getWebGLErrorMessage:ae,getExtensionOrThrow:ie,createVertexShader:se,createFragmentShader:ue,createProgram:he,linkProgram:de,validateProgram:fe,createStaticVertexBuffer:ve,createStaticIndexBuffer:me,getNumChannels:function(){return 2===c().getNumber("WEBGL_VERSION")?1:4},createTexture:ge,validateTextureSize:xe,createFramebuffer:ye,bindVertexBufferToProgramAttribute:be,bindTextureUnit:we,unbindTextureUnit:function(t,e,n){Ne(t,n),ee(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Ce,getProgramUniformLocation:Ee,bindTextureToProgramUniformSampler:Re,bindCanvasToFramebuffer:function(t,e){ee(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),ee(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),ee(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Ie,unbindColorTextureFromFramebuffer:ke,validateFramebuffer:Se,getFramebufferErrorMessage:Ae,getBatchDim:Te,getRowsCols:Fe,getShapeAs3D:_e,getTextureShapeFromLogicalShape:Oe,isReshapeFree:Be,getWebGLMaxTextureSize:Pe,resetMaxTextureSize:function(){ce=null},resetMaxTexturesInShader:function(){le=null},getMaxTexturesInShader:Le,getWebGLDisjointQueryTimerVersion:We,hasExtension:ze,isWebGLVersionEnabled:Ue,isCapableOfRenderingToFloatTexture:Ve,isDownloadFloatTextureEnabled:Ge,isWebGLFenceEnabled:He}),je=c();function Xe(){c().set("PROD",!0)}function Ye(){c().set("DEBUG",!0)}function $e(){c().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Qe(t){c().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Je(){Ut.disposeVariables()}function Ze(){return Ut}function tn(){return Ut.memory()}function en(t){return Ut.profile(t)}function nn(t,e){return Ut.tidy(t,e)}function rn(t){Bt(t).forEach(function(t){return t.dispose()})}function on(t){return Ut.keep(t)}function an(t){return Ut.time(t)}function sn(t){return Ut.setBackend(t)}function un(){return Ut.ready()}function cn(){return Ut.backendName}function ln(t){Ut.removeBackend(t)}function pn(t){return Ut.findBackend(t)}function hn(t){return Ut.findBackendFactory(t)}function dn(t,e,n){return void 0===n&&(n=1),Ut.registerBackend(t,e,n)}function fn(){return Ut.backend}function vn(t,e){c().setPlatform(t,e)}function mn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c().getBool("IS_TEST")||console.warn.apply(console,t)}function gn(t,e){var n=t;if(q(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||q(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&c().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],Array.isArray(e)||q(e)){I(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),I(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var o=n.slice(1),a=0;a<e.length;++a)t(e[a],o,r.concat(a))}else I(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(t,r,[]),r}function xn(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function yn(t,e,n,r){if(void 0===r&&(r="numeric"),t instanceof Rt)return xn(r,t.dtype,e,n),t;var o=$(t);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),xn(r,o,e,n),null==t||!q(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t){var a=null==t?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=gn(t,o);q(t)||Array.isArray(t)||(t=[t]);var s="string"!==o?tt(t,o,c().getBool("DEBUG")):A(t,[],!0);return Ut.makeTensor(s,i,o)}function bn(t,e,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return yn(t,e+"["+r+"]",n)},r)}function wn(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Cn(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[a++]):o.push(e[i++]);return o}function En(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map(function(e){return t[e]})]}function Rn(t,e){return Cn(t,e.map(function(t){return 1}),e)}function In(t,e,n){I(wn(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function kn(t,e){if(wn(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function Sn(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function An(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Dn(t,e){var n=t[0].length;t.forEach(function(t,e){I(t.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")"})}),I(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(t,o){for(var a=0;a<n;a++)I(a===e||t[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Nn(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function Tn(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ut.startScope(n);try{var o=r.apply(void 0,t);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ut.endScope(o),o}catch(t){throw Ut.endScope(null),t}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}je.registerFlag("HAS_WEBGL",function(){return je.getNumber("WEBGL_VERSION")>0}),je.registerFlag("WEBGL_VERSION",function(){return Ue(2)?2:Ue(1)?1:0}),je.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===je.get("WEBGL_VERSION")}),je.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),je.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),je.registerFlag("WEBGL_PACK",function(){return je.getBool("HAS_WEBGL")}),je.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_CLIP",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_REDUCE",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_LAZILY_UNPACK",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_CONV_IM2COL",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Pe(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Le(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=je.getNumber("WEBGL_VERSION");return 0===t?0:We(t)}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Ve(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!je.getBool("WEBGL_FORCE_F16_TEXTURES")&&je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Ge(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return He(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Et=Qe;var Fn=Tn({complex_:function(t,e){var n=yn(t,"real","complex"),r=yn(e,"imag","complex");return k(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Ut.runKernelFunc(function(t){return t.complex(n,r)},{$real:n,$imag:r})}}),_n=Tn({real_:function(t){var e=yn(t,"input","real");return Ut.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),On=Tn({imag_:function(t){var e=yn(t,"input","imag");return Ut.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function Mn(t,e,n){return Bn(t,e,gn(t,n),n)}function Bn(t,e,n,r){if(null==r&&(r=$(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!q(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){at(e);var o=D(e),a=D(n);I(o===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+a});for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==D(e.slice(i));I(n[i]===e[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return q(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?tt(t,r,c().getBool("DEBUG")):A(t,[],!0),Ut.makeTensor(t,e,r)}function Pn(t,e){if((q(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&q(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bn(t,[],[],e)}function Ln(t,e){S(t);var n=gn(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bn(t,null,n,e)}function Wn(t,e,n){if(S(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=gn(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bn(t,e,r,n)}function zn(t,e,n){if(S(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=gn(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Bn(t,e,r,n)}function Un(t,e,n){if(S(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=gn(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Bn(t,e,r,n)}function Vn(t,e,n){if(S(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=gn(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Bn(t,e,r,n)}function Gn(t,e,n){if(S(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=gn(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Bn(t,e=e||r,r,n)}function qn(t,e,n,r){return void 0===e&&(e=!0),Ut.makeVariable(t,e,n,r)}function Hn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=Hn(t,"float32"),r=Kn(t,"float32");return Fn(n,r)}var o=nt(D(t),e);return Ut.makeTensor(o,t,e)}function Kn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=Kn(t,"float32"),r=Kn(t,"float32");return Fn(n,r)}var o=rt(D(t),e);return Ut.makeTensor(o,t,e)}function jn(t,e,n){return Ut.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function Xn(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Ut.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function Yn(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return Kn([0],r);var o=rt(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return Ln(o,r)}exports.imag=On,exports.real=_n,exports.complex=Fn;var $n=Tn({onesLike_:function(t){var e=yn(t,"x","onesLike");if("complex64"===e.dtype){var n=$n(_n(e)),r=Qn(On(e));return Fn(n,r)}return Ut.runKernelFunc(function(t){return t.onesLike(e)},{$x:e},function(t,e){return{$x:function(){return Qn(t)}}})}}),Qn=Tn({zerosLike_:function(t){var e=yn(t,"x","zerosLike");return Ut.runKernelFunc(function(t){return t.zerosLike(e)},{$x:e},function(t,e){return{$x:function(){return Qn(t)}}})}});exports.zerosLike=Qn,exports.onesLike=$n;var Jn=Tn({concat_:function(t,e){void 0===e&&(e=0),I(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=bn(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+t.dtype+". ")}),e=P(e,n[0].shape)[0];var r=Nn(n.map(function(t){return t.shape}),e);if(0===D(r))return Mn([],r);if(1===(n=n.filter(function(t){return t.size>0})).length)return n[0];var o=n.map(function(t){return t.shape});Dn(o,e);var a=n,i={axis:e};return Ut.runKernelFunc(function(t){return t.concat(n,e)},a,function(t){var n=o.map(function(t){return t[e]});return rr(t,n,e).map(function(t){return function(){return t}})},"Concat",i)}}),Zn=Tn({concat1d_:function(t){return Jn(t,0)}}),tr=Tn({concat2d_:function(t,e){return Jn(t,e)}}),er=Tn({concat3d_:function(t,e){return Jn(t,e)}}),nr=Tn({concat4d_:function(t,e){return Jn(t,e)}}),rr=Tn({split_:function(t,e,n){void 0===n&&(n=0);var r,o=yn(t,"x","split");return n=P(n,o.shape)[0],"number"==typeof e?(I(o.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(o.shape[n]/e)):(I(o.shape[n]===e.reduce(function(t,e){return t+e}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Ut.runKernelFunc(function(t){return t.split(o,r,n)},{$x:o},function(t){return{$x:function(){return Jn(t,n)}}})}});function or(t,e){return t(e={exports:{}},e.exports),e.exports}exports.split=rr,exports.concat4d=nr,exports.concat3d=er,exports.concat2d=tr,exports.concat1d=Zn,exports.concat=Jn,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var ar=or(function(t){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new r(t),a=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.alea=a}(0,t)}),ir=or(function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xor128=a}(0,t)}),sr=or(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xorwow=a}(0,t)}),ur=or(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function o(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&(a.x&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xorshift7=a}(0,t)}),cr=or(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,a=e.i;return e.w=r=r+1640531527|0,n=o[a+34&127],t=o[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,o,a,i,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;t.w=i,t.X=s,t.i=o}(e,t)}function o(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&(a.X&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xor4096=a}(0,t)}),lr=or(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function o(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.tychei=a}(0,t)}),pr=or(function(t){!function(e,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),c=n.pow(2,52),l=2*c,p=a-1;function h(t,p,h){var g=[],x=v(function t(e,n){var r,o=[],a=typeof e;if(n&&"object"==a)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==a?e:e+"\0"}((p=1==p?{entropy:!0}:p||{}).entropy?[t,m(e)]:null==t?function(){try{var t;return r&&(t=r.randomBytes)?t=t(a):(t=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(t)),m(t)}catch(t){var n=o.navigator,i=n&&n.plugins;return[+new Date,o,i,o.screen,m(e)]}}():t,3),g),y=new d(g),b=function(){for(var t=y.g(i),e=u,n=0;t<c;)t=(t+n)*a,e*=a,n=y.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,v(m(y.S),e),(p.pass||h||function(t,e,r,o){return o&&(o.S&&f(o,y),t.state=function(){return f(y,{})}),r?(n[s]=t,e):t})(b,x,"global"in p?p.global:this==n,p.state)}function d(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=p&i+t[o%n]+(e=s[o])],s[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,s=r.S;t--;)e=s[o=p&o+1],n=n*a+s[p&(s[o]=s[i=p&i+e])+(s[i]=e)];return r.i=o,r.j=i,n})(a)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){for(var n,r=t+"",o=0;o<r.length;)e[p&o]=p&(n^=19*e[p&o])+r.charCodeAt(o++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(n["seed"+s]=h,v(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch(t){}}}([],Math)});pr.alea=ar,pr.xor128=ir,pr.xorwow=sr,pr.xorshift7=ur,pr.xor4096=cr,pr.tychei=lr;var hr=pr.alea,dr=function(){function t(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=hr(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),fr=function(){function t(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;var o=r||Math.random();this.randu=hr(o.toString()),this.randn=new dr(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var t,e,n,r,o,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(t){return"float32"===this.dtype?t:Math.round(t)},t}(),vr=function(){function t(t,e,n,r){var o=this;if(void 0===t&&(t=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=hr(r)}return t.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function mr(t,e,n){return void 0===e&&(e="float32"),e=e||"float32",at(t),new bt(t,e,n)}function gr(t,e){void 0===e&&(e=!1),console.log(t.toString(e))}var xr=Tn({batchToSpaceND_:function(t,e,n){var r=yn(t,"x","batchToSpaceND"),o=e.reduce(function(t,e){return t*e});return I(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),I(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),I(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o}),Ut.runKernelFunc(function(t){return t.batchToSpaceND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}})}}),yr=Tn({broadcastTo_:function(t,e){var n=yn(t,"broadcastTo","x"),r=n.shape;if(e.some(function(t){return!(t>0)||t%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var a=Array.from(e),i=e.length-1;i>=0;i--)if(n.shape[i]===e[i])a[i]=1;else if(1!==n.shape[i])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=a.map(function(t,e){return t>1?e:-1}).filter(function(t){return t>=0});return 0===s.length?n.clone():Ut.runKernelFunc(function(t){return t.tile(n,a)},{input:n},function(t){return{input:function(){return t.sum(s,!0)}}})}}),br=Tn({cast_:function(t,e){var n=yn(t,"x","cast");if(!V(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:e};return Ut.runKernelFunc(function(t){return t.cast(n,e)},{x:n},function(t){return{x:function(){return t.clone()}}},"Cast",r)}}),wr=Tn({clone_:function(t){var e=yn(t,"x","clone",null);return Ut.runKernelFunc(function(){return Ut.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),Cr=Tn({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=yn(t,"x","cumsum"),a=kn([e|=0],o.rank),i=o;null!=a&&(i=o.transpose(a));var s=An(1,o.rank)[0],u=Ut.runKernelFunc(function(t){return t.cumsum(i,s,n,r)},{permutedX:i},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=a&&(u=u.transpose(a)),u}}),Er=Tn({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=yn(t,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return I(o*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+e+"  for depthToSpace with input shape\n      "+r.shape}),I(a*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+e+" for depthToSpace with input shape\n          "+r.shape}),I(i%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape}),Ut.runKernelFunc(function(t){return t.depthToSpace(r,e,n)},{$x:r})}}),Rr=Tn({expandDims_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","expandDims",null);I(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(I(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),Pr(n,r)}}),Ir=Tn({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var o=mr([t,e],r),a=t<=e?t:e,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(t,e);if(null==n)return s;if(1===n.length)return Ur(Rr(s,0),[n[0],1,1]);if(2===n.length)return Ur(Rr(Rr(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ur(Rr(Rr(Rr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),kr=Tn({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var o=yn(t,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?o.as2D(1,-1):o,u=Ut.runKernelFunc(function(t){return t.multinomial(s,r,e,n)},{logits2D:s});return 1===i?u.as1D():u}}),Sr=Tn({oneHot_:function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=yn(t,"indices","oneHot","int32"),a=o.shape.concat([e]);return o=o.flatten(),Ut.runKernelFunc(function(t){return t.oneHot(o,e,n,r)},{$indices:o},function(t){return{$indices:function(){return Kn(o.shape,"float32")}}}).reshape(a)}}),Ar=Tn({pad_:function(t,e,n){void 0===n&&(n=0);var r=yn(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:e,constantValue:n};return Ut.runKernelFunc(function(t){return t.pad(r,e,n)},{x:r},function(t){var n=e.map(function(t){return t[0]});return{x:function(){return t.slice(n,r.shape)}}},"PadV2",o)}}),Dr=Tn({pad1d_:function(t,e,n){return void 0===n&&(n=0),I(2===e.length,function(){return"Invalid number of paddings. Must be length of 2."}),Ar(t,[e],n)}}),Nr=Tn({pad2d_:function(t,e,n){return void 0===n&&(n=0),I(2===e.length&&2===e[0].length&&2===e[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ar(t,e,n)}}),Tr=Tn({pad3d_:function(t,e,n){return void 0===n&&(n=0),I(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ar(t,e,n)}}),Fr=Tn({pad4d_:function(t,e,n){return void 0===n&&(n=0),I(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ar(t,e,n)}}),_r=Tn({rand_:function(t,e,n){var r=D(t),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return Ut.makeTensor(o,t,n)}}),Or=Tn({randomNormal_:function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new dr(e,n,r,!1,o),i=mr(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Mr=Tn({randomGamma_:function(t,e,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new fr(e,n,r,o),i=mr(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Br=Tn({randomUniform_:function(t,e,n,r,o){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=mr(t,r),i=new vr(e,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Pr=Tn({reshape_:function(t,e){var n=yn(t,"x","reshape",null);e=B(e,n.size),I(n.size===D(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return Ut.runKernelFunc(function(t){return t.reshape(n,e)},{x:n},function(t){return{x:function(){return t.reshape(n.shape)}}},"Reshape",r)}}),Lr=Tn({spaceToBatchND_:function(t,e,n){var r=yn(t,"x","spaceToBatchND");return I(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),I(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),I(r.shape.reduce(function(t,r,o){return o>0&&o<=e.length?t&&(r+n[o-1][0]+n[o-1][1])%e[o-1]==0:t},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),Ut.runKernelFunc(function(t){return t.spaceToBatchND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}})}}),Wr=Tn({squeeze_:function(t,e){var n=yn(t,"x","squeeze");return Pr(n,L(n.shape,e).newShape)}}),zr=Tn({stack_:function(t,e){void 0===e&&(e=0);var n=bn(t,"tensors","stack");if(I(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;I(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(t){k(o,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){I(a===t.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(t){return t.expandDims(e)});return Jn(i,e)}}),Ur=Tn({tile_:function(t,e){var n=yn(t,"x","tile",null);I(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],o={reps:e};return Ut.runKernelFunc(function(t,r){var o=t.tile(n,e);return r([n]),o},{x:n},function(t,n){var r=n[0];return{x:function(){var n=Qn(r);if(1===r.rank)for(var o=0;o<e[0];++o)n=n.add(t.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<e[0];++o)for(var a=0;a<e[1];++a)n=n.add(t.slice([o*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<e[0];++o)for(a=0;a<e[1];++a)for(var i=0;i<e[2];++i)n=n.add(t.slice([o*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<e[0];++o)for(a=0;a<e[1];++a)for(i=0;i<e[2];++i)for(var s=0;s<e[3];++s)n=n.add(t.slice([o*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}},"Tile",o,r)}}),Vr=Tn({truncatedNormal_:function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new dr(e,n,r,!0,o),i=mr(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Gr=Tn({unstack_:function(t,e){void 0===e&&(e=0),e=e||0;var n=yn(t,"x","unstack");I(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return Ut.runKernelFunc(function(t){return t.unstack(n,e)},{x:n},function(t){return{x:function(){return zr(t,e)}}},"Unpack",r)}}),qr=function(t,e){return a(this,void 0,void 0,function(){var n,r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return n=yn(t,"x","setdiff1d"),r=yn(e,"y","setdiff1d"),I(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),I(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),I(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=i.sent(),[4,r.data()];case 2:for(a=i.sent(),s=new Set(a),u=0,p=0;p<o.length;p++)s.has(o[p])||u++;for(c=new bt([u],n.dtype),l=new bt([u],"int32"),p=0,h=0;p<o.length;p++)s.has(o[p])||(c.values[h]=o[p],l.values[h]=p,h++);return[2,[c.toTensor(),l.toTensor()]]}})})};function Hr(t,e,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var a=e.length,i=0;i<a;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(a+1))}return o}function Kr(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function jr(t,e,n,r){void 0===r&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?o.push(e[a-1]*t[a]):o.push(t[a]/e[a-1]):o.push(t[a]);return o}function Xr(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function Yr(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function $r(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=i[a],s.push(i[a]);var c=Z(t.shape).map(function(t){return t/u}).concat([1]).slice(0,r);return[s,o,u,c]}exports.setdiff1dAsync=qr,exports.unstack=Gr,exports.truncatedNormal=Vr,exports.tile=Ur,exports.stack=zr,exports.squeeze=Wr,exports.spaceToBatchND=Lr,exports.reshape=Pr,exports.randomUniform=Br,exports.randomGamma=Mr,exports.randomNormal=Or,exports.rand=_r,exports.pad4d=Fr,exports.pad3d=Tr,exports.pad2d=Nr,exports.pad1d=Dr,exports.pad=Ar,exports.oneHot=Sr,exports.multinomial=kr,exports.eye=Ir,exports.expandDims=Rr,exports.depthToSpace=Er,exports.cumsum=Cr,exports.clone=wr,exports.cast=br,exports.broadcastTo=yr,exports.batchToSpaceND=xr;var Qr=Object.freeze({prepareAndValidate:$r}),Jr=30;function Zr(t){return t<=Jr?t:J(t,Math.floor(Math.sqrt(t)))}function to(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(a+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function eo(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}to(n,e,t)}function no(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:D(e.shape)/u,sliceSize:i,strides:Z(n.slice(0,o)).concat([1]),outputSize:D(n)}}exports.gather_util=Qr;var ro=Object.freeze({validateUpdateShape:to,validateInput:eo,calculateShapes:no});function oo(t,e,n){I(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),I(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(r){I(e[r]+n[r]<=t.shape[r],function(){return"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")"})},o=0;o<t.rank;++o)r(o)}function ao(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function io(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function so(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||null==a)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),C(0,a,s-1)}function uo(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||null==a)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),i>0?C(0,a,s):C(-1,a,s-1)}function co(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function lo(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}exports.scatter_util=ro;var po=Object.freeze({assertParamsValid:oo,maskToAxes:ao,computeOutShape:io,startForAxis:so,stopForAxis:uo,isSliceContinous:co,computeFlatOffset:lo});function ho(t){return I(Q(t),function(){return"The f passed in grad(f) must be a function"}),function(e,n){var r=yn(e,"x","tf.grad",null),o=null!=n?yn(n,"dy","tf.grad"):null;return Ut.tidy(function(){var e=Ut.gradients(function(){return t(r)},[r],o),n=e.value,a=e.grads;return null!=o&&k(n.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),yo(a),a[0]})}}function fo(t){return I(Q(t),function(){return"The f passed in grads(f) must be a function"}),function(e,n){I(Array.isArray(e),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=bn(e,"args","tf.grads",null),o=null!=n?yn(n,"dy","tf.grads"):null;return Ut.tidy(function(){var e=Ut.gradients(function(){return t.apply(void 0,r)},r,o),n=e.value,a=e.grads;return null!=o&&k(n.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),yo(a),a})}}function vo(t){return I(Q(t),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(e,n){I(e instanceof Rt,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),I(null==n||n instanceof Rt,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=Ut.gradients(function(){return t(e)},[e],n),o=r.grads,a=r.value;return yo(o),{grad:o[0],value:a}}}function mo(t){return I(Q(t),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(e,n){I(Array.isArray(e)&&e.every(function(t){return t instanceof Rt}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),I(null==n||n instanceof Rt,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=Ut.gradients(function(){return t.apply(void 0,e)},e,n);return null!=n&&k(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),yo(r.grads),r}}function go(t,e){I(Q(t),function(){return"The f passed in variableGrads(f) must be a function"}),I(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof Nt}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=e;if(!n)for(var r in e=[],Ut.registeredVariables)e.push(Ut.registeredVariables[r]);var o=n?e.filter(function(t){return!t.trainable}):null,a=e.length;I((e=e.filter(function(t){return t.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var i=Ut.gradients(t,e,null,!0),s=i.value,u=i.grads;I(u.some(function(t){return null!=t}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),I(0===s.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var c={};return e.forEach(function(t,e){null!=u[e]&&(c[t.name]=u[e])}),null!=o&&o.forEach(function(t){return c[t.name]=null}),{value:s,grads:c}}function xo(t){return Ut.customGrad(t)}function yo(t){if(t.filter(function(t){return null==t}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}exports.slice_util=po;var bo=Tn({softmax_:function(t,e){void 0===e&&(e=-1);var n=yn(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Ut.runKernelFunc(function(t,r){var o=t.softmax(n,e);return r([o]),o},{logits:n},function(t,n){var r=n[0],o=t.mul(r);return{logits:function(){return o.sub(o.sum([e],!0).mul(r))}}},"Softmax",{dim:e},[],[!0])}}),wo=Tn({logSoftmax_:function(t,e){void 0===e&&(e=-1);var n=yn(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return xo(function(t,n){var r=t.max(e,!0),o=t.sub(r),a=o.toFloat().sub(o.exp().sum(e,!0).log());return n([a]),{value:a,gradFunc:function(t,n){var r=n[0].exp();return t.sub(t.sum(e,!0).mul(r))}}})(n)}}),Co=function(){function t(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},t.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),Eo=function(){function t(){}return t.prototype.time=function(t){return Ro("time")},t.prototype.read=function(t){return Ro("read")},t.prototype.readSync=function(t){return Ro("readSync")},t.prototype.numDataIds=function(){return Ro("numDataIds")},t.prototype.disposeData=function(t){return Ro("disposeData")},t.prototype.write=function(t,e,n){return Ro("write")},t.prototype.move=function(t,e,n,r){return Ro("move")},t.prototype.memory=function(){return Ro("memory")},t.prototype.floatPrecision=function(){return Ro("floatPrecision")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(t,e,n,r){return Ro("batchMatMul")},t.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Ro("fusedBatchMatMul")},t.prototype.slice=function(t,e,n){return Ro("slice")},t.prototype.stridedSlice=function(t,e,n,r){return Ro("stridedSlice")},t.prototype.unstack=function(t,e){return Ro("unstack")},t.prototype.reverse=function(t,e){return Ro("reverse")},t.prototype.concat=function(t,e){return Ro("concat")},t.prototype.neg=function(t){return Ro("neg")},t.prototype.add=function(t,e){return Ro("add")},t.prototype.addN=function(t){return Ro("addN")},t.prototype.subtract=function(t,e){return Ro("subtract")},t.prototype.multiply=function(t,e){return Ro("multiply")},t.prototype.realDivide=function(t,e){return Ro("realDivide")},t.prototype.floorDiv=function(t,e){return Ro("floorDiv")},t.prototype.sum=function(t,e){return Ro("sum")},t.prototype.prod=function(t,e){return Ro("prod")},t.prototype.unsortedSegmentSum=function(t,e,n){return Ro("unsortedSegmentSum")},t.prototype.argMin=function(t,e){return Ro("argMin")},t.prototype.argMax=function(t,e){return Ro("argMax")},t.prototype.equal=function(t,e){return Ro("equal")},t.prototype.notEqual=function(t,e){return Ro("notEqual")},t.prototype.less=function(t,e){return Ro("less")},t.prototype.lessEqual=function(t,e){return Ro("lessEqual")},t.prototype.greater=function(t,e){return Ro("greater")},t.prototype.greaterEqual=function(t,e){return Ro("greaterEqual")},t.prototype.logicalNot=function(t){return Ro("logicalNot")},t.prototype.logicalAnd=function(t,e){return Ro("logicalAnd")},t.prototype.logicalOr=function(t,e){return Ro("logicalOr")},t.prototype.where=function(t){return Ro("where")},t.prototype.select=function(t,e,n){return Ro("select")},t.prototype.topk=function(t,e,n){return Ro("topk")},t.prototype.min=function(t,e){return Ro("min")},t.prototype.minimum=function(t,e){return Ro("minimum")},t.prototype.mod=function(t,e){return Ro("mod")},t.prototype.max=function(t,e){return Ro("max")},t.prototype.maximum=function(t,e){return Ro("maximum")},t.prototype.all=function(t,e){return Ro("all")},t.prototype.any=function(t,e){return Ro("any")},t.prototype.squaredDifference=function(t,e){return Ro("squaredDifference")},t.prototype.ceil=function(t){return Ro("ceil")},t.prototype.floor=function(t){return Ro("floor")},t.prototype.round=function(t){return Ro("round")},t.prototype.sign=function(t){return Ro("sign")},t.prototype.isNaN=function(t){return Ro("isNaN")},t.prototype.isInf=function(t){return Ro("isInf")},t.prototype.isFinite=function(t){return Ro("isFinite")},t.prototype.pow=function(t,e){return Ro("pow")},t.prototype.exp=function(t){return Ro("exp")},t.prototype.expm1=function(t){return Ro("expm1")},t.prototype.softmax=function(t,e){return Ro("softmax")},t.prototype.log=function(t){return Ro("log")},t.prototype.log1p=function(t){return Ro("log1p")},t.prototype.sqrt=function(t){return Ro("sqrt")},t.prototype.rsqrt=function(t){return Ro("rsqrt")},t.prototype.square=function(t){return Ro("square")},t.prototype.reciprocal=function(t){return Ro("reciprocal")},t.prototype.relu=function(t){return Ro("relu")},t.prototype.relu6=function(t){return Ro("relu6")},t.prototype.prelu=function(t,e){return Ro("prelu")},t.prototype.elu=function(t){return Ro("elu")},t.prototype.eluDer=function(t,e){return Ro("eluDer")},t.prototype.selu=function(t){return Ro("selu")},t.prototype.int=function(t){return Ro("int")},t.prototype.clip=function(t,e,n){return Ro("clip")},t.prototype.abs=function(t){return Ro("abs")},t.prototype.complexAbs=function(t){return Ro("complexAbs")},t.prototype.sigmoid=function(t){return Ro("sigmoid")},t.prototype.softplus=function(t){return Ro("softplus")},t.prototype.sin=function(t){return Ro("sin")},t.prototype.cos=function(t){return Ro("cos")},t.prototype.tan=function(t){return Ro("tan")},t.prototype.asin=function(t){return Ro("asin")},t.prototype.acos=function(t){return Ro("acos")},t.prototype.atan=function(t){return Ro("atan")},t.prototype.atan2=function(t,e){return Ro("atan2")},t.prototype.sinh=function(t){return Ro("sinh")},t.prototype.cosh=function(t){return Ro("cosh")},t.prototype.tanh=function(t){return Ro("tanh")},t.prototype.asinh=function(t){return Ro("asinh")},t.prototype.acosh=function(t){return Ro("acosh")},t.prototype.atanh=function(t){return Ro("atanh")},t.prototype.erf=function(t){return Ro("erf")},t.prototype.step=function(t,e){return Ro("step")},t.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ro("fusedConv2d")},t.prototype.conv2d=function(t,e,n){return Ro("conv2d")},t.prototype.conv2dDerInput=function(t,e,n){return Ro("conv2dDerInput")},t.prototype.conv2dDerFilter=function(t,e,n){return Ro("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ro("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(t,e,n){return Ro("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(t,e,n){return Ro("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){return Ro("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(t,e,n){return Ro("conv3d")},t.prototype.conv3dDerInput=function(t,e,n){return Ro("conv3dDerInput")},t.prototype.conv3dDerFilter=function(t,e,n){return Ro("conv3dDerFilter")},t.prototype.maxPool=function(t,e){return Ro("maxPool")},t.prototype.maxPoolBackprop=function(t,e,n,r){return Ro("maxPoolBackprop")},t.prototype.avgPool=function(t,e){return Ro("avgPool")},t.prototype.avgPoolBackprop=function(t,e,n){return Ro("avgPoolBackprop")},t.prototype.avgPool3d=function(t,e){return Ro("avgPool3d")},t.prototype.avgPool3dBackprop=function(t,e,n){return Ro("avgPool3dBackprop")},t.prototype.maxPool3d=function(t,e){return Ro("maxPool3d")},t.prototype.maxPool3dBackprop=function(t,e,n,r){return Ro("maxPool3dBackprop")},t.prototype.reshape=function(t,e){return Ro("reshape")},t.prototype.cast=function(t,e){return Ro("cast")},t.prototype.tile=function(t,e){return Ro("tile")},t.prototype.pad=function(t,e,n){return Ro("pad")},t.prototype.transpose=function(t,e){return Ro("transpose")},t.prototype.gather=function(t,e,n){return Ro("gather")},t.prototype.gatherND=function(t,e){return Ro("gatherND")},t.prototype.scatterND=function(t,e,n){return Ro("scatterND")},t.prototype.batchToSpaceND=function(t,e,n){return Ro("batchToSpaceND")},t.prototype.spaceToBatchND=function(t,e,n){return Ro("spaceToBatchND")},t.prototype.resizeBilinear=function(t,e,n,r){return Ro("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(t,e,n){return Ro("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(t,e,n,r){return Ro("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){return Ro("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(t,e,n,r,o,a){return Ro("batchNormalization")},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){return Ro("localResponseNormalization4D")},t.prototype.LRNGrad=function(t,e,n,r,o,a,i){return Ro("LRNGrad")},t.prototype.multinomial=function(t,e,n,r){return Ro("multinomial")},t.prototype.oneHot=function(t,e,n,r){return Ro("oneHot")},t.prototype.cumsum=function(t,e,n,r){return Ro("cumsum")},t.prototype.nonMaxSuppression=function(t,e,n,r,o){return Ro("nonMaxSuppression")},t.prototype.fft=function(t){return Ro("fft")},t.prototype.ifft=function(t){return Ro("ifft")},t.prototype.complex=function(t,e){return Ro("complex")},t.prototype.real=function(t){return Ro("real")},t.prototype.imag=function(t){return Ro("imag")},t.prototype.cropAndResize=function(t,e,n,r,o,a){return Ro("cropAndResize")},t.prototype.depthToSpace=function(t,e,n){return Ro("depthToSpace")},t.prototype.split=function(t,e,n){return Ro("split")},t.prototype.sparseToDense=function(t,e,n,r){return Ro("sparseToDense")},t.prototype.diag=function(t){return Ro("diag")},t.prototype.fill=function(t,e,n){return Ro("fill")},t.prototype.onesLike=function(t){return Ro("onesLike")},t.prototype.zerosLike=function(t){return Ro("zerosLike")},t.prototype.linspace=function(t,e,n){return Ro("linspace")},t.prototype.dispose=function(){return Ro("dispose")},t}();function Ro(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Io(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function ko(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function So(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var a=t[t.length-o-1];null==a&&(a=1);var i=e[e.length-o-1];if(null==i&&(i=1),1===a)n.unshift(i);else if(1===i)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}function Ao(t,e,n,r,o,a,i){void 0===i&&(i="channelsLast");var s,u=_o(e),c=u[0],l=u[1];if("channelsLast"===i)s=[c,l,t[3],t[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[c,l,t[1],t[1]]}return No(t,s,n,r,o,a,!1,i)}function Do(t,e,n,r,o,a,i){void 0===i&&(i="NDHWC");var s,u,c=Oo(e),l=c[0],p=c[1],h=c[2];if("NDHWC"===i)u="channelsLast",s=[l,p,h,t[4],t[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[l,p,h,t[1],t[1]]}return To(t,s,n,r,o,!1,u,a)}function No(t,e,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],p=u[2],h=u[3];if("channelsLast"===s)c=t[0],l=t[1],p=t[2],h=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=t[0],h=t[1],l=t[2],p=t[3]}var d,f=e[0],v=e[1],m=e[3],g=_o(n),x=g[0],y=g[1],b=_o(r),w=b[0],C=b[1],E=Mo(f,w),R=Mo(v,C),k=function(t,e,n,r,o,a,i,s){var u,c,l;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var p=function(t,e,n,r,o){null==r&&(r=Fo(t,e,n));var a=t[1],i=Bo((t[0]-e+2*r)/n+1,o);I(T(i),function(){return"The output # of rows ("+i+") must be an integer. Change the stride and/or zero pad parameters"});var s=Bo((a-e+2*r)/n+1,o);return I(T(s),function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"}),[i,s]}([e,n],a,r,t,s);c=p[0],l=p[1]}else if("same"===t){c=Math.ceil(e/r),l=Math.ceil(n/o);var h=Math.max(0,(c-1)*r+a-e),d=Math.max(0,(l-1)*o+i-n),f=Math.floor(h/2),v=h-f,m=Math.floor(d/2);u={top:f,bottom:v,left:m,right:d-m,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/r),l=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:c,outWidth:l}}(o,l,p,x,y,E,R,a),S=k.padInfo,A=k.outHeight,D=k.outWidth,N=i?m*h:m;return"channelsFirst"===s?d=[c,N,A,D]:"channelsLast"===s&&(d=[c,A,D,N]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:p,inChannels:h,outHeight:A,outWidth:D,outChannels:N,padInfo:S,strideHeight:x,strideWidth:y,filterHeight:f,filterWidth:v,effectiveFilterHeight:E,effectiveFilterWidth:R,dilationHeight:w,dilationWidth:C,inShape:t,outShape:d,filterShape:e}}function To(t,e,n,r,o,a,i,s){void 0===a&&(a=!1),void 0===i&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],p=u[2],h=u[3],d=u[4];if("channelsLast"===i)c=t[0],l=t[1],p=t[2],h=t[3],d=t[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);c=t[0],d=t[1],l=t[2],p=t[3],h=t[4]}var f,v=e[0],m=e[1],g=e[2],x=e[4],y=Oo(n),b=y[0],w=y[1],C=y[2],E=Oo(r),R=E[0],k=E[1],S=E[2],A=Mo(v,R),D=Mo(m,k),N=Mo(g,S),F=function(t,e,n,r,o,a,i,s,u,c,l){var p,h,d,f;if("number"==typeof t){p={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var v=function(t,e,n,r,o,a){null==o&&(o=Fo(t,e,r));var i=t[1],s=t[2],u=Bo((t[0]-e+2*o)/r+1,a);I(T(u),function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"});var c=Bo((i-e+2*o)/r+1,a);I(T(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var l=Bo((s-e+2*o)/r+1,a);return I(T(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[u,c,l,1]}([e,n,r,1],s,0,o,t,l);h=v[0],d=v[1],f=v[2]}else if("same"===t){var m=((h=Math.ceil(e/o))-1)*o+s-e,g=((d=Math.ceil(n/a))-1)*a+u-n,x=((f=Math.ceil(r/i))-1)*i+c-r,y=Math.floor(m/2),b=m-y,w=Math.floor(g/2),C=g-w,E=Math.floor(x/2);p={top:w,bottom:C,left:E,right:x-E,front:y,back:b,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((e-s+1)/o),d=Math.ceil((n-u+1)/a),f=Math.ceil((r-c+1)/i)}return{padInfo:p,outDepth:h,outHeight:d,outWidth:f}}(o,l,p,h,b,w,C,A,D,N,s),_=F.padInfo,O=F.outDepth,M=F.outHeight,B=F.outWidth,P=a?x*d:x;return"channelsFirst"===i?f=[c,P,O,M,B]:"channelsLast"===i&&(f=[c,O,M,B,P]),{batchSize:c,dataFormat:i,inDepth:l,inHeight:p,inWidth:h,inChannels:d,outDepth:O,outHeight:M,outWidth:B,outChannels:P,padInfo:_,strideDepth:b,strideHeight:w,strideWidth:C,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:D,effectiveFilterWidth:N,dilationDepth:R,dilationHeight:k,dilationWidth:S,inShape:t,outShape:f,filterShape:e}}function Fo(t,e,n,r){void 0===r&&(r=1);var o=Mo(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function _o(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function Oo(t){return"number"==typeof t?[t,t,t]:t}function Mo(t,e){return e<=1?t:t+(t-1)*(e-1)}function Bo(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Po(t){var e=_o(t),n=e[0],r=e[1],o=e[2];return 1===n&&1===r&&1===o}function Lo(t,e){return Po(t)||Po(e)}function Wo(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function zo(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=Kn(t.shape),o=t.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!G(t.dtype,e))return Ut.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){var i=n.real(t);return a=i.cast(e),i.dispose(),a}if("int32"===e)return n.int(t);if("bool"===e){var s=Pn(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function Uo(t,e){return Ut.makeTensorFromDataId(t.dataId,e,t.dtype)}function Vo(t,e,n){var r=(e-t)/(n-1),o=rt(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return Ln(o,"float32")}exports.KernelBackend=Eo,exports.DataStorage=Co,exports.logSoftmax=wo,exports.softmax=bo;var Go=Object.freeze({castTensor:zo,reshapeTensor:Uo,linspaceImpl:Vo,upcastType:Ft,axesAreInnerMostDims:wn,combineLocations:Cn,computeOutAndReduceShapes:En,expandShapeToKeepDim:Rn,assertAxesAreInnerMostDims:In,getAxesPermutation:kn,getUndoAxesPermutation:Sn,getInnerMostAxes:An,getBroadcastDims:Io,getReductionAxes:ko,assertAndGetBroadcastShape:So,assertParamsConsistent:Dn,computeOutShape:Nn,computePool2DInfo:Ao,computePool3DInfo:Do,computeConv2DInfo:No,computeConv3DInfo:To,computeDefaultPad:Fo,tupleValuesAreOne:Po,eitherStridesOrDilationsAreOne:Lo,convertConv2DDataFormat:Wo,PARALLELIZE_THRESHOLD:Jr,computeOptimalWindowSize:Zr});function qo(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Ho(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Ko(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function jo(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Xo(t,e,n){var r=function(t,e,n){return function(t,e,n){for(var r=0,o=t.length,a=0,i=!1;r<o;){var s=n(e,t[a=r+(o-r>>>1)]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(t,e,n||Yo)}(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function Yo(t,e){return t>e?1:t<e?-1:0}function $o(t,e,n,r,o){return Jo(t,e,n,r,o,0).selectedIndices}function Qo(t,e,n,r,o,a){var i=Jo(t,e,n,r,o,a,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function Jo(t,e,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);for(var u=Array.from(e).map(function(t,e){return{score:t,boxIndex:e,suppressBeginIndex:0}}).filter(function(t){return t.score>o}).sort(ea),c=a>0?-.5/a:0,l=[],p=[];l.length<n&&u.length>0;){var h=u.pop(),d=h.score,f=h.boxIndex,v=h.suppressBeginIndex;if(d<o)break;for(var m=!1,g=l.length-1;g>=v;--g){var x=Zo(t,f,l[g]);if(x>=r){m=!0;break}if(h.score=h.score*ta(r,c,x),h.score<=o)break}h.suppressBeginIndex=l.length,m||(h.score===d?(l.push(f),p.push(h.score)):h.score>o&&Xo(u,h,ea))}var y=l.length;return s&&(l.fill(0,y),p.fill(0,y)),{selectedIndices:Ln(l,"int32"),selectedScores:Ln(p,"float32"),numValidOutputs:Pn(y,"int32")}}function Zo(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),p=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),d=(s-a)*(u-i),f=(p-c)*(h-l);if(d<=0||f<=0)return 0;var v=Math.max(a,c),m=Math.max(i,l),g=Math.min(s,p),x=Math.min(u,h),y=Math.max(g-v,0)*Math.max(x-m,0);return y/(d+f-y)}function ta(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function ea(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function na(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map(function(e){o[n]=e;var a=t.slice(r,o);return r[n]+=e,a})}function ra(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=mr(n,t.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(t.rank),s=0;s<i.length;s++)i[s]=a[s]%t.shape[s];var u=t.locToIndex(i);o.values[r]=t.values[u]}return o.toTensor()}function oa(t,e,n,r,o){for(var a=e[e.length-1],i=[t.length/a,a],s=i[0],u=i[1],c=W(n,s*r),l=W("int32",s*r),p=0;p<s;p++){for(var h=p*u,d=t.subarray(h,h+u),f=[],v=0;v<d.length;v++)f.push({value:d[v],index:v});f.sort(function(t,e){return e.value-t.value});var m=p*r,g=c.subarray(m,m+r),x=l.subarray(m,m+r);for(v=0;v<r;v++)g[v]=f[v].value,x[v]=f[v].index}var y=e.slice();return y[y.length-1]=r,[Mn(c,y,n),Mn(l,y,"int32")]}function aa(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=mr(t,"int32"),a=mr([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*t.length;a.values.set(i,s)}return a.toTensor()}exports.backend_util=Go;var ia=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("float v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},sa=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("vec4 v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},ua=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function ca(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(e){return t+"."+e})}function la(t,e){return 1===e?[t]:ca(t,e)}function pa(){var t,e,n,r,o,a,i,s,u,l;return 2===c().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function ha(t,e,n){void 0===n&&(n="index");var r=Z(e);return r.map(function(e,o){return"int "+t[o]+" = "+n+" / "+e+"; "+(o===r.length-1?"int "+t[o+1]+" = "+n+" - "+t[o]+" * "+e:"index -= "+t[o]+" * "+e)+";"}).join("")}function da(t){var e=Z(t).map(function(t){return t.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+e[0]+" + coords.y * "+e[1]+" + coords.z;\n  }\n"}var fa="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function va(t,e,n,r){var o=[];t.forEach(function(t){var e=D(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?o.push("uniform float "+t.name+(e>1?"["+e+"]":"")+";"):(o.push("uniform sampler2D "+t.name+";"),o.push("uniform int offset"+t.name+";"))});var a,i,s=o.join("\n"),u=t.map(function(t){return function(t,e,n){void 0===n&&(n=!1);var r="";r+=n?ga(t):ma(t);var o=t.shapeInfo.logicalShape,a=e.logicalShape;return o.length<=a.length&&(r+=n?function(t,e){var n,r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,u=Io(t.shapeInfo.logicalShape,e.logicalShape),c=Ra(s),l=s-i,p=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map(function(t){return"coords."+p[t+l]+" = 0;"}).join("\n");var h;h=s<2&&i>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+p[e+l]}).join(", ");var d="return outputValue;",f=1===D(t.shapeInfo.logicalShape),v=1===D(e.logicalShape);if(1!==i||f||v){if(f&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=i-2,g=i-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?d="return vec4(outputValue.x);":u.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+h+");\n      "+d+"\n    }\n  "}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.texShape,i=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&null==t.shapeInfo.flatOffset&&N(i,a))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c=Ra(u),l=Io(t.shapeInfo.logicalShape,e.logicalShape),p=u-s,h=["x","y","z","w","u","v"];return"\n    float "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===s?"":u<2&&l.length>=1?"coords = 0;":l.map(function(t){return"coords."+h[t+p]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(u<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+h[e+p]}).join(", "))+");\n    }\n  "}(t,e)),r}(t,e,r)}).join("\n"),c=e.texShape,l=pa(),p="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+l.texture2D+"(textureSampler, uv).r;\n    }\n  ",h=function(t){return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFs+" vec2 resultUV;\n    "+t.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+t.defineSpecialNaN+"\n    "+t.defineSpecialInf+"\n    "+t.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+xa+"\n    "+ya+"\n    "+ba+"\n  "}(l);return e.isPacked?(a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(N(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=t,r=e,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),a=o,i="",s="b, r, c",u=2;u<t.length-1;u++)i="\n      int b"+u+" = index / "+(a*=t[t.length-u-1])+";\n      index -= b"+u+" * "+a+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+t.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+t.length+"("+s+");\n    }\n  "}(t,e)}var n,r,o,a,i}(e.logicalShape,c),i="\n    void setOutput(vec4 val) {\n      "+l.output+" = val;\n    }\n  "):(a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return N(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=e,r=ha(["r","c","d"],t),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=ha(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=ha(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=ha(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r}(e.logicalShape,c),i="\n    void setOutput(float val) {\n      "+l.output+" = vec4(val, 0, 0, 0);\n    }\n  "),r&&(h+=wa),[h,p,i,s,a,u,n].join("\n")}function ma(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(1===o&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var i=t.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+Ca(e)+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Ea(t)+"\n      }\n    ";var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(1===a&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var i=Ca(e);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+o+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+a+", index + "+i+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape;if(null!=o&&N(e,o)){var a=o[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=L(e),s=i.newShape,u=i.keptDims,c=s;if(c.length<e.length)return"\n      "+ma(Ia(t,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+ka(["row","col"],u)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+e[1]+", 1)));\n        "+Ea(t)+"\n      }\n    ";var l=o[0],p=o[1],h=Ca(n);return 1===p?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===l?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+p+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+e[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+l+", "+p+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[1]*e[2],a=e[2],i=L(e),s=i.newShape,u=i.keptDims,c=s;if(c.length<e.length)return"\n        "+ma(Ia(t,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+ka(["row","col","depth"],u)+");\n        }\n      ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+Ea(t)+"\n      }\n    ";var l=t.shapeInfo.texShape,p=l[0],h=l[1],d=t.shapeInfo.flatOffset;return h===o&&null==d?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+p+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===a&&null==d?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+e[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+p+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+Ca(n)+";\n        vec2 uv = uvFromFlat("+p+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[3],a=e[2]*o,i=e[1]*a,s=L(e),u=s.newShape,c=s.keptDims;if(u.length<e.length)return"\n      "+ma(Ia(t,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+ka(["row","col","depth","depth2"],c)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+a+", "+o+", 1)));\n        "+Ea(t)+"\n      }\n    ";var l=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],d=p[1];return d===i&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+e[1]*e[2]+", "+e[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+d+", index + "+Ca(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],a=e[3]*o,i=e[2]*a,s=e[1]*i,u=L(e),c=u.newShape,l=u.keptDims;if(c.length<e.length)return"\n      "+ma(Ia(t,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+ka(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+a+", "+o+")) +\n          depth3;\n        "+Ea(t)+"\n      }\n    ";var p=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],f=h[1];return f===s&&null==p?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===o&&null==p?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]+",\n               "+e[2]*e[3]+", "+e[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+Ca(n)+";\n      vec2 uv = uvFromFlat("+d+", "+f+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=L(e),a=o.newShape,i=o.keptDims;if(a.length<e.length)return"\n      "+ma(Ia(t,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+ka(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var s=e[5],u=e[4]*s,c=e[3]*u,l=e[2]*c,p=e[1]*l;if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+p+", "+l+", "+c+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+Ea(t)+"\n      }\n    ";var h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],v=d[1];return v===p&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]*e[4]+",\n               "+e[2]*e[3]*e[4]+",\n               "+e[3]*e[4]+",\n               "+e[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+p+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+Ca(n)+";\n      vec2 uv = uvFromFlat("+f+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function ga(t){var e;switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(e=t.name).charAt(0).toUpperCase()+e.slice(1))+"() {\n      return "+pa().texture2D+"("+e+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=pa();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+a.texture2D+"("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=o[0],i=o[1],s=pa();if(null!=o&&N(e,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(e[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===e[0])return"\n        "+ga(Ia(t,e.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+ka(["b","row","col"],[1,2])+");\n        }\n      ";var i=a[0],s=a[1],u=Math.ceil(e[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+s+", "+u*Math.ceil(e[1]/2)+", "+u+", b, row, col);\n      return "+pa().texture2D+"("+n+", uv);\n    }\n  "}(t);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],c=Math.ceil(e[n-1]/2),l=c*Math.ceil(e[n-2]/2),p="int b, int row, int col",h="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)p="int b"+d+", "+p,h="b"+d+" * "+(l*=e[n-d-1])+" + "+h;return"\n    vec4 "+o+"("+p+") {\n      int index = "+h+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+pa().texture2D+"("+r+", uv);\n    }\n  "}(t)}}var xa="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ya="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ba="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",wa="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Ca(t){return"offset"+t}function Ea(t){var e=t.name,n=D(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function Ra(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Ia(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function ka(t,e){return e.map(function(e){return t[e]}).join(", ")}var Sa=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,I(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],a=Math.ceil(o/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,c=u.length,l=Ra(c),p=la("coords",c);if(1===a){var h=Ra(s=c+1);i="\n        "+h+" sourceLocR = "+h+"("+p.join()+", 0);\n        ++"+p[c-1]+";\n        "+h+" sourceLocG = "+h+"("+p.join()+", 0);\n        ++"+p[c-2]+";\n        "+h+" sourceLocA = "+h+"("+p.join()+", 0);\n        --"+p[c-1]+";\n        "+h+" sourceLocB = "+h+"("+p.join()+", 0);\n        --"+p[c-2]+";"}else s=c,i="\n        "+l+" sourceLocR = coords;\n        ++"+p[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+p[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+p[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+p[c-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),f="."+d[s-1],v=d.map(function(t){return"int "+t}),m=la("sourceLocR",s-1).concat("inIdx.r"),g=la("sourceLocG",s-1).concat("inIdx.g"),x=la("sourceLocB",s-1).concat("inIdx.b"),y=la("sourceLocA",s-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+x.join()+"),\n                             getBestIndicesAChannel("+y.join()+")));",C="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+x.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+y.join()+") : 0.)",E=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+E+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+p[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+p[c-2]+" < "+(u[c-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+f+", sourceLocG"+f+",\n          sourceLocB"+f+", sourceLocA"+f+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Aa=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=s-1-t.padInfo.top,l=u-1-t.padInfo.left,p=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+p+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Da=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,p=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=p-1-t.padInfo.top,v=h-1-t.padInfo.left,m=1/(e*n*r);this.userCode="\n      const ivec3 pads = ivec3("+d+", "+f+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+p+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Na=function(t,e,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],So(t,e),So(t,n);var i="0.0";null!=r&&(So(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=o&&(So(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},Ta=function(t,e,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],So(t,e),So(t,n);var i="vec4(0.0)";null!=r&&(So(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(So(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Fa="return areal * breal - aimag * bimag;",_a="return areal * bimag + aimag * breal;",Oa=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=So(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Ma="return a + b;",Ba="return a - b;",Pa="return a * b;",La="return (a < 0.) ? b * a : a;",Wa=function(t,e,n){this.variableNames=["A","B"],this.outputShape=So(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},za="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Ua=function(t,e,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=So(e,n);var o=this.outputShape.length,a="";if(r)if(0===o||1===D(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+Ra(o)+" coords = getOutputCoords();\n        ",1===o)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=la("coords",o);a+="\n            bool nextRowOutOfBounds =\n              ("+i[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+i[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},Va=function(){function t(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),Ga=function(){function t(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),qa=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Ha=function(t){this.outputShape=[],this.outputShape=Nn(t,1),this.variableNames=t.map(function(t,e){return"T"+e});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=e.length,i=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Ka=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Nn(t,e);var n=this.outputShape,r=n.length,o=Ra(r),a=la("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(t,e){return"T"+e});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var c=i[e],l=i.slice(-2),p=i.join(),h="if ("+c+" < "+s[0]+") {\n        return getChannel(\n            getT0("+p+"), vec2("+l.join()+"));\n        }";for(u=1;u<s.length;u++){var d=s[u-1];h+="\n        if ("+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+ja(i,c,d)+"),\n            vec2("+ja(l,c,d)+"));\n        }"}var f=s.length,v=s[s.length-1];h+="\n        return getChannel(\n          getT"+f+"("+ja(i,c,v)+"),\n          vec2("+ja(l,c,v)+"));",this.userCode="\n      float getValue("+i.map(function(t){return"int "+t})+") {\n        "+h+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function ja(t,e,n){var r=t.indexOf(e);return t.map(function(t,e){return e===r?t+" - "+n:t}).join()}var Xa=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ya=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a="channelsLast"===t.dataFormat,i=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,c=a?2:3,l=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},$a=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+e+" - "+o+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Qa=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ja=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Za=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ti=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,a=t.padInfo.left,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4,f="channelsLast"===t.dataFormat,v=f?1:2,m=f?2:3,g=f?3:1,x="",y="";n&&(x=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",y="result = activation(result);");var b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+f+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+f+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+f+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+f+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+y+"\n        setOutput(result);\n      }\n    "},ei=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,p=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+p+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===f)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===f)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===f)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ni=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,f=t.outChannels/t.inChannels,v="",m="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+p+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},ri=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,f=d,v="int xR; int xC; int xCOffset;",m=0;m<h;m++)for(var g=0;g<d;g++)v+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<h;m++)for(var x=0;x<f;x++){if(v+="\n          xR = xRCorner + "+m*l+";\n          xC = xCCorner + "+(g=2*x)*p+";\n        ",1===c){if(g<d&&(v+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<d)){var y=s%2==0?E(p):p;p%2==0&&s%2==1||p%2!=0&&s%2!=1?(v+="\n                  xCOffset = xC + "+s%2+" + "+y+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",p>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+y+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<d&&(v+="\n              if(xR >= 0 && xR < "+o+") {\n            ",s%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<d&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<d&&(v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),v+="}");g<d&&(v+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<d&&(v+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<h;m++)for(g=0;g<d;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var b="",w="";n&&(b=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+w+"\n        setOutput(result);\n      }\n    "},oi=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],i=t[1],s=t[2],u=t[3],c=e[0],l=n[0],p=n[1];this.outputShape=[c,l,p,u];var h="bilinear"===r?1:0,d=[i-1+".0",s-1+".0"],f=d[0],v=d[1],m=l>1?[""+(i-1)/(l-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],g=m[0],x=m[1],y=m[2],b=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=b[0],C=b[1],E=b[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+x+";\n        float width_scale = "+C+";\n\n        float in_y = "+y+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+E+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},ai=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Ra(r)+" coords = getOutputCoords();\n        int end = "+ii(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+ii(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===r)return""+e;if(2===r)return e+".x, "+e+".y";if(3===r)return e+".x, "+e+".y, "+e+".z";if(4===r)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+r+" is not yet supported")}(0,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function ii(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var si=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=qt.DENSE;var e=Jt(t),n=pa();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+ha(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},ui=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=qt.DENSE;var e=Jt(t),n=pa();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+ha(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},ci=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),li=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},pi=function(t){this.variableNames=["A"],this.outTexUsage=Ht.DOWNLOAD;var e=pa();this.outputShape=t,this.userCode="\n      "+fa+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "},hi=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ht.DOWNLOAD;var e=pa();this.outputShape=t,this.userCode="\n      "+fa+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+e.output+" = encode_float(x);\n      }\n    "},di=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=pa(),o=e[0],a=e[1];this.outputShape=t;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+da(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},fi=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=pa(),o=e[0],a=e[1];this.outputShape=t;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+t[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+t[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+da(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},vi="return real * expR - imag * expI;",mi="return real * expI + imag * expR;",gi=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},xi=function(){function t(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}},t}(),yi=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=Ra(this.rank),a=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<t.length;a++)a===e?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}(t,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},bi=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Ra(e.length),o=Ra(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function wi(t,e){var n=pa();return se(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Ci(t,e){return ve(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Ei(t,e){return me(t,e,new Uint16Array([0,1,2,2,1,3]))}function Ri(t,e,n,r,o,a,i){xe(n,r);var s=ge(t,e),u=t.TEXTURE_2D;return ee(t,e,function(){return t.bindTexture(u,s)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ee(t,e,function(){return t.texImage2D(u,0,o,n,r,0,a,i,null)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function Ii(t,e,n,r,o){var a=Qt(n,r);return Ri(t,e,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function ki(t,e,n,r,o){var a=Qt(n,r);return Ri(t,e,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function Si(t,e,n,r,o){var a=Qt(n,r);return Ri(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Ai(t,e,n,r,o){var a=Zt(n,r);return Ri(t,e,a[0],a[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Di(t,e,n,r,o){var a=Zt(n,r);return Ri(t,e,a[0],a[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function Ni(t,e,n,r){return ee(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),be(t,e,n,"clipSpacePos",r,3,20,0)&&be(t,e,n,"uv",r,2,20,12)}function Ti(t,e,n,r,o,a,i){var s,u,c;ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,c=t.RGBA):(s=new Float32Array(r*o*4),u=t.FLOAT,c=i.internalFormatPackedFloat),s.set(a),ee(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,c,r,o,0,t.RGBA,u,s)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Fi(t,e,n,r){ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?ee(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ee(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function _i(t,e,n,r,o){var a=t.createBuffer();ee(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)});var i=16*n*r;return ee(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)}),ee(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),ee(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),a}function Oi(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Mi(t,e,n,r,o){var a=Qt(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return ee(t,e,function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Bi(t,e,n,r,o,a,i,s){var u=t,c=new Float32Array(function(t,e){var n=Zt(a,i);return n[0]*n[1]*4}());return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function Pi(t,e,n,r){var o=new Float32Array(n*r*4);return ee(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)}),o}var Li=Object.freeze({createVertexShader:wi,createVertexBuffer:Ci,createIndexBuffer:Ei,createFloat32MatrixTexture:Ii,createFloat16MatrixTexture:ki,createUnsignedBytesMatrixTexture:Si,createPackedMatrixTexture:Ai,createFloat16PackedMatrixTexture:Di,bindVertexProgramAttributeStreams:Ni,uploadDenseMatrixToTexture:Ti,uploadPixelDataToTexture:Fi,createBufferFromOutputTexture:_i,downloadFloat32MatrixFromBuffer:Oi,downloadByteEncodedFloatMatrixFromOutputTexture:Mi,downloadPackedMatrixFromBuffer:Bi,downloadMatrixFromPackedOutputTexture:Pi}),Wi=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=c().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,Yt(e,t)):this.gl=$t(e);var n="WEBGL_color_buffer_float";if(1===c().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=ie(this.gl,this.debug,"OES_texture_float"),ze(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=ie(this.gl,this.debug,"OES_texture_half_float");else if(c().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),ze(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ie(this.gl,this.debug,"EXT_color_buffer_half_float");else if(c().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",ze(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!ze(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Ci(this.gl,this.debug),this.indexBuffer=Ei(this.gl,this.debug),this.framebuffer=ye(this.gl,this.debug),this.textureConfig=te(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return c().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ee(e,this.debug,function(){return e.finish()}),ee(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ee(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),ee(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ee(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ee(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),Ii(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),ki(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),Si(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),Fi(this.gl,this.debug,t,e)},t.prototype.uploadDenseMatrixToTexture=function(t,e,n,r){this.throwIfDisposed(),Ti(this.gl,this.debug,t,e,n,r,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),Di(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),Ai(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(ke(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ee(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Mi(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,o,a){return Bi(this.gl,t,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return Oi(this.gl,t,e)},t.prototype.createBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=_i(this.gl,this.debug,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(c().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=o.clientWaitSync(a,0,0);return t===o.ALREADY_SIGNALED||t===o.CONDITION_SATISFIED},e=a}else c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Pi(r.gl,r.debug,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=ue(e,this.debug,t),r=wi(e,this.debug),o=he(e,this.debug);return ee(e,this.debug,function(){return e.attachShader(o,r)}),ee(e,this.debug,function(){return e.attachShader(o,n)}),de(e,this.debug,o),this.debug&&fe(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=Ni(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&ee(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&fe(this.gl,this.debug,this.program),ee(this.gl,this.debug,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Ce(this.gl,this.debug,t,e):Ee(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),ee(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Re(this.gl,this.debug,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=Zt(e,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(t,o,a)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&fe(this.gl,this.debug,this.program),Se(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),ee(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),ee(this.gl,this.debug,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ie(this.gl,this.debug,2===c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return a(this,void 0,void 0,function(){var e=this;return i(this,function(n){switch(n.label){case 0:return[4,M(function(){return e.disposed||e.isQueryAvailable(t,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise(function(n){e.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||M(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Ie(this.gl,this.debug,t,this.framebuffer),this.debug&&Se(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Ie(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Se(this.gl)):ke(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Ie(r,this.debug,t,this.framebuffer),this.debug&&Se(r),this.outputTexture=t,ee(r,this.debug,function(){return r.viewport(0,0,e,n)}),ee(r,this.debug,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),ee(this.gl,this.debug,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function zi(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,o=e[n],a=o.shape;if(!N(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!t.isUniform||!o.isUniform){var i=t.texShape,s=o.isUniform?null:o.texData.texShape;if(!N(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}})}var Ui=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,p=n.dataFormat,h=s.left,d=s.top,f=o*r,v=pa(),m="channelsLast"===p,g=m?0:1,x=m?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+i+" - "+d+";\n            d0 = offsetY + "+l+" * (pos / "+f+");\n\n            if(d0 < "+e[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+a+". - "+h+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+f+".) / "+o+".));\n\n              if(d1 < "+e[x]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+y+"\n\n        "+v.output+" = result;\n      }\n    "},Vi=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},Gi=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},qi=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},Hi=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,s=a-1-t.padInfo.left,u=o*a-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+e+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ki=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.front,p=u-1-t.padInfo.top,h=c-1-t.padInfo.left,d=s*u*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+p+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+e+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+d+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ji=function(t,e,n,r,o,a,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",p=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",f="";a&&(d=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",f="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+p[0]+" * "+h[0]+");\n          result += ("+p[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},Xi=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),Yi=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},$i=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=la("rc",e),r=Ra(e),o=function(t,e,n){if(1===t)return"rc > "+e[0];for(var r="",o=t-2;o<t;o++)r+=n[o]+" >= "+e[o],o<t-1&&(r+="||");return r}(e,t,n),a=function(t,e,n,r){if(1===t)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+e+";\n    bool rEdge = rp1 >= "+n+";\n  "}(e,t[t.length-1],t[t.length-2],n),i=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),i=2;i<t;i++)a=e[e.length-1-i]+","+a;n.push(a)}return n}(n,e);return 1===n?"getA(rc),\n            rc + 1 >= "+t[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},Qi=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,o=Ra(r),a=e.map(function(t){return t[0]}).join(","),i=e.map(function(e,n){return e[0]+t[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+a+");\n      "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Ji=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});for(var r=t.length,o=Ra(r),a=e.map(function(t){return t[0]}).join(","),i=e.map(function(e,n){return e[0]+t[n]}).join(","),s=la("rc",r),u=la("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",p=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",f=0,v=1===r?2:4;f<v;f++)d+="\n        "+p[f]+"\n        if ("+h+") {\n          result["+f+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+f+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";d+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+a+");\n      const "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},Zi=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideHeight,a=t.strideWidth,i=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var h="avg"===e,d="0.0";if(h||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+a+");\n        const ivec2 pads = ivec2("+l+", "+p+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(f="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+l+", "+p+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+i+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},ts=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,p=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,f=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===e,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+a+", "+i+");\n        const ivec3 pads = ivec3("+d+", "+f+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+p+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+p+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(x="avgValue / count");var y=4*Math.floor(r/4),b=r%4,w="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+d+", "+f+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+p+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+y+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+y+";\n            if ("+(1===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===b)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}},es=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";"prod"===e?i="1.0":"min"===e?(i="1.0 / 1e-20",s="min"):"max"===e&&(i="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,p="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===e)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===e?(i="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===e&&(i="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(2===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(3===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "},ns=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+ha(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+da(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},rs=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],c=[n&&s>1?o-1:o,n&&u>1?a-1:a],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=c[0]/l[0],h=c[1]/l[1],d=1/p,f=1/h,v=2*Math.ceil(d)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},os=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},as=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},is=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],c=[n&&s>1?o-1:o,n&&u>1?a-1:a],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=c[0]/l[0],h=c[1]/l[1],d=1/p,f=1/h,v=2*Math.ceil(d)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},ss=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],c=[r&&e>1?e-1:e,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},us=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),o=Ra(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},cs=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=la("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Ra(n);function s(n){var r=t.map(function(r,o){return function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+s(r.slice())+";\n          if("+o+"){\n            result.g = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",s(t)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(t){return t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},ls=function(t,e,n,r,o,a,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Ra(o.length),u=Ra(a.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",p="";1===r?p="i":2===r&&(p="i, coords[1]");var h="getUpdates("+p+")",d=e>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},ps=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";o%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+p+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},hs=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&i.push(""+a[u]);r=i.join(),o=s.join()}var c=Ra(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},ds=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,n=Ra(this.rank),r="uniform int start["+this.rank+"];",o=function(t){if(1===t)return"sourceLoc";if(t<=6)return fs.slice(0,t).map(function(t){return"sourceLoc."+t}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);e="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+t.map(function(t,e){return"sourceLoc."+fs[e]+" = start["+e+"] + coords."+fs[e]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+o+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),fs=["x","y","z","w","u","v"],vs=function(){function t(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=Ra(this.rank),n=la("coords",this.rank),r=la("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+o+")",i="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map(function(t,e){return"start["+e+"]"}).join()+");":t.map(function(t,e){return r[e]+" = "+n[e]+" + start["+e+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),ms=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Ra(n.length),a=Ra(n.length),i="";if(1===r)i="coords * strides + begin";else{var s=0;i=n.map(function(t,e){return s++,1===n.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(s-1)+"] * strides["+e+"] + begin["+e+"]"}).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+t+");\n      "+o+" strides = "+o+"("+e+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},gs=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,o=xs(e,n),a=ys(t,o,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),o===Kt.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===Kt.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===Kt.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===Kt.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===Kt.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var o=ys(e,xs(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],i=a.indexOf(t);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function xs(t,e){if(t===Ht.UPLOAD)return Kt.PACKED_2X2_FLOAT32;if(t===Ht.RENDER||null==t)return function(t){return c().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Kt.PACKED_2X2_FLOAT32:Kt.UNPACKED_FLOAT32:t?Kt.PACKED_2X2_FLOAT16:Kt.UNPACKED_FLOAT16}(e);if(t===Ht.DOWNLOAD||t===Ht.PIXELS)return Kt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function ys(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var bs=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=Ra(this.rank),a=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},ws=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=Ra(this.rank),a=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},Cs=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Ra(this.rank),a=ca("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Es=1.7580993408473768,Rs=1.0507009873554805,Is=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},ks="if (isnan(x)) return x;",Ss="return x;",As="return abs(x);",Ds=ks+"\n  return (x < 0.0) ? 0.0 : x;\n",Ns=ks+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Ts="return (x >= 0.0) ? x : (exp(x) - 1.0);",Fs="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+Es+";\n  float scale = "+Rs+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",_s="return -x;",Os="return ceil(x);",Ms="return floor(x);",Bs="return exp(x);",Ps="return exp(x) - 1.0;",Ls=ks+"\n  return sin(x);\n",Ws=ks+"\n  return cos(x);\n",zs=ks+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",Us=ks+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",Vs=ks+"\n  return atan(x);\n",Gs=ks+"return log(x + sqrt(x * x + 1.0));",qs=ks+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",Hs=ks+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Ks="return x;",js="return x;",Xs="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ys="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",$s="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Qs=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Js=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=la("rc",e),r=Ra(e),o=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),a=n.slice(-2),i=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},Zs={};function tu(t,e){if(void 0===e&&(e=!1),"linear"===t)return e?js:Ss;if("relu"===t)return e?Xs:Ds;if("elu"===t)return e?$s:Ts;if("relu6"===t)return e?Ys:Ns;if("prelu"===t)return e?za:La;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var eu=600,nu=function(t){function e(e){var n,r=t.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!c().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=$t(c().getNumber("WEBGL_VERSION"));r.binaryCache=(n=c().getNumber("WEBGL_VERSION"))in Zs?Zs[n]:(Zs[n]={},Zs[n]),r.gpgpu=new Wi(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new gs(r.gpgpu),r.numMBBeforeWarning=null==c().global.screen?1024:c().global.screen.height*c().global.screen.width*window.devicePixelRatio*eu/1024/1024,r.texData=new Co(r,Ut),r}return o(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,e,n){if(c().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:Ht.UPLOAD}),r},e.prototype.move=function(t,e,n,r){if(c().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:Ht.UPLOAD})},e.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,o=e.complexTensors,a=e.slice,i=e.shape,s=e.isPacked;if(null!=a){var u;u=s?new Qs(i,Ks):new Is(i,Ks);var c=this.runWebGLProgram(u,[{dataId:t,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var p,h,d=null!=this.activeTimers;return d&&(p=ot()),h="complex64"===r?qo(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(t),d&&(this.downloadWaitMs+=ot()-p),this.convertAndCacheOnCPU(t,h)},e.prototype.read=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s,u,l,p,h,d,f,v,m,g,x,y,b,w,C,E,R;return i(this,function(i){switch(i.label){case 0:if(this.pendingRead.has(t))return e=this.pendingRead.get(t),[2,new Promise(function(t){return e.push(t)})];if(n=this.texData.get(t),r=n.values,o=n.shape,a=n.slice,s=n.dtype,u=n.complexTensors,l=n.isPacked,null!=a)return void 0,p=l?new Qs(o,Ks):new Is(o,Ks),h=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:s}],s),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(t)];if(!c().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===c().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,"complex64"!==s&&c().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),m=this.texData.get(v.dataId),f=(R=this.gpgpu).createBufferFromTexture.apply(R,[m.texture].concat(Jt(o)))),this.pendingRead.set(t,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:i.sent(),i.label=2;case 2:return"complex64"!==s?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return x=i.sent(),y=x[0],b=x[1],g=qo(y,b),[3,5];case 4:null==f?g=this.getValuesFromTexture(t):(w=D(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(f,w)),i.label=5;case 5:return null!=v&&this.disposeData(v.dataId),C=this.convertAndCacheOnCPU(t,g),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach(function(t){return t(C)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,C]}})})},e.prototype.checkNumericalProblems=function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!oe(n)){if(c().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},e.prototype.getValuesFromTexture=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,a=n.isPacked,i=D(r);if(c().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(t),u=this.texData.get(s.dataId),l=(e=this.gpgpu).downloadMatrixFromPackedTexture.apply(e,[u.texture].concat(Jt(r))).subarray(0,i);return this.disposeData(s.dataId),l}var p=c().getBool("WEBGL_PACK")&&!0===a,h=p?_e(r):r,d=p?new hi(h):new pi(h),f=this.runWebGLProgram(d,[{shape:h,dtype:o,dataId:t}],"float32"),v=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeData(f.dataId),m},e.prototype.time=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s,u;return i(this,function(i){switch(i.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),o=A(this.activeTimers.map(function(t){return t.query})).filter(function(t){return null!=t}),a=A(this.activeTimers.map(function(t){return t.name})).filter(function(t){return null!=t}),this.activeTimers=e,r&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return u=i.sent(),s.kernelMs=R(u),s.getExtraProfileInfo=function(){return u.map(function(t,e){return{name:a[e],ms:t}}).map(function(t){return t.name+": "+t.ms}).join(", ")},[3,3];case 2:s.kernelMs={error:"WebGL query timers are not supported in this environment."},i.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ot(),endMs:null}},e.prototype.endTimer=function(t){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=ot(),t)},e.prototype.getQueryTime=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var e=this.texData.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,o=e.texShape,a=e.usage,i=e.isPacked,s=e.slice,u=s&&s.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,a,i)));var l=this.texData.get(t);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return c().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Ut.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&&(e=128),null!=this.getCPUBackend()&&t.every(function(t){return null==n.texData.get(t.dataId).texture&&t.size<e})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,e){var n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Ut.keep(t.clone()),imag:Ut.keep(e.clone())},n},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===D(n))return Mn([],n,t.dtype);var r=this.texData.get(t.dataId).isPacked,o=co(t.shape,e,n);if(r||!o){var a=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new vs(n):new ds(n),i=a.getCustomSetupFunc(e);return this.compileAndRun(a,[t],null,i)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)},e.prototype.shallowSlice=function(t,e,n){var r=this.texData.get(t.dataId),o=this.makeOutput(n,t.dtype),a=this.texData.get(o.dataId);Object.assign(a,r),a.shape=n,a.dtype=t.dtype;var i=lo(e,t.strides);r.slice&&(i+=r.slice.flatOffset),a.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||t.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),o},e.prototype.stridedSlice=function(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);var o=io(e,n,r);if(o.some(function(t){return 0===t}))return Mn([],o);var a=new ms(e,r,o);return this.compileAndRun(a,[t])},e.prototype.reverse=function(t,e){var n=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cs(t.shape,e):new us(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.concat=function(t,e){if("complex64"===t[0].dtype){var n=t.map(function(t){return _n(t)}),r=t.map(function(t){return On(t)});return Fn(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>c().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),a=this.concat(t.slice(0,o),e),i=this.concat(t.slice(o),e);return this.concat([a,i],e)}if(c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var s=new Ka(t.map(function(t){return t.shape}),e);return this.compileAndRun(s,t)}var u=Nn(t.map(function(t){return t.shape}),e),l=t.map(function(t){return t.as2D(-1,D(t.shape.slice(e)))}),p=new Ha(l.map(function(t){return t.shape}));return this.compileAndRun(p,l).reshape(u)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,_s,t.dtype);var e=new Is(t.shape,_s);return this.compileAndRun(e,[t])},e.prototype.batchMatMul=function(t,e,n,r){var o=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],i=n?t.shape[1]:t.shape[2],s=t.shape[0];if((1===o||1===a)&&i>1e3){n&&(t=t.transpose([0,2,1])),r&&(e=e.transpose([0,2,1]));var u=1===a?t:t.as3D(s,i,1),c=1===a?2:1,l=1===a?e.as3D(s,1,i):e;return this.multiply(u,l).sum(c,!0)}var p=Ft(t.dtype,e.dtype),h=new ji(t.shape,[s,o,a],n,r);return this.compileAndRun(h,[t,e],p)},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,o=t.transposeB,a=t.bias,i=t.activation,s=t.preluActivationWeights,u=r?e.shape[2]:e.shape[1],c=o?n.shape[1]:n.shape[2],l=e.shape[0],p=Ft(e.dtype,n.dtype),h=null!=a,d=null!=s,f=i?tu(i,!0):null,v=new ji(e.shape,[l,u,c],r,o,h,f,d),m=[e,n];return a&&m.push(a),s&&m.push(s),this.compileAndRun(v,m,p)},e.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),o=new Oa(Fa,t.shape,e.shape),a=new Oa(_a,t.shape,e.shape),i=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Pa,t.dtype);var p=new Wa(Pa,t.shape,e.shape);return this.compileAndRun(p,[t,e],t.dtype)},e.prototype.batchNormalization=function(t,e,n,r,o,a){var i=[t,e,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;if(null!=o&&(u=o.shape,i.push(o)),c().getBool("WEBGL_PACK_NORMALIZATION")){var l=new Ta(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(l,i)}var p=new Na(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(p,i)},e.prototype.localResponseNormalization4D=function(t,e,n,r,o){var a=c().getBool("WEBGL_PACK_NORMALIZATION")?new qi(t.shape,e,n,r,o):new Vi(t.shape,e,n,r,o);return this.compileAndRun(a,[t])},e.prototype.LRNGrad=function(t,e,n,r,o,a,i){var s=new Gi(e.shape,r,o,a,i);return this.compileAndRun(s,[e,n,t])},e.prototype.tile=function(t,e){if("string"===t.dtype){var n=this.readSync(t.dataId).map(function(t){return st(t)});return ra(mr(t.shape,t.dtype,n),e)}var r=new bs(t.shape,e);return this.compileAndRun(r,[t])},e.prototype.pad=function(t,e,n){var r=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ji(t.shape,e,n):new Qi(t.shape,e,n);return this.compileAndRun(r,[t])},e.prototype.transpose=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,e);var n=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Cs(t.shape,e):new ws(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new yi(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},e.prototype.batchToSpaceND=function(t,e,n){I(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),o=Hr(t.shape,e,r),a=Kr(o.length,e.length),i=jr(t.shape,e,r),s=Xr(n,e.length),u=Yr(i,n,e.length);return t.reshape(o).transpose(a).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(t,e,n){I(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),o=[[0,0]];o.push.apply(o,n);for(var a=1+e.length;a<t.shape.length;++a)o.push([0,0]);var i=t.pad(o),s=Hr(i.shape,e,r,!1),u=Kr(s.length,e.length,!1),c=jr(i.shape,e,r,!1);return i.reshape(s).transpose(u).reshape(c)},e.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],a=Zr(o),i=new es({windowSize:a,inSize:o,batchSize:r},e),s=this.compileAndRun(i,[t],n);return 1===s.shape[1]?s:this.reduce(s,e,n)},e.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a=Zr(o),i=new ua({windowSize:a,inSize:o,batchSize:r},e,null==n),s=[t];null!=n&&s.push(n);var u=this.compileAndRun(i,s,"int32");return 1===u.shape[1]?u:this.argReduce(t,e,u)},e.prototype.argReducePacked=function(t,e,n){void 0===n&&(n=null);var r=null!=n?n.shape:t.shape,o=Zr(r[r.length-1]),a=new Sa(r,o,e,null==n),i=null==n?[t]:[t,n],s=this.compileAndRun(a,i,"int32");return s.rank===t.rank?this.argReducePacked(t,e,s):s},e.prototype.sum=function(t,e){In("sum",e,t.rank);var n=En(t.shape,e),r=n[0],o=D(n[1]),a=t.as2D(-1,o),i=_t(t.dtype);return this.reduce(a,"sum",i).reshape(r)},e.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=En(t.shape,e),r=n[0],o=D(n[1]),a=t.as2D(-1,o),i=_t(t.dtype);return this.reduce(a,"prod",i).reshape(r)},e.prototype.unsortedSegmentSum=function(t,e,n){var r=0,o=kn([r],t.rank),a=t;null!=o&&(a=t.transpose(o),r=An(1,t.rank)[0]);var i=function(t,e,n){for(var r=[],o=t.length,a=0;a<o;a++)a!==e?r.push(t[a]):r.push(n);return r}(a.shape,r,n),s=D([a.shape[r]]),u=a.as2D(-1,s),c=_t(t.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(i);return null!=o&&(l=l.transpose(Sn(o))),l},e.prototype.segOpCompute=function(t,e,n,r,o){var a=t.shape[0],i=t.shape[1],s=function(t,e){var n,r=!1;for(t<=Jr?(n=t,r=!0):n=J(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=J(t,n+1);return n}(i,o),u=new ps({windowSize:s,inSize:i,batchSize:a,numSegments:o},e),c=this.compileAndRun(u,[t,n],r);return c.shape[1]===o?c:(n=Yn(0,o).tile([i/s]),this.segOpCompute(c,e,n,r,o))},e.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(In("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!c().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=En(t.shape,r),a=o[0],i=D(o[1]),s=t.as2D(-1,i);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(t,n)},e.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,"min")},e.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,"max")},e.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var o=new ai(t.shape,n,r);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");var n=new Wa("return float(a == b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.notEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Wa("return float(a != b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Wa("return float(a < b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.lessEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Wa("return float(a <= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Wa("return float(a > b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greaterEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Wa("return float(a >= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalNot=function(t){var e=new Is(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},e.prototype.logicalAnd=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Wa("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalOr=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Wa("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.select=function(t,e,n){var r=new hs(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],Ft(e.dtype,n.dtype))},e.prototype.where=function(t){mn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return aa(t.shape,e)},e.prototype.topk=function(t,e,n){return oa(t.dataSync(),t.shape,t.dtype,e)},e.prototype.min=function(t,e){In("min",e,t.rank);var n=En(t.shape,e),r=n[0],o=D(n[1]),a=t.as2D(-1,o);return this.reduce(a,"min",a.dtype).reshape(r)},e.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Wa("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.mod=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Wa("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);In("max",e,t.rank);var n=En(t.shape,e),r=n[0],o=D(n[1]),a=t.as2D(-1,o);return this.reduce(a,"max",a.dtype).reshape(r)},e.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Wa("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.all=function(t,e){In("all",e,t.rank);var n=En(t.shape,e),r=n[0],o=D(n[1]),a=t.as2D(-1,o);return this.reduce(a,"all",a.dtype).reshape(r)},e.prototype.any=function(t,e){In("any",e,t.rank);var n=En(t.shape,e),r=n[0],o=D(n[1]),a=t.as2D(-1,o);return this.reduce(a,"any",a.dtype).reshape(r)},e.prototype.realDivide=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new Wa("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape);return this.compileAndRun(n,[t,e],"float32")},e.prototype.floorDiv=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Wa("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape);return this.compileAndRun(n,[t,e],"int32")},e.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Ma);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=Ft(t.dtype,e.dtype);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ma,n);var r=new Wa(Ma,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.packedUnaryOp=function(t,e,n){var r=new Qs(t.shape,e);return this.compileAndRun(r,[t],n)},e.prototype.packedBinaryOp=function(t,e,n,r,o){void 0===o&&(o=!1);var a=new Ua(n,t.shape,e.shape,o);return this.compileAndRun(a,[t,e],r)},e.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,o=this.texData.get(t.dataId),a=this.texData.get(e.dataId),i=[[o.complexTensors.real,a.complexTensors.real],[o.complexTensors.imag,a.complexTensors.imag]].map(function(o){var a=o[0],i=o[1],s=r.makeComplexComponentTensorInfo(t,a),u=r.makeComplexComponentTensorInfo(e,i),c=new Wa(n,t.shape,e.shape);return r.compileAndRun(c,[s,u],Ft(a.dtype,i.dtype))}),s=i[0],u=i[1],c=this.complex(s,u);return s.dispose(),u.dispose(),c},e.prototype.makeComplexComponentTensorInfo=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},e.prototype.addN=function(t){if(1===t.length)return t[0];if(t.length>c().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}var o=t.map(function(t){return t.dtype}).reduce(function(t,e){return Ft(t,e)}),a=t.map(function(t){return t.shape}),i=c().getBool("WEBGL_PACK")?new sa(t[0].shape,a):new ia(t[0].shape,a);return this.compileAndRun(i,t,o)},e.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Ba);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=Ft(t.dtype,e.dtype);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ba,t.dtype);var r=new Wa(Ba,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.pow=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Wa("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=Ft(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Os,t.dtype);var e=new Is(t.shape,Os);return this.compileAndRun(e,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Ms,t.dtype);var e=new Is(t.shape,Ms);return this.compileAndRun(e,[t])},e.prototype.sign=function(t){var e=new Is(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},e.prototype.isNaN=function(t){var e=new Is(t.shape,"return float(isnan(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isInf=function(t){var e=new Is(t.shape,"return float(isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isFinite=function(t){var e=new Is(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.round=function(t){var e=new Is(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Bs,t.dtype);var e=new Is(t.shape,Bs);return this.compileAndRun(e,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Ps,t.dtype);var e=new Is(t.shape,Ps);return this.compileAndRun(e,[t])},e.prototype.softmax=function(t,e){var n=P([e],t.shape),r=this.max(t,n),o=Rn(r.shape,n),a=this.subtract(t,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return this.realDivide(i,s)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t.dtype);var e=new Is(t.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(e,[t])},e.prototype.log1p=function(t){var e=new Is(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},e.prototype.sqrt=function(t){var e=new Is(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new Is(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},e.prototype.reciprocal=function(t){var e=new Is(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},e.prototype.relu=function(t){var e;return e=c().getBool("WEBGL_PACK")?new Qs(t.shape,Xs):new Is(t.shape,Ds),this.compileAndRun(e,[t])},e.prototype.relu6=function(t){var e;return e=c().getBool("WEBGL_PACK")?new Qs(t.shape,Ys):new Is(t.shape,Ns),this.compileAndRun(e,[t])},e.prototype.prelu=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua(za,t.shape,e.shape):new Wa(La,t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.elu=function(t){if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,$s,t.dtype);var e=new Is(t.shape,Ts);return this.compileAndRun(e,[t])},e.prototype.eluDer=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new Wa("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.selu=function(t){var e=new Is(t.shape,Fs);return this.compileAndRun(e,[t])},e.prototype.int=function(t){var e=new Is(t.shape,"return float(int(x));");return this.compileAndRun(e,[t],"int32")},e.prototype.clip=function(t,e,n){var r,o=(r=c().getBool("WEBGL_PACK_CLIP")?new Ga(t.shape):new Va(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,As,t.dtype);var e=new Is(t.shape,As);return this.compileAndRun(e,[t])},e.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new qa(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(t){var e=new Is(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},e.prototype.softplus=function(t){var e=new Is(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},e.prototype.sin=function(t){var e=new Is(t.shape,Ls);return this.compileAndRun(e,[t])},e.prototype.cos=function(t){var e=new Is(t.shape,Ws);return this.compileAndRun(e,[t])},e.prototype.tan=function(t){var e=new Is(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},e.prototype.asin=function(t){var e=new Is(t.shape,zs);return this.compileAndRun(e,[t])},e.prototype.acos=function(t){var e=new Is(t.shape,Us);return this.compileAndRun(e,[t])},e.prototype.atan=function(t){var e=new Is(t.shape,Vs);return this.compileAndRun(e,[t])},e.prototype.atan2=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Wa("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.sinh=function(t){var e=new Is(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.cosh=function(t){var e=new Is(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.tanh=function(t){var e=new Is(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},e.prototype.asinh=function(t){var e=new Is(t.shape,Gs);return this.compileAndRun(e,[t])},e.prototype.acosh=function(t){var e=new Is(t.shape,qs);return this.compileAndRun(e,[t])},e.prototype.atanh=function(t){var e=new Is(t.shape,Hs);return this.compileAndRun(e,[t])},e.prototype.erf=function(t){var e=new Is(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(e,[t])},e.prototype.step=function(t,e){var n=new Is(t.shape,function(t){return void 0===t&&(t=0),ks+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},e.prototype.conv2dByMatMul=function(t,e,n,r,o,a){var i=t.shape,s=this.texData.get(t.dataId),u=n.inChannels,l=i[0]*i[1]*i[2],p=n.outChannels,h="channelsLast"===n.dataFormat,d=(1===l||1===p)&&u>1e3,f=i[2]%2!=0&&!!s.isPacked;if(d||!c().getBool("WEBGL_LAZILY_UNPACK")||!c().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var v=h?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],m=this.reshape(t,[1,v,n.inChannels]),g=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),n.outShape)}var x=h?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),y={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,I(Be(s.shape,y.shape),function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"});var w=this.reshape(e,[1,n.inChannels,n.outChannels]),C=this.fusedBatchMatMul({a:y,b:w,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),E=this.texData.get(C.dataId);return I(E.isPacked,function(){return"batchMatMul result is expected to be packed"}),s.shape=b,E.shape=n.outShape,Ut.makeTensorFromDataId(C.dataId,n.outShape,C.dtype)},e.prototype.conv2dWithIm2Row=function(t,e,n,r,o,a){var i=n.filterWidth,s=n.filterHeight,u=n.inChannels,c=n.outWidth,l=n.outHeight,p="channelsLast"===n.dataFormat,h=i*s*u,d=l*c,f=[h,d],v=t.squeeze([0]),m=e.reshape([1,h,-1]),g=new Ui(f,v.shape,n),x=this.compileAndRun(g,[v]).reshape([1,f[0],f[1]]),y=null!=r,b=null!=a,w=o?tu(o,!0):null,C=new ji(x.shape,[1,d,n.outChannels],!0,!1,y,w,b),E=[x,m];r&&E.push(r),b&&E.push(a);var R=this.compileAndRun(C,E);return p?R.reshape([1,l,c,n.outChannels]):R.reshape([1,n.outChannels,l,c])},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,a=t.activation,i=t.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(e,n,r,o,a,i);if(c().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,n,r,o,a,i);var s=null!=o,u=null!=i,l=a?tu(a,!1):null,p=new ti(r,s,l,u),h=[e,n];return o&&h.push(o),i&&h.push(i),this.compileAndRun(p,h)},e.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(c().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new ti(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerInput=function(t,e,n){var r=new Ya(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerFilter=function(t,e,n){var r=new Xa(n);return this.compileAndRun(r,[t,e])},e.prototype.fusedDepthwiseConv2D=function(t){var e,n=t.input,r=t.filter,o=t.convInfo,a=t.bias,i=t.activation,s=t.preluActivationWeights,u=c().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,l=i?tu(i,u):null,p=[n,r],h=null!=a,d=null!=s;return h&&p.push(a),d&&p.push(s),u?(e=new ri(o,h,l,d),this.compileAndRun(e,p)):(e=new ni(o,h,l,d),this.compileAndRun(e,p))},e.prototype.depthwiseConv2D=function(t,e,n){var r;return c().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new ri(n),this.compileAndRun(r,[t,e])):(r=new ni(n),this.compileAndRun(r,[t,e]))},e.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new Za(n);return this.compileAndRun(r,[t,e])},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new Ja(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3d=function(t,e,n){var r=new ei(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerInput=function(t,e,n){var r=new Qa(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerFilter=function(t,e,n){var r=new $a(n);return this.compileAndRun(r,[t,e])},e.prototype.maxPool=function(t,e){var n=new Zi(e,"max",!1);return this.compileAndRun(n,[t])},e.prototype.avgPool=function(t,e){var n=new Zi(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPoolBackprop=function(t,e,n,r){var o=new Zi(r,"max",!0),a=this.compileAndRun(o,[e]),i=new Hi(r),s=this.compileAndRun(i,[t,a],e.dtype);return a.dispose(),s},e.prototype.avgPoolBackprop=function(t,e,n){var r=new Aa(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.cast=function(t,e){return zo(t,e,this)},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,a=0;a<t.rank;a++)a!==e&&(r[o++]=t.shape[a]);var i=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[e]=a,u[a]=this.slice(t,i,s).reshape(r);return u},e.prototype.avgPool3d=function(t,e){var n=new ts(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,e,n){var r=new Da(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.maxPool3d=function(t,e){var n=new ts(e,"max",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,e,n,r){var o=new ts(r,"max",!0),a=this.compileAndRun(o,[e]),i=new Ki(r),s=this.compileAndRun(i,[t,a],e.dtype);return a.dispose(),s},e.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);if(n.isPacked&&!Be(t.shape,e)&&(null===n.texture||!Be(n.shape,e))){var r=this.packedReshape(t,e);return Ut.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Uo(t,e)},e.prototype.resizeBilinear=function(t,e,n,r){var o=c().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new as(t.shape,e,n,r):new os(t.shape,e,n,r);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,e,n){var r=new rs(t,e,n);return this.compileAndRun(r,[t])},e.prototype.resizeNearestNeighbor=function(t,e,n,r){var o=new ss(t.shape,e,n,r);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new is(t,e,n);return this.compileAndRun(r,[t])},e.prototype.multinomial=function(t,e,n,r){var o=e?t:bo(t),a=o.shape[0],i=o.shape[1],s=new Xi(a,i,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],"int32",u)},e.prototype.oneHot=function(t,e,n,r){var o=new Yi(t.size,e,n,r);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var e=new li(t.size);return this.compileAndRun(e,[t])},e.prototype.nonMaxSuppression=function(t,e,n,r,o){return mn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),$o(t.dataSync(),e.dataSync(),n,r,o)},e.prototype.cropAndResize=function(t,e,n,r,o,a){var i=new oi(t.shape,e.shape,r,o,a);return this.compileAndRun(i,[t,e,n],"float32")},e.prototype.depthToSpace=function(t,e,n){I(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});var r=t.shape[0],o="NHWC"===n?t.shape[1]:t.shape[2],a="NHWC"===n?t.shape[2]:t.shape[3],i="NHWC"===n?t.shape[3]:t.shape[1],s=o*e,u=a*e,c=i/(e*e),l=new ci("NHWC"===n?[r,s,u,c]:[r,c,s,u],e,n);return this.compileAndRun(l,[t])},e.prototype.split=function(t,e,n){return na(t,e,n)},e.prototype.scatterND=function(t,e,n){var r=no(0,t,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/i,i],l=t.reshape([a,o]),p=e.reshape([a,i]);if(0===u)return Uo(Mn([]),n);var h=Pn(0),d=new ls(a,o,l.rank,p.rank,s,c);return this.compileAndRun(d,[p,l,h]).reshape(n)},e.prototype.sparseToDense=function(t,e,n,r){var o=no(0,t,n),a=o.sliceRank,i=o.numUpdates,s=o.strides,u=o.outputSize,c=new ls(i,a,t.rank,e.rank,s,[u,1],!1);return this.compileAndRun(c,[e,t,r]).reshape(n)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new gi(vi,t.shape,e),o=new gi(mi,t.shape,e),a=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],i=this.compileAndRun(r,a),s=this.compileAndRun(o,a),u=this.complex(i,s).as2D(t.shape[0],t.shape[1]);return i.dispose(),s.dispose(),u},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=$r(t,e),a=o[0],i=o[1],s=o[2],u=o[3],c=e.reshape([i,r]),l=t.reshape([t.size/s,s]),p=new bi(r,u,[i,s]);return this.compileAndRun(p,[l,c]).reshape(a)},e.prototype.fill=function(t,e,n){if("string"===(n=n||$(e))){var r=z(n,D(t));return r.fill(e),Ut.makeTensor(r,t,n,this)}var o=new xi(t,e),a=o.getCustomSetupFunc(e);return this.compileAndRun(o,[],n,a)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)},e.prototype.linspace=function(t,e,n){return Vo(t,e,n)},e.prototype.makeTensorInfo=function(t,e){var n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}},e.prototype.makeOutput=function(t,e){var n=this.makeTensorInfo(t,e).dataId;return Ut.makeTensorFromDataId(n,t,e,this)},e.prototype.unpackTensor=function(t){var e=new Js(t.shape);return this.runWebGLProgram(e,[t],t.dtype)},e.prototype.packTensor=function(t){var e=new $i(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,e){var n=[Te(t.shape)].concat(Fe(t.shape)),r={dtype:t.dtype,shape:n,dataId:t.dataId},o=[Te(e)].concat(Fe(e)),a=new ns(o,n),i=this.runWebGLProgram(a,[r],t.dtype,null,!0);return{dataId:i.dataId,shape:e,dtype:i.dtype}},e.prototype.decode=function(t){var e,n=this.texData.get(t),r=n.isPacked,o=n.shape,a=n.dtype,i=_e(o);return e=r?new ui(i):new si(i),{dtype:a,shape:o,dataId:this.runWebGLProgram(e,[{shape:i,dtype:a,dataId:t}],a,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,e,n,r,o){var a=this;void 0===o&&(o=!1);var i=this.makeTensorInfo(t.outputShape,n),s=this.texData.get(i.dataId);if(t.packedOutput&&(s.isPacked=!0),t.outPackingScheme===qt.DENSE){var u=Jt(t.outputShape);s.texShape=u.map(function(t){return 2*t})}if(null!=t.outTexUsage&&(s.usage=t.outTexUsage),0===D(i.shape))return s.values=W(i.dtype,0),i;var l=[],p=e.map(function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&D(e.shape)<=c().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?a.unpackTensor(e):a.packTensor(e),l.push(e),n=a.texData.get(e.dataId);else if(n.isPacked&&!Be(n.shape,e.shape)){var r=e,o=e.shape;e.shape=n.shape,e=a.packedReshape(e,o),l.push(e),n=a.texData.get(e.dataId),r.shape=o}return a.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);var h,d={shape:i.shape,texData:s,isUniform:!1},f=function(t,e,n){var r="";p.concat(n).forEach(function(t){var e=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0,n=t.isUniform?"uniform":t.texData.texShape;r+=t.shape+"_"+n+"_"+e});var o=t.userCode;return t.constructor.name+"_"+r+"_"+o}(t,0,d),v=this.getAndSaveBinary(f,function(){return function(t,e,n,r){var o=e.userCode,a=n.map(function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),i=a.map(function(t){return t.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=va(a,s,o,e.packedInputs),l=t.createProgram(u),p=null,h=t.getUniformLocation(l,"NAN",!1);1===c().getNumber("WEBGL_VERSION")&&(p=t.getUniformLocation(l,"INFINITY",!1));for(var d={},f=0;f<e.variableNames.length;f++){var v=e.variableNames[f];d[v]=t.getUniformLocation(l,v,!1),d["offset"+v]=t.getUniformLocation(l,"offset"+v,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:d,inShapeInfos:i,outShapeInfo:s,infLoc:p,nanLoc:h}}(a.gpgpu,t,p,d)}),m=null!=this.activeTimers;if(m&&(h=this.startTimer()),function(t,e,n,r,o){zi(e.inShapeInfos,n),zi([e.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a,i[0],i[1]):t.setOutputMatrixTexture(a,i[0],i[1]),t.setProgram(e.webGLProgram),1===c().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach(function(n,r){var o=e.program.variableNames[r],a=e.uniformLocations[o],i=e.uniformLocations["offset"+o];if(null!=a)if(n.isUniform)if(D(n.shape)<2)t.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),t.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=i&&t.gl.uniform1i(i,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,a,r)}),null!=o&&o(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,v,p,d,r),l.forEach(function(t){return a.disposeData(t.dataId)}),m&&(h=this.endTimer(h),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(h)})),!c().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var g=this.unpackTensor(i);return this.disposeData(i.dataId),g}return i},e.prototype.compileAndRun=function(t,e,n,r,o){void 0===o&&(o=!1),n=n||e[0].dtype;var a=this.runWebGLProgram(t,e,n,r,o);return Ut.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},e.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(c().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=nn(function(){if(!c().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=c().getBool("DEBUG");c().set("DEBUG",!1);var n=t.abs(Pn(1e-8)).dataSync()[0];if(c().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,a=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var c,l=null!=this.activeTimers;l&&(c=ot());var p=n.texShape;if(null==p&&(p=Oe(r,u),n.texShape=p),null!=a){var h=_e(r),d=void 0,f=p[1],v=p[0],m=a instanceof Uint8Array;u?(f=(e=Zt(p[0],p[1]))[0],v=e[1],d=new fi(h,[v,f],m)):d=new di(h,[v,f],m);var g=this.makeTensorInfo([v,f],o);this.texData.get(g.dataId).usage=m?Ht.PIXELS:Ht.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),f,v,a);var x=this.runWebGLProgram(d,[g],o,null,!0),y=this.texData.get(x.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(g.dataId),this.texData.delete(x.dataId),n.values=null,l&&(this.uploadWaitMs+=ot()-c)}else{var b=this.acquireTexture(p,s,o,u);n.texture=b}}},e.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values},e.prototype.acquireTexture=function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)},e.prototype.computeBytes=function(t,e){return t[0]*t[1]*H(e)},e}(Eo);Vt()&&Ut.registerBackend("webgl",function(){return new nu},2);var ru=Tn({square_:function(t){var e=yn(t,"x","square"),n=[e];return Ut.runKernelFunc(function(t,n){return n([e]),t.square(e)},{x:e},null,"Square",{},n,[])}}),ou="SquaredDifference";exports.square=ru;var au=Tn({squaredDifference_:function(t,e){var n,r=yn(t,"a","squaredDifference"),o=yn(e,"b","squaredDifference");n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return Ut.runKernelFunc(function(t,e){var n=t.squaredDifference(r,o);return e([r,o]),n},a,function(t,e){var n=e[0],r=e[1],o=Pn(2);return{a:function(){return t.mul(n.sub(r).mul(o))},b:function(){return t.mul(r.sub(n).mul(o))}}},ou,{},i,[])}});exports.squaredDifference=au;var iu=Tn({abs_:function(t){var e=yn(t,"x","abs");return"complex64"===e.dtype?Ut.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):Ut.runKernelFunc(function(t,n){var r=t.abs(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().step(-1))}}},"Abs")}}),su=Tn({acos_:function(t){var e=yn(t,"x","acos");return Ut.runKernelFunc(function(t,n){var r=t.acos(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),uu=Tn({acosh_:function(t){var e=yn(t,"x","acosh");return Ut.runKernelFunc(function(t,n){var r=t.acosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),cu=Tn({asin_:function(t){var e=yn(t,"x","asin");return Ut.runKernelFunc(function(t,n){var r=t.asin(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).sub(n.toFloat().square()).sqrt())}}})}}),lu=Tn({asinh_:function(t){var e=yn(t,"x","asinh");return Ut.runKernelFunc(function(t,n){var r=t.asinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).add(n.toFloat().square()).sqrt())}}})}}),pu=Tn({atan_:function(t){var e=yn(t,"x","atan");return Ut.runKernelFunc(function(t,n){var r=t.atan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}})}}),hu=Tn({atanh_:function(t){var e=yn(t,"x","atanh");return Ut.runKernelFunc(function(t,n){var r=t.atanh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(Pn(1).sub(n.toFloat().square()))}}})}}),du=Tn({ceil_:function(t){var e=yn(t,"x","ceil");return Ut.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),fu=Tn({clipByValue_:function(t,e,n){var r=yn(t,"x","clipByValue");I(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var o=[r],a={min:e,max:n};return Ut.runKernelFunc(function(t,o){var a=t.clip(r,e,n);return o([r]),a},{x:r},function(t,r){var o=r[0];return{x:function(){return t.where(o.greaterEqual(e).logicalAnd(o.lessEqual(n)),Qn(t))}}},"ClipByValue",a,o)}}),vu=Tn({cos_:function(t){var e=yn(t,"x","cos"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.cos(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return n.toFloat().sin().neg().mul(t)}}},"Cos",{},n)}}),mu=Tn({cosh_:function(t){var e=yn(t,"x","cosh");return Ut.runKernelFunc(function(t,n){var r=t.cosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}})}}),gu=Tn({erf_:function(t){var e=yn(t,"x","erf");return I("int32"===e.dtype||"float32"===e.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===e.dtype&&(e=e.toFloat()),Ut.runKernelFunc(function(t,n){var r=t.erf(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),xu=Tn({exp_:function(t){var e=yn(t,"x","exp");return Ut.runKernelFunc(function(t,n){var r=t.exp(e);return n([r]),r},{x:e},function(t,e){return{x:function(){return t.mulStrict(e[0])}}},"Exp",{},[],[!0])}}),yu=Tn({expm1_:function(t){var e=yn(t,"x","expm1");return Ut.runKernelFunc(function(t,n){var r=t.expm1(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}})}}),bu=Tn({floor_:function(t){var e=yn(t,"x","floor");return Ut.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),wu=Tn({log_:function(t){var e=yn(t,"x","log"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.log(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.div(n.toFloat())}}},"Log",{},n)}}),Cu=Tn({log1p_:function(t){var e=yn(t,"x","log1p");return Ut.runKernelFunc(function(t,n){var r=t.log1p(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}})}}),Eu=Tn({logSigmoid_:function(t){var e=yn(t,"x","logSigmoid");return Ut.runKernelFunc(function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}})}}),Ru=Tn({neg_:function(t){var e=yn(t,"x","neg"),n=[e];return Ut.runKernelFunc(function(t){return t.neg(e)},{x:e},function(t){return{x:function(){return t.neg()}}},"Neg",{},n)}}),Iu=Tn({reciprocal_:function(t){var e=yn(t,"x","reciprocal");return Ut.runKernelFunc(function(t,n){var r=t.reciprocal(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}})}}),ku=Tn({round_:function(t){var e=yn(t,"x","round");return Ut.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),Su=Tn({rsqrt_:function(t){var e=yn(t,"x","rsqrt"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.rsqrt(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),Au=Tn({sigmoid_:function(t){var e=yn(t,"x","sigmoid");return Ut.runKernelFunc(function(t,n){var r=t.sigmoid(e);return n([r]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mul(n.mul(Pn(1).sub(n)))}}},"Sigmoid")}}),Du=Tn({sign_:function(t){var e=yn(t,"x","sign");return Ut.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),Nu=Tn({isNaN_:function(t){var e=yn(t,"x","isNaN");return Ut.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),Tu=Tn({isInf_:function(t){var e=yn(t,"x","isInf");return Ut.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),Fu=Tn({isFinite_:function(t){var e=yn(t,"x","isFinite");return Ut.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),_u=Tn({sin_:function(t){var e=yn(t,"x","sin"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.sin(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return n.toFloat().cos().mul(t)}}},"Sin",{},n)}}),Ou=Tn({sinh_:function(t){var e=yn(t,"x","sinh");return Ut.runKernelFunc(function(t,n){var r=t.sinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}})}}),Mu=Tn({softplus_:function(t){var e=yn(t,"x","softplus");return Ut.runKernelFunc(function(t,n){var r=t.softplus(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}})}}),Bu=Tn({sqrt_:function(t){var e=yn(t,"x","sqrt");return Ut.runKernelFunc(function(t,n){var r=t.sqrt(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}})}}),Pu=Tn({step_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","step");return Ut.runKernelFunc(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return Qn(t)}}})}}),Lu=Tn({tan_:function(t){var e=yn(t,"x","tan");return Ut.runKernelFunc(function(t,n){var r=t.tan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}})}}),Wu=Tn({tanh_:function(t){var e=yn(t,"x","tanh");return Ut.runKernelFunc(function(t,n){var r=t.tanh(e);return n([r]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return Pn(1).sub(n.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});function zu(t,e,n,r,o,a){var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");return null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),I(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),I(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=i&&I(2===i.rank||1===i.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),null!=s&&I(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Gu(u,c,l,s,i,a)}function Uu(t,e,n,r,o,a){var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");return null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),I(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),I(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=i&&I(3===i.rank||1===i.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),null!=s&&I(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Gu(u,c,l,s,i,a)}function Vu(t,e,n,r,o,a){var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");return null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),I(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),I(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=i&&I(4===i.rank||1===i.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),null!=s&&I(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Gu(u,c,l,s,i,a)}function Gu(t,e,n,r,o,a){null==a&&(a=.001);var i,s,u,c=yn(t,"x","batchNorm"),l=yn(e,"mean","batchNorm"),p=yn(n,"variance","batchNorm");null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(l.rank===p.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),I(null==s||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),I(null==i||l.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var h=[c,l,p,i];return Ut.runKernelFunc(function(t,e){var n=t.batchNormalization(u,qu(l),qu(p),a,qu(i),qu(s));return e([c,l,p,i]),n},{x:c,mean:l,variance:p,scale:i,offset:s},function(t,e){var n=e,r=n[0],o=n[1],i=n[2],s=n[3],c=null==s?Pn(1):s,l=ko(o.shape,u.shape),p=[];if(1===o.rank){for(var h=0;h<u.shape.length-1;++h)p.push(u.shape[h]);p.push(1)}var d=r.sub(o),f=t.mul(c),v=Su(i.add(Pn(a))),m=v.mul(v).mul(v).mul(Pn(-.5));return{x:function(){return 1===o.rank?t.mul(Ur(v.as4D(1,1,1,o.shape[0]),p)).mul(c).reshape(r.shape):t.mul(v).mul(c).reshape(r.shape)},mean:function(){var t=v.mul(Pn(-1)).mul(f);return 1===o.rank&&(t=t.sum(l)),t.reshape(o.shape)},variance:function(){var t=m.mul(d).mul(f);return 1===o.rank&&(t=t.sum(l)),t.reshape(o.shape)},scale:function(){var e=d.mul(v),n=t.mul(e);return 1===o.rank&&(n=n.sum(l)),n.reshape(o.shape)},offset:function(){var e=t;return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)}}},"BatchNormalization",{varianceEpsilon:a},h).reshape(c.shape)}function qu(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Hu(){Qe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}exports.tanh=Wu,exports.tan=Lu,exports.step=Pu,exports.sqrt=Bu,exports.softplus=Mu,exports.sinh=Ou,exports.sin=_u,exports.isFinite=Fu,exports.isInf=Tu,exports.isNaN=Nu,exports.sign=Du,exports.sigmoid=Au,exports.rsqrt=Su,exports.round=ku,exports.reciprocal=Iu,exports.neg=Ru,exports.logSigmoid=Eu,exports.log1p=Cu,exports.log=wu,exports.floor=bu,exports.expm1=yu,exports.exp=xu,exports.erf=gu,exports.cosh=mu,exports.cos=vu,exports.clipByValue=fu,exports.ceil=du,exports.atanh=hu,exports.atan=pu,exports.asinh=lu,exports.asin=cu,exports.acosh=uu,exports.acos=su,exports.abs=iu;var Ku=Tn({batchNormalization2d_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),Hu(),zu(t,e,n,a,o,r)}}),ju=Tn({batchNormalization3d_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),Hu(),Uu(t,e,n,a,o,r)}}),Xu=Tn({batchNormalization4d_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),Hu(),Vu(t,e,n,a,o,r)}}),Yu=Tn({batchNormalization_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),Hu(),Gu(t,e,n,a,o,r)}}),$u=Tn({batchNorm_:Gu}),Qu=Tn({batchNorm2d_:zu}),Ju=Tn({batchNorm3d_:Uu}),Zu=Tn({batchNorm4d_:Vu});exports.batchNorm4d=Zu,exports.batchNorm3d=Ju,exports.batchNorm2d=Qu,exports.batchNorm=$u,exports.batchNormalization=Yu,exports.batchNormalization4d=Xu,exports.batchNormalization3d=ju,exports.batchNormalization2d=Ku;var tc=Tn({logicalAnd_:function(t,e){var n=yn(t,"a","logicalAnd","bool"),r=yn(e,"b","logicalAnd","bool");return So(n.shape,r.shape),Ut.runKernelFunc(function(t){return t.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),ec=Tn({logicalNot_:function(t){var e=yn(t,"x","logicalNot","bool");return Ut.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),nc=Tn({logicalOr_:function(t,e){var n=yn(t,"a","logicalOr","bool"),r=yn(e,"b","logicalOr","bool");return So(n.shape,r.shape),Ut.runKernelFunc(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})}}),rc=Tn({logicalXor_:function(t,e){var n=yn(t,"a","logicalXor","bool"),r=yn(e,"b","logicalXor","bool");return So(n.shape,r.shape),nc(t,e).logicalAnd(tc(t,e).logicalNot())}}),oc=Tn({where_:function(t,e,n){var r=yn(e,"a","where"),o=yn(n,"b","where"),a=yn(t,"condition","where","bool");return k(r.shape,o.shape,"Error in where: "),1===a.rank?I(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):k(a.shape,o.shape,"Error in where: "),Ut.runKernelFunc(function(t,e){var n=t.select(a,r,o);return e([a]),n},{$condition:a,$a:r,$b:o},function(t,e){var n=e[0];return{$condition:function(){return Qn(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}})}}),ac=function(t){return a(this,void 0,void 0,function(){var e,n,r;return i(this,function(o){switch(o.label){case 0:return[4,(e=yn(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=aa(e.shape,n),t!==e&&e.dispose(),[2,r]}})})};exports.whereAsync=ac,exports.where=oc,exports.logicalXor=rc,exports.logicalOr=nc,exports.logicalNot=ec,exports.logicalAnd=tc;var ic=Tn({add_:function(t,e){var n,r=yn(t,"a","add"),o=yn(e,"b","add");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t){return t.add(r,o)},{a:r,b:o},function(t){return{a:function(){var e=t,n=ko(r.shape,a);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=ko(o.shape,a);return n.length>0&&(e=e.sum(n)),e.reshape(o.shape)}}},"Add")}}),sc=Tn({addN_:function(t){I(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),I(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(t,e){return yn(t,"tensors"+e,"addN")}),n=e[0];e.forEach(function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(t){if(!N(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Ut.runKernelFunc(function(t){return t.addN(e)},r,function(t){var n={};return e.forEach(function(e,r){n[r]=function(){return t.clone()}}),n},"AddN")}}),uc=Tn({addStrict_:function(t,e){var n=yn(t,"a","addStrict"),r=yn(e,"b","addStrict");return k(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),cc=Tn({atan2_:function(t,e){var n,r=yn(t,"a","atan2"),o=yn(e,"b","atan2");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.atan2(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=ic(n.square(),r.square()),o=t.mul(r.div(e)),i=ko(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},$b:function(){var e=ic(n.square(),r.square()),o=Ru(t.mul(n.div(e))),i=ko(r.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(r.shape)}}})}}),lc=Tn({div_:function(t,e){var n,r=yn(t,"a","div"),o=yn(e,"b","div");if(n=Ot(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return dc(r,o);var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.realDivide(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),o=ko(n.shape,a);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=ko(r.shape,a);o.length>0&&(e=e.sum(o).reshape(r.shape));var i=r.square();return e.div(i.toFloat()).neg()}}},"Div")}}),pc=Tn({divNoNan_:function(t,e){var n,r=yn(t,"a","div"),o=yn(e,"b","div");r=(n=Ot(r,o))[0],o=n[1];var a=lc(r,o),i=Qn(a),s=o.equal(i);return oc(s,i,a)}}),hc=Tn({divStrict_:function(t,e){var n=yn(t,"a","div"),r=yn(e,"b","div");return k(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),dc=Tn({floorDiv_:function(t,e){var n,r=yn(t,"a","floorDiv"),o=yn(e,"b","floorDiv");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.floorDiv(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),o=ko(n.shape,a);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=ko(r.shape,a);o.length>0&&(e=e.sum(o).reshape(r.shape));var i=r.square();return e.div(i.toFloat()).neg()}}},"FloorDiv")}}),fc=Tn({maximum_:function(t,e){var n,r=yn(t,"a","maximum"),o=yn(e,"b","maximum");return n=Ot(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),So(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.maximum(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.greaterEqual(r).toFloat())},b:function(){return t.mul(n.less(r).toFloat())}}},"Maximum")}}),vc=Tn({maximumStrict_:function(t,e){var n=yn(t,"a","maximumStrict"),r=yn(e,"b","maximumStrict");return k(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),mc=Tn({minimum_:function(t,e){var n,r=yn(t,"a","minimum"),o=yn(e,"b","minimum");return n=Ot(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),So(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.minimum(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.lessEqual(r).toFloat())},b:function(){return t.mul(n.greater(r).toFloat())}}},"Minimum")}}),gc=Tn({minimumStrict_:function(t,e){var n=yn(t,"a","minimumStrict"),r=yn(e,"b","minimumStrict");return k(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),xc=Tn({mod_:function(t,e){var n,r=yn(t,"a","mod"),o=yn(e,"b","mod");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.mod(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=ko(n.shape,a);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),o=ko(r.shape,a);return o.length>0?e.sum(o).reshape(r.shape):e}}})}}),yc=Tn({modStrict_:function(t,e){var n=yn(t,"a","modStrict"),r=yn(e,"b","modStrict");return k(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),bc=Tn({mul_:function(t,e){var n,r=yn(t,"a","mul"),o=yn(e,"b","mul");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.multiply(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.mul(r.toFloat()),o=ko(n.shape,a);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=ko(r.shape,a);return o.length>0?e.sum(o).reshape(r.shape):e}}},"Mul")}}),wc=Tn({mulStrict_:function(t,e){var n=yn(t,"a","mul"),r=yn(e,"b","mul");return k(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Cc=Tn({pow_:function(t,e){var n,r=yn(t,"base","pow"),o=yn(e,"exp","pow");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape),i=[r,o];return Ut.runKernelFunc(function(t,e){var n=t.pow(r,o);return e([r,o,n]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1],o=e[2];return{a:function(){var e=r.toFloat(),o=t.mul(e.mul(n.pow(e.sub(Pn(1))))),i=ko(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},b:function(){var e=n.greater(0),i=n.log().where(e,Qn(n)),s=t.mul(o.mul(i)),u=ko(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}},"Pow",{},i,[!0])}}),Ec=Tn({powStrict_:function(t,e){return k(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Rc=Tn({squaredDifferenceStrict_:function(t,e){var n=yn(t,"a","squaredDifferenceStrict"),r=yn(e,"b","squaredDifferenceStrict");return k(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Ic=Tn({sub_:function(t,e){var n,r=yn(t,"a","sub"),o=yn(e,"b","sub");n=Ot(r,o),r=n[0],o=n[1];var a=So(r.shape,o.shape);return Ut.runKernelFunc(function(t){return t.subtract(r,o)},{a:r,b:o},function(t){return{a:function(){var e=t,n=ko(r.shape,a);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=ko(o.shape,a);return n.length>0&&(e=e.sum(n)),e.neg().reshape(o.shape)}}},"Sub")}}),kc=Tn({subStrict_:function(t,e){var n=yn(t,"a","subStrict"),r=yn(e,"b","subStrict");return k(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}});exports.subStrict=kc,exports.sub=Ic,exports.squaredDifferenceStrict=Rc,exports.powStrict=Ec,exports.pow=Cc,exports.mulStrict=wc,exports.mul=bc,exports.modStrict=yc,exports.mod=xc,exports.minimumStrict=gc,exports.minimum=mc,exports.maximumStrict=vc,exports.maximum=fc,exports.floorDiv=dc,exports.divStrict=hc,exports.divNoNan=pc,exports.div=lc,exports.atan2=cc,exports.addStrict=uc,exports.addN=sc,exports.add=ic;var Sc=Tn({equal_:function(t,e){var n,r=yn(t,"a","equal"),o=yn(e,"b","equal");return n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.equal(r,o)},{$a:r,$b:o})}}),Ac=Tn({equalStrict_:function(t,e){var n=yn(t,"a","equalStrict"),r=yn(e,"b","equalStrict");return k(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Dc=Tn({greater_:function(t,e){var n,r=yn(t,"a","greater"),o=yn(e,"b","greater");return n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.greater(r,o)},{a:r,b:o},null,"Greater")}}),Nc=Tn({greaterEqual_:function(t,e){var n,r=yn(t,"a","greaterEqual"),o=yn(e,"b","greaterEqual");return n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.greaterEqual(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){return Qn(n)},b:function(){return Qn(r)}}},"GreaterEqual")}}),Tc=Tn({greaterEqualStrict_:function(t,e){var n=yn(t,"a","greaterEqualStrict"),r=yn(e,"b","greaterEqualStrict");return k(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Fc=Tn({greaterStrict_:function(t,e){var n=yn(t,"a","greaterStrict"),r=yn(e,"b","greaterStrict");return k(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),_c=Tn({less_:function(t,e){var n,r=yn(t,"a","less"),o=yn(e,"b","less");return n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.less(r,o)},{a:r,b:o},null,"Less")}}),Oc=Tn({lessEqual_:function(t,e){var n,r=yn(t,"a","lessEqual"),o=yn(e,"b","lessEqual");return n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.lessEqual(r,o);return e([r,o]),n},{a:r,b:o},null,"LessEqual")}}),Mc=Tn({lessEqualStrict_:function(t,e){var n=yn(t,"a","lessEqualStrict"),r=yn(e,"b","lessEqualStrict");return k(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Bc=Tn({lessStrict_:function(t,e){var n=yn(t,"a","lessStrict"),r=yn(e,"b","lessStrict");return k(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Pc=Tn({notEqual_:function(t,e){var n,r=yn(t,"a","notEqual"),o=yn(e,"b","notEqual");return n=Ot(r,o),r=n[0],o=n[1],So(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),Lc=Tn({notEqualStrict_:function(t,e){var n=yn(t,"a","notEqualStrict"),r=yn(e,"b","notEqualStrict");return k(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Wc(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function zc(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}exports.notEqualStrict=Lc,exports.notEqual=Pc,exports.lessStrict=Bc,exports.lessEqualStrict=Mc,exports.lessEqual=Oc,exports.less=_c,exports.greaterStrict=Fc,exports.greaterEqualStrict=Tc,exports.greaterEqual=Nc,exports.greater=Dc,exports.equalStrict=Ac,exports.equal=Sc;var Uc=Tn({gather_:function(t,e,n){void 0===n&&(n=0);var r=yn(t,"x","gather"),o=yn(e,"indices","gather","int32");n=P(n,r.shape)[0];var a=function(t,e,n){for(var r=t.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(t.shape[s]),a*=t.shape[s];for(s=0;s<e.rank;s++)o.push(e.shape[s]);for(s=n+1;s<t.rank;s++)o.push(t.shape[s]),i*=t.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}(r,o,n);return Ut.runKernelFunc(function(t,e){var a=t.gather(r,o.flatten(),n);return e([o]),a},{x:r,indices:o},function(t,e){var o=e[0];return{x:function(){var e=r.shape,a=o.size,i=e.slice(0,n),s=i.length,u=e.slice(n,e.length).slice(1),c=u.length,l=Wc(0,s),p=Wc(s+1,s+1+c),h=zc([i,[a],u]),d=t.reshape(h),f=o.reshape([a]),v=zc([[s],l,p]),m=d.transpose(v),g=Vc(m,f,r.shape[n]),x=Sn(v);return g.transpose(x)},indices:function(){return o}}},"Gather",{axis:n}).reshape(a.outputShape)}}),Vc=Tn({unsortedSegmentSum_:function(t,e,n){var r=yn(t,"x","unsortedSegmentSum"),o=yn(e,"segmentIds","unsortedSegmentSum","int32");return I(T(n),function(){return"numSegments must be of dtype int"}),Ut.runKernelFunc(function(t,e){var a=t.unsortedSegmentSum(r,o,n);return e([o]),a},{$x:r},function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=fc(e,Qn(e)),r=Uc(t,n),o=Nc(e,Pn(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=Rr(o,i+1);o=tc(o,Hn(r.shape,"bool"));var s=Qn(r);return oc(o,r,s)}(t,n)}}})}});exports.unsortedSegmentSum=Vc,exports.gather=Uc;var Gc=function(t,e,n){return a(this,void 0,void 0,function(){var r,o,a,s,u,c,l,p,h,d,f,v,m;return i(this,function(i){switch(i.label){case 0:for(r=yn(t,"tensor","boolMask"),o=yn(e,"mask","boolMask","bool"),a=null==n?0:n,s=o.rank,u=r.shape,I(s>0,function(){return"mask cannot be scalar"}),k(u.slice(a,a+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=a;l<a+s;l++)c*=u[l];return p=u.slice(0,a).concat([c],u.slice(a+s)),h=r.reshape(p),d=o.reshape([-1]),[4,ac(d)];case 1:return f=i.sent(),v=f.squeeze([1]),m=Uc(h,v,a),t!==r&&r.dispose(),e!==o&&o.dispose(),v.dispose(),h.dispose(),d.dispose(),f.dispose(),[2,m]}})})};function qc(t,e,n,r,o,a,i){void 0===a&&(a="NHWC"),I(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),I(4===s.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),I(4===u.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),I(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var l="NHWC"===a?s[3]:s[1],p="NHWC"===a?u.shape[3]:u.shape[1];I(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),I(p===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+n.shape[3]+"."}),null!=i&&I(T(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var h=Wo(a),d=No(s,n.shape,r,1,o,i,!1,h),f=Ut.runKernelFunc(function(t,e){var r=t.conv2dDerInput(u,n,d);return e([n,u]),r},{dy4D:u,filter:n},function(t,e){var n=e[0],s=e[1];return{dy4D:function(){return Xc(t,n,r,o,a,1,i)},filter:function(){return $c(t,s,n.shape,r,o,a,i)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Hc(t){var e=function(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}(t),n=e[0],r=e[1],o=e[2];return 1===n&&1===r&&1===o}function Kc(t,e,n,r,o){I(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,i=e,s=!1;4===e.rank&&(s=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],c=i.shape[4];I(5===a.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),I(5===i.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),I(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),I(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),I(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var l=To(a,n.shape,r,1,o),p=Ut.runKernelFunc(function(t){return t.conv3dDerInput(i,n,l)},{dy5D:i});return s?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}exports.booleanMaskAsync=Gc;var jc=Tn({conv1d_:function(t,e,n,r,o,a,i){void 0===o&&(o="NWC"),void 0===a&&(a=1);var s=yn(t,"x","conv1d"),u=yn(e,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),I(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),I(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=i&&I(T(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),I(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),I(Lo(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),I("NWC"===o,function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=Xc(h,p,[1,n],r,"NHWC",[1,a],i);return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Xc=Tn({conv2d_:function(t,e,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=yn(t,"x","conv2d"),u=yn(e,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),I(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),I(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=i&&I(T(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var p="NHWC"===o?c.shape[3]:c.shape[1];I(p===u.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+u.shape[2]+"."}),I(Lo(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var h=Wo(o),d=No(c.shape,u.shape,n,a,r,i,!1,h),f=[u,c],v=Ut.runKernelFunc(function(t,e){var n=t.conv2d(c,u,d);return e([u,c]),n},{x:c,filter:u},function(t,e){var i=e,s=i[0],u=i[1];return I(Po(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return Qc(u.shape,t,s,n,r,o)},filter:function(){return $c(u,t,s.shape,n,r,o)}}},"Conv2D",d,f);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Yc=Tn({conv3d_:function(t,e,n,r,o,a){void 0===o&&(o="NDHWC"),void 0===a&&(a=[1,1,1]);var i=yn(t,"x","conv3d"),s=yn(e,"filter","conv3d"),u=i,c=!1;4===i.rank&&(c=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),I(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),I(5===s.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),I(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),I(function(t,e){return Hc(n)||Hc(e)}(0,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),I("NDHWC"===o,function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var l=To(u.shape,s.shape,n,a,r),p=Ut.runKernelFunc(function(t,e){var n=t.conv3d(u,s,l);return e([u,s]),n},{x:u,$filter:s},function(t,e){I(Hc(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var o=e[0],i=e[1];return{x:function(){return Kc(o.shape,t,i,n,r)},$filter:function(){return function(t,e,n,r,o){var a=t;4===t.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var i=e;4===i.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),I(5===a.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."}),I(5===i.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."}),I(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),I(a.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."}),I(i.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."});var s=To(a.shape,n,r,1,o);return Ut.runKernelFunc(function(t){return t.conv3dDerFilter(a,i,s)},{x5D:a,dy5D:i})}(o,t,i.shape,n,r)}}});return c?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),$c=Tn({conv2dDerFilter_:function(t,e,n,r,o,a,i){void 0===a&&(a="NHWC");var s=t;3===t.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;3===u.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),I(4===s.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),I(4===u.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),I(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===a?s.shape[3]:s.shape[1],l="NHWC"===a?u.shape[3]:u.shape[1];I(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),I(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),null!=i&&I(T(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var p=Wo(a),h=No(s.shape,n,r,1,o,i,!1,p);return Ut.runKernelFunc(function(t){return t.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),Qc=Tn({conv2dDerInput_:qc}),Jc=Tn({depthwiseConv2d_:function(t,e,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=yn(t,"x","depthwiseConv2d"),u=yn(e,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),I(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),I(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),I(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==a&&(a=[1,1]),I(Lo(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=i&&I(T(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var p=No(c.shape,u.shape,n,a,r,i,!0),h=[c,u],d=Ut.runKernelFunc(function(t,e){var n=t.depthwiseConv2D(c,u,p);return e([c,u]),n},{x:c,filter:u},function(t,e){I(Po(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var n=e[0],r=e[1];return{x:function(){return Zc(n.shape,t,r,p)},filter:function(){return tl(n,t,r.shape,p)}}},"DepthwiseConv2dNative",p,h);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Zc=Tn({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,a=!1;3===e.rank&&(a=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=Ut.runKernelFunc(function(t){return t.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),tl=Tn({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;3===t.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return 3===a.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Ut.runKernelFunc(function(t){return t.depthwiseConv2DDerFilter(o,a,r)},{x4D:o,dy4D:a})}}),el=Tn({separableConv2d_:function(t,e,n,r,o,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var s=yn(t,"x","separableConv2d"),u=yn(e,"depthwiseFilter","separableConv2d"),c=yn(n,"pointwiseFilter","separableConv2d"),l=s,p=!1;if(3===s.rank&&(p=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");I(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),I(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),I(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),I(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),I(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var h=u.shape[2],d=u.shape[3];I(c.shape[2]===h*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+c.shape[2]+"."});var f=Jc(l,u,r,o,i,a),v=Xc(f,c,1,"valid",i);return p?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),nl=Tn({conv2dTranspose_:function(t,e,n,r,o,a){return qc(n,yn(t,"x","conv2dTranspose"),yn(e,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),rl=Tn({conv3dTranspose_:function(t,e,n,r,o){return Kc(n,yn(t,"x","conv3dTranspose"),yn(e,"filter","conv3dTranspose"),r,o)}});exports.conv3dTranspose=rl,exports.conv2dTranspose=nl,exports.separableConv2d=el,exports.depthwiseConv2d=Jc,exports.conv3d=Yc,exports.conv2d=Xc,exports.conv1d=jc;var ol=Tn({matMul_:function(t,e,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=yn(t,"a","matMul"),i=yn(e,"b","matMul");o=Ot(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=n?a.shape[a.rank-1]:a.shape[a.rank-2],l=r?i.shape[i.rank-2]:i.shape[i.rank-1],p=a.shape.slice(0,-2),h=i.shape.slice(0,-2),d=D(p),f=D(h);I(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),I(N(p,h),function(){return"Error in matMul: outer dimensions ("+p+") and ("+h+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),I(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=a.shape.slice(0,-2).concat([c,l]),m=n?a.as3D(d,s,c):a.as3D(d,c,s),g=r?i.as3D(f,l,u):i.as3D(f,u,l),x={transposeA:n,transposeB:r};return Ut.runKernelFunc(function(t,e){var o=t.batchMatMul(m,g,n,r);return e([m,g]),o},{a:m,b:g},function(t,e){var o=e,a=o[0],i=o[1];return n||r?!n&&r?{a:function(){return t.matMul(i,!1,!1)},b:function(){return t.matMul(a,!0,!1)}}:n&&!r?{a:function(){return i.matMul(t,!1,!0)},b:function(){return a.matMul(t,!1,!1)}}:{a:function(){return i.matMul(t,!0,!0)},b:function(){return t.matMul(a,!0,!0)}}:{a:function(){return t.matMul(i,!1,!0)},b:function(){return a.matMul(t,!0,!1)}}},"BatchMatMul",x).reshape(v)}}),al=Tn({dot_:function(t,e){var n=yn(t,"t1","dot"),r=yn(e,"t2","dot");I(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return I(o===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),il=Tn({outerProduct_:function(t,e){var n=yn(t,"v1","outerProduct"),r=yn(e,"v2","outerProduct");return I(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}});exports.outerProduct=il,exports.dot=al,exports.matMul=ol;var sl=Tn({reverse_:function(t,e){var n=yn(t,"x","reverse");if(0===n.rank)return n.clone();var r=P(e,n.shape);return Ut.runKernelFunc(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)}}),ul=Tn({reverse1d_:function(t){var e=yn(t,"x","reverse");return I(1===e.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),sl(e,0)}}),cl=Tn({reverse2d_:function(t,e){var n=yn(t,"x","reverse");return I(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),sl(n,e)}}),ll=Tn({reverse3d_:function(t,e){var n=yn(t,"x","reverse");return I(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),sl(n,e)}}),pl=Tn({reverse4d_:function(t,e){var n=yn(t,"x","reverse");return I(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),sl(n,e)}});function hl(t,e,n,r,o,a){var i=yn(t,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),I(4===s.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),I(Lo(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=a&&I(T(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=Ao(s.shape,e,n,r,o,a);if(1===c.filterWidth&&1===c.filterHeight&&N(c.inShape,c.outShape))return i.clone();var l=[s],p=Ut.runKernelFunc(function(t,e){var n=t.maxPool(s,c);return e([s,n]),n},{x:s},function(t,a){var i=a[0],s=a[1];return{x:function(){return function(t,e,n,r,o,a,i,s){var u=yn(t,"dy","maxPoolBackprop"),c=yn(e,"input","maxPoolBackprop"),l=yn(n,"output","maxPoolBackprop");I(c.rank===u.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"}),null==a&&(a=[1,1]),I(Lo(o,a),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}),I(4===u.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),I(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var p=Ao(c.shape,r,o,a,i,s);return Ut.runKernelFunc(function(t){return t.maxPoolBackprop(u,c,l,p)},{$dy:u,$input:c})}(t,i,s,e,n,r,o)}}},"MaxPool",c,l);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function dl(t,e,n,r,o,a){var i=yn(t,"x","avgPool","float32");null==r&&(r=[1,1]),I(Lo(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(4===s.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),null!=a&&I(T(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=Ao(s.shape,e,n,r,o,a);if(1===c.filterWidth&&1===c.filterHeight&&N(c.inShape,c.outShape))return i.clone();var l=Ut.runKernelFunc(function(t){return t.avgPool(s,c)},{x:s},function(t){return{x:function(){return function(t,e,n,r,o,a){var i=yn(t,"dy","avgPoolBackprop"),s=yn(e,"input","avgPoolBackprop");I(s.rank===i.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"}),null==o&&(o=[1,1]),I(Lo(r,o),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"});var u=s,c=i,l=!1;3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),I(4===u.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."});var p=Ao(u.shape,n,r,o,a),h=Ut.runKernelFunc(function(t){return t.avgPoolBackprop(c,u,p)},{dy4D:c,input4D:u});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(t,s,e,n,r,o)}}},"AvgPool",c);return l=l.cast(i.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}exports.reverse4d=pl,exports.reverse3d=ll,exports.reverse2d=cl,exports.reverse1d=ul,exports.reverse=sl;var fl=Tn({maxPool_:function(t,e,n,r,o){return hl(t,e,n,1,r,o)}}),vl=Tn({avgPool_:function(t,e,n,r,o){return dl(t,e,n,1,r,o)}}),ml=Tn({pool_:function(t,e,n,r,o,a){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");var i=yn(t,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(Lo(a,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"});var c,l=Ao(s.shape,e,a,o,r),p=[l.dilationHeight,l.dilationWidth];c="same"===r?function(t,e){var n=t.map(function(t,n){return t+(t-1)*(e[n]-1)}).map(function(t){return t-1}),r=n.map(function(t){return Math.floor(t/2)}),o=n.map(function(t,e){return t-r[e]});return n.map(function(t,e){return[r[e],o[e]]})}([l.filterHeight,l.filterWidth],p):[[0,0],[0,0]];var h=1===p[0]&&1===p[1],d=function(t,e,n){var r=n.map(function(t){return t[0]}),o=n.map(function(t){return t[1]}),a=t.concat(r,o),i=e.map(function(t,e){return(t-a[e]%t)%t}),s=o.map(function(t,e){return t+i[e]});return[e.map(function(t,e){return[r[e],s[e]]}),e.map(function(t,e){return[0,i[e]]})]}([l.inHeight,l.inWidth],p,c),f=d[0],v=d[1],m=h?r:"valid",g=h?s:Lr(s,p,f),x=("avg"===n?function(){return dl(g,e,a,1,m)}:function(){return hl(g,e,a,1,m)})(),y=h?x:xr(x,p,v);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),gl=Tn({maxPool3d_:function(t,e,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=yn(t,"x","maxPool3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),I(5===u.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),I("NDHWC"===a,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),I(Lo(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=o&&I(T(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=Do(u.shape,e,n,i,r,o,a),p=Ut.runKernelFunc(function(t,e){var n=t.maxPool3d(u,l);return e([u,n]),n},{x:u},function(t,a){var s=a[0],u=a[1];return{x:function(){return function(t,e,n,r,o,a,i,s){var u=yn(t,"dy","maxPool3dBackprop"),c=yn(e,"input","maxPool3dBackprop"),l=yn(n,"output","maxPool3dBackprop"),p=u,h=c,d=l,f=!1;4===c.rank&&(f=!0,p=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),I(5===p.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+p.rank+"."}),I(5===h.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."}),I(5===d.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."}),null==a&&(a=[1,1,1]),I(Lo(o,a),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}),null!=s&&I(T(i),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var v=Do(h.shape,r,o,a,i,s),m=Ut.runKernelFunc(function(t){return t.maxPool3dBackprop(p,h,d,v)},{dy5D:p,input5D:h});return f?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(t,s,u,e,n,i,r,o)}}});return c?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),xl=Tn({avgPool3d_:function(t,e,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=yn(t,"x","avgPool3d","float32"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),I(5===u.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),I("NDHWC"===a,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),I(Lo(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=o&&I(T(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=Do(u.shape,e,n,i,r,o,a),p=Ut.runKernelFunc(function(t){return t.avgPool3d(u,l)},{x:u},function(t){return{x:function(){return function(t,e,n,r,o,a,i){var s=yn(t,"dy","avgPool3dBackprop"),u=yn(e,"input","avgPool3dBackprop"),c=s,l=u,p=!1;4===u.rank&&(p=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),I(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),I(5===l.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."}),null==o&&(o=[1,1,1]),I(Lo(r,o),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),null!=i&&I(T(a),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var h=Do(l.shape,n,r,o,a,i),d=Ut.runKernelFunc(function(t){return t.avgPool3dBackprop(c,l,h)},{dy5D:c,input5D:l});return p?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(t,u,e,n,i,r,o)}}});return p=p.cast(u.dtype),c?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}});exports.avgPool3d=xl,exports.maxPool3d=gl,exports.pool=ml,exports.avgPool=vl,exports.maxPool=fl;var yl=Tn({slice_:function(t,e,n){var r,o,a=yn(t,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof e?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach(function(t){I(-1!==t,function(){return"slice() does not support negative begin indexing."})}),o=(o=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(I(-1===t,function(){return"Negative size values should be exactly -1 but got "+t+" for the slice() size at index "+e+"."}),a.shape[e]-r[e])}),oo(a,r,o);var i=a.shape,s={begin:r,size:o};return Ut.runKernelFunc(function(t){return t.slice(a,r,o)},{x:a},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],i[n]-r[n]-o[n]]);return{x:function(){return t.pad(e)}}},"Slice",s)}}),bl=Tn({slice1d_:function(t,e,n){var r=yn(t,"x","slice1d");return I(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),yl(r,[e],[n])}}),wl=Tn({slice2d_:function(t,e,n){var r=yn(t,"x","slice2d");return I(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),yl(r,e,n)}}),Cl=Tn({slice3d_:function(t,e,n){var r=yn(t,"x","slice3d");return I(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),yl(r,e,n)}}),El=Tn({slice4d_:function(t,e,n){var r=yn(t,"x","slice4d");return I(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),yl(r,e,n)}});function Rl(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(Rn(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Rn(t.shape,r))),{x:function(){var r=t.mul(n.equal(e).cast(t.dtype));return null==o?r:r.transpose(o)}}}exports.slice4d=El,exports.slice3d=Cl,exports.slice2d=wl,exports.slice1d=bl,exports.slice=yl;var Il=Tn({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","all","bool"),o=P(e,r.shape),a=o,i=kn(a,r.rank);null!=i&&(r=r.transpose(i),a=An(a.length,r.rank));var s=Ut.runKernelFunc(function(t){return t.all(r,a)},{$x:r});if(n){var u=Rn(s.shape,o);return s.reshape(u)}return s}}),kl=Tn({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","any","bool"),o=P(e,r.shape),a=o,i=kn(a,r.rank);null!=i&&(r=r.transpose(i),a=An(a.length,r.rank));var s=Ut.runKernelFunc(function(t){return t.any(r,a)},{$x:r});if(n){var u=Rn(s.shape,o);return s.reshape(u)}return s}}),Sl=Tn({argMax_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","argMax");null==e&&(e=0);var r=P(e,n.shape),o=kn(r,n.rank);null!=o&&(n=n.transpose(o),r=An(r.length,n.rank));var a={axis:r[0]},i=[n];return Ut.runKernelFunc(function(t,e){var o=t.argMax(n,r[0]);return e([n]),o},{x:n},function(t,e){var n=e[0];return{x:function(){return Qn(n)}}},"ArgMax",a,i)}}),Al=Tn({argMin_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","argMin");null==e&&(e=0);var r=P(e,n.shape),o=kn(r,n.rank);return null!=o&&(n=n.transpose(o),r=An(r.length,n.rank)),Ut.runKernelFunc(function(t,e){var o=t.argMin(n,r[0]);return e([n]),o},{$x:n},function(t,e){var n=e[0];return{$x:function(){return Qn(n)}}})}}),Dl=Tn({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","logSumExp"),o=P(e,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=Rn(s.shape,o);return s.reshape(u)}return s}}),Nl=Tn({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","max"),o=r,a=P(e,r.shape),i=a,s=kn(i,r.rank);null!=s&&(r=r.transpose(s),i=An(i.length,r.rank));var u=[r],c=Ut.runKernelFunc(function(t,e){var n=t.max(r,i);return e([o,n]),n},{x:r},function(t,e){return Rl(t,e[1],e[0],a,s)},"Max",{axes:i},u,[!0]);if(n){var l=Rn(c.shape,a);c=c.reshape(l)}return c}}),Tl=Tn({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","mean"),o=P(e,r.shape),a=D(En(r.shape,o)[1]);return xo(function(t){var r=Pn(a);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul(Hn(t.shape,"float32")).div(a)}}})(r)}}),Fl=Tn({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","min"),o=r,a=P(e,r.shape),i=a,s=kn(i,r.rank);null!=s&&(r=r.transpose(s),i=An(i.length,r.rank));var u=[r],c=Ut.runKernelFunc(function(t,e){var n=t.min(r,i);return e([o,n]),n},{x:r},function(t,e){return Rl(t,e[1],e[0],a,s)},"Min",{axes:i},u,[!0]);if(n){var l=Rn(c.shape,a);c=c.reshape(l)}return c}}),_l=Tn({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=P(e,(t=yn(t,"x","moments")).shape),o=t.mean(r,n),a=o.shape;n||(a=Rn(o.shape,r));var i=t.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),Ol=Tn({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=P(e,r.shape);return xo(function(t){var e=kn(o,t.rank),r=o,a=t;null!=e&&(a=t.transpose(e),r=An(r.length,t.rank));var i=function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul(Hn(t.shape,"float32"))},s={axes:r},u=Ut.runKernelFunc(function(t){return t.sum(a,r)},{x:a},function(t){return{x:function(){return i(t)}}},"Sum",s);if(n){var c=Rn(u.shape,o);u=u.reshape(c)}return{value:u,gradFunc:i}})(r)}}),Ml=Tn({prod_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=P(e,r.shape),a=kn(o,r.rank),i=o,s=r;null!=a&&(s=r.transpose(a),i=An(i.length,r.rank));var u=Ut.runKernelFunc(function(t){return t.prod(s,i)},{permutedX:s});if(n){var c=Rn(u.shape,o);u=u.reshape(c)}return u}});exports.prod=Ml,exports.sum=Ol,exports.moments=_l,exports.min=Fl,exports.mean=Tl,exports.max=Nl,exports.logSumExp=Dl,exports.argMin=Al,exports.argMax=Sl,exports.any=kl,exports.all=Il;var Bl=Tn({elu_:function(t){var e=yn(t,"x","elu");return Ut.runKernelFunc(function(t,n){var r=t.elu(e);return n([r]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return Ut.runKernelFunc(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})}}),Pl=Tn({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=yn(t,"x","leakyRelu");return fc(Pn(e).mul(n),n)}}),Ll=Tn({prelu_:function(t,e){var n=yn(t,"x","prelu"),r=yn(e,"alpha","prelu");return Ut.runKernelFunc(function(t,e){var o=t.prelu(n,r);return e([n,r]),o},{x:n,alpha:r},function(t,e){var n=e[0],r=e[1],o=n.greater(0);return{x:function(){return oc(o,t,t.mul(r))},alpha:function(){var e=oc(o,Qn(t),t.mul(n)),a=ko(r.shape,t.shape);return a.length>0&&(e=e.sum(a)),e.reshape(r.shape)}}},"Prelu")}}),Wl=Tn({relu_:function(t){var e=yn(t,"x","relu");return"bool"===e.dtype?e.toInt():Ut.runKernelFunc(function(t,n){var r=t.relu(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n.step().toFloat())}}},"Relu")}}),zl=Tn({relu6_:function(t){var e=yn(t,"x","relu6");return"bool"===e.dtype?e.toInt():Ut.runKernelFunc(function(t,n){var r=t.relu6(e);return n([e]),r},{x:e},function(t,e){var n=e[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return t.mulStrict(r.toFloat())}}},"Relu6")}}),Ul=Tn({selu_:function(t){var e=yn(t,"x","selu");return Ut.runKernelFunc(function(t,n){var r=t.selu(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){var e=n.greater(Pn(0)),r=Pn(Es),o=Pn(Rs),a=t.mul(o),i=t.mul(r).mul(n.toFloat().exp());return oc(e,a,i)}}})}});exports.selu=Ul,exports.relu6=zl,exports.relu=Wl,exports.prelu=Ll,exports.leakyRelu=Pl,exports.elu=Bl;var Vl=Tn({transpose_:function(t,e){var n=yn(t,"x","transpose");if(null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),I(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(t){I(t>=0&&t<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return Ut.runKernelFunc(function(t){return t.transpose(n,e)},{x:n},function(t){var n=Sn(e);return{x:function(){return t.transpose(n)}}},"Transpose",r)}});exports.transpose=Vl;var Gl=Tn({localResponseNormalization_:function(t,e,n,r,o){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var a=yn(t,"x","localResponseNormalization");I(4===a.rank||3===a.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."}),I(T(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var i=a,s=!1;3===a.rank&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Ut.runKernelFunc(function(t,a){var s=t.localResponseNormalization4D(i,e,n,r,o);return a([i,s]),s},{x4D:i},function(t,a){var i=a[0],s=a[1];return{x4D:function(){return Ut.runKernelFunc(function(a){return a.LRNGrad(t,i,s,e,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}});exports.localResponseNormalization=Gl;var ql=Tn({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Pn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=yn(t,"x","norm"),e,n),a=o.shape;if(r){var i=P(n,t.shape);a=Rn(o.shape,i)}return o.reshape(a)}});exports.norm=ql;var Hl=Tn({basicLSTMCell_:function(t,e,n,r,o,a){var i=yn(t,"forgetBias","basicLSTMCell"),s=yn(e,"lstmKernel","basicLSTMCell"),u=yn(n,"lstmBias","basicLSTMCell"),c=yn(r,"data","basicLSTMCell"),l=yn(o,"c","basicLSTMCell"),p=yn(a,"h","basicLSTMCell"),h=c.concat(p,1).matMul(s).add(u),d=h.shape[0],f=h.shape[1]/4,v=[d,f],m=h.slice([0,0],v),g=h.slice([0,f],v),x=h.slice([0,2*f],v),y=h.slice([0,3*f],v),b=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(i.add(x).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),Kl=Tn({multiRNNCell_:function(t,e,n,r){for(var o=yn(e,"data","multiRNNCell"),a=bn(n,"c","multiRNNCell"),i=bn(r,"h","multiRNNCell"),s=o,u=[],c=0;c<t.length;c++){var l=t[c](s,a[c],i[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var p=[],h=[];for(c=0;c<u.length;c+=2)p.push(u[c]),h.push(u[c+1]);return[p,h]}});exports.multiRNNCell=Kl,exports.basicLSTMCell=Hl;var jl=Tn({movingAverage_:function(t,e,n,r,o){void 0===o&&(o=!0);var a=yn(t,"v","movingAverage"),i=yn(e,"x","movingAverage"),s=yn(n,"decay","movingAverage");Mt(a,i),I(N(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=Pn(1),c=u.sub(s),l=i.sub(a).mul(c);if(o){I(null!=r,function(){return"When using zeroDebias: true, step is required."});var p=yn(r,"step","movingAverage");l=l.div(u.sub(Cc(s,p)))}return a.add(l)}});exports.movingAverage=jl;var Xl=Tn({stridedSlice_:function(t,e,n,r,o,a,i,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(e.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var c=yn(t,"x","stridedSlice"),l=ao(s),p=c.shape.slice();l.forEach(function(t){e[t]=0,n[t]=1,p.splice(t,0,1)}),c=c.reshape(p);for(var h=0;h<c.rank;h++)e[h]=so(o,e,r,c.shape,h),n[h]=uo(a,n,r,c.shape,h),r[h]=r[h]||1;var d=ao(u);d.forEach(function(t){n[t]=e[t]+1,r[t]=1});var f=io(e,n,r),v=f.filter(function(t,e){return-1===d.indexOf(e)});return r.every(function(t){return 1===t})?yl(c,e,f).reshape(v):Ut.runKernelFunc(function(t){return t.stridedSlice(c,e,n,r)},{$x:c}).reshape(v)}});exports.stridedSlice=Xl;var Yl=Tn({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=yn(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var a=Ut.runKernelFunc(function(t){return t.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}});exports.topk=Yl;var $l=Tn({scatterND_:function(t,e,n){var r=yn(t,"indices","scatterND","int32"),o=yn(e,"updates","scatterND");return eo(o,r,n),Ut.runKernelFunc(function(t){return t.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}});exports.scatterND=$l;var Ql=Tn({fft_:function(t){I("complex64"===t.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Ut.runKernelFunc(function(t){return t.fft(r)},{input:t}).reshape(t.shape)}}),Jl=Tn({ifft_:function(t){I("complex64"===t.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Ut.runKernelFunc(function(t){return t.ifft(r)},{input:t}).reshape(t.shape)}}),Zl=Tn({rfft_:function(t,e){I("float32"===t.dtype,function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],o=t.size/r;if(null!=e&&e<r){var a=t.shape.map(function(t){return 0}),i=t.shape.map(function(t){return t});i[t.shape.length-1]=e,n=t.slice(a,i),r=e}else if(null!=e&&e>r){var s=t.shape.map(function(t){return t});s[t.shape.length-1]=e-r,n=t.concat(Kn(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),c=Fn(n,u).as2D(o,r),l=Ql(c),p=Math.floor(r/2)+1,h=_n(l),d=On(l),f=h.split([p,r-p],h.shape.length-1),v=d.split([p,r-p],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=p,Fn(f[0],v[0]).reshape(m)}}),tp=Tn({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=Jl(r);return _n(o)}var a=[n,2*(e-1)],i=_n(t).as2D(n,e),s=On(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),c=s.slice([0,1],[n,e-2]).reverse(1).mul(Pn(-1)),l=i.concat(u,1),p=s.concat(c,1);return r=Fn(l,p).as2D(a[0],a[1]),o=Jl(r),_n(o)}}),ep=Object.freeze({fft:Ql,ifft:Jl,rfft:Zl,irfft:tp});exports.spectral=ep,exports.irfft=tp,exports.rfft=Zl,exports.ifft=Jl,exports.fft=Ql;var np=Tn({sparseToDense_:function(t,e,n,r){void 0===r&&(r=0);var o=yn(t,"sparseIndices","sparseToDense","int32"),a=yn(e,"sparseValues","sparseToDense"),i=yn(r,"defaultValue","sparseToDense",a.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var o=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=e.size;if(0!==e.rank&&(1!==e.rank||i!==o))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+o+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i),Ut.runKernelFunc(function(t){return t.sparseToDense(o,a,n,i)},{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}});exports.sparseToDense=np;var rp=Tn({gatherND_:function(t,e){var n=yn(e,"indices","gatherND","int32"),r=yn(t,"x","gatherND");return Ut.runKernelFunc(function(t){return t.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}});exports.gatherND=rp;var op=Tn({diag_:function(t){var e=yn(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return Ut.runKernelFunc(function(t){return t.diag(e)},{$x:e}).reshape(n)}});exports.diag=op;var ap=Tn({dropout_:function(t,e,n,r){var o=yn(t,"x","dropout");if(I("float32"===o.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),I(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),0===e)return t instanceof Rt?o.clone():o;var a=function(t,e){if(null==e)return t.shape.slice();if(N(t.shape,e))return e;if(t.shape.length===e.length){for(var n=[],r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}(o,n),i=1-e,s=Br(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function ip(t,e,n){for(var r=1-t%2,o=new Float32Array(t),a=0;a<t;++a){var i=2*Math.PI*a/(t+r-1);o[a]=e-n*Math.cos(i)}return Ln(o,"float32")}exports.dropout=ap;var sp=Tn({hannWindow_:function(t){return ip(t,.5,.5)}}),up=Tn({hammingWindow_:function(t){return ip(t,.54,.46)}}),cp=Tn({frame_:function(t,e,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var a=0,i=[];a+e<=t.size;)i.push(yl(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=Jn([yl(t,a,e-s),jn([s],o)]);i.push(u),a+=n}return 0===i.length?Wn([],[0,e]):Jn(i).as2D(i.length,e)}}),lp=Tn({stft_:function(t,e,n,r,o){var a;void 0===o&&(o=sp),null==r&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=cp(t,e,n),s=bc(i,o(e)),u=[],c=0;c<i.shape[0];c++)u.push(Zl(s.slice([c,0],[1,e]),r));return Jn(u)}}),pp=Object.freeze({hannWindow:sp,hammingWindow:up,frame:cp,stft:lp});exports.signal=pp,exports.stft=lp,exports.frame=cp,exports.hammingWindow=up,exports.hannWindow=sp;var hp,dp=function(t,e,n){return void 0===n&&(n=1),a(this,void 0,void 0,function(){var r,o,a,s,u,c,l,p,h,d,f,v,m,g;return i(this,function(i){switch(i.label){case 0:return r=yn(t,"predictions","inTopK"),o=yn(e,"targets","inTopK"),I(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),I(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),k(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],I(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return s=i.sent(),[4,o.data()];case 2:for(u=i.sent(),c=[s.length/a,a],p=c[1],h=W("bool",l=c[0]),d=0;d<l;d++){for(f=d*p,v=s.subarray(f,f+p),m=[],g=0;g<v.length;g++)m.push({value:v[g],index:g});for(m.sort(function(t,e){return e.value-t.value}),h[d]=0,g=0;g<n;g++)if(m[g].index===u[d]){h[d]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,Mn(h,o.shape,"bool")]}})})};exports.inTopKAsync=dp,exports.Reduction=hp,function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(hp||(exports.Reduction=hp={}));var fp=Tn({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=hp.SUM_BY_NONZERO_WEIGHTS);var o=yn(t,"labels","absoluteDifference"),a=yn(e,"predictions","absoluteDifference"),i=null;null!=n&&(i=yn(n,"weights","absoluteDifference")),k(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return vp(s,i,r)}}),vp=Tn({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=hp.SUM_BY_NONZERO_WEIGHTS);var r=yn(t,"losses","computeWeightedLoss"),o=null;null!=e&&(o=yn(e,"weights","computeWeightedLoss"));var a=null==o?r:r.mul(o);if(n===hp.NONE)return a;if(n===hp.SUM)return a.sum();if(n===hp.MEAN){if(null==o)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(Pn(i)):s}if(n===hp.SUM_BY_NONZERO_WEIGHTS){if(null==o)return a.sum().div(Pn(r.size));var u=o.mul(Hn(r.shape)).notEqual(Pn(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),mp=Tn({cosineDistance_:function(t,e,n,r,o){void 0===o&&(o=hp.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"labels","cosineDistance"),i=yn(e,"predictions","cosineDistance"),s=null;null!=r&&(s=yn(r,"weights","cosineDistance")),k(a.shape,i.shape,"Error in cosineDistance: ");var u=Pn(1).sub(a.mul(i).sum(n,!0));return vp(u,s,o)}}),gp=Tn({hingeLoss_:function(t,e,n,r){void 0===r&&(r=hp.SUM_BY_NONZERO_WEIGHTS);var o=yn(t,"labels","hingeLoss"),a=yn(e,"predictions","hingeLoss"),i=null;null!=n&&(i=yn(n,"weights","hingeLoss")),k(o.shape,a.shape,"Error in hingeLoss: ");var s=Pn(1);o=Pn(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return vp(u,i,r)}}),xp=Tn({huberLoss_:function(t,e,n,r,o){void 0===r&&(r=1),void 0===o&&(o=hp.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"labels","huberLoss"),i=yn(e,"predictions","huberLoss"),s=null;null!=n&&(s=yn(n,"weights","huberLoss")),k(a.shape,i.shape,"Error in huberLoss: ");var u=Pn(r),c=i.sub(a).abs(),l=mc(c,u),p=c.sub(l),h=Pn(.5).mul(l.square()).add(u.mul(p));return vp(h,s,o)}}),yp=Tn({logLoss_:function(t,e,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=hp.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"labels","logLoss"),i=yn(e,"predictions","logLoss"),s=null;null!=n&&(s=yn(n,"weights","logLoss")),k(a.shape,i.shape,"Error in logLoss: ");var u=Pn(1),c=Pn(r),l=a.mul(i.add(c).log()).neg().sub(u.sub(a).mul(u.sub(i).add(c).log()));return vp(l,s,o)}}),bp=Tn({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=hp.SUM_BY_NONZERO_WEIGHTS);var o=yn(t,"labels","meanSquaredError"),a=yn(e,"predictions","meanSquaredError"),i=null;null!=n&&(i=yn(n,"weights","meanSquaredError")),k(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return vp(s,i,r)}}),wp=Tn({sigmoidCrossEntropy_:function(t,e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=hp.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"multiClassLabels","sigmoidCrossEntropy"),i=yn(e,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=yn(n,"weights","sigmoidCrossEntropy")),k(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Pn(r),c=Pn(1),l=Pn(.5);a=a.mul(c.sub(u)).add(l.mul(u))}var p=function(t,e){var n=yn(t,"labels","sigmoidCrossEntropyWithLogits"),r=yn(e,"logits","sigmoidCrossEntropyWithLogits");k(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}(a,i);return vp(p,s,o)}}),Cp=Tn({softmaxCrossEntropy_:function(t,e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=hp.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"onehotLabels","softmaxCrossEntropy"),i=yn(e,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=yn(n,"weights","softmaxCrossEntropy")),k(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Pn(r),c=Pn(1),l=Pn(a.shape[1]);a=a.mul(c.sub(u)).add(u.div(l))}var p=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return xo(function(t,e,r){var o=e.logSumExp([n],!0),a=e.toFloat().sub(o);return r([t,a]),{value:a.mul(t).neg().sum([n]),gradFunc:function(t,e){var r=e[0],o=e[1],a=Rn(t.shape,[n]);return[t.reshape(a).mul(r.toFloat().sub(o.exp())),t.reshape(a).mul(o.exp().sub(r.toFloat()))]}}})(t,e)}(a,i);return vp(p,s,o)}}),Ep=Object.freeze({get Reduction(){return hp},absoluteDifference:fp,computeWeightedLoss:vp,cosineDistance:mp,hingeLoss:gp,huberLoss:xp,logLoss:yp,meanSquaredError:bp,sigmoidCrossEntropy:wp,softmaxCrossEntropy:Cp});function Rp(t,e){return void 0===e&&(e=!1),Ut.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=Ir(n),a=t.clone(),i=Wn([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,c=function(t){var e,u=a,c=s,l=o;e=Ut.tidy(function(){var e=a.slice([t,t],[n-t,1]),u=e.norm(),c=a.slice([t,t],[1,1]),l=Wn([[-1]]).where(c.greater(0),Wn([[1]])),p=c.sub(l.mul(u)),h=e.div(p);s=1===h.shape[0]?i.clone():i.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var d=l.matMul(p).div(u).neg(),f=a.slice([t,0],[n-t,r]),v=d.mul(s);if(0===t)a=f.sub(v.matMul(s.transpose().matMul(f)));else{var m=f.sub(v.matMul(s.transpose().matMul(f)));a=a.slice([0,0],[t,r]).concat(m,0)}var g=o.slice([0,t],[n,o.shape[1]-t]);if(0===t)o=g.sub(g.matMul(s).matMul(v.transpose()));else{var x=g.sub(g.matMul(s).matMul(v.transpose()));o=o.slice([0,0],[n,t]).concat(x,1)}return[s,a,o]}),s=e[0],a=e[1],o=e[2],rn([u,c,l])},l=0;l<u;++l)c(l);return!e&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]})}exports.losses=Ep;var Ip=Tn({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=yn(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(e<=i))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=i),n<0&&(n=s);var u=Yn(0,i,1,"int32").reshape([-1,1]),c=Yn(0,s,1,"int32"),l=Ic(u,c),p=tc(l.lessEqual(Pn(+e,"int32")),l.greaterEqual(Pn(-n,"int32"))),h=Kn([i,s],r.dtype);return zr(Gr(r.reshape([-1,i,s])).map(function(t){return oc(p,t,h)})).reshape(o)}}),kp=Tn({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,I(null!=t&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(e){I(t[e].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[e].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)r(o)}else e=!0,t=rr(t,t.shape[0],0).map(function(t){return Wr(t,[0])});I(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],i=t,s=function(t){a.push(Ut.tidy(function(){var e=i[t];if(t>0)for(var n=0;n<t;++n){var r=Ol(a[n].mulStrict(e)).mul(a[n]);e=e.sub(r)}return e.div(ql(e,"euclidean"))}))};for(o=0;o<t.length;++o)s(o);return e?zr(a,0):a}}),Sp=Tn({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return Rp(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=Gr(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],a=[];return r.forEach(function(t){var n=Rp(t,e),r=n[0],i=n[1];o.push(r),a.push(i)}),[zr(o,0).reshape(t.shape),zr(a,0).reshape(t.shape)]}}),Ap=Object.freeze({bandPart:Ip,gramSchmidt:kp,qr:Sp});function Dp(t,e,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);var i=t.shape[0];return n=Math.min(n,i),I(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),I(2===t.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),I(4===t.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),I(1===e.rank,function(){return"scores must be a 1D tensor"}),I(e.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+e.shape[0]}),I(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}exports.linalg=Ap;var Np=Tn({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=yn(t,"images","resizeBilinear");I(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),I(2===e.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Ut.runKernelFunc(function(t,e){return e([o]),t.resizeBilinear(o,i,s,n)},{x:o},function(t,e){return{x:function(){return Ut.runKernelFunc(function(r){return r.resizeBilinearBackprop(t,e[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Tp=Tn({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=yn(t,"images","resizeNearestNeighbor");I(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),I(2===e.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),I("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Ut.runKernelFunc(function(t,e){return e([o]),t.resizeNearestNeighbor(o,i,s,n)},{batchImages:o},function(t,e){return{batchImages:function(){return Ut.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(t,e[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Fp=Tn({nonMaxSuppression_:function(t,e,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var a=yn(t,"boxes","nonMaxSuppression"),i=yn(e,"scores","nonMaxSuppression"),s=Dp(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return Ut.runKernelFunc(function(t){return t.nonMaxSuppression(a,i,n,r,o)},{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),_p=function(t,e,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),a(this,void 0,void 0,function(){var a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return a=yn(t,"boxes","nonMaxSuppressionAsync"),s=yn(e,"scores","nonMaxSuppressionAsync"),u=Dp(a,s,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,Promise.all([a.data(),s.data()])];case 1:return c=i.sent(),l=c[0],p=c[1],h=$o(l,p,n,r,o),a!==t&&a.dispose(),s!==e&&s.dispose(),[2,h]}})})},Op=Tn({nonMaxSuppressionWithScore_:function(t,e,n,r,o,a){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var i=yn(t,"boxes","nonMaxSuppression"),s=yn(e,"scores","nonMaxSuppression"),u=Dp(i,s,n,r,o,a),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},l=Ut.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),Mp=function(t,e,n,r,o,s){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===s&&(s=0),a(this,void 0,void 0,function(){var a,u,c,l,p,h,d;return i(this,function(i){switch(i.label){case 0:return a=yn(t,"boxes","nonMaxSuppressionAsync"),u=yn(e,"scores","nonMaxSuppressionAsync"),c=Dp(a,u,n,r,o,s),n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,s=c.softNmsSigma,[4,Promise.all([a.data(),u.data()])];case 1:return l=i.sent(),p=l[0],h=l[1],d=Qo(p,h,n,r,o,s),a!==t&&a.dispose(),u!==e&&u.dispose(),[2,d]}})})},Bp=Tn({cropAndResize_:function(t,e,n,r,o,a){var i=yn(t,"image","cropAndResize"),s=yn(e,"boxes","cropAndResize","float32"),u=yn(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var c=s.shape[0];return I(4===i.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),I(2===s.rank&&4===s.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),I(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),I(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),I(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),I("bilinear"===o||"nearest"===o,function(){return"method must be bilinear or nearest, but was "+o}),Ut.runKernelFunc(function(t,e){return t.cropAndResize(i,s,u,r,o,a)},{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),Pp=Object.freeze({resizeBilinear:Np,resizeNearestNeighbor:Tp,nonMaxSuppression:Fp,nonMaxSuppressionAsync:_p,nonMaxSuppressionWithScore:Op,nonMaxSuppressionWithScoreAsync:Mp,cropAndResize:Bp}),Lp=function(t,e){return!(t>0)||"linear"===e},Wp=function(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},zp=function(t,e){var n=e,r=ko(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},Up=function(t,e,n){if("linear"===e)return t;if("relu"===e)return Wl(t);if("elu"===e)return Bl(t);if("relu6"===e)return zl(t);if("prelu"===e)return Ll(t,n);throw new Error("Unknown fused activation "+e+".")};exports.image=Pp;var Vp=Tn({fusedMatMul_:function(t){var e,n=t.a,r=t.b,o=t.transposeA,a=void 0!==o&&o,i=t.transposeB,s=void 0!==i&&i,u=t.bias,c=t.activation,l=void 0===c?"linear":c,p=t.preluActivationWeights;if(!1===Lp(Ut.state.gradientDepth,l)){var h=ol(n,r,a,s);return null!=u&&(h=ic(h,u)),Up(h,l,p)}var d=yn(n,"a","fused matMul"),f=yn(r,"b","fused matMul");e=Ot(d,f),d=e[0],f=e[1];var v=a?d.shape[d.rank-2]:d.shape[d.rank-1],m=s?f.shape[f.rank-1]:f.shape[f.rank-2],g=a?d.shape[d.rank-1]:d.shape[d.rank-2],x=s?f.shape[f.rank-2]:f.shape[f.rank-1],y=d.shape.slice(0,-2),b=f.shape.slice(0,-2),w=D(y),C=D(b);I(d.rank>=2&&f.rank>=2&&d.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+f.rank+"."}),I(N(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+d.shape+" and "+f.shape+" must match."}),I(v===m,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+d.shape+" and "+f.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,R,k=d.shape.slice(0,-2).concat([g,x]),S=a?d.as3D(w,v,g):d.as3D(w,g,v),A=s?f.as3D(C,x,m):f.as3D(C,m,x);null!=u&&So(k,(E=Ot(E=yn(u,"bias","fused matMul"),d)[0]).shape),null!=p&&(R=yn(p,"prelu weights","fused matMul"));var T={a:S,b:A};null!=u&&(T.bias=E),null!=p&&(T.preluActivationWeights=R);var F=[S,A];return Ut.runKernelFunc(function(t,e){var n=t.fusedBatchMatMul({a:S,b:A,transposeA:a,transposeB:s,bias:E,activation:l,preluActivationWeights:R});return e([S,A,n]),n},T,function(t,e){var n=e[0],r=e[1],o=e[2],i=Wp(t,o,l),c={};return null!=u&&(c={bias:function(){return zp(E,i)}}),a||s?!a&&s?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},c):a&&!s?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},c):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},c):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},c)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:l},F,[!0]).reshape(k)}}),Gp=Tn({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=void 0===a?"NHWC":a,s=t.dilations,u=void 0===s?[1,1]:s,c=t.dimRoundingMode,l=t.bias,p=t.activation,h=void 0===p?"linear":p,d=t.preluActivationWeights;if(h=h||"linear",!1===Lp(Ut.state.gradientDepth,h)){var f=Xc(e,n,r,o,i,u,c);return null!=l&&(f=ic(f,l)),Up(f,h,d)}var v=yn(e,"x","conv2d"),m=yn(n,"filter","conv2d"),g=v,x=!1;3===v.rank&&(x=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),I(4===g.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),I(4===m.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),null!=c&&I(T(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."}),I(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),I(Lo(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),I("NHWC"===i,function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var y,b,w=No(g.shape,m.shape,r,u,o,c);null!=l&&(y=Ot(y=yn(l,"bias","fused conv2d"),v)[0],So(w.outShape,y.shape)),null!=d&&(b=yn(d,"prelu weights","fused conv2d"));var C={x:g,filter:m};null!=l&&(C.bias=y),null!=d&&(C.preluActivationWeights=b);var E=[m,g],R=Ut.runKernelFunc(function(t,e){var n=t.fusedConv2d({input:g,filter:m,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return e([m,g,n]),n},C,function(t,e){var n=e,a=n[0],i=n[1],s=n[2],c=Wp(t,s,h);I(Po(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var p={};return null!=l&&(p={bias:function(){return zp(y,c)}}),Object.assign({x:function(){return Qc(i.shape,c,a,r,o)},filter:function(){return $c(i,c,a.shape,r,o)}},p)},"FusedConv2D",{convInfo:w,activation:h},E,[!0]);return x?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),qp=Tn({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=void 0===a?"NHWC":a,s=t.dilations,u=void 0===s?[1,1]:s,c=t.dimRoundingMode,l=t.bias,p=t.activation,h=void 0===p?"linear":p,d=t.preluActivationWeights;if(!1===Lp(Ut.state.gradientDepth,h)){var f=Jc(e,n,r,o,i,u,c);return null!=l&&(f=ic(f,l)),Up(f,h,d)}var v=yn(e,"x","depthwiseConv2d"),m=yn(n,"filter","depthwiseConv2d"),g=v,x=!1;3===v.rank&&(x=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),I(4===g.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),I(4===m.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),I(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),null==u&&(u=[1,1]),I(Lo(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),null!=c&&I(T(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."});var y,b,w=No(g.shape,m.shape,r,u,o,c,!0);null!=l&&(y=Ot(y=yn(l,"bias","fused conv2d"),v)[0],So(w.outShape,y.shape)),null!=d&&(b=yn(d,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:m};null!=l&&(C.bias=y),null!=d&&(C.preluActivationWeights=b);var E=[m,g],R=Ut.runKernelFunc(function(t,e){var n=t.fusedDepthwiseConv2D({input:g,filter:m,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return e([m,g,n]),n},C,function(t,e){I(Po(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var n=e[0],r=e[1],o=e[2],a=Wp(t,o,h),i={};return null!=l&&(i={bias:function(){return zp(y,a)}}),Object.assign({x:function(){return Zc(r.shape,a,n,w)},filter:function(){return tl(r,a,n.shape,w)}},i)},"FusedDepthwiseConv2D",{convInfo:w,activation:h},E,[!0]);return x?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),Hp=Object.freeze({matMul:Vp,conv2d:Gp,depthwiseConv2d:qp}),Kp=Object.freeze({image:Pp,linalg:Ap,losses:Ep,spectral:ep,fused:Hp,signal:pp,square:ru,squaredDifference:au,conv1d:jc,conv2d:Xc,conv3d:Yc,depthwiseConv2d:Jc,separableConv2d:el,conv2dTranspose:nl,conv3dTranspose:rl,op:Tn,batchNormalization2d:Ku,batchNormalization3d:ju,batchNormalization4d:Xu,batchNormalization:Yu,batchNorm:$u,batchNorm2d:Qu,batchNorm3d:Ju,batchNorm4d:Zu,booleanMaskAsync:Gc,complex:Fn,real:_n,imag:On,concat:Jn,concat1d:Zn,concat2d:tr,concat3d:er,concat4d:nr,split:rr,matMul:ol,dot:al,outerProduct:il,reverse:sl,reverse1d:ul,reverse2d:cl,reverse3d:ll,reverse4d:pl,maxPool:fl,avgPool:vl,pool:ml,maxPool3d:gl,avgPool3d:xl,slice:yl,slice1d:bl,slice2d:wl,slice3d:Cl,slice4d:El,abs:iu,acos:su,acosh:uu,asin:cu,asinh:lu,atan:pu,atanh:hu,ceil:du,clipByValue:fu,cos:vu,cosh:mu,erf:gu,exp:xu,expm1:yu,floor:bu,log:wu,log1p:Cu,logSigmoid:Eu,neg:Ru,reciprocal:Iu,round:ku,rsqrt:Su,sigmoid:Au,sign:Du,isNaN:Nu,isInf:Tu,isFinite:Fu,sin:_u,sinh:Ou,softplus:Mu,sqrt:Bu,step:Pu,tan:Lu,tanh:Wu,all:Il,any:kl,argMax:Sl,argMin:Al,logSumExp:Dl,max:Nl,mean:Tl,min:Fl,moments:_l,sum:Ol,prod:Ml,equal:Sc,equalStrict:Ac,greater:Dc,greaterEqual:Nc,greaterEqualStrict:Tc,greaterStrict:Fc,less:_c,lessEqual:Oc,lessEqualStrict:Mc,lessStrict:Bc,notEqual:Pc,notEqualStrict:Lc,add:ic,addN:sc,addStrict:uc,atan2:cc,div:lc,divNoNan:pc,divStrict:hc,floorDiv:dc,maximum:fc,maximumStrict:vc,minimum:mc,minimumStrict:gc,mod:xc,modStrict:yc,mul:bc,mulStrict:wc,pow:Cc,powStrict:Ec,squaredDifferenceStrict:Rc,sub:Ic,subStrict:kc,elu:Bl,leakyRelu:Pl,prelu:Ll,relu:Wl,relu6:zl,selu:Ul,logicalAnd:tc,logicalNot:ec,logicalOr:nc,logicalXor:rc,where:oc,whereAsync:ac,buffer:mr,print:gr,batchToSpaceND:xr,broadcastTo:yr,cast:br,clone:wr,cumsum:Cr,depthToSpace:Er,expandDims:Rr,eye:Ir,multinomial:kr,oneHot:Sr,pad:Ar,pad1d:Dr,pad2d:Nr,pad3d:Tr,pad4d:Fr,rand:_r,randomNormal:Or,randomGamma:Mr,randomUniform:Br,reshape:Pr,spaceToBatchND:Lr,squeeze:Wr,stack:zr,tile:Ur,truncatedNormal:Vr,unstack:Gr,setdiff1dAsync:qr,fill:jn,linspace:Xn,ones:Hn,range:Yn,scalar:Pn,tensor:Mn,tensor1d:Ln,tensor2d:Wn,tensor3d:zn,tensor4d:Un,tensor5d:Vn,tensor6d:Gn,variable:qn,zeros:Kn,onesLike:$n,zerosLike:Qn,transpose:Vl,softmax:bo,logSoftmax:wo,localResponseNormalization:Gl,norm:ql,gather:Uc,unsortedSegmentSum:Vc,basicLSTMCell:Hl,multiRNNCell:Kl,movingAverage:jl,stridedSlice:Xl,topk:Yl,scatterND:$l,fft:Ql,ifft:Jl,rfft:Zl,irfft:tp,sparseToDense:np,gatherND:rp,diag:op,dropout:ap,hannWindow:sp,hammingWindow:up,frame:cp,stft:lp,inTopKAsync:dp});function jp(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){null!=t&&I("complex64"!==t.dtype,function(){return e+" does not support complex64 tensors."})})}function Xp(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}exports.fused=Hp;var Yp=function(t){function e(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new Co(e,Ut),e}return o(e,t),e.prototype.write=function(t,e,n){this.firstUse&&(this.firstUse=!1,c().get("IS_NODE")&&mn("\n============================\nHi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:t,dtype:n}),r},e.prototype.move=function(t,e,n,r){this.data.set(t,{values:e,dtype:r})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var e=this.data.get(t),n=e.dtype,r=e.complexTensors;return"complex64"===n?qo(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map(function(t){return st(t)})}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8")}return mr(t.shape,t.dtype,n)},e.prototype.makeOutput=function(t,e,n){var r=this.write(t,e,n);return Ut.makeTensorFromDataId(r,e,n,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return e=ot(),t(),[2,{kernelMs:ot()-e}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,e){var n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Ut.keep(t.clone()),imag:Ut.keep(e.clone())},n},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(jp(t,"slice"),co(t.shape,e,n)){var r=lo(e,t.strides),o=D(n);return Mn(this.readSync(t.dataId).subarray(r,r+o),n,t.dtype)}for(var a=mr(n,t.dtype),i=this.bufferSync(t),s=0;s<a.size;++s){var u=a.indexToLoc(s).map(function(t,n){return t+e[n]});a.values[s]=i.get.apply(i,u)}return a.toTensor()},e.prototype.stridedSlice=function(t,e,n,r){jp(t,"stridedSlice");var o=io(e,n,r);if(o.some(function(t){return 0===t}))return Mn([],o);for(var a=mr(o,t.dtype),i=this.bufferSync(t),s=0;s<a.size;s++){for(var u=a.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+e[l];a.set.apply(a,[i.get.apply(i,c)].concat(u))}return a.toTensor()},e.prototype.diag=function(t){for(var e=this.readSync(t.dataId),n=mr([t.size,t.size],t.dtype),r=n.values,o=0;o<e.length;o++)r[o*t.size+o]=e[o];return n.toTensor()},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,a=0;a<t.rank;a++)a!==e&&(r[o++]=t.shape[a]);var i=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[e]=a,u[a]=this.slice(t,i,s).reshape(r);return u},e.prototype.reverse=function(t,e){jp(t,"reverse");for(var n=mr(t.shape,t.dtype),r=this.bufferSync(t),o=function(o){var a=n.indexToLoc(o),i=a.slice();e.forEach(function(e){return i[e]=t.shape[e]-1-i[e]}),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)o(a);return n.toTensor()},e.prototype.concat=function(t,e){var n=this;if("complex64"===t[0].dtype){var r=t.map(function(t){return _n(t)}),o=t.map(function(t){return On(t)});return Fn(this.concat(r,e),this.concat(o,e))}var a=t.map(function(t){var n=D(t.shape.slice(e));return t.as2D(-1,n)}),i=Nn(a.map(function(t){return t.shape}),1),s=mr(i,t[0].dtype).values;if(1===a[0].shape[0]){var u=0;a.forEach(function(t){s.set(n.readSync(t.dataId),u),u+=t.size})}else{var c=0;a.forEach(function(t){for(var e=n.readSync(t.dataId),r=0,o=0;o<t.shape[0];++o)for(var a=o*i[1]+c,u=0;u<t.shape[1];++u)s[a+u]=e[r++];c+=t.shape[1]})}var l=Nn(t.map(function(t){return t.shape}),e);return Mn(s,l,t[0].dtype)},e.prototype.neg=function(t){return jp(t,"neg"),this.multiply(Pn(-1),t)},e.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t+n,imag:e+r}}):this.broadcastedBinaryOp(t,e,Ft(t.dtype,e.dtype),function(t,e){return t+e})},e.prototype.addN=function(t){var e=this;jp(t,"addN");for(var n=t.map(function(t){return e.readSync(t.dataId)}),r=mr(t[0].shape,t[0].dtype),o=r.values,a=0;a<t.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},e.prototype.softmax=function(t,e){var n=P([e],t.shape),r=this.max(t,n),o=Rn(r.shape,n),a=this.subtract(t,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return this.realDivide(i,s)},e.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t-n,imag:e-r}}):this.broadcastedBinaryOp(t,e,Ft(t.dtype,e.dtype),function(t,e){return t-e})},e.prototype.pow=function(t,e){return jp([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},e.prototype.batchMatMul=function(t,e,n,r){jp([t,e],"matMul");for(var o=n?t.shape[1]:t.shape[2],a=n?t.shape[2]:t.shape[1],i=r?e.shape[1]:e.shape[2],s=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],p=l[0],h=l[1],d=l[2],f=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],v=f[0],m=f[1],g=f[2],x=a*i,y=mr([s,a,i],t.dtype),b=y.values,w=this.blockSize,C=0;C<s;C++)for(var E=0;E<a;E+=w)for(var R=0;R<i;R+=w)for(var I=0;I<o;I+=w)for(var k=Math.min(E+w,a),S=Math.min(R+w,i),A=Math.min(I+w,o),D=E;D<k;D++)for(var N=R;N<S;N++){for(var T=0,F=I;F<A;F++)T+=u[C*p+D*h+F*d]*c[F*v+N*m+C*g];b[C*x+(D*i+N)]+=T}return y.toTensor()},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,o=t.transposeB,a=t.bias,i=t.activation,s=t.preluActivationWeights,u=this.batchMatMul(e,n,r,o);return a&&(u=this.add(u,a)),i&&(u=Xp(this,u,i,s)),u},e.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}}):this.broadcastedBinaryOp(t,e,Ft(t.dtype,e.dtype),function(t,e){return t*e})},e.prototype.realDivide=function(t,e){return jp([t,e],"realDivide"),this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},e.prototype.floorDiv=function(t,e){return jp([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},e.prototype.sum=function(t,e){jp(t,"sum"),In("sum",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,Ft(t.dtype,"int32")),i=D(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=0,h=0;h<i;++h)p+=u[l+h];s[c]=p}return a},e.prototype.prod=function(t,e){jp(t,"sum");for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,Ft(t.dtype,"int32")),i=D(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=1,h=0;h<i;++h)p*=u[l+h];s[c]=p}return a},e.prototype.unsortedSegmentSum=function(t,e,n){jp(t,"unsortedSegmentSum");for(var r=[],o=t.rank-e.rank,a=0;a<o;++a)e=e.expandDims(a+1);for(a=0;a<n;++a){var i=Pn(a,"int32"),s=Sc(i,e).asType("float32").mul(t).sum(0);r.push(s)}return zr(r)},e.prototype.argMin=function(t,e){jp(t,"argMin");var n=[e];In("argMin",n,t.rank);for(var r=En(t.shape,n),o=r[0],a=r[1],i=Kn(o,"int32"),s=D(a),u=this.readSync(i.dataId),c=this.readSync(t.dataId),l=0;l<u.length;++l){for(var p=l*s,h=c[p],d=0,f=0;f<s;++f){var v=c[p+f];v<h&&(h=v,d=f)}u[l]=d}return i},e.prototype.argMax=function(t,e){jp(t,"argMax");var n=[e];In("argMax",n,t.rank);for(var r=En(t.shape,n),o=r[0],a=r[1],i=Kn(o,"int32"),s=D(a),u=this.readSync(i.dataId),c=this.readSync(t.dataId),l=0;l<u.length;++l){for(var p=l*s,h=c[p],d=0,f=0;f<s;++f){var v=c[p+f];v>h&&(h=v,d=f)}u[l]=d}return i},e.prototype.cumsum=function(t,e,n,r){if(jp(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var o=Ft(t.dtype,"int32"),a=Kn(t.shape,o),i=this.readSync(a.dataId),s=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},l=0;l<s.length;l+=u)for(var p=0;p<u;p++){var h=c(l,p);if(0===p)i[h]=n?0:s[h];else{var d=c(l,p-1);i[h]=n?s[d]+i[d]:s[h]+i[d]}}return a},e.prototype.equal=function(t,e){return jp([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},e.prototype.notEqual=function(t,e){return jp([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},e.prototype.less=function(t,e){return jp([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},e.prototype.lessEqual=function(t,e){return jp([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},e.prototype.greater=function(t,e){return jp([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},e.prototype.greaterEqual=function(t,e){return jp([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},e.prototype.logicalNot=function(t){jp(t,"logicalNot");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")},e.prototype.logicalAnd=function(t,e){return jp([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},e.prototype.logicalOr=function(t,e){return jp([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},e.prototype.select=function(t,e,n){jp([t,e,n],"select");for(var r=this.readSync(t.dataId),o=this.readSync(e.dataId),a=this.readSync(n.dataId),i=Kn(e.shape,Ft(e.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,c=0===t.rank||t.rank>1||1===e.rank?1:D(e.shape.slice(1)),l=0;l<r.length;l++)for(var p=0;p<c;p++)1===r[l]?s[u++]=o[l]:s[u++]=a[l];return i},e.prototype.where=function(t){jp([t],"where");var e=this.readSync(t.dataId);return aa(t.shape,e)},e.prototype.topk=function(t,e,n){return jp(t,"topk"),oa(this.readSync(t.dataId),t.shape,t.dtype,e)},e.prototype.min=function(t,e){jp(t,"min"),In("min",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=D(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];d<p&&(p=d)}s[c]=p}return a},e.prototype.minimum=function(t,e){return jp([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},e.prototype.mod=function(t,e){return jp([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},e.prototype.max=function(t,e){jp(t,"max"),In("max",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=D(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];d>p&&(p=d)}s[c]=p}return a},e.prototype.maximum=function(t,e){return jp([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},e.prototype.all=function(t,e){jp(t,"all"),In("all",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=D(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];p=p&&d}s[c]=p}return a},e.prototype.any=function(t,e){jp(t,"any"),In("any",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=D(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];p=p||d}s[c]=p}return a},e.prototype.squaredDifference=function(t,e){return jp([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},e.prototype.ceil=function(t){jp(t,"ceil");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.floor=function(t){jp(t,"floor");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sign=function(t){jp(t,"x");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)e[r]<0?n[r]=-1:e[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,t.shape,"float32")},e.prototype.isNaN=function(t){jp(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isInf=function(t){jp(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isFinite=function(t){jp(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.round=function(t){jp(t,"round");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=Math.floor(e[r]);e[r]-o<.5?n[r]=Math.floor(e[r]):e[r]-o>.5?n[r]=Math.ceil(e[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,t.shape,"float32")},e.prototype.exp=function(t){jp(t,"exp");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.expm1=function(t){jp(t,"expm1");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log=function(t){jp(t,"log");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.log(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.log1p=function(t){jp(t,"log1p");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.log1p(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.sqrt=function(t){jp(t,"sqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.rsqrt=function(t){jp(t,"rsqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.reciprocal=function(t){jp(t,"reciprocal");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){jp(t,"relu");for(var e=Kn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return e},e.prototype.relu6=function(t){jp(t,"relu");for(var e=Kn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return e},e.prototype.prelu=function(t,e){return jp([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return t<0?e*t:t})},e.prototype.elu=function(t){jp(t,"elu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(e,t.shape,"float32")},e.prototype.eluDer=function(t,e){jp([t,e],"eluDer");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=this.readSync(t.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=i>=1?o[a]:o[a]*(i+1)}return this.makeOutput(n,e.shape,"float32")},e.prototype.selu=function(t){jp(t,"selu");for(var e=Es,n=Rs,r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?n*i:e*(Math.exp(i)-1)}return this.makeOutput(r,t.shape,"float32")},e.prototype.clip=function(t,e,n){jp(t,"clip");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>n?n:i<e?e:i}return this.makeOutput(r,t.shape,"float32")},e.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<t.size;++r){var o=n[2*r],a=n[2*r+1];e[r]=Math.hypot(o,a)}return this.makeOutput(e,t.shape,"float32")},e.prototype.int=function(t){jp(t,"int");for(var e=new Int32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")},e.prototype.sigmoid=function(t){jp(t,"sigmoid");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")},e.prototype.softplus=function(t){jp(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId),o=0;o<r.length;++o){var a,i=r[o]>-e,s=r[o]<e,u=Math.exp(r[o]);a=s?u:i?r[o]:Math.log(1+u),n[o]=a}return this.makeOutput(n,t.shape,"float32")},e.prototype.sin=function(t){jp(t,"sin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cos=function(t){jp(t,"cos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tan=function(t){jp(t,"tan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asin=function(t){jp(t,"asin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acos=function(t){jp(t,"acos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan=function(t){jp(t,"atan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan2=function(t,e){return jp([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},e.prototype.sinh=function(t){jp(t,"sinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cosh=function(t){jp(t,"cosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tanh=function(t){jp(t,"tanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=F(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asinh=function(t){jp(t,"asinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acosh=function(t){jp(t,"acosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atanh=function(t){jp(t,"atanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.erf=function(t){jp(t,"erf");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),a=Math.abs(n[r]),i=1/(1+.3275911*a);e[r]=o*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-a*a))}return this.makeOutput(e,t.shape,"float32")},e.prototype.step=function(t,e){void 0===e&&(e=0),jp(t,"step");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=0;o<r.length;++o){var a=r[o];isNaN(a)?n[o]=NaN:n[o]=a>0?1:e}return this.makeOutput(n,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,a=t.activation,i=t.preluActivationWeights,s=this.conv2d(e,n,r);return o&&(s=this.add(s,o)),a&&(s=Xp(this,s,a,i)),s},e.prototype.conv2d=function(t,e,n){jp([t,e],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=mr(n.outShape,t.dtype),p=t.strides[0],h=c?t.strides[1]:t.strides[2],d=c?t.strides[2]:1,f=c?1:t.strides[1],v=l.strides[0],m=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,x=c?1:l.strides[1],y=this.readSync(t.dataId),b=this.readSync(e.dataId),w=l.values,C=0;C<n.batchSize;++C)for(var E=C*p,R=C*v,I=0;I<n.outHeight;++I)for(var k=R+I*m,S=I*n.strideHeight-u,A=0;A<r;A++){var D=S+A*a;if(!(D<0||D>=n.inHeight))for(var N=A*e.strides[0],T=E+D*h,F=0;F<n.outWidth;++F)for(var _=k+F*g,O=F*n.strideWidth-s,M=0;M<o;M++){var B=O+M*i;if(!(B<0||B>=n.inWidth))for(var P=T+B*d,L=N+M*e.strides[1],W=0;W<n.inChannels;++W){for(var z=y[P+W*f],U=0;U<n.outChannels;++U)w[_+U*x]+=z*b[L+U];L+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,o=n.filterHeight,a=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,p=n.padInfo.top,h=mr(n.outShape,t.dtype),d=this.readSync(t.dataId),f=this.readSync(e.dataId),v=h.values,m=0;m<n.batchSize;++m)for(var g=m*t.strides[0],x=m*h.strides[0],y=0;y<n.outDepth;++y)for(var b=x+y*h.strides[1],w=y*n.strideDepth-c,C=0;C<r;C++){var E=w+C*i;if(!(E<0||E>=n.inDepth))for(var R=C*e.strides[0],I=g+E*t.strides[1],k=0;k<n.outHeight;++k)for(var S=b+k*h.strides[2],A=k*n.strideHeight-p,D=0;D<o;D++){var N=A+D*s;if(!(N<0||N>=n.inHeight))for(var T=R+D*e.strides[1],F=I+N*t.strides[2],_=0;_<n.outWidth;++_)for(var O=S+_*n.outChannels,M=_*n.strideWidth-l,B=0;B<a;B++){var P=M+B*u;if(!(P<0||P>=n.inWidth))for(var L=T+B*e.strides[2],W=F+P*n.inChannels,z=L,U=0;U<n.inChannels;++U){for(var V=d[W+U],G=0;G<n.outChannels;++G)v[O+G]+=V*f[z+G];z+=n.outChannels}}}}return h.toTensor()},e.prototype.conv2dDerInput=function(t,e,n){jp([t,e],"conv2dDerInput");for(var r=mr(n.inShape,"float32"),o=r.values,a=this.readSync(t.dataId),i=this.readSync(e.dataId),s=e.strides,u=s[0],c=s[1],l=s[2],p=n.batchSize,h=n.filterHeight,d=n.filterWidth,f=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,x=n.outHeight,y=n.outWidth,b=n.strideHeight,w=n.strideWidth,C=n.dataFormat,E=h-1-n.padInfo.top,R=d-1-n.padInfo.left,I="channelsLast"===C,k=r.strides[0],S=I?r.strides[1]:r.strides[2],A=I?r.strides[2]:1,D=I?1:r.strides[1],N=t.strides[0],T=I?t.strides[1]:t.strides[2],F=I?t.strides[2]:1,_=I?1:t.strides[1],O=0;O<p;++O)for(var M=0;M<f;++M)for(var B=0;B<v;++B)for(var P=B-E,L=Math.max(0,Math.ceil(P/b)),W=Math.min(x,(h+P)/b),z=0;z<m;++z){for(var U=z-R,V=Math.max(0,Math.ceil(U/w)),G=Math.min(y,(d+U)/w),q=0,H=L;H<W;++H)for(var K=H*b-P,j=V;j<G;++j)for(var X=N*O+T*H+F*j,Y=u*(h-1-K)+c*(d-1-(j*w-U))+l*M,$=0;$<g;++$)q+=a[X+_*$]*i[Y+$];o[k*O+S*B+A*z+D*M]=q}return r.toTensor()},e.prototype.conv3dDerInput=function(t,e,n){for(var r=mr(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],c=a[3],l=this.readSync(t.dataId),p=t.strides,h=p[0],d=p[1],f=p[2],v=p[3],m=this.readSync(e.dataId),g=e.strides,x=g[0],y=g[1],b=g[2],w=g[3],C=n.batchSize,E=n.filterDepth,R=n.filterHeight,I=n.filterWidth,k=n.inChannels,S=n.inDepth,A=n.inHeight,D=n.inWidth,N=n.outChannels,T=n.outDepth,F=n.outHeight,_=n.outWidth,O=n.strideDepth,M=n.strideHeight,B=n.strideWidth,P=E-1-n.padInfo.front,L=R-1-n.padInfo.top,W=I-1-n.padInfo.left,z=0;z<C;++z)for(var U=0;U<k;++U)for(var V=0;V<S;++V)for(var G=V-P,q=Math.max(0,Math.ceil(G/O)),H=Math.min(T,(E+G)/O),K=0;K<A;++K)for(var j=K-L,X=Math.max(0,Math.ceil(j/M)),Y=Math.min(F,(R+j)/M),$=0;$<D;++$){for(var Q=$-W,J=Math.max(0,Math.ceil(Q/B)),Z=Math.min(_,(I+Q)/B),tt=0,et=q;et<H;++et)for(var nt=et*O-G,rt=X;rt<Y;++rt)for(var ot=rt*M-j,at=J;at<Z;++at)for(var it=h*z+d*et+f*rt+v*at,st=x*(E-1-nt)+y*(R-1-ot)+b*(I-1-(at*B-Q))+w*U,ut=0;ut<N;++ut)tt+=l[it+ut]*m[st+ut];o[i*z+s*V+u*K+c*$+U]=tt}return r.toTensor()},e.prototype.conv2dDerFilter=function(t,e,n){jp([t,e],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s="channelsLast"===n.dataFormat,u=mr(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,p=this.bufferSync(t),h=this.bufferSync(e),d=0;d<a;++d)for(var f=Math.max(0,Math.ceil((l-d)/r)),v=Math.min(n.outHeight,(n.inHeight+l-d)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((c-m)/o)),x=Math.min(n.outWidth,(n.inWidth+c-m)/o),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var w=0,C=0;C<n.batchSize;++C)for(var E=f;E<v;++E)for(var R=d+E*r-l,I=g;I<x;++I){var k=m+I*o-c;w+=s?p.get(C,R,k,y)*h.get(C,E,I,b):p.get(C,y,R,k)*h.get(C,b,E,I)}u.set(w,d,m,y,b)}return u.toTensor()},e.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=mr(n.filterShape,"float32"),l=c.values,p=c.strides,h=p[0],d=p[1],f=p[2],v=p[3],m=this.readSync(e.dataId),g=e.strides,x=g[0],y=g[1],b=g[2],w=g[3],C=this.readSync(t.dataId),E=t.strides,R=E[0],I=E[1],k=E[2],S=E[3],A=n.padInfo.front,D=n.padInfo.left,N=n.padInfo.top,T=0;T<i;++T)for(var F=Math.max(0,Math.ceil((A-T)/r)),_=Math.min(n.outDepth,(n.inDepth+A-T)/r),O=T*h,M=0;M<s;++M)for(var B=Math.max(0,Math.ceil((N-M)/o)),P=Math.min(n.outHeight,(n.inHeight+N-M)/o),L=M*d+O,W=0;W<u;++W)for(var z=Math.max(0,Math.ceil((D-W)/a)),U=Math.min(n.outWidth,(n.inWidth+D-W)/a),V=W*f+L,G=0;G<n.inChannels;++G)for(var q=G*v+V,H=0;H<n.outChannels;++H){for(var K=0,j=0;j<n.batchSize;++j)for(var X=j*R,Y=j*x,$=F;$<_;++$)for(var Q=(T+$*r-A)*I+X,J=$*y+Y,Z=B;Z<P;++Z)for(var tt=(M+Z*o-N)*k+Q,et=Z*b+J,nt=z;nt<U;++nt){var rt=nt*w+et;K+=C[(W+nt*a-D)*S+tt+G]*m[rt+H]}l[q+H]=K}return c.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,a=t.activation,i=t.preluActivationWeights,s=this.depthwiseConv2D(e,n,r);return o&&(s=this.add(s,o)),a&&(s=Xp(this,s,a,i)),s},e.prototype.depthwiseConv2D=function(t,e,n){jp([t,e],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=mr(n.outShape,t.dtype),p=this.readSync(t.dataId),h=this.readSync(e.dataId),d=l.values,f=0;f<n.batchSize;++f)for(var v=f*t.strides[0],m=f*l.strides[0],g=0;g<n.outHeight;++g)for(var x=m+g*l.strides[1],y=g*n.strideHeight-s,b=0;b<r;++b){var w=y+b*a;if(!(w<0||w>=n.inHeight))for(var C=b*e.strides[0],E=v+w*t.strides[1],R=0;R<n.outWidth;++R)for(var I=x+R*l.strides[2],k=R*n.strideWidth-u,S=0;S<o;++S){var A=k+S*i;if(!(A<0||A>=n.inWidth))for(var D=C+S*e.strides[1],N=E+A*n.inChannels,T=I,F=D,_=0;_<n.inChannels;++_){for(var O=p[N+_],M=0;M<c;++M)d[T+M]+=O*h[F+M];T+=c,F+=c}}}return l.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,e,n){jp([t,e],"depthwiseConv2DDerInput");for(var r=mr(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],c=this.readSync(t.dataId),l=t.strides,p=l[0],h=l[1],d=l[2],f=this.readSync(e.dataId),v=e.strides,m=v[0],g=v[1],x=v[2],y=n.batchSize,b=n.filterHeight,w=n.filterWidth,C=n.inChannels,E=n.inHeight,R=n.inWidth,I=n.outChannels,k=n.outHeight,S=n.outWidth,A=n.strideHeight,D=n.strideWidth,N=b-1-n.padInfo.top,T=w-1-n.padInfo.left,F=I/C,_=0;_<y;++_)for(var O=0;O<C;++O)for(var M=0;M<E;++M)for(var B=M-N,P=Math.max(0,Math.ceil(B/A)),L=Math.min(k,(b+B)/A),W=0;W<R;++W){for(var z=W-T,U=Math.max(0,Math.ceil(z/D)),V=Math.min(S,(w+z)/D),G=0,q=P;q<L;++q)for(var H=q*A-B,K=U;K<V;++K)for(var j=p*_+h*q+d*K,X=m*(b-1-H)+g*(w-1-(K*D-z))+x*O,Y=0;Y<F;++Y)G+=c[j+(O*F+Y)]*f[X+Y];o[i*_+s*M+u*W+O]=G}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){jp([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=mr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,p=this.bufferSync(t),h=this.bufferSync(e),d=0;d<a;++d)for(var f=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),x=Math.min(n.outWidth,(n.inWidth+u-m)/o),y=0;y<n.outChannels;++y){for(var b=Math.trunc(y/l),w=y%l,C=0,E=0;E<n.batchSize;++E)for(var R=f;R<v;++R)for(var I=d+R*r-c,k=g;k<x;++k){var S=m+k*o-u;C+=p.get(E,I,S,b)*h.get(E,R,k,y)}s.set(C,d,m,b,w)}return s.toTensor()},e.prototype.tile=function(t,e){return jp(t,"tile"),ra(this.bufferSync(t),e)},e.prototype.pad=function(t,e,n){jp(t,"pad");var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),o=e.map(function(t){return t[0]}),a=this.bufferSync(t),i=mr(r,t.dtype);0!==n&&i.values.fill(n);for(var s=0;s<t.size;s++){var u=a.indexToLoc(s),c=u.map(function(t,e){return t+o[e]});i.set.apply(i,[a.get.apply(a,u)].concat(c))}return i.toTensor()},e.prototype.transpose=function(t,e){jp(t,"transpose");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var o=this.readSync(t.dataId),a=mr(n,t.dtype),i=this.bufferSync(t);for(r=0;r<t.size;++r){for(var s=i.indexToLoc(r),u=new Array(s.length),c=0;c<u.length;c++)u[c]=s[e[c]];var l=a.locToIndex(u);a.values[l]=o[r]}return a.toTensor()},e.prototype.gather=function(t,e,n){jp([t,e],"gather");var r=t.shape.slice(),o=this.readSync(e.dataId);r[n]=o.length;for(var a=mr(r,t.dtype),i=this.bufferSync(t),s=0;s<a.size;++s){var u=a.indexToLoc(s),c=u.slice();c[n]=o[u[n]];var l=i.locToIndex(c);a.values[s]=i.values[l]}return a.toTensor()},e.prototype.batchToSpaceND=function(t,e,n){jp([t],"batchToSpaceND");var r=e.reduce(function(t,e){return t*e}),o=Hr(t.shape,e,r),a=Kr(o.length,e.length),i=jr(t.shape,e,r),s=Xr(n,e.length),u=Yr(i,n,e.length);return t.reshape(o).transpose(a).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(t,e,n){jp([t],"spaceToBatchND");var r=e.reduce(function(t,e){return t*e}),o=[[0,0]];o.push.apply(o,n);for(var a=1+e.length;a<t.shape.length;++a)o.push([0,0]);var i=t.pad(o),s=Hr(i.shape,e,r,!1),u=Kr(s.length,e.length,!1),c=jr(i.shape,e,r,!1);return i.reshape(s).transpose(u).reshape(c)},e.prototype.pool=function(t,e,n){jp(t,"pool");for(var r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,p="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(t.dataId),d=mr(e.outShape,t.dtype),f=d.values,v=e.outShape[1]*e.outShape[2]*e.outShape[3],m=e.outShape[2]*e.outShape[3],g=e.outShape[3],x=0;x<e.batchSize;++x)for(var y=x*v,b=x*t.strides[0],w=0;w<e.inChannels;++w)for(var C=0;C<e.outHeight;++C)for(var E=C*r-c,R=Math.max(0,E),I=Math.min(e.inHeight,s+E),k=y+C*m,S=0;S<e.outWidth;++S){for(var A=S*o-l,D=Math.max(0,A),N=Math.min(e.inWidth,u+A),T=p,F=0,_=0,O=R;O<I;O+=a){for(var M=b+O*t.strides[1],B=D;B<N;B+=i){var P=h[M+B*t.strides[2]+w];"max"===n&&P>T?T=P:"avg"===n&&(F+=P,_++)}if(isNaN(T))break}f[k+S*g+w]="avg"===n?F/_:T}return d.toTensor()},e.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},e.prototype.maxPoolPositions=function(t,e){for(var n=mr(e.outShape,"int32"),r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,l=e.padInfo.left,p=this.bufferSync(t),h=0;h<e.batchSize;++h)for(var d=0;d<e.inChannels;++d)for(var f=0;f<e.outHeight;++f){for(var v=f*r-c,m=v;m<0;)m+=a;for(var g=Math.min(e.inHeight,s+v),x=0;x<e.outWidth;++x){for(var y=x*o-l,b=y;b<0;)b+=i;for(var w=Math.min(e.inWidth,u+y),C=Number.NEGATIVE_INFINITY,E=-1,R=m;R<g;R+=a)for(var I=R-v,k=b;k<w;k+=i){var S=k-y,A=p.get(h,R,k,d);A>C&&(C=A,E=I*u+S)}n.set(E,h,f,x,d)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(t,e,n,r){jp([e,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(e,r),a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,p=l-1-r.padInfo.left,h=c-1-r.padInfo.top,d=mr(e.shape,"float32"),f=this.bufferSync(o),v=this.bufferSync(t),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var x=0;x<r.inHeight;++x)for(var y=0;y<r.inWidth;++y){for(var b=x-h,w=y-p,C=0,E=0;E<c;E+=s){var R=(b+E)/a;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var I=0;I<l;I+=u){var k=(w+I)/i;if(!(k<0||k>=r.outWidth||Math.floor(k)!==k)){var S=c*l-1-f.get(m,R,k,g)===E*l+I?1:0;0!==S&&(C+=v.get(m,R,k,g)*S)}}}d.set(C,m,x,y,g)}return d.toTensor()},e.prototype.avgPoolBackprop=function(t,e,n){jp([t,e],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,p=l-1-n.padInfo.left,h=c-1-n.padInfo.top,d=mr(e.shape,"float32"),f=1/(a*i),v=this.bufferSync(t),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var x=0;x<n.inHeight;++x)for(var y=0;y<n.inWidth;++y){for(var b=x-h,w=y-p,C=0,E=0;E<c;E+=s){var R=(b+E)/r;if(!(R<0||R>=n.outHeight||Math.floor(R)!==R))for(var I=0;I<l;I+=u){var k=(w+I)/o;k<0||k>=n.outWidth||Math.floor(k)!==k||(C+=v.get(m,R,k,g))}}d.set(C*f,m,x,y,g)}return d.toTensor()},e.prototype.pool3d=function(t,e,n){jp(t,"pool3d");for(var r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,f=e.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(t.dataId),g=mr(e.outShape,t.dtype),x=g.values,y=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],b=e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[3]*e.outShape[4],C=e.outShape[4],E=0;E<e.batchSize;++E)for(var R=E*y,I=E*t.strides[0],k=0;k<e.inChannels;++k)for(var S=0;S<e.outDepth;++S){for(var A=S*r-h,D=A;D<0;)D+=i;for(var N=Math.min(e.inDepth,c+A),T=R+S*b,F=0;F<e.outHeight;++F){for(var _=F*o-d,O=_;O<0;)O+=s;for(var M=Math.min(e.inHeight,l+_),B=T+F*w,P=0;P<e.outWidth;++P){for(var L=P*a-f,W=L;W<0;)W+=u;for(var z=Math.min(e.inWidth,p+L),U=B+P*C,V=v,G=0,q=0,H=D;H<N;H+=i){for(var K=I+H*t.strides[1],j=O;j<M;j+=s){for(var X=K+j*t.strides[2],Y=W;Y<z;Y+=u){var $=m[X+Y*t.strides[3]+k];if("max"===n&&$>V?V=$:"avg"===n&&(G+=$,q++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}x[U+k]="avg"===n?G/q:V}}}return g.toTensor()},e.prototype.avgPool3d=function(t,e){return jp(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,e,n){jp([t,e],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,d=n.effectiveFilterHeight,f=n.effectiveFilterWidth,v=h-1-n.padInfo.front,m=f-1-n.padInfo.left,g=d-1-n.padInfo.top,x=mr(e.shape,"float32"),y=1/(i*s*u),b=this.bufferSync(t),w=0;w<n.batchSize;++w)for(var C=0;C<n.inChannels;++C)for(var E=0;E<n.inDepth;++E)for(var R=0;R<n.inHeight;++R)for(var I=0;I<n.inWidth;++I){for(var k=E-v,S=R-g,A=I-m,D=0,N=0;N<h;N+=c){var T=(k+N)/r;if(!(T<0||T>=n.outDepth||Math.floor(T)!==T))for(var F=0;F<d;F+=l){var _=(S+F)/o;if(!(_<0||_>=n.outHeight||Math.floor(_)!==_))for(var O=0;O<f;O+=p){var M=(A+O)/a;M<0||M>=n.outWidth||Math.floor(M)!==M||(D+=b.get(w,T,_,M,C))}}}x.set(D*y,w,E,R,I,C)}return x.toTensor()},e.prototype.maxPool3d=function(t,e){return jp(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,e){for(var n=mr(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,f=e.padInfo.left,v=this.bufferSync(t),m=0;m<e.batchSize;++m)for(var g=0;g<e.inChannels;++g)for(var x=0;x<e.outDepth;++x){for(var y=x*r-h,b=y;b<0;)b+=i;for(var w=Math.min(e.inDepth,c+y),C=0;C<e.outHeight;++C){for(var E=C*o-d,R=E;R<0;)R+=s;for(var I=Math.min(e.inHeight,l+E),k=0;k<e.outWidth;++k){for(var S=k*a-f,A=S;A<0;)A+=u;for(var D=Math.min(e.inWidth,p+S),N=Number.NEGATIVE_INFINITY,T=-1,F=b;F<w;F+=i)for(var _=F-y,O=R;O<I;O+=s)for(var M=O-E,B=A;B<D;B+=u){var P=B-S,L=v.get(m,F,O,B,g);L>=N&&(N=L,T=_*l*p+M*l+P)}n.set(T,m,x,C,k,g)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(t,e,n,r){jp([e,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(e,r),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,p=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=p-1-r.padInfo.front,v=d-1-r.padInfo.left,m=h-1-r.padInfo.top,g=mr(e.shape,"float32"),x=this.bufferSync(o),y=this.bufferSync(t),b=0;b<r.batchSize;++b)for(var w=0;w<r.inChannels;++w)for(var C=0;C<r.inDepth;++C)for(var E=0;E<r.inHeight;++E)for(var R=0;R<r.inWidth;++R){for(var I=C-f,k=E-m,S=R-v,A=0,D=0;D<p;D+=u){var N=(I+D)/a;if(!(N<0||N>=r.outDepth||Math.floor(N)!==N))for(var T=0;T<h;T+=c){var F=(k+T)/i;if(!(F<0||F>=r.outHeight||Math.floor(F)!==F))for(var _=0;_<d;_+=l){var O=(S+_)/s;if(!(O<0||O>=r.outWidth||Math.floor(O)!==O)){var M=p*h*d-1-x.get(b,N,F,O,w)===D*h*d+T*d+_?1:0;0!==M&&(A+=y.get(b,N,F,O,w)*M)}}}}g.set(A,b,C,E,R,w)}return g.toTensor()},e.prototype.cast=function(t,e){return zo(t,e,this)},e.prototype.reshape=function(t,e){return Uo(t,e)},e.prototype.avgPool=function(t,e){return jp(t,"avgPool"),this.pool(t,e,"avg").toFloat()},e.prototype.resizeBilinear=function(t,e,n,r){jp(t,"resizeBilinear");for(var o=t.shape,a=o[0],i=o[1],s=o[2],u=o[3],c=this.readSync(t.dataId),l=new Float32Array(D([a,e,n,u])),p=[r&&e>1?i-1:i,r&&n>1?s-1:s],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=0,f=p[0]/h[0],v=p[1]/h[1],m=0;m<a;m++)for(var g=0;g<e;g++)for(var x=f*g,y=Math.floor(x),b=x-y,w=Math.min(i-1,Math.ceil(x)),C=m*t.strides[0]+y*t.strides[1],E=m*t.strides[0]+w*t.strides[1],R=0;R<n;R++)for(var I=v*R,k=Math.floor(I),S=I-k,A=Math.min(s-1,Math.ceil(I)),N=C+k*t.strides[2],T=E+k*t.strides[2],F=C+A*t.strides[2],_=E+A*t.strides[2],O=0;O<u;O++){var M=c[N+O],B=c[T+O],P=M+(c[F+O]-M)*S,L=P+(B+(c[_+O]-B)*S-P)*b;l[d++]=L}return Mn(l,[a,e,n,u])},e.prototype.resizeBilinearBackprop=function(t,e,n){jp([t,e],"resizeBilinearBackprop");for(var r=e.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],p=new Float32Array(o*a*i*s),h=[n&&c>1?a-1:a,n&&l>1?i-1:i],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],f=h[0]/d[0],v=h[1]/d[1],m=this.readSync(t.dataId),g=0,x=0;x<o;x++)for(var y=x*e.strides[0],b=0;b<c;b++)for(var w=b*f,C=Math.floor(w),E=Math.min(Math.ceil(w),a-1),R=y+C*e.strides[1],I=y+E*e.strides[1],k=w-C,S=1-k,A=0;A<l;A++)for(var D=A*v,N=Math.floor(D),T=Math.min(Math.ceil(D),i-1),F=D-N,_=1-F,O=R+N*e.strides[2],M=R+T*e.strides[2],B=I+N*e.strides[2],P=I+T*e.strides[2],L=S*_,W=S*F,z=k*_,U=k*F,V=0;V<s;V++){var G=m[g++];p[O+V]+=G*L,p[M+V]+=G*W,p[B+V]+=G*z,p[P+V]+=G*U}return Un(p,[o,i,a,s],e.dtype)},e.prototype.resizeNearestNeighbor=function(t,e,n,r){jp(t,"resizeNearestNeighbor");for(var o=t.shape,a=o[0],i=o[1],s=o[2],u=o[3],c=this.readSync(t.dataId),l=new Float32Array(a*e*n*u),p=[r&&e>1?i-1:i,r&&n>1?s-1:s],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=p[0]/h[0],f=p[1]/h[1],v=0,m=0;m<a;m++)for(var g=m*t.strides[0],x=0;x<e;x++)for(var y=d*x,b=g+Math.min(i-1,r?Math.round(y):Math.floor(y))*t.strides[1],w=0;w<n;w++)for(var C=f*w,E=b+Math.min(s-1,r?Math.round(C):Math.floor(C))*t.strides[2],R=0;R<u;R++){var I=c[E+R];l[v++]=I}return Mn(l,[a,e,n,u],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){jp([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],p=new Float32Array(o*a*i*s),h=this.readSync(t.dataId),d=[n&&c>1?a-1:a,n&&l>1?i-1:i],f=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/f[0],m=d[1]/f[1],g=1/v,x=1/m,y=2*Math.ceil(g)+2,b=2*Math.ceil(x)+2,w=0;w<o;w++)for(var C=w*e.strides[0],E=0;E<a;E++)for(var R=C+E*e.strides[1],I=Math.floor(E*g),k=Math.floor(I-y/2),S=0;S<i;S++)for(var A=R+S*e.strides[2],D=Math.floor(S*x),N=Math.floor(D-b/2),T=0;T<s;T++){for(var F=0,_=0;_<y;_++){var O=_+k;if(!(O<0||O>=c)){var M=C+O*t.strides[1],B=O*v;if(E===Math.min(a-1,n?Math.round(B):Math.floor(B)))for(var P=0;P<b;P++){var L=P+N;if(!(L<0||L>=l)){var W=M+L*t.strides[2],z=L*m;S===Math.min(i-1,n?Math.round(z):Math.floor(z))&&(F+=h[W+T])}}}}p[A+T]=F}return Un(p,e.shape,e.dtype)},e.prototype.batchNormalization=function(t,e,n,r,o,a){jp([t,e,n,o,a],"batchNorm");for(var i=this.readSync(t.dataId),s=this.readSync(e.dataId),u=this.readSync(n.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),l=a?this.readSync(a.dataId):new Float32Array([0]),p=new Float32Array(i.length),h=l.length,d=c.length,f=u.length,v=s.length,m=0,g=0,x=0,y=0,b=0;b<i.length;++b)p[b]=l[m++]+(i[b]-s[g++])*c[x++]/Math.sqrt(u[y++]+r),m>=h&&(m=0),g>=v&&(g=0),x>=d&&(x=0),y>=f&&(y=0);return Un(p,t.shape)},e.prototype.localResponseNormalization4D=function(t,e,n,r,o){jp(t,"localResponseNormalization4D");var a=t.shape[3],i=a-1,s=this.readSync(t.dataId),u=t.size,c=new Float32Array(u);function l(t){for(var n=t%a,r=t-n+Math.max(0,n-e),o=t-n+Math.min(n+e,i),u=0;r<=o;r++){var c=s[r];u+=c*c}return u}for(var p=0;p<u;p++){var h=l(p),d=s[p]*Math.pow(n+r*h,-o);c[p]=d}return Un(c,t.shape)},e.prototype.LRNGrad=function(t,e,n,r,o,a,i){jp(t,"LRNGrad");for(var s=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=this.readSync(n.dataId),p=new Float32Array(t.size),h=t.size,d=0;d<h;d++){for(var f=d%s,v=d-f+Math.max(0,f-r),m=d-f+Math.min(s,f+r+1),g=0,x=v;x<m;x++)g+=Math.pow(c[x],2);for(g=a*g+o,x=v;x<m;x++){var y=-2*a*i*c[x]*l[d]/g;d===x&&(y+=Math.pow(g,-i)),y*=u[d],p[x]+=y}}return Un(p,t.shape)},e.prototype.multinomial=function(t,e,n,r){jp(t,"multinomial");for(var o=e?t:bo(t),a=o.shape[0],i=o.shape[1],s=Kn([a,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(o.dataId),l=0;l<a;++l){var p=l*i,h=new Float32Array(i-1);h[0]=c[p];for(var d=1;d<h.length;++d)h[d]=h[d-1]+c[p+d];for(var f=hr(r.toString()),v=l*n,m=0;m<n;++m){var g=f();u[v+m]=h.length;for(var x=0;x<h.length;x++)if(g<h[x]){u[v+m]=x;break}}}return s},e.prototype.oneHot=function(t,e,n,r){jp(t,"oneHot");var o=new Float32Array(t.size*e);o.fill(r);for(var a=this.readSync(t.dataId),i=0;i<t.size;++i)a[i]>=0&&a[i]<e&&(o[i*e+a[i]]=n);return Wn(o,[t.size,e],"int32")},e.prototype.nonMaxSuppression=function(t,e,n,r,o){return jp(t,"nonMaxSuppression"),$o(this.readSync(t.dataId),this.readSync(e.dataId),n,r,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],o=mr(t.shape,"float32"),a=mr(t.shape,"float32"),i=_n(t).as2D(n,r),s=On(t).as2D(n,r),u=0;u<n;u++)for(var c=i.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),p=Fn(c,l),h=this.readSync(this.fftImpl(p,e).dataId),d=0;d<r;d++){var f=Ho(h,d);o.values[u*r+d]=f.real,a.values[u*r+d]=f.imag}return Fn(o.toTensor(),a.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(o=Fn(_n(o).div(Pn(r)),On(o).div(Pn(r)))),o}var a=this.readSync(t.dataId),i=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(a,r,e));return Fn(i.real,i.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return 0==(t&t-1)},e.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=this.readSync(t.dataId),o=e/2,a=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),i=Fn(a.real,a.imag).as1D(),s=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),u=Fn(s.real,s.imag).as1D();i=this.fftRadix2(i,o,n),u=this.fftRadix2(u,o,n);var c=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),o=0;o<Math.ceil(t/2);o++){var a=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}(e,n),l=Fn(c.real,c.imag).mul(u),p=i.add(l),h=i.sub(l),d=_n(p).concat(_n(h)),f=On(p).concat(On(h));return Fn(d,f).as1D()},e.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),o=0;o<e;o++){for(var a=0,i=0,s=0;s<e;s++){var u=jo(o*s,e,n),c=Ho(t,s);a+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(a/=e,i/=e),Ko(r,a,i,o)}return r},e.prototype.depthToSpace=function(t,e,n){I("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),I(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});for(var r=t.shape[0],o=t.shape[1],a=t.shape[2],i=t.shape[3],s=o*e,u=a*e,c=i/(e*e),l=this.readSync(t.dataId),p=new Float32Array(r*s*u*c),h=0,d=0;d<r;++d)for(var f=0;f<s;++f)for(var v=Math.floor(f/e),m=f%e,g=0;g<u;++g)for(var x=Math.floor(g/e),y=(m*e+g%e)*c,b=0;b<c;++b){var w=b+y+i*(x+a*(v+o*d));p[h++]=l[w]}return Un(p,[r,s,u,c])},e.prototype.broadcastedBinaryOp=function(t,e,n,r){var o=So(t.shape,e.shape),a=mr(o,n),i=this.readSync(t.dataId),s=this.readSync(e.dataId),u=Io(t.shape,o),c=Io(e.shape,o),l=a.values;if(u.length+c.length===0)for(var p=0;p<l.length;++p)l[p]=r(i[p%i.length],s[p%s.length]);else{var h=this.bufferSync(t),d=this.bufferSync(e),f=function(n){var o=a.indexToLoc(n),p=o.slice(-t.rank);u.forEach(function(t){return p[t]=0});var f=h.locToIndex(p),v=o.slice(-e.rank);c.forEach(function(t){return v[t]=0});var m=d.locToIndex(v);l[n]=r(i[f],s[m])};for(p=0;p<l.length;++p)f(p)}return a.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=So(t.shape,e.shape),o=mr(r,"float32"),a=mr(r,"float32"),i=this.readSync(t.dataId),s=this.readSync(e.dataId),u=Io(t.shape,r),c=Io(e.shape,r),l=o.values,p=a.values;if(u.length+c.length===0)for(var h=0;h<l.length;h++){var d=h%i.length,f=h%s.length,v=n(i[2*d],i[2*d+1],s[2*f],s[2*f+1]);l[h]=v.real,p[h]=v.imag}else{var m=this.bufferSync(this.data.get(t.dataId).complexTensors.real),g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),x=function(r){var a=o.indexToLoc(r),h=a.slice(-t.rank);u.forEach(function(t){return h[t]=0});var d=m.locToIndex(h),f=a.slice(-e.rank);c.forEach(function(t){return f[t]=0});var v=g.locToIndex(f),x=n(i[2*d],i[2*d+1],s[2*v],s[2*v+1]);l[r]=x.real,p[r]=x.imag};for(h=0;h<l.length;h++)x(h)}return this.complex(o.toTensor(),a.toTensor())},e.prototype.split=function(t,e,n){return na(t,e,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,e,n,r,o,a){for(var i=t.shape,s=i[0],u=i[1],c=i[2],l=i[3],p=e.shape[0],h=r[0],d=r[1],f=mr([p,h,d,l],"float32"),v=this.readSync(e.dataId),m=this.readSync(n.dataId),g=this.readSync(t.dataId),x=t.strides,y=f.strides,b=0;b<p;b++){var w=4*b,C=v[w],E=v[w+1],R=v[w+2],I=v[w+3],k=m[b];if(!(k>=s))for(var S=h>1?(R-C)*(u-1)/(h-1):0,A=d>1?(I-E)*(c-1)/(d-1):0,D=0;D<h;D++){var N=h>1?C*(u-1)+D*S:.5*(C+R)*(u-1);if(N<0||N>u-1)for(var T=0;T<d;T++)for(var F=0;F<l;F++){var _=F+T*y[2]+D*y[1]+b*y[0];f.values[_]=a}else if("bilinear"===o){var O=Math.floor(N),M=Math.ceil(N),B=N-O;for(T=0;T<d;T++)if((H=d>1?E*(c-1)+T*A:.5*(E+I)*(c-1))<0||H>c-1)for(F=0;F<l;F++)_=F+T*y[2]+D*y[1]+b*y[0],f.values[_]=a;else{var P=Math.floor(H),L=Math.ceil(H),W=H-P;for(F=0;F<l;F++){var z=g[_=F+P*x[2]+O*x[1]+k*x[0]],U=g[_=F+L*x[2]+O*x[1]+k*x[0]],V=g[_=F+P*x[2]+M*x[1]+k*x[0]],G=z+(U-z)*W,q=V+(g[_=F+L*x[2]+M*x[1]+k*x[0]]-V)*W;_=F+T*y[2]+D*y[1]+b*y[0],f.values[_]=G+(q-G)*B}}}else for(T=0;T<d;++T){var H;if((H=d>1?E*(c-1)+T*A:.5*(E+I)*(c-1))<0||H>c-1)for(F=0;F<l;F++)_=F+T*y[2]+D*y[1]+b*y[0],f.values[_]=a;else{var K=Math.round(H),j=Math.round(N);for(F=0;F<l;F++){var X=F+K*x[2]+j*x[1]+k*x[0],Y=F+T*y[2]+D*y[1]+b*y[0];f.values[Y]=g[X]}}}}}return f.toTensor()},e.prototype.sparseToDense=function(t,e,n,r){var o=no(0,t,n),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,c=o.outputSize;return this.scatter(t,e,n,c,s,i,a,u,r,!1)},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=$r(t,e),a=o[0],i=o[1],s=o[2],u=o[3];if(0===i)return Mn([],a,t.dtype);for(var c=new bt([i,s],t.dtype),l=this.readSync(e.dataId),p=this.readSync(t.dataId),h=0;h<i;h++){for(var d=[],f=0,v=0;v<r;v++){var m=l[h*r+v];f+=m*u[v],d.push(m)}if(f<0||f>=t.size/s)throw new Error("Invalid indices: "+d+" does not index into "+t.shape);for(var g=0;g<s;g++)c.values[h*s+g]=p[f*s+g]}return c.toTensor().reshape(a)},e.prototype.scatterND=function(t,e,n){var r=no(0,t,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,c=Pn(0);return this.scatter(t,e,n,u,i,a,o,s,c,!0)},e.prototype.fill=function(t,e,n){var r=z(n=n||$(e),D(t));return r.fill(e),Ut.makeTensor(r,t,n,this)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var e=z(t.dtype,D(t.shape));return this.makeOutput(e,t.shape,t.dtype)},e.prototype.linspace=function(t,e,n){return Vo(t,e,n)},e.prototype.scatter=function(t,e,n,r,o,a,i,s,u,c){var l=[r/o,o],p=this.readSync(t.dataId),h=this.readSync(e.dataId);if(0===r)return Mn([],n,e.dtype);var d=new bt(l,e.dtype);d.values.fill(this.readSync(u.dataId)[0]);for(var f=0;f<a;f++){for(var v=[],m=0,g=0;g<i;g++){var x=p[f*i+g];v.push(x),m+=x*s[g]}if(m<0||m>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var y=0;y<o;y++)c?d.values[m*o+y]+=h[f*o+y]:d.values[m*o+y]=0===e.rank?h[0]:h[f*o+y]}return d.toTensor().reshape(n)},e}(Eo);Ut.registerBackend("cpu",function(){return new Yp},1);for(var $p=0,Qp=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,p=s.softNmsSigma,h=n;jp(a,"NonMaxSuppressionWithScore");var d=Qo(h.data.get(a.dataId).values,h.data.get(i.dataId).values,u,c,l,p);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n;jp(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:ou,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,a=r.b,i=n;jp([o,a],ou);var s=i.data.get(o.dataId).values,u=i.data.get(a.dataId).values,c=function(t,e,n,r,o,a){var i=So(t,e),s=i.length,u=Z(i),c=W(o,D(i)),l=t.length,p=e.length,h=Z(t),d=Z(e),f=Io(t,i),v=Io(e,i);if(f.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=a(n[m%n.length],r[m%r.length]);else{var g=function(t){var e=ct(t,s,u),o=e.slice(-l);f.forEach(function(t){return o[t]=0});var i=ut(o,l,h),m=e.slice(-p);v.forEach(function(t){return m[t]=0});var g=ut(m,p,d);c[t]=a(n[i],r[g])};for(m=0;m<c.length;++m)g(m)}return[c,i]}(o.shape,a.shape,s,u,o.dtype,function(t,e){var n=t-e;return n*n}),l=c[0],p=c[1];return{dataId:i.write(l,p,o.dtype),shape:p,dtype:o.dtype}}}];$p<Qp.length;$p++)m(Qp[$p]);for(var Jp,Zp=function(t){this.variableNames=["A"];var e=pa(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},th=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=pa(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "},eh=0,nh=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.pixels,a=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],p=u[1],h=[p,l],d=[p,l,a];(s||i)&&(null==Jp&&(Jp=document.createElement("canvas").getContext("2d")),Jp.canvas.width=l,Jp.canvas.height=p,Jp.drawImage(o,0,0,l,p),o=Jp.canvas);var f=n.makeTensorInfo(h,"int32");n.texData.get(f.dataId).usage=Ht.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);var v=c().getBool("WEBGL_PACK")?new th(d):new Zp(d),m=n.runWebGLProgram(v,[f],"int32");return n.disposeData(f.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;mn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,p=s.softNmsSigma,h=n,d=Qo(h.readSync(a.dataId),h.readSync(i.dataId),u,c,l,p);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n,a=new Is(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:ou,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,a=r.b,i=n,s=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ua("return (a - b) * (a - b);",o.shape,a.shape):new Wa("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}}];eh<nh.length;eh++)m(nh[eh]);for(var rh=0,oh=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:ou,gradFunc:function(t,e){var n=e[0],r=e[1],o=Pn(2);return{a:function(){return bc(t,bc(o,Ic(n,r)))},b:function(){return bc(t,bc(o,Ic(r,n)))}}}}];rh<oh.length;rh++)g(oh[rh]);var ah=function(){function t(){}return t.prototype.fetch=function(t,e){return fetch(t,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},t}();c().get("IS_BROWSER")&&c().setPlatform("browser",new ah);var ih,sh=function(){return require("node-fetch")},uh=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(t,e){return null!=c().global.fetch?c().global.fetch(t,e):(null==ih&&(ih=sh()),ih(t,e))},t.prototype.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)},t}();c().get("IS_NODE")&&c().setPlatform("node",new uh);var ch={float32:4,int32:4,uint16:2,uint8:1,bool:1},lh=4;function ph(t,e){for(var n={},r=0,o=function(e){var o=e.name,a=e.dtype,i=e.shape,s=D(i),u=void 0;if("quantization"in e){var c=e.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=ch[c.dtype],p=t.slice(r,r+s*l),h="uint8"===c.dtype?new Uint8Array(p):new Uint16Array(p);if("float32"===a)u=Float32Array.from(h,function(t){return t*c.scale+c.min});else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=Int32Array.from(h,function(t){return Math.round(t*c.scale+c.min)})}r+=s*l}else if("string"===a){var d=D(e.shape);u=[];for(var f=0;f<d;f++){var v=new Uint32Array(t.slice(r,r+lh))[0];r+=lh;var m=new Uint8Array(t.slice(r,r+v));u.push(m),r+=v}}else{var g=ch[a];if(p=t.slice(r,r+s*g),"float32"===a)u=new Float32Array(p);else if("int32"===a)u=new Int32Array(p);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=new Uint8Array(p)}r+=s*g}n[o]=Mn(u,i,a)},a=0,i=e;a<i.length;a++)o(i[a]);return n}function hh(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});var r=new Uint8Array(e),o=0;return n.forEach(function(t){r.set(new Uint8Array(t.buffer),o),o+=t.byteLength}),r.buffer}var dh=void 0!==n&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function fh(t){return dh?n.byteLength(t):new Blob([t]).size}function vh(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function mh(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function gh(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:fh(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:fh(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var xh=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(t){var n=t(e,r);null!==n&&o.push(n)}),o},t}(),yh="://",bh=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){I(null!=e,function(){return"scheme must not be undefined or null."}),e.endsWith(yh)&&(e=e.slice(0,e.indexOf(yh))),I(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();I(null==r.managers[e],function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function wh(t){if(-1===t.indexOf(yh))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+bh.getSchemes().join(","));return{scheme:t.split(yh)[0],path:t.split(yh)[1]}}function Ch(t,e,n){return void 0===n&&(n=!1),a(this,void 0,void 0,function(){var r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return I(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),I((r=xh.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),I(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),o=r[0],I((a=xh.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),I(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),s=a[0],u=wh(t).scheme,c=wh(t).path,l=u===wh(t).scheme,[4,o.load()];case 1:return p=i.sent(),n&&l?[4,bh.getManager(u).removeModel(c)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[4,s.save(p)];case 4:return h=i.sent(),!n||l?[3,6]:[4,bh.getManager(u).removeModel(c)];case 5:i.sent(),i.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var Eh="models_store",Rh="model_info_store";function Ih(){if(!c().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function kh(t){var e=t.result;e.createObjectStore(Eh,{keyPath:"modelPath"}),e.createObjectStore(Rh,{keyPath:"modelPath"})}var Sh=function(){function t(t){if(this.indexedDB=Ih(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kh(o)},o.onsuccess=function(){var a=o.result;if(null==e){var i=a.transaction(Eh,"readonly"),s=i.objectStore(Eh).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return a.close(),r(s.error)},i.oncomplete=function(){return a.close()}}else{var u,c=gh(e),l=a.transaction(Rh,"readwrite"),p=l.objectStore(Rh),h=p.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var o=(u=a.transaction(Eh,"readwrite")).objectStore(Eh).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:c});o.onsuccess=function(){return t({modelArtifactsInfo:c})},o.onerror=function(t){var e=(p=l.objectStore(Rh)).delete(n.modelPath);e.onsuccess=function(){return a.close(),r(o.error)},e.onerror=function(t){return a.close(),r(o.error)}}},h.onerror=function(t){return a.close(),r(h.error)},l.oncomplete=function(){null==u?a.close():u.oncomplete=function(){return a.close()}}}},o.onerror=function(t){return r(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),Ah=function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Sh.URL_SCHEME)?(e=t.slice(Sh.URL_SCHEME.length),new Sh(e)):null;var e};xh.registerSaveRouter(Ah),xh.registerLoadRouter(Ah);var Dh=function(){function t(){this.indexedDB=Ih()}return t.prototype.listModels=function(){return a(this,void 0,void 0,function(){var t=this;return i(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return kh(r)},r.onsuccess=function(){var t=r.result,o=t.transaction(Rh,"readonly"),a=o.objectStore(Rh).getAll();a.onsuccess=function(){for(var t={},n=0,r=a.result;n<r.length;n++){var o=r[n];t[o.modelPath]=o.modelArtifactsInfo}e(t)},a.onerror=function(e){return t.close(),n(a.error)},o.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return a(this,void 0,void 0,function(){var e=this;return i(this,function(n){var r;return t=(r=t).startsWith(Sh.URL_SCHEME)?r.slice(Sh.URL_SCHEME.length):r,[2,new Promise(function(n,r){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kh(o)},o.onsuccess=function(){var e,a=o.result,i=a.transaction(Rh,"readwrite"),s=i.objectStore(Rh),u=s.get(t);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var o=s.delete(t),i=function(){var o=(e=a.transaction(Eh,"readwrite")).objectStore(Eh).delete(t);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(t){return r(u.error)}};o.onsuccess=i,o.onerror=function(t){return i(),a.close(),r(u.error)}},u.onerror=function(t){return a.close(),r(u.error)},i.oncomplete=function(){null==e?a.close():e.oncomplete=function(){return a.close()}}},o.onerror=function(t){return r(o.error)}})]})})},t}();if(c().getBool("IS_BROWSER"))try{bh.registerManager(Sh.URL_SCHEME,new Dh)}catch(r){}var Nh="/",Th="tensorflowjs_models",Fh="info",_h="model_topology",Oh="weight_specs",Mh="weight_data",Bh="model_metadata";function Ph(t){return{info:[Th,t,Fh].join(Nh),topology:[Th,t,_h].join(Nh),weightSpecs:[Th,t,Oh].join(Nh),weightData:[Th,t,Mh].join(Nh),modelMetadata:[Th,t,Bh].join(Nh)}}function Lh(t){var e=t.split(Nh);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Nh)}var Wh=function(){function t(t){if(!c().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Ph(this.modelPath)}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){var e,r,o;return i(this,function(a){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),o=gh(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(t){if(dh)return n.from(t).toString("base64");for(var e=new Uint8Array(t),r="",o=0,a=e.length;o<a;o++)r+=String.fromCharCode(e[o]);return btoa(r)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e,r,o,a,s,u;return i(this,function(i){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(r=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,null==(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=o,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(a),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),null==(u=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(dh){var e=n.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var r=atob(t),o=new Uint8Array(r.length),a=0;a<r.length;++a)o.set([r.charCodeAt(a)],a);return o.buffer}(u),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),zh=function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Wh.URL_SCHEME)?(e=t.slice(Wh.URL_SCHEME.length),new Wh(e)):null;var e};xh.registerSaveRouter(zh),xh.registerLoadRouter(zh);var Uh=function(){function t(){I(c().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),I("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a;return i(this,function(i){for(t={},e=Th+Nh,n=Nh+Fh,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(e)&&o.endsWith(n)&&(a=Lh(o),t[a]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},t.prototype.removeModel=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){var o;if(t=(o=t).startsWith(Wh.URL_SCHEME)?o.slice(Wh.URL_SCHEME.length):o,e=Ph(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(c().getBool("IS_BROWSER"))try{bh.registerManager(Wh.URL_SCHEME,new Uh)}catch(r){}var Vh="model",Gh=".json",qh=".weights.bin";function Hh(t){return new Promise(function(t){return setTimeout(t)}).then(t)}var Kh=function(){function t(e){if(!c().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=Vh),this.modelTopologyFileName=e+Gh,this.weightDataFileName=e+qh}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,Hh(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return i.sent(),null==t.weightData?[3,4]:((s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,Hh(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:i.sent(),i.label=4;case 4:return[2,{modelArtifactsInfo:gh(t)}]}})})},t.URL_SCHEME="downloads://",t}(),jh=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e,n=this;return i(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,o){var a=new FileReader;a.onload=function(a){var i=JSON.parse(a.target.result),s=i.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,e)}catch(t){return void o(t)}var l=[],p=[],h=[];u.forEach(function(t){t.paths.forEach(function(t){p.push(t),h.push(null)}),l.push.apply(l,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,o=p.indexOf(t);h[o]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:vh(h),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},e.onerror=function(e){return o("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(c[t])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(e){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return mh(t.name)}),o={},a=0,i=t;a<i.length;a++)i[a].paths.forEach(function(t){var a=mh(t);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");o[t]=e[r.indexOf(a)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return o},t}();function Xh(t,e,n,r){!function(t){I(null!=t&&Array.isArray(t)&&t.length>0,function(){return"promises must be a none empty array"})}(t),function(t,e){I(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+t}),I(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+e}),I(e>=t,function(){return"startFraction must be no more than endFraction, but got startFraction "+t+" and endFraction "+e})}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(t.map(function(a){return a.then(function(a){var i=n+ ++o/t.length*(r-n);return e(i),a}),a}))}function Yh(t,e){return a(this,void 0,void 0,function(){var n,r,o,a,s,u,l,p,h;return i(this,function(i){switch(i.label){case 0:return null==e&&(e={}),n=null==e.fetchFunc?c().platform.fetch:e.fetchFunc,r=t.map(function(t){return n(t,e.requestInit,{isBinary:!0})}),o=0,a=.5,null!=e.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=i.sent(),[3,4];case 2:return[4,Xh(r,e.onProgress,o,a)];case 3:s=i.sent(),i.label=4;case 4:return u=s.map(function(t){return t.arrayBuffer()}),l=.5,p=1,null!=e.onProgress?[3,6]:[4,Promise.all(u)];case 5:return h=i.sent(),[3,8];case 6:return[4,Xh(u,e.onProgress,l,p)];case 7:h=i.sent(),i.label=8;case 8:return[2,h]}})})}function $h(t){var e=this;return function(n,r,o){return void 0===r&&(r=""),a(e,void 0,void 0,function(){var e,a,s,u,c,l,p,h,d,f;return i(this,function(i){switch(i.label){case 0:if(e=n.map(function(){return!1}),a={},s=null!=o?o.map(function(){return!1}):[],u=[],n.forEach(function(t,n){var r=0;t.weights.forEach(function(t){var i="quantization"in t?t.quantization.dtype:t.dtype,c=ch[i]*D(t.shape),l=function(){e[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:t,groupOffset:r,sizeBytes:c})};null!=o?o.forEach(function(e,n){e===t.name&&(l(),s[n]=!0)}):l(),u.push(t.name),r+=c})}),!s.every(function(t){return t}))throw c=o.filter(function(t,e){return!s[e]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return l=e.reduce(function(t,e,n){return e&&t.push(n),t},[]),p=[],l.forEach(function(t){n[t].paths.forEach(function(t){var e=r+(r.endsWith("/")?"":"/")+t;p.push(e)})}),[4,t(p)];case 1:return h=i.sent(),d={},f=0,l.forEach(function(t){for(var e=n[t].paths.length,r=0,o=0;o<e;o++)r+=h[f+o].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<e;c++){var l=new Uint8Array(h[f+c]);s.set(l,u),u+=l.byteLength}a[t].forEach(function(t){var e=ph(i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)d[n]=e[n]}),f+=e}),[2,d]}})})}}xh.registerSaveRouter(function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Kh.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new Kh(t)}(t.slice(Kh.URL_SCHEME.length)):null});var Qh=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(I("function"==typeof e.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=c().platform.fetch,I(null!=t&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&I(2===t.length,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){var e,n,r,o;return i(this,function(a){switch(a.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n},e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:gh(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=i.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.json()];case 3:return e=i.sent(),[3,5];case 4:throw i.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=e.modelTopology,o=e.weightsManifest,a=e.generatedBy,s=e.convertedBy,u=e.format,c=e.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:h=i.sent(),l=h[0],p=h[1],i.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:p,userDefinedMetadata:c,generatedBy:a,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),r=n[0],o=n[1],a=this.weightPathPrefix||r,s=[],u=0,c=t;u<c.length;u++)l=c[u],s.push.apply(s,l.weights);return p=[],t.forEach(function(t){t.paths.forEach(function(t){p.push(a+t+o)})}),[4,Yh(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=i.sent(),[2,[s,vh(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function Jh(t){return null!=t.match(Qh.URL_SCHEME_REGEX)}var Zh=function(t,e){return"undefined"==typeof fetch?null:(Array.isArray(t)?t.every(function(t){return Jh(t)}):Jh(t))?td(t,{onProgress:e}):null};function td(t,e){return new Qh(t,e)}xh.registerSaveRouter(Zh),xh.registerLoadRouter(Zh);var ed=function(){function t(t){this.modelArtifacts=t}return t.prototype.load=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.modelArtifacts]})})},t}(),nd=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.saveHandler(t)]})})},t}(),rd=Object.freeze({browserFiles:function(t){return new jh(t)},browserHTTPRequest:function(t,e){return td(t,e)},concatenateArrayBuffers:vh,decodeWeights:ph,encodeWeights:function(t,e){return a(this,void 0,void 0,function(){var n,r,o,s,u,c=this;return i(this,function(l){switch(l.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t),s=function(s){var u=o[s],l=Array.isArray(t)?t[s].tensor:t[u];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+u+"': "+l.dtype);var p={name:u,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var h=new Promise(function(t){return a(c,void 0,void 0,function(){var e,n,r,o,a,s,u;return i(this,function(i){switch(i.label){case 0:return[4,l.bytes()];case 1:for(e=i.sent(),n=e.reduce(function(t,e){return t+e.length},0)+lh*e.length,r=new Uint8Array(n),o=0,a=0;a<e.length;a++)s=e[a],u=new Uint8Array(new Uint32Array([s.length]).buffer),r.set(u,o),o+=lh,r.set(s,o),o+=s.length;return t(r),[2]}})})});r.push(h)}else r.push(l.data());null!=e&&(p.group=e),n.push(p)},u=0;u<o.length;++u)s(u);return[4,Promise.all(r)];case 1:return[2,{data:hh(l.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new ed(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ed({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ed({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return xh.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:gh,getSaveHandlers:function(t){return xh.getSaveHandlers(t)},http:td,isHTTPScheme:Jh,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),a(this,void 0,void 0,function(){return i(this,function(o){return[2,$h(function(t){return Yh(t,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return xh.registerLoadRouter(t)},registerSaveRouter:function(t){return xh.registerSaveRouter(t)},weightsLoaderFactory:$h,withSaveHandler:function(t){return new nd(t)},copyModel:function(t,e){return a(this,void 0,void 0,function(){return i(this,function(n){return[2,Ch(t,e,!1)]})})},listModels:function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:t=bh.getSchemes(),e={},n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],[4,bh.getManager(o).listModels()]):[3,4];case 2:for(s in a=i.sent())e[o+yh+s]=a[s];i.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return a(this,void 0,void 0,function(){return i(this,function(n){return[2,Ch(t,e,!0)]})})},removeModel:function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return e=wh(t),[2,bh.getManager(e.scheme).removeModel(e.path)]})})}});exports.io=rd;var od,ad=Tn({confusionMatrix_:function(t,e,n){var r=yn(t,"labels","confusionMatrix"),o=yn(e,"predictions","confusionMatrix");I(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),I(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),I(1===o.rank,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),I(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),I(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=Sr(r.asType("int32"),n),i=Sr(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}}),id=Object.freeze({confusionMatrix:ad});exports.math=id;var sd=Tn({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)a=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);i=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=d("FromPixels",Ut.backendName))return Ut.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,c=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],l=c[0],p=c[1];if(i?s=t.getContext("2d").getImageData(0,0,l,p).data:r||n?s=t.data:(a||o)&&(null==od&&(od=document.createElement("canvas").getContext("2d")),od.canvas.width=l,od.canvas.height=p,od.drawImage(t,0,0,l,p),s=od.getImageData(0,0,l,p).data),4===e)u=new Int32Array(s);else{var h=l*p;u=new Int32Array(h*e);for(var f=0;f<h;f++)for(var v=0;v<e;++v)u[f*e+v]=s[4*f+v]}return zn(u,[p,l,e],"int32")}}),ud=Object.freeze({toPixels:function(t,e){return a(this,void 0,void 0,function(){var n,r,o,a,s,u,c,l,p,h,d,f,v,m,g,x,y,b,w,C,E,R,I;return i(this,function(i){switch(i.label){case 0:if(n=yn(t,"img","toPixels"),t instanceof Rt||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(s=2===n.rank?1:n.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,n.data()];case 1:return u=i.sent(),c=n.min(),l=n.max(),[4,Promise.all([c.data(),l.data()])];case 2:if(p=i.sent(),h=p[0],d=p[1],f=h[0],v=d[0],c.dispose(),l.dispose(),"float32"===n.dtype){if(f<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+v+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+v+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(a*o*4),x=0;x<o*a;++x)y=void 0,b=void 0,w=void 0,C=void 0,1===s?(y=u[x]*m,b=u[x]*m,w=u[x]*m,C=255):3===s?(y=u[3*x]*m,b=u[3*x+1]*m,w=u[3*x+2]*m,C=255):4===s&&(y=u[4*x]*m,b=u[4*x+1]*m,w=u[4*x+2]*m,C=u[4*x+3]*m),g[0+(E=4*x)]=Math.round(y),g[E+1]=Math.round(b),g[E+2]=Math.round(w),g[E+3]=Math.round(C);return null!=e&&(e.width=a,e.height=o,R=e.getContext("2d"),I=new ImageData(g,a,o),R.putImageData(I,0,0)),n!==t&&n.dispose(),[2,g]}})})},fromPixels:sd}),cd=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),ld=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function pd(t){I(null!=t.className,function(){return"Class being registered does not have the static className property defined."}),I("string"==typeof t.className,function(){return"className is required to be a string, but got type "+typeof t.className}),I(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),ld.register(t)}exports.browser=ud;var hd=Object.freeze({Serializable:cd,SerializationMap:ld,registerClass:pd}),dd=.001,fd=.1;function vd(){return 32===Ut.backend.floatPrecision()?dd:fd}function md(t,e,n){var r=!0;if((q(t)||q(e))&&(r=!1),q(t)&&q(e)&&(r=!0),r){var o=t.constructor.name,a=e.constructor.name;if(o!==a)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+a)}if(Array.isArray(t)&&Array.isArray(e)){var i=gn(t),s=gn(e);if(!N(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=q(t)?t:A(t),c=q(e)?e:A(e);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var p=u[l],h=c[l];if(!n(p,h))throw new Error("Arrays differ: actual["+l+"] = "+p+", expected["+l+"] = "+h+".\nActual:   "+u+".\nExpected: "+c+".")}}function gd(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}exports.serialization=hd;var xd=Object.freeze({TEST_EPSILON_FLOAT16:fd,expectArraysClose:function(t,e,n){return null==n&&(n=vd()),md(t,e,function(t,e){return gd(t,e,n)})},testEpsilon:vd,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return j(t)||j(t[0])||j(e)||j(e[0])?md(t,n,function(t,e){return t==e}):md(t,e,function(t,e){return gd(t,e,0)})},expectNumbersClose:function(t,e,n){if(null==n&&(n=vd()),!gd(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),yd="1.7.0";exports.version_core=yd,exports.test_util=xd;var bd=Object.freeze({gpgpu_util:Li,webgl_util:Ke,forceHalfFloat:function(){c().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:nu,setWebGLContext:Yt,GPGPUContext:Wi}),wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),o=r.value,a=r.grads;if(null!=n){var i=n.map(function(t){return{name:t.name,tensor:a[t.name]}});this.applyGradients(i)}else this.applyGradients(a);return rn(a),e?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,e){return go(t,e)},e.prototype.dispose=function(){null!=this.iterations_&&rn(this.iterations_)},e.prototype.saveIterations=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Pn(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return e=this,[4,t[0].tensor.data()];case 1:return e.iterations_=n.sent()[0],[2,t.slice(1)]}})})},e}(cd);exports.Optimizer=wd,exports.webgl=bd,Object.defineProperty(wd,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var Cd=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Ut.backend.epsilon()),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:nn(function(){return Qn(o).variable(!1)})}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:nn(function(){return Qn(o).variable(!1)})});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=e.accumulatedGrads[r].variable,s=e.accumulatedUpdates[r].variable;nn(function(){var t=i.mul(e.rho).add(a.square().mul(1-e.rho)),n=s.add(e.epsilon).sqrt().div(i.add(e.epsilon).sqrt()).mul(a),r=s.mul(e.rho).add(n.square().mul(1-e.rho));i.assign(t),s.assign(r);var u=n.mul(-e.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedUpdates&&(rn(this.accumulatedGrads.map(function(t){return t.variable})),rn(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),e=t.length/2,this.accumulatedGrads=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="Adadelta",e}(wd);exports.AdadeltaOptimizer=Cd,pd(Cd);var Ed=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accumulator",variable:nn(function(){return jn(o.shape,e.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=e.accumulatedGrads[r].variable;nn(function(){var t=i.add(a.square());i.assign(t);var n=a.div(t.add(Ut.backend.epsilon()).sqrt()).mul(-e.learningRate).add(o);o.assign(n)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedGrads&&rn(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulatedGrads=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="Adagrad",e}(wd);exports.AdagradOptimizer=Ed,pd(Ed);var Rd=function(t){function e(e,n,r,o){void 0===o&&(o=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],nn(function(){a.accBeta1=Pn(n).variable(),a.accBeta2=Pn(r).variable()}),null==o&&(a.epsilon=Ut.backend.epsilon()),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);nn(function(){var r=Ic(1,e.accBeta1),o=Ic(1,e.accBeta2);n.forEach(function(n,a){var i=Ut.registeredVariables[n];null==e.accumulatedFirstMoment[a]&&(e.accumulatedFirstMoment[a]={originalName:n+"/m",variable:nn(function(){return Qn(i).variable(!1)})}),null==e.accumulatedSecondMoment[a]&&(e.accumulatedSecondMoment[a]={originalName:n+"/v",variable:nn(function(){return Qn(i).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[a].variable,c=e.accumulatedSecondMoment[a].variable,l=u.mul(e.beta1).add(s.mul(1-e.beta1)),p=c.mul(e.beta2).add(s.square().mul(1-e.beta2)),h=l.div(r),d=p.div(o);u.assign(l),c.assign(p);var f=h.div(d.sqrt().add(e.epsilon)).mul(-e.learningRate).add(i);i.assign(f)}}),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&rn(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedSecondMoment&&rn(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){var e,n=this;return i(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),nn(function(){n.accBeta1.assign(Cc(n.beta1,n.iterations_+1)),n.accBeta2.assign(Cc(n.beta2,n.iterations_+1))}),e=t.length/2,this.accumulatedFirstMoment=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="Adam",e}(wd);exports.AdamOptimizer=Rd,pd(Rd);var Id=function(t){function e(e,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=0);var i=t.call(this)||this;return i.learningRate=e,i.beta1=n,i.beta2=r,i.epsilon=o,i.decay=a,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],nn(function(){i.iteration=Pn(0).variable(),i.accBeta1=Pn(n).variable()}),null==o&&(i.epsilon=Ut.backend.epsilon()),i}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);nn(function(){var r=Ic(1,e.accBeta1),o=lc(-e.learningRate,e.iteration.mul(e.decay).add(1));n.forEach(function(n,a){var i=Ut.registeredVariables[n];null==e.accumulatedFirstMoment[a]&&(e.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Qn(i).variable(!1)}),null==e.accumulatedWeightedInfNorm[a]&&(e.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Qn(i).variable(!1)});var s=Array.isArray(t)?t[a].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[a].variable,c=e.accumulatedWeightedInfNorm[a].variable,l=u.mul(e.beta1).add(s.mul(1-e.beta1)),p=c.mul(e.beta2),h=s.abs(),d=p.maximum(h);u.assign(l),c.assign(d);var f=o.div(r).mul(l.div(d.add(e.epsilon))).add(i);i.assign(f)}}),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&rn(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedWeightedInfNorm&&rn(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="Adamax",e}(wd);exports.AdamaxOptimizer=Id,pd(Id);var kd=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var a=Ut.registeredVariables[n];nn(function(){var t=e.c.mul(o).add(a);a.assign(t)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=on(Pn(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:if(0!==(t=e.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGD",e}(wd);exports.SGDOptimizer=kd,pd(kd);var Sd=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=Pn(o.momentum),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulations[r]&&(e.accumulations[r]={originalName:n+"/momentum",variable:nn(function(){return Qn(o).variable(!1)})});var a=e.accumulations[r].variable,i=Array.isArray(t)?t[r].tensor:t[n];null!=i&&nn(function(){var t,n=e.m.mul(a).add(i);t=e.useNesterov?e.c.mul(i.add(n.mul(e.m))).add(o):e.c.mul(n).add(o),a.assign(n),o.assign(t)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&rn(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulations=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="Momentum",e}(kd);exports.MomentumOptimizer=Sd,pd(Sd);var Ad=function(t){function e(e,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===a&&(a=!1);var i=t.call(this)||this;if(i.learningRate=e,i.decay=n,i.momentum=r,i.epsilon=o,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=a,null==o&&(i.epsilon=Ut.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:nn(function(){return Qn(o).variable(!1)})}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:n+"/momentum",variable:nn(function(){return Qn(o).variable(!1)})}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:nn(function(){return Qn(o).variable(!1)})});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=e.accumulatedMeanSquares[r].variable,s=e.accumulatedMoments[r].variable;nn(function(){var t=i.mul(e.decay).add(a.square().mul(1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,u=n.mul(e.decay).add(a.mul(1-e.decay)),c=s.mul(e.momentum).add(a.mul(e.learningRate).div(t.sub(u.square().add(e.epsilon)).sqrt()));i.assign(t),n.assign(u),s.assign(c);var l=o.sub(c);o.assign(l)}else{var p=i.mul(e.decay).add(a.square().mul(1-e.decay));c=s.mul(e.momentum).add(a.mul(e.learningRate).div(p.add(e.epsilon).sqrt())),i.assign(p),s.assign(c),l=o.sub(c),o.assign(l)}})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&rn(this.accumulatedMeanSquares.map(function(t){return t.variable})),null!=this.accumulatedMeanGrads&&this.centered&&rn(this.accumulatedMeanGrads.map(function(t){return t.variable})),null!=this.accumulatedMoments&&rn(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),e=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSProp",e}(wd);exports.RMSPropOptimizer=Ad,pd(Ad);var Dd=function(){function t(){}return t.sgd=function(t){return new kd(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new Sd(t,e,n)},t.rmsprop=function(t,e,n,r,o){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new Ad(t,e,n,r,o)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Rd(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new Cd(t,e,n)},t.adamax=function(t,e,n,r,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new Id(t,e,n,r,o)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new Ed(t,e)},t}(),Nd={sgd:Dd.sgd,momentum:Dd.momentum,adadelta:Dd.adadelta,adagrad:Dd.adagrad,rmsprop:Dd.rmsprop,adamax:Dd.adamax,adam:Dd.adam},Td="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(t){return t()};function Fd(){return new Promise(function(t){return Td(function(){return t()})})}exports.train=Nd,Rt.prototype.squaredDifference=function(t){return au(this,t)},Ct=Kp;
},{"crypto":"Lmzq","node-fetch":"Lmzq","util":"Lmzq","process":"ylCS","buffer":"qrgL"}],"PUZ0":[function(require,module,exports) {
"use strict";function e(e,o,r){if(void 0===r&&(r=!1),e.beginPath(),o.slice(1).forEach(function(r,t){var i=r.x,n=r.y,s=o[t];e.moveTo(s.x,s.y),e.lineTo(i,n)}),r){var t=o[o.length-1],i=o[0];if(!t||!i)return;e.moveTo(t.x,t.y),e.lineTo(i.x,i.y)}e.stroke()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawContour=e;
},{}],"qjU2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=u,exports.__generator=c,exports.__createBinding=f,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__await=h,exports.__asyncGenerator=v,exports.__asyncDelegator=d,exports.__asyncValues=b,exports.__makeTemplateObject=w,exports.__importStar=x,exports.__importDefault=m,exports.__classPrivateFieldGet=O,exports.__classPrivateFieldSet=g,exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(e){a(e)}}function u(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}c((n=n.apply(t,e||[])).next())})}function c(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(u){a=[6,u],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function f(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function l(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function h(t){return this instanceof h?(this.v=t,this):new h(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{(r=o[t](e)).value instanceof h?Promise.resolve(r.value.v).then(c,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}}function d(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:h(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}function O(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}exports.__assign=r;
},{}],"Fa4F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dimensions=void 0;var e=require("../utils"),t=function(){function t(t,i){if(!(0,e.isValidNumber)(t)||!(0,e.isValidNumber)(i))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:i}));this._width=t,this._height=i}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();exports.Dimensions=t;
},{"../utils":"acHD"}],"acHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTensor=i,exports.isTensor1D=u,exports.isTensor2D=s,exports.isTensor3D=f,exports.isTensor4D=a,exports.isFloat=c,exports.isEven=p,exports.round=l,exports.isDimensions=d,exports.computeReshapedDimensions=h,exports.getCenterPoint=x,exports.range=v,exports.isValidNumber=y,exports.isValidProbablitiy=g;var e=o(require("@tensorflow/tfjs-core")),r=require("../classes"),t=require("../classes/Dimensions");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function i(r,t){return r instanceof e.Tensor&&r.shape.length===t}function u(e){return i(e,1)}function s(e){return i(e,2)}function f(e){return i(e,3)}function a(e){return i(e,4)}function c(e){return e%1!=0}function p(e){return e%2==0}function l(e,r){void 0===r&&(r=2);var t=Math.pow(10,r);return Math.floor(e*t)/t}function d(e){return e&&e.width&&e.height}function h(e,r){var n=e.width,o=e.height,i=r/Math.max(o,n);return new t.Dimensions(Math.round(n*i),Math.round(o*i))}function x(e){return e.reduce(function(e,r){return e.add(r)},new r.Point(0,0)).div(new r.Point(e.length,e.length))}function v(e,r,t){return Array(e).fill(0).map(function(e,n){return r+n*t})}function y(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function g(e){return y(e)&&0<=e&&e<=1}
},{"@tensorflow/tfjs-core":"FZBM","../classes":"ywa2","../classes/Dimensions":"Fa4F"}],"l0Xp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Point=void 0;var t=function(){function t(t,e){this._x=t,this._y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}();exports.Point=t;
},{}],"NweN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Box=void 0;var t=require("../utils"),e=require("./Point"),i=function(){function i(e,r){void 0===r&&(r=!0);var o=e||{},h=[o.left,o.top,o.right,o.bottom].every(t.isValidNumber),n=[o.x,o.y,o.width,o.height].every(t.isValidNumber);if(!n&&!h)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(o));var s=n?[o.x,o.y,o.width,o.height]:[o.left,o.top,o.right-o.left,o.bottom-o.top],u=s[0],p=s[1],f=s[2],g=s[3];i.assertIsValidBox({x:u,y:p,width:f,height:g},"Box.constructor",r),this._x=u,this._y=p,this._width=f,this._height=g}return i.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(t.isValidNumber)},i.assertIsValidBox=function(t,e,r){if(void 0===r&&(r=!1),!i.isRect(t))throw new Error(e+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(e+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topLeft",{get:function(){return new e.Point(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topRight",{get:function(){return new e.Point(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomLeft",{get:function(){return new e.Point(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRight",{get:function(){return new e.Point(this.right,this.bottom)},enumerable:!0,configurable:!0}),i.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(t){return Math.round(t)});return new i({x:t[0],y:t[1],width:t[2],height:t[3]})},i.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(t){return Math.floor(t)});return new i({x:t[0],y:t[1],width:t[2],height:t[3]})},i.prototype.toSquare=function(){var t=this.x,e=this.y,r=this.width,o=this.height,h=Math.abs(r-o);return r<o&&(t-=h/2,r+=h),o<r&&(e-=h/2,o+=h),new i({x:t,y:e,width:r,height:o})},i.prototype.rescale=function(e){var r=(0,t.isDimensions)(e)?e.width:e,o=(0,t.isDimensions)(e)?e.height:e;return new i({x:this.x*r,y:this.y*o,width:this.width*r,height:this.height*o})},i.prototype.pad=function(t,e){var r=[this.x-t/2,this.y-e/2,this.width+t,this.height+e];return new i({x:r[0],y:r[1],width:r[2],height:r[3]})},i.prototype.clipAtImageBorders=function(t,e){var r=this.x,o=this.y,h=this.right,n=this.bottom,s=Math.max(r,0),u=Math.max(o,0),p=h-s,f=n-u;return new i({x:s,y:u,width:Math.min(p,t-s),height:Math.min(f,e-u)}).floor()},i.prototype.shift=function(t,e){var r=this.width,o=this.height;return new i({x:this.x+t,y:this.y+e,width:r,height:o})},i.prototype.padAtBorders=function(t,e){var i=this.width+1,r=this.height+1,o=i,h=r,n=this.left,s=this.top,u=this.right,p=this.bottom;return u>e&&(o=-u+e+i,u=e),p>t&&(h=-p+t+r,p=t),n<1&&(h=2-n,n=1),s<1&&(h=2-s,s=1),{dy:1,edy:h,dx:1,edx:o,y:s,ey:p,x:n,ex:u,w:i,h:r}},i.prototype.calibrate=function(t){return new i({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},i}();exports.Box=i;
},{"../utils":"acHD","./Point":"l0Xp"}],"FLHV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BoundingBox=void 0;var e=require("tslib"),t=require("./Box"),o=function(t){function o(e,o,r,i,n){return void 0===n&&(n=!1),t.call(this,{left:e,top:o,right:r,bottom:i},n)||this}return(0,e.__extends)(o,t),o}(t.Box);exports.BoundingBox=o;
},{"tslib":"qjU2","./Box":"NweN"}],"pkol":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObjectDetection=void 0;var e=require("./Box"),t=require("./Dimensions"),r=function(){function r(r,i,o,n,s){this._imageDims=new t.Dimensions(s.width,s.height),this._score=r,this._classScore=i,this._className=o,this._box=new e.Box(n).rescale(this._imageDims)}return Object.defineProperty(r.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"relativeBox",{get:function(){return new e.Box(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),r.prototype.forSize=function(e,t){return new r(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},r}();exports.ObjectDetection=r;
},{"./Box":"NweN","./Dimensions":"Fa4F"}],"EHzx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceDetection=void 0;var e=require("tslib"),t=require("./ObjectDetection"),r=function(t){function r(e,r,i){return t.call(this,e,e,"",r,i)||this}return(0,e.__extends)(r,t),r.prototype.forSize=function(e,i){var o=t.prototype.forSize.call(this,e,i);return new r(o.score,o.relativeBox,o.imageDims)},r}(t.ObjectDetection);exports.FaceDetection=r;
},{"tslib":"qjU2","./ObjectDetection":"pkol"}],"zUgG":[function(require,module,exports) {
"use strict";function t(t,a,e){void 0===e&&(e=!0);var r=Math.max(0,Math.min(t.right,a.right)-Math.max(t.left,a.left))*Math.max(0,Math.min(t.bottom,a.bottom)-Math.max(t.top,a.top));return e?r/(t.area+a.area-r):r/Math.min(t.area,a.area)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.iou=t;
},{}],"iys9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minBbox=r;var e=require("../classes");function r(r){var n=r.map(function(e){return e.x}),u=r.map(function(e){return e.y}),t=n.reduce(function(e,r){return r<e?r:e},1/0),c=u.reduce(function(e,r){return r<e?r:e},1/0),o=n.reduce(function(e,r){return e<r?r:e},0),i=u.reduce(function(e,r){return e<r?r:e},0);return new e.BoundingBox(t,c,o,i)}
},{"../classes":"ywa2"}],"RBqA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=e;var r=require("./iou");function e(e,n,o,t){void 0===t&&(t=!0);for(var u=n.map(function(r,e){return{score:r,boxIndex:e}}).sort(function(r,e){return r.score-e.score}).map(function(r){return r.boxIndex}),i=[],s=function(){var n=u.pop();i.push(n);for(var s=u,c=[],p=0;p<s.length;p++){var f=s[p],a=e[n],v=e[f];c.push((0,r.iou)(a,v,t))}u=u.filter(function(r,e){return c[e]<=o})};u.length>0;)s();return i}
},{"./iou":"zUgG"}],"WE0o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalize=o;var e=require("tslib"),r=n(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function o(t,n){return r.tidy(function(){var o=n[0],i=n[1],a=n[2],s=r.fill((0,e.__spreadArrays)(t.shape.slice(0,3),[1]),o),u=r.fill((0,e.__spreadArrays)(t.shape.slice(0,3),[1]),i),f=r.fill((0,e.__spreadArrays)(t.shape.slice(0,3),[1]),a),l=r.concat([s,u,f],3);return r.sub(t,l)})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM"}],"OCAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padToSquare=n;var e=r(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function n(t,r){return void 0===r&&(r=!1),e.tidy(function(){var n=t.shape.slice(1),o=n[0],u=n[1];if(o===u)return t;var a=Math.abs(o-u),i=Math.round(a*(r?.5:1)),f=o>u?2:1,c=function(r){var n=t.shape.slice();return n[f]=r,e.fill(n,0)},l=c(i),p=a-l.shape[f],s=[r&&p?c(p):null,t,l].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return e.concat(s,f)})}
},{"@tensorflow/tfjs-core":"FZBM"}],"mqKK":[function(require,module,exports) {
"use strict";function e(e){for(var r=e.slice(),t=r.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),a=r[t];r[t]=r[o],r[o]=a}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffleArray=e;
},{}],"CGLe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={sigmoid:!0,inverseSigmoid:!0};exports.sigmoid=s,exports.inverseSigmoid=i;var r=require("./iou");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("./minBbox");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("./nonMaxSuppression");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=require("./normalize");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var u=require("./padToSquare");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===u[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return u[r]}}))});var p=require("./shuffleArray");function s(e){return 1/(1+Math.exp(-e))}function i(e){return Math.log(e/(1-e))}Object.keys(p).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===p[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return p[r]}}))});
},{"./iou":"zUgG","./minBbox":"iys9","./nonMaxSuppression":"RBqA","./normalize":"WE0o","./padToSquare":"OCAY","./shuffleArray":"mqKK"}],"UgxX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rect=void 0;var e=require("tslib"),t=require("./Box"),r=function(t){function r(e,r,i,o,s){return void 0===s&&(s=!1),t.call(this,{x:e,y:r,width:i,height:o},s)||this}return(0,e.__extends)(r,t),r}(t.Box);exports.Rect=r;
},{"tslib":"qjU2","./Box":"NweN"}],"Cc3m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceLandmarks=void 0;var t=require("../ops"),i=require("../utils"),e=require("./Box"),n=require("./Dimensions"),o=require("./FaceDetection"),r=require("./Point"),s=require("./Rect"),u=.5,a=.43,h=.45,f=function(){function f(t,i,e){void 0===e&&(e=new r.Point(0,0));var o=i.width,s=i.height;this._imgDims=new n.Dimensions(o,s),this._shift=e,this._positions=t.map(function(t){return t.mul(new r.Point(o,s)).add(e)})}return Object.defineProperty(f.prototype,"shift",{get:function(){return new r.Point(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(i){return i.sub(t._shift).div(new r.Point(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),f.prototype.forSize=function(t,i){return new this.constructor(this.relativePositions,{width:t,height:i})},f.prototype.shiftBy=function(t,i){return new this.constructor(this.relativePositions,this._imgDims,new r.Point(t,i))},f.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},f.prototype.align=function(t,i){if(void 0===i&&(i={}),t){var n=t instanceof o.FaceDetection?t.box.floor():new e.Box(t);return this.shiftBy(n.x,n.y).align(null,i)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},i),s=r.useDlibAlignment,u=r.minBoxPadding;return s?this.alignDlib():this.alignMinBbox(u)},f.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[0],n=t[1],o=t[2],r=function(t){return o.sub(t).magnitude()},f=(r(e)+r(n))/2,g=Math.floor(f/h),c=(0,i.getCenterPoint)(t),p=Math.floor(Math.max(0,c.x-u*g)),m=Math.floor(Math.max(0,c.y-a*g));return new s.Rect(p,m,Math.min(g,this.imageWidth+p),Math.min(g,this.imageHeight+m))},f.prototype.alignMinBbox=function(i){var e=(0,t.minBbox)(this.positions);return e.pad(e.width*i,e.height*i)},f.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},f}();exports.FaceLandmarks=f;
},{"../ops":"CGLe","../utils":"acHD","./Box":"NweN","./Dimensions":"Fa4F","./FaceDetection":"EHzx","./Point":"l0Xp","./Rect":"UgxX"}],"dtUY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceLandmarks5=void 0;var e=require("tslib"),t=require("../utils"),r=require("./FaceLandmarks"),n=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(n,r),n.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],(0,t.getCenterPoint)([e[3],e[4]])]},n}(r.FaceLandmarks);exports.FaceLandmarks5=n;
},{"tslib":"qjU2","../utils":"acHD","./FaceLandmarks":"Cc3m"}],"ShfV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceLandmarks68=void 0;var t=require("tslib"),e=require("../utils"),i=require("./FaceLandmarks"),o=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return(0,t.__extends)(o,i),o.prototype.getJawOutline=function(){return this.positions.slice(0,17)},o.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},o.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},o.prototype.getNose=function(){return this.positions.slice(27,36)},o.prototype.getLeftEye=function(){return this.positions.slice(36,42)},o.prototype.getRightEye=function(){return this.positions.slice(42,48)},o.prototype.getMouth=function(){return this.positions.slice(48,68)},o.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(e.getCenterPoint)},o}(i.FaceLandmarks);exports.FaceLandmarks68=o;
},{"tslib":"qjU2","../utils":"acHD","./FaceLandmarks":"Cc3m"}],"oI1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceMatch=void 0;var e=require("../utils"),t=function(){function t(e,t){this._label=e,this._distance=t}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){return void 0===t&&(t=!0),this.label+(t?" ("+(0,e.round)(this.distance)+")":"")},t}();exports.FaceMatch=t;
},{"../utils":"acHD"}],"rVqy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LabeledBox=void 0;var e=require("tslib"),r=require("../utils"),t=require("./Box"),l=function(l){function o(e,r){var t=l.call(this,e)||this;return t._label=r,t}return(0,e.__extends)(o,l),o.assertIsValidLabeledBox=function(e,l){if(t.Box.assertIsValidBox(e,l),!(0,r.isValidNumber)(e.label))throw new Error(l+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(o.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),o}(t.Box);exports.LabeledBox=l;
},{"tslib":"qjU2","../utils":"acHD","./Box":"NweN"}],"MbIs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LabeledFaceDescriptors=void 0;var r=function(){function r(r,e){if("string"!=typeof r)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=r,this._descriptors=e}return Object.defineProperty(r.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),r.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(r){return Array.from(r)})}},r.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new r(e.label,t)},r}();exports.LabeledFaceDescriptors=r;
},{}],"lrrt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PredictedBox=void 0;var e=require("tslib"),r=require("../utils"),t=require("./LabeledBox"),o=function(o){function s(e,r,t,s){var i=o.call(this,e,r)||this;return i._score=t,i._classScore=s,i}return(0,e.__extends)(s,o),s.assertIsValidPredictedBox=function(e,o){if(t.LabeledBox.assertIsValidLabeledBox(e,o),!(0,r.isValidProbablitiy)(e.score)||!(0,r.isValidProbablitiy)(e.classScore))throw new Error(o+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(s.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),s}(t.LabeledBox);exports.PredictedBox=o;
},{"tslib":"qjU2","../utils":"acHD","./LabeledBox":"rVqy"}],"ywa2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./BoundingBox");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./Box");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./Dimensions");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./FaceDetection");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./FaceLandmarks");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./FaceLandmarks5");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var c=require("./FaceLandmarks68");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var s=require("./FaceMatch");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var i=require("./LabeledBox");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var a=require("./LabeledFaceDescriptors");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var f=require("./ObjectDetection");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var p=require("./Point");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var d=require("./PredictedBox");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var x=require("./Rect");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});
},{"./BoundingBox":"FLHV","./Box":"NweN","./Dimensions":"Fa4F","./FaceDetection":"EHzx","./FaceLandmarks":"Cc3m","./FaceLandmarks5":"dtUY","./FaceLandmarks68":"ShfV","./FaceMatch":"oI1C","./LabeledBox":"rVqy","./LabeledFaceDescriptors":"MbIs","./ObjectDetection":"pkol","./Point":"l0Xp","./PredictedBox":"lrrt","./Rect":"UgxX"}],"ufye":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWithFaceDetection=t,exports.extendWithFaceDetection=c;var e=require("../classes/FaceDetection");function t(t){return t.detection instanceof e.FaceDetection}function c(e,t){var c={detection:t};return Object.assign({},e,c)}
},{"../classes/FaceDetection":"EHzx"}],"SZ6F":[function(require,module,exports) {
"use strict";function e(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBrowserEnv=e;
},{}],"P3VC":[function(require,module,exports) {
"use strict";function e(e){var r="";if(!e)try{e=require("fs")}catch(t){r=t.toString()}return{readFile:e?function(r){return new Promise(function(t,n){e.readFile(r,function(e,r){return e?n(e):t(r)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+r)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFileSystem=e;
},{"fs":"Lmzq"}],"GI9X":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNodejsEnv=r;var n=require("tslib"),t=require("./createFileSystem");function r(){var r=e.Canvas||e.HTMLCanvasElement,a=e.Image||e.HTMLImageElement,i=e.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=(0,t.createFileSystem)();return(0,n.__assign)({Canvas:r||function(){return function(){}}(),CanvasRenderingContext2D:e.CanvasRenderingContext2D||function(){return function(){}}(),Image:a||function(){return function(){}}(),ImageData:e.ImageData||function(){return function(){}}(),Video:e.HTMLVideoElement||function(){return function(){}}(),createCanvasElement:function(){if(r)return new r;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(a)return new a;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:i},o)}
},{"tslib":"qjU2","./createFileSystem":"P3VC"}],"J5Ez":[function(require,module,exports) {
"use strict";function e(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBrowser=e;
},{}],"zLxp":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],o=require("process");function r(){return"object"==typeof e&&"function"==typeof require&&"undefined"!=typeof module&&void 0!==o&&!!o.version}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNodejs=r;
},{"process":"ylCS"}],"iBDr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.env=void 0;var e,r=require("./createBrowserEnv"),n=require("./createFileSystem"),t=require("./createNodejsEnv"),a=require("./isBrowser"),i=require("./isNodejs");function s(){if(!e)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return e}function o(r){e=r}function c(){(0,a.isBrowser)()&&o((0,r.createBrowserEnv)()),(0,i.isNodejs)()&&o((0,t.createNodejsEnv)())}function d(r){if(e||c(),!e)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var n=r.Canvas,t=void 0===n?e.Canvas:n,a=r.Image,i=void 0===a?e.Image:a;e.Canvas=t,e.Image=i,e.createCanvasElement=r.createCanvasElement||function(){return new t},e.createImageElement=r.createImageElement||function(){return new i},e.ImageData=r.ImageData||e.ImageData,e.Video=r.Video||e.Video,e.fetch=r.fetch||e.fetch,e.readFile=r.readFile||e.readFile}var v={getEnv:s,setEnv:o,initialize:c,createBrowserEnv:r.createBrowserEnv,createFileSystem:n.createFileSystem,createNodejsEnv:t.createNodejsEnv,monkeyPatch:d,isBrowser:a.isBrowser,isNodejs:i.isNodejs};exports.env=v,c();
},{"./createBrowserEnv":"SZ6F","./createFileSystem":"P3VC","./createNodejsEnv":"GI9X","./isBrowser":"J5Ez","./isNodejs":"zLxp"}],"z7mX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveInput=t;var e=require("../env");function t(t){return e.env.isNodejs()||"string"!=typeof t?t:document.getElementById(t)}
},{"../env":"iBDr"}],"cUrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext2dOrThrow=n;var e=require("../env"),t=require("./resolveInput");function n(n){var r=e.env.getEnv(),o=r.Canvas;if(n instanceof r.CanvasRenderingContext2D)return n;var a=(0,t.resolveInput)(n);if(!(a instanceof o))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var s=a.getContext("2d");if(!s)throw new Error("resolveContext2d - canvas 2d context is null");return s}
},{"../env":"iBDr","./resolveInput":"z7mX"}],"WoOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawTextField=exports.DrawTextFieldOptions=exports.AnchorPosition=void 0;var t,o=require("../dom/getContext2dOrThrow"),e=require("../dom/resolveInput");exports.AnchorPosition=t,function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"}(t||(exports.AnchorPosition=t={}));var i=function(){return function(o){void 0===o&&(o={});var e=o.anchorPosition,i=o.backgroundColor,r=o.fontColor,n=o.fontSize,s=o.fontStyle,h=o.padding;this.anchorPosition=e||t.TOP_LEFT,this.backgroundColor=i||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=n||14,this.fontStyle=s||"Georgia",this.padding=h||4}}();exports.DrawTextFieldOptions=i;var r=function(){function r(t,o,e){void 0===e&&(e={}),this.text="string"==typeof t?[t]:t instanceof r?t.text:t,this.anchor=o,this.options=new i(e)}return r.prototype.measureWidth=function(t){var o=this.options.padding;return this.text.map(function(o){return t.measureText(o).width}).reduce(function(t,o){return t<o?o:t},0)+2*o},r.prototype.measureHeight=function(){var t=this.options,o=t.fontSize,e=t.padding;return this.text.length*o+2*e},r.prototype.getUpperLeft=function(o,e){var i=this.options.anchorPosition,r=i===t.BOTTOM_RIGHT||i===t.TOP_RIGHT,n=i===t.BOTTOM_LEFT||i===t.BOTTOM_RIGHT,s=this.measureWidth(o),h=this.measureHeight(),a=r?this.anchor.x-s:this.anchor.x,T=n?this.anchor.y-h:this.anchor.y;if(e){var p=e.width,u=e.height;return{x:Math.max(Math.min(a,p-s),0),y:Math.max(Math.min(T,u-h),0)}}return{x:a,y:T}},r.prototype.draw=function(t){var i=(0,e.resolveInput)(t),r=(0,o.getContext2dOrThrow)(i),n=this.options,s=n.backgroundColor,h=n.fontColor,a=n.fontSize,T=n.fontStyle,p=n.padding;r.font=a+"px "+T;var u=this.measureWidth(r),f=this.measureHeight();r.fillStyle=s;var d=this.getUpperLeft(r,i);r.fillRect(d.x,d.y,u,f),r.fillStyle=h,this.text.forEach(function(t,o){var e=p+d.x,i=p+d.y+(o+1)*a;r.fillText(t,e,i)})},r}();exports.DrawTextField=r;
},{"../dom/getContext2dOrThrow":"cUrv","../dom/resolveInput":"z7mX"}],"bcbQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawBox=exports.DrawBoxOptions=void 0;var o=require("../classes"),t=require("../dom/getContext2dOrThrow"),e=require("./DrawTextField"),i=function(){return function(o){void 0===o&&(o={});var t=o.boxColor,i=o.lineWidth,r=o.label,n=o.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=i||2,this.label=r;var s={anchorPosition:e.AnchorPosition.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new e.DrawTextFieldOptions(Object.assign({},s,n))}}();exports.DrawBoxOptions=i;var r=function(){function r(t,e){void 0===e&&(e={}),this.box=new o.Box(t),this.options=new i(e)}return r.prototype.draw=function(o){var i=(0,t.getContext2dOrThrow)(o),r=this.options,n=r.boxColor,s=r.lineWidth,a=this.box,l=a.x,x=a.y,d=a.width,h=a.height;i.strokeStyle=n,i.lineWidth=s,i.strokeRect(l,x,d,h);var w=this.options.label;w&&new e.DrawTextField([w],{x:l-s/2,y:x},this.options.drawLabelOptions).draw(o)},r}();exports.DrawBox=r;
},{"../classes":"ywa2","../dom/getContext2dOrThrow":"cUrv","./DrawTextField":"WoOq"}],"XmOr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawDetections=c;var e=require("../classes"),t=require("../classes/FaceDetection"),i=require("../factories/WithFaceDetection"),r=require("../utils"),o=require("./DrawBox");function c(c,a){(Array.isArray(a)?a:[a]).forEach(function(a){var n=a instanceof t.FaceDetection?a.score:(0,i.isWithFaceDetection)(a)?a.detection.score:void 0,s=a instanceof t.FaceDetection?a.box:(0,i.isWithFaceDetection)(a)?a.detection.box:new e.Box(a),u=n?""+(0,r.round)(n):void 0;new o.DrawBox(s,{label:u}).draw(c)})}
},{"../classes":"ywa2","../classes/FaceDetection":"EHzx","../factories/WithFaceDetection":"ufye","../utils":"acHD","./DrawBox":"bcbQ"}],"Tkxx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMediaLoaded=t;var e=require("../env");function t(t){var r=e.env.getEnv(),n=r.Image,a=r.Video;return t instanceof n&&t.complete||t instanceof a&&t.readyState>=3}
},{"../env":"iBDr"}],"lo4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.awaitMediaLoaded=t;var e=require("../env"),r=require("./isMediaLoaded");function t(t){return new Promise(function(n,a){if(t instanceof e.env.getEnv().Canvas||(0,r.isMediaLoaded)(t))return n();function i(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",i),e.currentTarget.removeEventListener("error",o),n(e))}function o(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",i),e.currentTarget.removeEventListener("error",o),a(e))}t.addEventListener("load",i),t.addEventListener("error",o)})}
},{"../env":"iBDr","./isMediaLoaded":"Tkxx"}],"jjMC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bufferToImage=r;var e=require("../env");function r(r){return new Promise(function(t,n){if(!(r instanceof Blob))return n("bufferToImage - expected buf to be of type: Blob");var o=new FileReader;o.onload=function(){if("string"!=typeof o.result)return n("bufferToImage - expected reader.result to be a string, in onload");var r=e.env.getEnv().createImageElement();r.onload=function(){return t(r)},r.onerror=n,r.src=o.result},o.onerror=n,o.readAsDataURL(r)})}
},{"../env":"iBDr"}],"Jy41":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMediaDimensions=n;var e=require("../classes/Dimensions"),i=require("../env");function n(n){var s=i.env.getEnv(),t=s.Image,o=s.Video;return n instanceof t?new e.Dimensions(n.naturalWidth,n.naturalHeight):n instanceof o?new e.Dimensions(n.videoWidth,n.videoHeight):new e.Dimensions(n.width,n.height)}
},{"../classes/Dimensions":"Fa4F","../env":"iBDr"}],"y5DT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvas=i,exports.createCanvasFromMedia=n;var e=require("../env"),t=require("./getContext2dOrThrow"),r=require("./getMediaDimensions"),a=require("./isMediaLoaded");function i(t){var r=t.width,a=t.height,i=(0,e.env.getEnv().createCanvasElement)();return i.width=r,i.height=a,i}function n(n,o){var d=e.env.getEnv().ImageData;if(!(n instanceof d||(0,a.isMediaLoaded)(n)))throw new Error("createCanvasFromMedia - media has not finished loading yet");var s=o||(0,r.getMediaDimensions)(n),h=s.width,g=s.height,v=i({width:h,height:g});return n instanceof d?(0,t.getContext2dOrThrow)(v).putImageData(n,0,0):(0,t.getContext2dOrThrow)(v).drawImage(n,0,0,h,g),v}
},{"../env":"iBDr","./getContext2dOrThrow":"cUrv","./getMediaDimensions":"Jy41","./isMediaLoaded":"Tkxx"}],"E2G5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imageTensorToCanvas=u;var e=require("tslib"),r=i(require("@tensorflow/tfjs-core")),t=require("../env"),n=require("../utils");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(o,i){return(0,e.__awaiter)(this,void 0,void 0,function(){var u,s,a,c,f,l;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return u=i||t.env.getEnv().createCanvasElement(),s=o.shape.slice((0,n.isTensor4D)(o)?1:0),a=s[0],c=s[1],f=s[2],l=r.tidy(function(){return o.as3D(a,c,f).toInt()}),[4,r.browser.toPixels(l,u)];case 1:return e.sent(),l.dispose(),[2,u]}})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../env":"iBDr","../utils":"acHD"}],"ePX2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMediaElement=n;var e=require("../env");function n(n){var t=e.env.getEnv(),r=t.Image,a=t.Canvas,i=t.Video;return n instanceof r||n instanceof a||n instanceof i}
},{"../env":"iBDr"}],"YFFn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imageToSquare=i;var e=require("../env"),a=require("./createCanvas"),t=require("./getContext2dOrThrow"),r=require("./getMediaDimensions");function i(i,n,o){void 0===o&&(o=!1);var s=e.env.getEnv(),g=s.Image,h=s.Canvas;if(!(i instanceof g||i instanceof h))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var d=(0,r.getMediaDimensions)(i),v=n/Math.max(d.height,d.width),m=v*d.width,u=v*d.height,c=(0,a.createCanvas)({width:n,height:n}),w=i instanceof h?i:(0,a.createCanvasFromMedia)(i),M=Math.abs(m-u)/2,C=o&&m<u?M:0,f=o&&u<m?M:0;return(0,t.getContext2dOrThrow)(c).drawImage(w,C,f,m,u),c}
},{"../env":"iBDr","./createCanvas":"y5DT","./getContext2dOrThrow":"cUrv","./getMediaDimensions":"Jy41"}],"YiTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetInput=void 0;var e=a(require("@tensorflow/tfjs-core")),t=require("../env"),n=require("../ops/padToSquare"),r=require("../utils"),i=require("./createCanvas"),o=require("./imageToSquare");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var u=function(){function s(e,n){var o=this;if(void 0===n&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(e,n){if((0,r.isTensor3D)(e))return o._imageTensors[n]=e,void(o._inputDimensions[n]=e.shape);if((0,r.isTensor4D)(e)){var s=e.shape[0];if(1!==s)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");return o._imageTensors[n]=e,void(o._inputDimensions[n]=e.shape.slice(1))}var a=e instanceof t.env.getEnv().Canvas?e:(0,i.createCanvasFromMedia)(e);o._canvases[n]=a,o._inputDimensions[n]=[a.height,a.width,3]})}return Object.defineProperty(s.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"reshapedInputDimensions",{get:function(){var e=this;return(0,r.range)(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),s.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},s.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},s.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},s.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},s.prototype.getReshapedInputDimensions=function(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),n=this.getInputHeight(e);return(0,r.computeReshapedDimensions)({width:t,height:n},this.inputSize)},s.prototype.toBatchTensor=function(i,s){var a=this;return void 0===s&&(s=!0),this._inputSize=i,e.tidy(function(){var u=(0,r.range)(a.batchSize,0,1).map(function(u){var p=a.getInput(u);if(p instanceof e.Tensor){var c=(0,r.isTensor4D)(p)?p:p.expandDims();return(c=(0,n.padToSquare)(c,s)).shape[1]===i&&c.shape[2]===i||(c=e.image.resizeBilinear(c,[i,i])),c.as3D(i,i,3)}if(p instanceof t.env.getEnv().Canvas)return e.browser.fromPixels((0,o.imageToSquare)(p,i,s));throw new Error("toBatchTensor - at batchIdx "+u+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+p)});return e.stack(u.map(function(e){return e.toFloat()})).as4D(a.batchSize,i,i,3)})},s}();exports.NetInput=u;
},{"@tensorflow/tfjs-core":"FZBM","../env":"iBDr","../ops/padToSquare":"OCAY","../utils":"acHD","./createCanvas":"y5DT","./imageToSquare":"YFFn"}],"jkoa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toNetInput=a;var e=require("tslib"),t=require("../utils"),r=require("./awaitMediaLoaded"),n=require("./isMediaElement"),i=require("./NetInput"),o=require("./resolveInput");function a(a){return(0,e.__awaiter)(this,void 0,void 0,function(){var s,u,p;return(0,e.__generator)(this,function(e){switch(e.label){case 0:if(a instanceof i.NetInput)return[2,a];if(!(s=Array.isArray(a)?a:[a]).length)throw new Error("toNetInput - empty array passed as input");return u=function(e){return Array.isArray(a)?" at input index "+e+":":""},(p=s.map(o.resolveInput)).forEach(function(e,r){if(!(0,n.isMediaElement)(e)&&!(0,t.isTensor3D)(e)&&!(0,t.isTensor4D)(e)){if("string"==typeof s[r])throw new Error("toNetInput -"+u(r)+" string passed, but could not resolve HTMLElement for element id "+s[r]);throw new Error("toNetInput -"+u(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if((0,t.isTensor4D)(e)){var i=e.shape[0];if(1!==i)throw new Error("toNetInput -"+u(r)+" tf.Tensor4D with batchSize "+i+" passed, but not supported in input array")}}),[4,Promise.all(p.map(function(e){return(0,n.isMediaElement)(e)&&(0,r.awaitMediaLoaded)(e)}))];case 1:return e.sent(),[2,new i.NetInput(p,Array.isArray(a))]}})})}
},{"tslib":"qjU2","../utils":"acHD","./awaitMediaLoaded":"lo4I","./isMediaElement":"ePX2","./NetInput":"YiTB","./resolveInput":"z7mX"}],"uu07":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractFaces=s;var e=require("tslib"),t=require("../classes/FaceDetection"),r=require("../env"),a=require("./createCanvas"),n=require("./getContext2dOrThrow"),i=require("./imageTensorToCanvas"),o=require("./toNetInput");function s(s,c){return(0,e.__awaiter)(this,void 0,void 0,function(){var u,h,g,v,d,f;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return u=r.env.getEnv().Canvas,h=s,s instanceof u?[3,5]:[4,(0,o.toNetInput)(s)];case 1:if((g=e.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(v=g.getInput(0))instanceof u?(d=v,[3,4]):[3,2];case 2:return[4,(0,i.imageTensorToCanvas)(v)];case 3:d=e.sent(),e.label=4;case 4:h=d,e.label=5;case 5:return f=(0,n.getContext2dOrThrow)(h),[2,c.map(function(e){return e instanceof t.FaceDetection?e.forSize(h.width,h.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(h.width,h.height)}).map(function(e){var t=e.x,r=e.y,i=e.width,o=e.height,s=(0,a.createCanvas)({width:i,height:o});return(0,n.getContext2dOrThrow)(s).putImageData(f.getImageData(t,r,i,o),0,0),s})]}})})}
},{"tslib":"qjU2","../classes/FaceDetection":"EHzx","../env":"iBDr","./createCanvas":"y5DT","./getContext2dOrThrow":"cUrv","./imageTensorToCanvas":"E2G5","./toNetInput":"jkoa"}],"AX99":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractFaceTensors=s;var e=require("tslib"),r=i(require("@tensorflow/tfjs-core")),t=require("../classes/FaceDetection"),n=require("../utils");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function s(o,i){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){if(!(0,n.isTensor3D)(o)&&!(0,n.isTensor4D)(o))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if((0,n.isTensor4D)(o)&&o.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,r.tidy(function(){var e=o.shape.slice((0,n.isTensor4D)(o)?1:0),s=e[0],c=e[1],u=e[2];return i.map(function(e){return e instanceof t.FaceDetection?e.forSize(c,s).box:e}).map(function(e){return e.clipAtImageBorders(c,s)}).map(function(e){var t=e.x,n=e.y,i=e.width,a=e.height;return r.slice3d(o.as3D(s,c,u),[n,t,0],[a,i,u])})})]})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../classes/FaceDetection":"EHzx","../utils":"acHD"}],"PvqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchOrThrow=r;var e=require("tslib"),t=require("../env");function r(r,s){return(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,t.env.getEnv().fetch)(r,s)];case 1:if(!((n=e.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}
},{"tslib":"qjU2","../env":"iBDr"}],"J7cO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchImage=o;var e=require("tslib"),r=require("./bufferToImage"),t=require("./fetchOrThrow");function o(o){return(0,e.__awaiter)(this,void 0,void 0,function(){var i,a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,t.fetchOrThrow)(o)];case 1:return[4,(i=e.sent()).blob()];case 2:if(!(a=e.sent()).type.startsWith("image/"))throw new Error("fetchImage - expected blob type to be of type image/*, instead have: "+a.type+", for url: "+i.url);return[2,(0,r.bufferToImage)(a)]}})})}
},{"tslib":"qjU2","./bufferToImage":"jjMC","./fetchOrThrow":"PvqE"}],"FZoX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchJson=t;var e=require("tslib"),r=require("./fetchOrThrow");function t(t){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,r.fetchOrThrow)(t)];case 1:return[2,e.sent().json()]}})})}
},{"tslib":"qjU2","./fetchOrThrow":"PvqE"}],"QENY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchNetWeights=t;var e=require("tslib"),r=require("./fetchOrThrow");function t(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return a=Float32Array.bind,[4,(0,r.fetchOrThrow)(t)];case 1:return[4,e.sent().arrayBuffer()];case 2:return[2,new(a.apply(Float32Array,[void 0,e.sent()]))]}})})}
},{"tslib":"qjU2","./fetchOrThrow":"PvqE"}],"JaqQ":[function(require,module,exports) {
"use strict";function t(t,e){var s=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:s};if("/"===t)return{modelBaseUri:"/",manifestUri:"/"+s};var i=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"",r=(t=t.replace(i,"")).split("/").filter(function(t){return t}),n=t.endsWith(".json")?r[r.length-1]:s,a=i+(t.endsWith(".json")?r.slice(0,r.length-1):r).join("/");return{modelBaseUri:a=t.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+n:a+"/"+n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getModelUris=t;
},{}],"vsZQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWeightMap=u;var e=require("tslib"),r=i(require("@tensorflow/tfjs-core")),t=require("../common/getModelUris"),n=require("./fetchJson");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(o,i){return(0,e.__awaiter)(this,void 0,void 0,function(){var u,a,s,f;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return u=(0,t.getModelUris)(o,i),a=u.manifestUri,s=u.modelBaseUri,[4,(0,n.fetchJson)(a)];case 1:return f=e.sent(),[2,r.io.loadWeights(f,s)]}})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../common/getModelUris":"JaqQ","./fetchJson":"FZoX"}],"DIRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchDimensions=i;var e=require("./getMediaDimensions");function i(i,t,r){void 0===r&&(r=!1);var s=r?(0,e.getMediaDimensions)(t):t,h=s.width,n=s.height;return i.width=h,i.height=n,{width:h,height:n}}
},{"./getMediaDimensions":"Jy41"}],"F9LC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./awaitMediaLoaded");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./bufferToImage");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./createCanvas");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./extractFaces");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./extractFaceTensors");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./fetchImage");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var s=require("./fetchJson");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var i=require("./fetchNetWeights");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});var c=require("./fetchOrThrow");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var f=require("./getContext2dOrThrow");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===f[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}}))});var a=require("./getMediaDimensions");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var p=require("./imageTensorToCanvas");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===p[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}}))});var d=require("./imageToSquare");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===d[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}}))});var l=require("./isMediaElement");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===l[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}}))});var x=require("./isMediaLoaded");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===x[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}}))});var b=require("./loadWeightMap");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===b[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}}))});var O=require("./matchDimensions");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===O[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}}))});var _=require("./NetInput");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===_[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}}))});var j=require("./resolveInput");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===j[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}}))});var y=require("./toNetInput");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===y[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}}))});
},{"./awaitMediaLoaded":"lo4I","./bufferToImage":"jjMC","./createCanvas":"y5DT","./extractFaces":"uu07","./extractFaceTensors":"AX99","./fetchImage":"J7cO","./fetchJson":"FZoX","./fetchNetWeights":"QENY","./fetchOrThrow":"PvqE","./getContext2dOrThrow":"cUrv","./getMediaDimensions":"Jy41","./imageTensorToCanvas":"E2G5","./imageToSquare":"YFFn","./isMediaElement":"ePX2","./isMediaLoaded":"Tkxx","./loadWeightMap":"vsZQ","./matchDimensions":"DIRJ","./NetInput":"YiTB","./resolveInput":"z7mX","./toNetInput":"jkoa"}],"bTJB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NeuralNetwork=void 0;var r=require("tslib"),t=i(require("@tensorflow/tfjs-core")),e=require("./common/getModelUris"),a=require("./dom"),o=require("./env");function n(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return n=function(){return r},r}function i(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=n();if(t&&t.has(r))return t.get(r);var e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var i=a?Object.getOwnPropertyDescriptor(r,o):null;i&&(i.get||i.set)?Object.defineProperty(e,o,i):e[o]=r[o]}return e.default=r,t&&t.set(r,e),e}var s=function(){function n(r){this._name=r,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(r){var t=this.traversePropertyPath(r);return t.obj[t.objProp]},n.prototype.reassignParamFromPath=function(r,t){var e=this.traversePropertyPath(r),a=e.obj,o=e.objProp;a[o].dispose(),a[o]=t},n.prototype.getParamList=function(){var r=this;return this._paramMappings.map(function(t){var e=t.paramPath;return{path:e,tensor:r.getParamFromPath(e)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(r){return r.tensor instanceof t.Variable})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(r){return!(r.tensor instanceof t.Variable)})},n.prototype.variable=function(){var r=this;this.getFrozenParams().forEach(function(t){var e=t.path,a=t.tensor;r.reassignParamFromPath(e,a.variable())})},n.prototype.freeze=function(){var r=this;this.getTrainableParams().forEach(function(e){var a=e.path,o=e.tensor,n=t.tensor(o.dataSync());o.dispose(),r.reassignParamFromPath(a,n)})},n.prototype.dispose=function(r){void 0===r&&(r=!0),this.getParamList().forEach(function(t){if(r&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(r){var t=r.tensor;return Array.from(t.dataSync())}).reduce(function(r,t){return r.concat(t)}))},n.prototype.load=function(t){return(0,r.__awaiter)(this,void 0,void 0,function(){return(0,r.__generator)(this,function(r){switch(r.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return r.sent(),[2]}})})},n.prototype.loadFromUri=function(t){return(0,r.__awaiter)(this,void 0,void 0,function(){var e;return(0,r.__generator)(this,function(r){switch(r.label){case 0:if(t&&"string"!=typeof t)throw new Error(this._name+".loadFromUri - expected model uri");return[4,(0,a.loadWeightMap)(t,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},n.prototype.loadFromDisk=function(a){return(0,r.__awaiter)(this,void 0,void 0,function(){var n,i,s,p,u,c,f,h,m,l;return(0,r.__generator)(this,function(r){switch(r.label){case 0:if(a&&"string"!=typeof a)throw new Error(this._name+".loadFromDisk - expected model file path");return n=o.env.getEnv().readFile,i=(0,e.getModelUris)(a,this.getDefaultModelName()),s=i.manifestUri,p=i.modelBaseUri,u=function(r){return Promise.all(r.map(function(r){return n(r).then(function(r){return r.buffer})}))},c=t.io.weightsLoaderFactory(u),m=(h=JSON).parse,[4,n(s)];case 1:return f=m.apply(h,[r.sent().toString()]),[4,c(f,p)];case 2:return l=r.sent(),this.loadFromWeightMap(l),[2]}})})},n.prototype.loadFromWeightMap=function(r){var t=this.extractParamsFromWeigthMap(r),e=t.paramMappings,a=t.params;this._paramMappings=e,this._params=a},n.prototype.extractWeights=function(r){var t=this.extractParams(r),e=t.paramMappings,a=t.params;this._paramMappings=e,this._params=a},n.prototype.traversePropertyPath=function(r){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=r.split("/").reduce(function(t,e){if(!t.nextObj.hasOwnProperty(e))throw new Error("traversePropertyPath - object does not have property "+e+", for path "+r);return{obj:t.nextObj,objProp:e,nextObj:t.nextObj[e]}},{nextObj:this.params}),a=e.obj,o=e.objProp;if(!(a&&o&&a[o]instanceof t.Tensor))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+r);return{obj:a,objProp:o}},n}();exports.NeuralNetwork=s;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","./common/getModelUris":"JaqQ","./dom":"F9LC","./env":"iBDr"}],"YaLJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseSeparableConv=n;var e=r(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=o?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function n(t,r,n){return e.tidy(function(){var o=e.separableConv2d(t,r.depthwise_filter,r.pointwise_filter,n,"same");return o=e.add(o,r.bias)})}
},{"@tensorflow/tfjs-core":"FZBM"}],"RQeH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.denseBlock3=o,exports.denseBlock4=a;var e=n(require("@tensorflow/tfjs-core")),r=require("../common/depthwiseSeparableConv");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var d=o?Object.getOwnPropertyDescriptor(e,a):null;d&&(d.get||d.set)?Object.defineProperty(n,a,d):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function o(t,n,o){return void 0===o&&(o=!1),e.tidy(function(){var a=e.relu(o?e.add(e.conv2d(t,n.conv0.filters,[2,2],"same"),n.conv0.bias):(0,r.depthwiseSeparableConv)(t,n.conv0,[2,2])),d=(0,r.depthwiseSeparableConv)(a,n.conv1,[1,1]),i=e.relu(e.add(a,d)),u=(0,r.depthwiseSeparableConv)(i,n.conv2,[1,1]);return e.relu(e.add(a,e.add(d,u)))})}function a(t,n,o,a){return void 0===o&&(o=!1),void 0===a&&(a=!0),e.tidy(function(){var d=e.relu(o?e.add(e.conv2d(t,n.conv0.filters,a?[2,2]:[1,1],"same"),n.conv0.bias):(0,r.depthwiseSeparableConv)(t,n.conv0,a?[2,2]:[1,1])),i=(0,r.depthwiseSeparableConv)(d,n.conv1,[1,1]),u=e.relu(e.add(d,i)),c=(0,r.depthwiseSeparableConv)(u,n.conv2,[1,1]),p=e.relu(e.add(d,e.add(i,c))),l=(0,r.depthwiseSeparableConv)(p,n.conv3,[1,1]);return e.relu(e.add(d,e.add(i,e.add(c,l))))})}
},{"@tensorflow/tfjs-core":"FZBM","../common/depthwiseSeparableConv":"YaLJ"}],"ItGw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convLayer=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(r,t,n,o){return void 0===n&&(n="same"),void 0===o&&(o=!1),e.tidy(function(){var u=e.add(e.conv2d(r,t.filters,[1,1],n),t.bias);return o?e.relu(u):u})}
},{"@tensorflow/tfjs-core":"FZBM"}],"cQ29":[function(require,module,exports) {
"use strict";function e(e,s){Object.keys(e).forEach(function(o){s.some(function(e){return e.originalPath===o})||e[o].dispose()})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.disposeUnusedWeightTensors=e;
},{}],"yKob":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractConvParamsFactory=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function n(r,t){return function(n,o,a,u){var f=e.tensor4d(r(n*o*a*a),[a,a,n,o]),i=e.tensor1d(r(o));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:f,bias:i}}}
},{"@tensorflow/tfjs-core":"FZBM"}],"mhyA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractFCParamsFactory=n;var e=r(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function n(t,r){return function(n,o,a){var u=e.tensor2d(t(n*o),[n,o]),i=e.tensor1d(t(o));return r.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:u,bias:i}}}
},{"@tensorflow/tfjs-core":"FZBM"}],"n7b2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeparableConvParams=void 0;var e=function(){return function(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}}();exports.SeparableConvParams=e;
},{}],"J4Yx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractSeparableConvParamsFactory=a,exports.loadSeparableConvParamsFactory=o;var e=n(require("@tensorflow/tfjs-core")),r=require("./types");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function a(t,n){return function(a,o,i){var u=e.tensor4d(t(9*a),[3,3,a,1]),p=e.tensor4d(t(a*o),[1,1,a,o]),s=e.tensor1d(t(o));return n.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new r.SeparableConvParams(u,p,s)}}function o(e){return function(t){var n=e(t+"/depthwise_filter",4),a=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new r.SeparableConvParams(n,a,o)}}
},{"@tensorflow/tfjs-core":"FZBM","./types":"n7b2"}],"jLb1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractWeightEntryFactory=r;var e=require("../utils");function r(r,t){return function(a,i,n){var o=r[a];if(!(0,e.isTensor)(o,i))throw new Error("expected weightMap["+a+"] to be a Tensor"+i+"D, instead have "+o);return t.push({originalPath:a,paramPath:n||a}),o}}
},{"../utils":"acHD"}],"fHbF":[function(require,module,exports) {
"use strict";function e(e){var t=e;return{extractWeights:function(e){var r=t.slice(0,e);return t=t.slice(e),r},getRemainingWeights:function(){return t}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractWeightsFactory=e;
},{}],"gZ1E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./convLayer");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./depthwiseSeparableConv");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./disposeUnusedWeightTensors");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./extractConvParamsFactory");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./extractFCParamsFactory");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./extractSeparableConvParamsFactory");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var s=require("./extractWeightEntryFactory");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var c=require("./extractWeightsFactory");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});var a=require("./getModelUris");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===a[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}}))});var i=require("./types");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===i[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}}))});
},{"./convLayer":"ItGw","./depthwiseSeparableConv":"YaLJ","./disposeUnusedWeightTensors":"cQ29","./extractConvParamsFactory":"yKob","./extractFCParamsFactory":"mhyA","./extractSeparableConvParamsFactory":"J4Yx","./extractWeightEntryFactory":"jLb1","./extractWeightsFactory":"fHbF","./getModelUris":"JaqQ","./types":"n7b2"}],"gRcI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractorsFactory=c;var o=require("../common");function c(c,n){var r=(0,o.extractConvParamsFactory)(c,n),e=(0,o.extractSeparableConvParamsFactory)(c,n);function t(o,c,n,t){return void 0===t&&(t=!1),{conv0:t?r(o,c,3,n+"/conv0"):e(o,c,n+"/conv0"),conv1:e(c,c,n+"/conv1"),conv2:e(c,c,n+"/conv2")}}return{extractDenseBlock3Params:t,extractDenseBlock4Params:function(o,c,n,r){void 0===r&&(r=!1);var v=t(o,c,n,r);return{conv0:v.conv0,conv1:v.conv1,conv2:v.conv2,conv3:e(c,c,n+"/conv3")}}}}
},{"../common":"gZ1E"}],"yx1j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=t;var e=require("../common"),r=require("./extractorsFactory");function t(t){var a=[],s=(0,e.extractWeightsFactory)(t),n=s.extractWeights,c=s.getRemainingWeights,o=(0,r.extractorsFactory)(n,a).extractDenseBlock4Params,i=o(3,32,"dense0",!0),d=o(32,64,"dense1"),g=o(64,128,"dense2"),x=o(128,256,"dense3");if(0!==c().length)throw new Error("weights remaing after extract: "+c().length);return{paramMappings:a,params:{dense0:i,dense1:d,dense2:g,dense3:x}}}
},{"../common":"gZ1E","./extractorsFactory":"gRcI"}],"raPJ":[function(require,module,exports) {
"use strict";function e(e){return function(r){return{filters:e(r+"/filters",4),bias:e(r+"/bias",1)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadConvParamsFactory=e;
},{}],"OQsn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadParamsFactory=c;var o=require("../common"),n=require("../common/loadConvParamsFactory");function c(c,r){var a=(0,o.extractWeightEntryFactory)(c,r),e=(0,n.loadConvParamsFactory)(a),t=(0,o.loadSeparableConvParamsFactory)(a);return{extractDenseBlock3Params:function(o,n){return void 0===n&&(n=!1),{conv0:n?e(o+"/conv0"):t(o+"/conv0"),conv1:t(o+"/conv1"),conv2:t(o+"/conv2")}},extractDenseBlock4Params:function(o,n){return void 0===n&&(n=!1),{conv0:n?e(o+"/conv0"):t(o+"/conv0"),conv1:t(o+"/conv1"),conv2:t(o+"/conv2"),conv3:t(o+"/conv3")}}}}
},{"../common":"gZ1E","../common/loadConvParamsFactory":"raPJ"}],"ojms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=s;var e=require("../common"),r=require("./loadParamsFactory");function s(s){var a=[],n=(0,r.loadParamsFactory)(s,a).extractDenseBlock4Params,t={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return(0,e.disposeUnusedWeightTensors)(s,a),{params:t,paramMappings:a}}
},{"../common":"gZ1E","./loadParamsFactory":"OQsn"}],"aP46":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceFeatureExtractor=void 0;var e=require("tslib"),r=s(require("@tensorflow/tfjs-core")),t=require("../dom"),o=require("../NeuralNetwork"),a=require("../ops"),n=require("./denseBlock"),u=require("./extractParams"),i=require("./extractParamsFromWeigthMap");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=o?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(t,a,n):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}var f=function(o){function c(){return o.call(this,"FaceFeatureExtractor")||this}return(0,e.__extends)(c,o),c.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return r.tidy(function(){var o=e.toBatchTensor(112,!0),u=(0,a.normalize)(o,[122.782,117.001,104.298]).div(r.scalar(255)),i=(0,n.denseBlock4)(u,t.dense0,!0);return i=(0,n.denseBlock4)(i,t.dense1),i=(0,n.denseBlock4)(i,t.dense2),i=(0,n.denseBlock4)(i,t.dense3),i=r.avgPool(i,[7,7],[2,2],"valid")})},c.prototype.forward=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o=this.forwardInput,[4,(0,t.toNetInput)(r)];case 1:return[2,o.apply(this,[e.sent()])]}})})},c.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},c.prototype.extractParamsFromWeigthMap=function(e){return(0,i.extractParamsFromWeigthMap)(e)},c.prototype.extractParams=function(e){return(0,u.extractParams)(e)},c}(o.NeuralNetwork);exports.FaceFeatureExtractor=f;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../NeuralNetwork":"bTJB","../ops":"CGLe","./denseBlock":"RQeH","./extractParams":"yx1j","./extractParamsFromWeigthMap":"ojms"}],"E0V1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fullyConnectedLayer=n;var e=r(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function n(t,r){return e.tidy(function(){return e.add(e.matMul(t,r.weights),r.bias)})}
},{"@tensorflow/tfjs-core":"FZBM"}],"APII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=t;var e=require("../common");function t(t,r,a){var c=[],i=(0,e.extractWeightsFactory)(t),s=i.extractWeights,n=i.getRemainingWeights,o=(0,e.extractFCParamsFactory)(s,c)(r,a,"fc");if(0!==n().length)throw new Error("weights remaing after extract: "+n().length);return{paramMappings:c,params:{fc:o}}}
},{"../common":"gZ1E"}],"NSX9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=r;var e=require("../common");function r(r){var t=[],a=(0,e.extractWeightEntryFactory)(r,t);var s,i={fc:(s="fc",{weights:a(s+"/weights",2),bias:a(s+"/bias",1)})};return(0,e.disposeUnusedWeightTensors)(r,t),{params:i,paramMappings:t}}
},{"../common":"gZ1E"}],"cSOR":[function(require,module,exports) {
"use strict";function e(e){var t={},r={};return Object.keys(e).forEach(function(s){(s.startsWith("fc")?r:t)[s]=e[s]}),{featureExtractorMap:t,classifierMap:r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.seperateWeightMaps=e;
},{}],"xqdl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceProcessor=void 0;var e=require("tslib"),r=u(require("@tensorflow/tfjs-core")),t=require("../common/fullyConnectedLayer"),a=require("../dom"),i=require("../NeuralNetwork"),o=require("./extractParams"),s=require("./extractParamsFromWeigthMap"),n=require("./util");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}var f=function(i){function c(e,r){var t=i.call(this,e)||this;return t._faceFeatureExtractor=r,t}return(0,e.__extends)(c,i),Object.defineProperty(c.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),c.prototype.runNet=function(e){var i=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return r.tidy(function(){var r=e instanceof a.NetInput?i.faceFeatureExtractor.forwardInput(e):e;return(0,t.fullyConnectedLayer)(r.as2D(r.shape[0],-1),o.fc)})},c.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),i.prototype.dispose.call(this,e)},c.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),t=r.params,a=r.paramMappings;this._params=t,this._paramMappings=a},c.prototype.extractClassifierParams=function(e){return(0,o.extractParams)(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},c.prototype.extractParamsFromWeigthMap=function(e){var r=(0,n.seperateWeightMaps)(e),t=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(t),(0,s.extractParamsFromWeigthMap)(a)},c.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),t=this.getClassifierChannelsOut(),a=t*r+t,i=e.slice(0,e.length-a),o=e.slice(e.length-a);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},c}(i.NeuralNetwork);exports.FaceProcessor=f;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../common/fullyConnectedLayer":"E0V1","../dom":"F9LC","../NeuralNetwork":"bTJB","./extractParams":"APII","./extractParamsFromWeigthMap":"NSX9","./util":"cSOR"}],"I5bo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceExpressions=exports.FACE_EXPRESSION_LABELS=void 0;var r=["neutral","happy","sad","angry","fearful","disgusted","surprised"];exports.FACE_EXPRESSION_LABELS=r;var e=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);r.forEach(function(r,o){t[r]=e[o]})}return e.prototype.asSortedArray=function(){var e=this;return r.map(function(r){return{expression:r,probability:e[r]}}).sort(function(r,e){return e.probability-r.probability})},e}();exports.FaceExpressions=e;
},{}],"uqll":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceExpressionNet=void 0;var e=require("tslib"),t=a(require("@tensorflow/tfjs-core")),r=require("../dom"),n=require("../faceFeatureExtractor/FaceFeatureExtractor"),o=require("../faceProcessor/FaceProcessor"),i=require("./FaceExpressions");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var u=function(o){function s(e){return void 0===e&&(e=new n.FaceFeatureExtractor),o.call(this,"FaceExpressionNet",e)||this}return(0,e.__extends)(s,o),s.prototype.forwardInput=function(e){var r=this;return t.tidy(function(){return t.softmax(r.runNet(e))})},s.prototype.forward=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=this.forwardInput,[4,(0,r.toNetInput)(t)];case 1:return[2,n.apply(this,[e.sent()])]}})})},s.prototype.predictExpressions=function(n){return(0,e.__awaiter)(this,void 0,void 0,function(){var o,s,a,u,c=this;return(0,e.__generator)(this,function(p){switch(p.label){case 0:return[4,(0,r.toNetInput)(n)];case 1:return o=p.sent(),[4,this.forwardInput(o)];case 2:return s=p.sent(),[4,Promise.all(t.unstack(s).map(function(t){return(0,e.__awaiter)(c,void 0,void 0,function(){var r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,t.data()];case 1:return r=e.sent(),t.dispose(),[2,r]}})})}))];case 3:return a=p.sent(),s.dispose(),u=a.map(function(e){return new i.FaceExpressions(e)}),[2,o.isBatchInput?u:u[0]]}})})},s.prototype.getDefaultModelName=function(){return"face_expression_model"},s.prototype.getClassifierChannelsIn=function(){return 256},s.prototype.getClassifierChannelsOut=function(){return 7},s}(o.FaceProcessor);exports.FaceExpressionNet=u;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../faceFeatureExtractor/FaceFeatureExtractor":"aP46","../faceProcessor/FaceProcessor":"xqdl","./FaceExpressions":"I5bo"}],"YaCQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./FaceExpressionNet");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./FaceExpressions");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});
},{"./FaceExpressionNet":"uqll","./FaceExpressions":"I5bo"}],"KSS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWithFaceExpressions=s,exports.extendWithFaceExpressions=r;var e=require("../faceExpressionNet/FaceExpressions");function s(s){return s.expressions instanceof e.FaceExpressions}function r(e,s){var r={expressions:s};return Object.assign({},e,r)}
},{"../faceExpressionNet/FaceExpressions":"I5bo"}],"BdXI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawFaceExpressions=a;var e=require("../classes"),r=require("../faceExpressionNet"),i=require("../factories/WithFaceDetection"),s=require("../factories/WithFaceExpressions"),t=require("../utils"),o=require("./DrawTextField");function a(a,n,c,p){void 0===c&&(c=.1),(Array.isArray(n)?n:[n]).forEach(function(n){var u=n instanceof r.FaceExpressions?n:(0,s.isWithFaceExpressions)(n)?n.expressions:void 0;if(!u)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var x=u.asSortedArray().filter(function(e){return e.probability>c}),f=(0,i.isWithFaceDetection)(n)?n.detection.box.bottomLeft:p||new e.Point(0,0);new o.DrawTextField(x.map(function(e){return e.expression+" ("+(0,t.round)(e.probability)+")"}),f).draw(a)})}
},{"../classes":"ywa2","../faceExpressionNet":"YaCQ","../factories/WithFaceDetection":"ufye","../factories/WithFaceExpressions":"KSS7","../utils":"acHD","./DrawTextField":"WoOq"}],"bw0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWithFaceLandmarks=n,exports.extendWithFaceLandmarks=s;var e=require("../classes/FaceDetection"),a=require("../classes/FaceLandmarks"),t=require("./WithFaceDetection");function n(n){return(0,t.isWithFaceDetection)(n)&&n.landmarks instanceof a.FaceLandmarks&&n.unshiftedLandmarks instanceof a.FaceLandmarks&&n.alignedRect instanceof e.FaceDetection}function s(a,t){var n=a.detection.box,s=t.shiftBy(n.x,n.y),i=s.align(),c=a.detection.imageDims,r={landmarks:s,unshiftedLandmarks:t,alignedRect:new e.FaceDetection(a.detection.score,i.rescale(c.reverse()),c)};return Object.assign({},a,r)}
},{"../classes/FaceDetection":"EHzx","../classes/FaceLandmarks":"Cc3m","./WithFaceDetection":"ufye"}],"wpyA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawFaceLandmarks=s,exports.DrawFaceLandmarks=exports.DrawFaceLandmarksOptions=void 0;var a=require("../classes/FaceLandmarks"),r=require("../classes/FaceLandmarks68"),e=require("../dom/getContext2dOrThrow"),t=require("../factories/WithFaceLandmarks"),o=require("./drawContour"),i=function(){return function(a){void 0===a&&(a={});var r=a.drawLines,e=void 0===r||r,t=a.drawPoints,o=void 0===t||t,i=a.lineWidth,n=a.lineColor,s=a.pointSize,d=a.pointColor;this.drawLines=e,this.drawPoints=o,this.lineWidth=i||1,this.pointSize=s||2,this.lineColor=n||"rgba(0, 255, 255, 1)",this.pointColor=d||"rgba(255, 0, 255, 1)"}}();exports.DrawFaceLandmarksOptions=i;var n=function(){function a(a,r){void 0===r&&(r={}),this.faceLandmarks=a,this.options=new i(r)}return a.prototype.draw=function(a){var t=(0,e.getContext2dOrThrow)(a),i=this.options,n=i.drawLines,s=i.drawPoints,d=i.lineWidth,c=i.lineColor,h=i.pointSize,f=i.pointColor;if(n&&this.faceLandmarks instanceof r.FaceLandmarks68&&(t.strokeStyle=c,t.lineWidth=d,(0,o.drawContour)(t,this.faceLandmarks.getJawOutline()),(0,o.drawContour)(t,this.faceLandmarks.getLeftEyeBrow()),(0,o.drawContour)(t,this.faceLandmarks.getRightEyeBrow()),(0,o.drawContour)(t,this.faceLandmarks.getNose()),(0,o.drawContour)(t,this.faceLandmarks.getLeftEye(),!0),(0,o.drawContour)(t,this.faceLandmarks.getRightEye(),!0),(0,o.drawContour)(t,this.faceLandmarks.getMouth(),!0)),s){t.strokeStyle=f,t.fillStyle=f;this.faceLandmarks.positions.forEach(function(a){t.beginPath(),t.arc(a.x,a.y,h,0,2*Math.PI),t.fill()})}},a}();function s(r,e){(Array.isArray(e)?e:[e]).forEach(function(e){var o=e instanceof a.FaceLandmarks?e:(0,t.isWithFaceLandmarks)(e)?e.landmarks:void 0;if(!o)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new n(o).draw(r)})}exports.DrawFaceLandmarks=n;
},{"../classes/FaceLandmarks":"Cc3m","../classes/FaceLandmarks68":"ShfV","../dom/getContext2dOrThrow":"cUrv","../factories/WithFaceLandmarks":"bw0I","./drawContour":"PUZ0"}],"sID2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./drawContour");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./drawDetections");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./drawFaceExpressions");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./DrawBox");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./DrawFaceLandmarks");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./DrawTextField");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});
},{"./drawContour":"PUZ0","./drawDetections":"XmOr","./drawFaceExpressions":"BdXI","./DrawBox":"bcbQ","./DrawFaceLandmarks":"wpyA","./DrawTextField":"WoOq"}],"HkMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=t;var e=require("../common"),a=require("../utils");function r(a,r){var t=(0,e.extractConvParamsFactory)(a,r),o=(0,e.extractSeparableConvParamsFactory)(a,r);return{extractConvParams:t,extractSeparableConvParams:o,extractReductionBlockParams:function(e,a,r){return{separable_conv0:o(e,a,r+"/separable_conv0"),separable_conv1:o(a,a,r+"/separable_conv1"),expansion_conv:t(e,a,1,r+"/expansion_conv")}},extractMainBlockParams:function(e,a){return{separable_conv0:o(e,e,a+"/separable_conv0"),separable_conv1:o(e,e,a+"/separable_conv1"),separable_conv2:o(e,e,a+"/separable_conv2")}}}}function t(t,o){var n=[],c=(0,e.extractWeightsFactory)(t),l=c.extractWeights,_=c.getRemainingWeights,i=r(l,n),s=i.extractConvParams,v=i.extractSeparableConvParams,b=i.extractReductionBlockParams,p=i.extractMainBlockParams,u={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:b(32,64,"entry_flow/reduction_block_0"),reduction_block_1:b(64,128,"entry_flow/reduction_block_1")},m={};(0,a.range)(o,0,1).forEach(function(e){m["main_block_"+e]=p(128,"middle_flow/main_block_"+e)});var x={reduction_block:b(128,256,"exit_flow/reduction_block"),separable_conv:v(256,512,"exit_flow/separable_conv")};if(0!==_().length)throw new Error("weights remaing after extract: "+_().length);return{paramMappings:n,params:{entry_flow:u,middle_flow:m,exit_flow:x}}}
},{"../common":"gZ1E","../utils":"acHD"}],"DQqn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=n;var a=require("../common"),e=require("../common/loadConvParamsFactory"),r=require("../utils");function o(r,o){var n=(0,a.extractWeightEntryFactory)(r,o),c=(0,e.loadConvParamsFactory)(n),t=(0,a.loadSeparableConvParamsFactory)(n);return{extractConvParams:c,extractSeparableConvParams:t,extractReductionBlockParams:function(a){return{separable_conv0:t(a+"/separable_conv0"),separable_conv1:t(a+"/separable_conv1"),expansion_conv:c(a+"/expansion_conv")}},extractMainBlockParams:function(a){return{separable_conv0:t(a+"/separable_conv0"),separable_conv1:t(a+"/separable_conv1"),separable_conv2:t(a+"/separable_conv2")}}}}function n(e,n){var c=[],t=o(e,c),l=t.extractConvParams,_=t.extractSeparableConvParams,s=t.extractReductionBlockParams,i=t.extractMainBlockParams,v={conv_in:l("entry_flow/conv_in"),reduction_block_0:s("entry_flow/reduction_block_0"),reduction_block_1:s("entry_flow/reduction_block_1")},p={};(0,r.range)(n,0,1).forEach(function(a){p["main_block_"+a]=i("middle_flow/main_block_"+a)});var u={reduction_block:s("exit_flow/reduction_block"),separable_conv:_("exit_flow/separable_conv")};return(0,a.disposeUnusedWeightTensors)(e,c),{params:{entry_flow:v,middle_flow:p,exit_flow:u},paramMappings:c}}
},{"../common":"gZ1E","../common/loadConvParamsFactory":"raPJ","../utils":"acHD"}],"eiR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyXception=void 0;var e=require("tslib"),r=s(require("@tensorflow/tfjs-core")),t=require("../common"),n=require("../dom"),o=require("../NeuralNetwork"),a=require("../ops"),i=require("../utils"),u=require("./extractParams"),c=require("./extractParamsFromWeigthMap");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(e,t,n){return r.add(r.conv2d(e,t.filters,n,"same"),t.bias)}function f(e,n,o){void 0===o&&(o=!0);var a=o?r.relu(e):e;return a=(0,t.depthwiseSeparableConv)(a,n.separable_conv0,[1,1]),a=(0,t.depthwiseSeparableConv)(r.relu(a),n.separable_conv1,[1,1]),a=r.maxPool(a,[3,3],[2,2],"same"),a=r.add(a,p(e,n.expansion_conv,[2,2]))}function d(e,n){var o=(0,t.depthwiseSeparableConv)(r.relu(e),n.separable_conv0,[1,1]);return o=(0,t.depthwiseSeparableConv)(r.relu(o),n.separable_conv1,[1,1]),o=(0,t.depthwiseSeparableConv)(r.relu(o),n.separable_conv2,[1,1]),o=r.add(o,e)}var _=function(o){function l(e){var r=o.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return(0,e.__extends)(l,o),l.prototype.forwardInput=function(e){var n=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return r.tidy(function(){var u=e.toBatchTensor(112,!0),c=(0,a.normalize)(u,[122.782,117.001,104.298]).div(r.scalar(256)),l=r.relu(p(c,o.entry_flow.conv_in,[2,2]));return l=f(l,o.entry_flow.reduction_block_0,!1),l=f(l,o.entry_flow.reduction_block_1),(0,i.range)(n._numMainBlocks,0,1).forEach(function(e){l=d(l,o.middle_flow["main_block_"+e])}),l=f(l,o.exit_flow.reduction_block),l=r.relu((0,t.depthwiseSeparableConv)(l,o.exit_flow.separable_conv,[1,1]))})},l.prototype.forward=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return t=this.forwardInput,[4,(0,n.toNetInput)(r)];case 1:return[2,t.apply(this,[e.sent()])]}})})},l.prototype.getDefaultModelName=function(){return"tiny_xception_model"},l.prototype.extractParamsFromWeigthMap=function(e){return(0,c.extractParamsFromWeigthMap)(e,this._numMainBlocks)},l.prototype.extractParams=function(e){return(0,u.extractParams)(e,this._numMainBlocks)},l}(o.NeuralNetwork);exports.TinyXception=_;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../common":"gZ1E","../dom":"F9LC","../NeuralNetwork":"bTJB","../ops":"CGLe","../utils":"acHD","./extractParams":"HkMk","./extractParamsFromWeigthMap":"DQqn"}],"SdwC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=r;var e=require("../common");function r(r){var t=[],a=(0,e.extractWeightsFactory)(r),c=a.extractWeights,g=a.getRemainingWeights,n=(0,e.extractFCParamsFactory)(c,t),i=n(512,1,"fc/age"),s=n(512,2,"fc/gender");if(0!==g().length)throw new Error("weights remaing after extract: "+g().length);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}
},{"../common":"gZ1E"}],"OVXL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=r;var e=require("../common");function r(r){var t=[],a=(0,e.extractWeightEntryFactory)(r,t);function s(e){return{weights:a(e+"/weights",2),bias:a(e+"/bias",1)}}var i={fc:{age:s("fc/age"),gender:s("fc/gender")}};return(0,e.disposeUnusedWeightTensors)(r,t),{params:i,paramMappings:t}}
},{"../common":"gZ1E"}],"Ifw1":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gender=void 0,exports.Gender=e,function(e){e.FEMALE="female",e.MALE="male"}(e||(exports.Gender=e={}));
},{}],"o2hs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AgeGenderNet=void 0;var e=require("tslib"),r=f(require("@tensorflow/tfjs-core")),t=require("../common/fullyConnectedLayer"),a=require("../faceProcessor/util"),n=require("../xception/TinyXception"),o=require("./extractParams"),i=require("./extractParamsFromWeigthMap"),s=require("./types"),u=require("../NeuralNetwork"),c=require("../dom");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=a?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}var d=function(u){function p(e){void 0===e&&(e=new n.TinyXception(2));var r=u.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return(0,e.__extends)(p,u),Object.defineProperty(p.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),p.prototype.runNet=function(e){var a=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return r.tidy(function(){var o=e instanceof c.NetInput?a.faceFeatureExtractor.forwardInput(e):e,i=r.avgPool(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1);return{age:(0,t.fullyConnectedLayer)(i,n.fc.age).as1D(),gender:(0,t.fullyConnectedLayer)(i,n.fc.gender)}})},p.prototype.forwardInput=function(e){var t=this;return r.tidy(function(){var a=t.runNet(e),n=a.age,o=a.gender;return{age:n,gender:r.softmax(o)}})},p.prototype.forward=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return t=this.forwardInput,[4,(0,c.toNetInput)(r)];case 1:return[2,t.apply(this,[e.sent()])]}})})},p.prototype.predictAgeAndGender=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var a,n,o,i,u,p,f=this;return(0,e.__generator)(this,function(d){switch(d.label){case 0:return[4,(0,c.toNetInput)(t)];case 1:return a=d.sent(),[4,this.forwardInput(a)];case 2:return n=d.sent(),o=r.unstack(n.age),i=r.unstack(n.gender),u=o.map(function(e,r){return{ageTensor:e,genderTensor:i[r]}}),[4,Promise.all(u.map(function(r){var t=r.ageTensor,a=r.genderTensor;return(0,e.__awaiter)(f,void 0,void 0,function(){var r,n,o,i,u;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,t.data()];case 1:return r=e.sent()[0],[4,a.data()];case 2:return n=e.sent()[0],i=(o=n>.5)?s.Gender.MALE:s.Gender.FEMALE,u=o?n:1-n,t.dispose(),a.dispose(),[2,{age:r,gender:i,genderProbability:u}]}})})}))];case 3:return p=d.sent(),n.age.dispose(),n.gender.dispose(),[2,a.isBatchInput?p:p[0]]}})})},p.prototype.getDefaultModelName=function(){return"age_gender_model"},p.prototype.dispose=function(e){void 0===e&&(e=!0),this.faceFeatureExtractor.dispose(e),u.prototype.dispose.call(this,e)},p.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),t=r.params,a=r.paramMappings;this._params=t,this._paramMappings=a},p.prototype.extractClassifierParams=function(e){return(0,o.extractParams)(e)},p.prototype.extractParamsFromWeigthMap=function(e){var r=(0,a.seperateWeightMaps)(e),t=r.featureExtractorMap,n=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(t),(0,i.extractParamsFromWeigthMap)(n)},p.prototype.extractParams=function(e){var r=e.slice(0,e.length-1539),t=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(r),this.extractClassifierParams(t)},p}(u.NeuralNetwork);exports.AgeGenderNet=d;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../common/fullyConnectedLayer":"E0V1","../faceProcessor/util":"cSOR","../xception/TinyXception":"eiR5","./extractParams":"SdwC","./extractParamsFromWeigthMap":"OVXL","./types":"Ifw1","../NeuralNetwork":"bTJB","../dom":"F9LC"}],"EEkx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AgeGenderNet");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./types");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});
},{"./AgeGenderNet":"o2hs","./types":"Ifw1"}],"Zr6v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceLandmark68NetBase=void 0;var t=require("tslib"),r=s(require("@tensorflow/tfjs-core")),e=require("../classes"),n=require("../classes/FaceLandmarks68"),i=require("../dom"),u=require("../faceProcessor/FaceProcessor"),o=require("../utils");function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=n?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(e,i,u):e[i]=t[i]}return e.default=t,r&&r.set(t,e),e}var c=function(u){function a(){return null!==u&&u.apply(this,arguments)||this}return(0,t.__extends)(a,u),a.prototype.postProcess=function(t,e,n){var i=n.map(function(t){var r=t.width,n=t.height,i=e/Math.max(n,r);return{width:r*i,height:n*i}}),u=i.length;return r.tidy(function(){var n=function(t,e){return r.stack([r.fill([68],t),r.fill([68],e)],1).as2D(1,136).as1D()},o=function(t,r){var e=i[t],n=e.width,u=e.height;return r(n,u)?Math.abs(n-u)/2:0};return t.mul(r.fill([u,136],e)).sub(r.stack(Array.from(Array(u),function(t,r){return n(function(t){return o(t,function(t,r){return t<r})}(r),function(t){return o(t,function(t,r){return r<t})}(r))}))).div(r.stack(Array.from(Array(u),function(t,r){return n(i[r].width,i[r].height)})))})},a.prototype.forwardInput=function(t){var e=this;return r.tidy(function(){var r=e.runNet(t);return e.postProcess(r,t.inputSize,t.inputDimensions.map(function(t){return{height:t[0],width:t[1]}}))})},a.prototype.forward=function(r){return(0,t.__awaiter)(this,void 0,void 0,function(){var e;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return e=this.forwardInput,[4,(0,i.toNetInput)(r)];case 1:return[2,e.apply(this,[t.sent()])]}})})},a.prototype.detectLandmarks=function(u){return(0,t.__awaiter)(this,void 0,void 0,function(){var a,s,c,f=this;return(0,t.__generator)(this,function(p){switch(p.label){case 0:return[4,(0,i.toNetInput)(u)];case 1:return a=p.sent(),s=r.tidy(function(){return r.unstack(f.forwardInput(a))}),[4,Promise.all(s.map(function(r,i){return(0,t.__awaiter)(f,void 0,void 0,function(){var u,s,c,f,p;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return c=(s=Array).from,[4,r.data()];case 1:return u=c.apply(s,[t.sent()]),f=u.filter(function(t,r){return(0,o.isEven)(r)}),p=u.filter(function(t,r){return!(0,o.isEven)(r)}),[2,new n.FaceLandmarks68(Array(68).fill(0).map(function(t,r){return new e.Point(f[r],p[r])}),{height:a.getInputHeight(i),width:a.getInputWidth(i)})]}})})}))];case 2:return c=p.sent(),s.forEach(function(t){return t.dispose()}),[2,a.isBatchInput?c:c[0]]}})})},a.prototype.getClassifierChannelsOut=function(){return 136},a}(u.FaceProcessor);exports.FaceLandmark68NetBase=c;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../classes":"ywa2","../classes/FaceLandmarks68":"ShfV","../dom":"F9LC","../faceProcessor/FaceProcessor":"xqdl","../utils":"acHD"}],"bacu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceLandmark68Net=void 0;var e=require("tslib"),t=require("../faceFeatureExtractor/FaceFeatureExtractor"),r=require("./FaceLandmark68NetBase"),a=function(r){function a(e){return void 0===e&&(e=new t.FaceFeatureExtractor),r.call(this,"FaceLandmark68Net",e)||this}return(0,e.__extends)(a,r),a.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},a.prototype.getClassifierChannelsIn=function(){return 256},a}(r.FaceLandmark68NetBase);exports.FaceLandmark68Net=a;
},{"tslib":"qjU2","../faceFeatureExtractor/FaceFeatureExtractor":"aP46","./FaceLandmark68NetBase":"Zr6v"}],"g0eO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMapTiny=a;var e=require("../common"),r=require("./loadParamsFactory");function a(a){var s=[],n=(0,r.loadParamsFactory)(a,s).extractDenseBlock3Params,t={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return(0,e.disposeUnusedWeightTensors)(a,s),{params:t,paramMappings:s}}
},{"../common":"gZ1E","./loadParamsFactory":"OQsn"}],"SHTC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsTiny=t;var e=require("../common"),r=require("./extractorsFactory");function t(t){var a=[],s=(0,e.extractWeightsFactory)(t),n=s.extractWeights,c=s.getRemainingWeights,i=(0,r.extractorsFactory)(n,a).extractDenseBlock3Params,o=i(3,32,"dense0",!0),g=i(32,64,"dense1"),x=i(64,128,"dense2");if(0!==c().length)throw new Error("weights remaing after extract: "+c().length);return{paramMappings:a,params:{dense0:o,dense1:g,dense2:x}}}
},{"../common":"gZ1E","./extractorsFactory":"gRcI"}],"aZ30":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyFaceFeatureExtractor=void 0;var e=require("tslib"),r=s(require("@tensorflow/tfjs-core")),t=require("../dom"),n=require("../NeuralNetwork"),o=require("../ops"),a=require("./denseBlock"),i=require("./extractParamsFromWeigthMapTiny"),u=require("./extractParamsTiny");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}var f=function(n){function c(){return n.call(this,"TinyFaceFeatureExtractor")||this}return(0,e.__extends)(c,n),c.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return r.tidy(function(){var n=e.toBatchTensor(112,!0),i=(0,o.normalize)(n,[122.782,117.001,104.298]).div(r.scalar(255)),u=(0,a.denseBlock3)(i,t.dense0,!0);return u=(0,a.denseBlock3)(u,t.dense1),u=(0,a.denseBlock3)(u,t.dense2),u=r.avgPool(u,[14,14],[2,2],"valid")})},c.prototype.forward=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=this.forwardInput,[4,(0,t.toNetInput)(r)];case 1:return[2,n.apply(this,[e.sent()])]}})})},c.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},c.prototype.extractParamsFromWeigthMap=function(e){return(0,i.extractParamsFromWeigthMapTiny)(e)},c.prototype.extractParams=function(e){return(0,u.extractParamsTiny)(e)},c}(n.NeuralNetwork);exports.TinyFaceFeatureExtractor=f;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../NeuralNetwork":"bTJB","../ops":"CGLe","./denseBlock":"RQeH","./extractParamsFromWeigthMapTiny":"g0eO","./extractParamsTiny":"SHTC"}],"TU0Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceLandmark68TinyNet=void 0;var e=require("tslib"),t=require("../faceFeatureExtractor/TinyFaceFeatureExtractor"),r=require("./FaceLandmark68NetBase"),a=function(r){function a(e){return void 0===e&&(e=new t.TinyFaceFeatureExtractor),r.call(this,"FaceLandmark68TinyNet",e)||this}return(0,e.__extends)(a,r),a.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},a.prototype.getClassifierChannelsIn=function(){return 128},a}(r.FaceLandmark68NetBase);exports.FaceLandmark68TinyNet=a;
},{"tslib":"qjU2","../faceFeatureExtractor/TinyFaceFeatureExtractor":"aZ30","./FaceLandmark68NetBase":"Zr6v"}],"DBMC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={FaceLandmarkNet:!0};exports.FaceLandmarkNet=void 0;var t=require("tslib"),r=require("./FaceLandmark68Net");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var a=require("./FaceLandmark68TinyNet");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var n=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r}(r.FaceLandmark68Net);exports.FaceLandmarkNet=n;
},{"tslib":"qjU2","./FaceLandmark68Net":"bacu","./FaceLandmark68TinyNet":"TU0Q"}],"O86J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scale=n;var e=r(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function n(t,r){return e.add(e.mul(t,r.weights),r.biases)}
},{"@tensorflow/tfjs-core":"FZBM"}],"lff0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv=u,exports.convNoRelu=c,exports.convDown=i;var e=n(require("@tensorflow/tfjs-core")),r=require("./scaleLayer");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=o?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(n,u,c):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function o(t,n,o,u,c){void 0===c&&(c="same");var i=n.conv,f=i.filters,a=i.bias,s=e.conv2d(t,f,o,c);return s=e.add(s,a),s=(0,r.scale)(s,n.scale),u?e.relu(s):s}function u(e,r){return o(e,r,[1,1],!0)}function c(e,r){return o(e,r,[1,1],!1)}function i(e,r){return o(e,r,[2,2],!0,"valid")}
},{"@tensorflow/tfjs-core":"FZBM","./scaleLayer":"O86J"}],"xFQc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=c;var n=o(require("@tensorflow/tfjs-core")),t=require("../common"),e=require("../utils");function r(){if("function"!=typeof WeakMap)return null;var n=new WeakMap;return r=function(){return n},n}function o(n){if(n&&n.__esModule)return n;if(null===n||"object"!=typeof n&&"function"!=typeof n)return{default:n};var t=r();if(t&&t.has(n))return t.get(n);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var c=o?Object.getOwnPropertyDescriptor(n,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=n[a]}return e.default=n,t&&t.set(n,e),e}function a(t,r){function o(o,a,c,i){var s=function(r,o,a){var c=t(r),i=c.length/(o*a*a);if((0,e.isFloat)(i))throw new Error("depth has to be an integer: "+i+", weights.length: "+c.length+", numFilters: "+o+", filterSize: "+a);return n.tidy(function(){return n.transpose(n.tensor4d(c,[o,i,a,a]),[2,3,1,0])})}(o,a,c),u=n.tensor1d(t(a));return r.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:s,bias:u}}function a(e,a,c,i){return{conv:o(e,a,c,i+"/conv"),scale:function(e,o){var a=n.tensor1d(t(e)),c=n.tensor1d(t(e));return r.push({paramPath:o+"/weights"},{paramPath:o+"/biases"}),{weights:a,biases:c}}(a,i+"/scale")}}return{extractConvLayerParams:a,extractResidualLayerParams:function(n,t,e,r,o){return void 0===o&&(o=!1),{conv1:a((o?.5:1)*n,t,e,r+"/conv1"),conv2:a(n,t,e,r+"/conv2")}}}}function c(e){var r=(0,t.extractWeightsFactory)(e),o=r.extractWeights,c=r.getRemainingWeights,i=[],s=a(o,i),u=s.extractConvLayerParams,v=s.extractResidualLayerParams,f=u(4704,32,7,"conv32_down"),_=v(9216,32,3,"conv32_1"),p=v(9216,32,3,"conv32_2"),l=v(9216,32,3,"conv32_3"),d=v(36864,64,3,"conv64_down",!0),h=v(36864,64,3,"conv64_1"),w=v(36864,64,3,"conv64_2"),g=v(36864,64,3,"conv64_3"),m=v(147456,128,3,"conv128_down",!0),y=v(147456,128,3,"conv128_1"),P=v(147456,128,3,"conv128_2"),b=v(589824,256,3,"conv256_down",!0),x=v(589824,256,3,"conv256_1"),O=v(589824,256,3,"conv256_2"),j=v(589824,256,3,"conv256_down_out"),M=n.tidy(function(){return n.transpose(n.tensor2d(o(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==c().length)throw new Error("weights remaing after extract: "+c().length);return{params:{conv32_down:f,conv32_1:_,conv32_2:p,conv32_3:l,conv64_down:d,conv64_1:h,conv64_2:w,conv64_3:g,conv128_down:m,conv128_1:y,conv128_2:P,conv256_down:b,conv256_1:x,conv256_2:O,conv256_down_out:j,fc:M},paramMappings:i}}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E","../utils":"acHD"}],"aTVl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=e;var n=require("../common"),o=require("../utils");function c(o,c){var e=(0,n.extractWeightEntryFactory)(o,c);function r(n){return{conv:{filters:e(n+"/conv/filters",4),bias:e(n+"/conv/bias",1)},scale:function(n){return{weights:e(n+"/scale/weights",1),biases:e(n+"/scale/biases",1)}}(n)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(n){return{conv1:r(n+"/conv1"),conv2:r(n+"/conv2")}}}}function e(e){var r=[],a=c(e,r),t=a.extractConvLayerParams,v=a.extractResidualLayerParams,s=t("conv32_down"),_=v("conv32_1"),i=v("conv32_2"),u=v("conv32_3"),d=v("conv64_down"),w=v("conv64_1"),f=v("conv64_2"),p=v("conv64_3"),h=v("conv128_down"),l=v("conv128_1"),m=v("conv128_2"),x=v("conv256_down"),g=v("conv256_1"),P=v("conv256_2"),y=v("conv256_down_out"),b=e.fc;if(r.push({originalPath:"fc",paramPath:"fc"}),!(0,o.isTensor2D)(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var L={conv32_down:s,conv32_1:_,conv32_2:i,conv32_3:u,conv64_down:d,conv64_1:w,conv64_2:f,conv64_3:p,conv128_down:h,conv128_1:l,conv128_2:m,conv256_down:x,conv256_1:g,conv256_2:P,conv256_down_out:y,fc:b};return(0,n.disposeUnusedWeightTensors)(e,r),{params:L,paramMappings:r}}
},{"../common":"gZ1E","../utils":"acHD"}],"o0DO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.residual=a,exports.residualDown=c;var e=require("tslib"),r=n(require("@tensorflow/tfjs-core")),t=require("./convLayer");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=n?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(t,a,c):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function a(e,o){var n=(0,t.conv)(e,o.conv1);return n=(0,t.convNoRelu)(n,o.conv2),n=r.add(n,e),n=r.relu(n)}function c(o,n){var a=(0,t.convDown)(o,n.conv1);a=(0,t.convNoRelu)(a,n.conv2);var c=r.avgPool(o,2,2,"valid"),s=r.zeros(c.shape),u=c.shape[3]!==a.shape[3];if(c.shape[1]!==a.shape[1]||c.shape[2]!==a.shape[2]){var p=(0,e.__spreadArrays)(a.shape);p[1]=1;var i=r.zeros(p);a=r.concat([a,i],1);var v=(0,e.__spreadArrays)(a.shape);v[2]=1;var f=r.zeros(v);a=r.concat([a,f],2)}return c=u?r.concat([c,s],3):c,a=r.add(c,a),a=r.relu(a)}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","./convLayer":"lff0"}],"A8XY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceRecognitionNet=void 0;var e=require("tslib"),r=l(require("@tensorflow/tfjs-core")),t=require("../dom"),n=require("../NeuralNetwork"),o=require("../ops"),a=require("./convLayer"),i=require("./extractParams"),u=require("./extractParamsFromWeigthMap"),c=require("./residualLayer");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}var d=function(n){function s(){return n.call(this,"FaceRecognitionNet")||this}return(0,e.__extends)(s,n),s.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return r.tidy(function(){var n=e.toBatchTensor(150,!0).toFloat(),i=(0,o.normalize)(n,[122.782,117.001,104.298]).div(r.scalar(256)),u=(0,a.convDown)(i,t.conv32_down);u=r.maxPool(u,3,2,"valid"),u=(0,c.residual)(u,t.conv32_1),u=(0,c.residual)(u,t.conv32_2),u=(0,c.residual)(u,t.conv32_3),u=(0,c.residualDown)(u,t.conv64_down),u=(0,c.residual)(u,t.conv64_1),u=(0,c.residual)(u,t.conv64_2),u=(0,c.residual)(u,t.conv64_3),u=(0,c.residualDown)(u,t.conv128_down),u=(0,c.residual)(u,t.conv128_1),u=(0,c.residual)(u,t.conv128_2),u=(0,c.residualDown)(u,t.conv256_down),u=(0,c.residual)(u,t.conv256_1),u=(0,c.residual)(u,t.conv256_2);var s=(u=(0,c.residualDown)(u,t.conv256_down_out)).mean([1,2]);return r.matMul(s,t.fc)})},s.prototype.forward=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=this.forwardInput,[4,(0,t.toNetInput)(r)];case 1:return[2,n.apply(this,[e.sent()])]}})})},s.prototype.computeFaceDescriptor=function(n){return(0,e.__awaiter)(this,void 0,void 0,function(){var o,a,i,u=this;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,t.toNetInput)(n)];case 1:return o=e.sent(),a=r.tidy(function(){return r.unstack(u.forwardInput(o))}),[4,Promise.all(a.map(function(e){return e.data()}))];case 2:return i=e.sent(),a.forEach(function(e){return e.dispose()}),[2,o.isBatchInput?i:i[0]]}})})},s.prototype.getDefaultModelName=function(){return"face_recognition_model"},s.prototype.extractParamsFromWeigthMap=function(e){return(0,u.extractParamsFromWeigthMap)(e)},s.prototype.extractParams=function(e){return(0,i.extractParams)(e)},s}(n.NeuralNetwork);exports.FaceRecognitionNet=d;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../NeuralNetwork":"bTJB","../ops":"CGLe","./convLayer":"lff0","./extractParams":"xFQc","./extractParamsFromWeigthMap":"aTVl","./residualLayer":"o0DO"}],"bYao":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createFaceRecognitionNet:!0};exports.createFaceRecognitionNet=r;var t=require("./FaceRecognitionNet");function r(e){var r=new t.FaceRecognitionNet;return r.extractWeights(e),r}Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});
},{"./FaceRecognitionNet":"A8XY"}],"VXGS":[function(require,module,exports) {
"use strict";function e(e,t){var r={descriptor:t};return Object.assign({},e,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.extendWithFaceDescriptor=e;
},{}],"rdnN":[function(require,module,exports) {
"use strict";function e(e){return"number"==typeof e.age}function t(e,t){var r={age:t};return Object.assign({},e,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWithAge=e,exports.extendWithAge=t;
},{}],"cjMs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isWithGender=t,exports.extendWithGender=i;var e=require("../ageGenderNet/types"),r=require("../utils");function t(t){return(t.gender===e.Gender.MALE||t.gender===e.Gender.FEMALE)&&(0,r.isValidProbablitiy)(t.genderProbability)}function i(e,r,t){var i={gender:r,genderProbability:t};return Object.assign({},e,i)}
},{"../ageGenderNet/types":"Ifw1","../utils":"acHD"}],"bBQL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./WithFaceDescriptor");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./WithFaceDetection");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./WithFaceExpressions");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./WithFaceLandmarks");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./WithAge");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./WithGender");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});
},{"./WithFaceDescriptor":"VXGS","./WithFaceDetection":"ufye","./WithFaceExpressions":"KSS7","./WithFaceLandmarks":"bw0I","./WithAge":"rdnN","./WithGender":"cjMs"}],"Idgp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MtcnnOptions=void 0;var e=function(){function e(e){var t=void 0===e?{}:e,r=t.minFaceSize,s=t.scaleFactor,o=t.maxNumScales,n=t.scoreThresholds,a=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=s||.709,this._maxNumScales=o||10,this._scoreThresholds=n||[.6,.7,.7],this._scaleSteps=a,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!=typeof e}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!=typeof e})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();exports.MtcnnOptions=e;
},{}],"gCnX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=c;var r=t(require("@tensorflow/tfjs-core")),e=require("../common");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function t(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)){var i=n?Object.getOwnPropertyDescriptor(r,c):null;i&&(i.get||i.set)?Object.defineProperty(t,c,i):t[c]=r[c]}return t.default=r,e&&e.set(r,t),t}function n(e,o){function t(t,n,c,i,_){var a=r.tensor4d(e(t*n*c*c),[c,c,t,n]),p=r.tensor1d(e(n));return o.push({paramPath:i+"/filters"},{paramPath:i+"/"+(_?"batch_norm_offset":"bias")}),{filters:a,bias:p}}function n(r,e,o,n){var c=t(r,e,o,n,!0);return{filters:c.filters,batch_norm_offset:c.bias}}function c(t,c,i){return{depthwise_conv:function(t,n){var c=r.tensor4d(e(9*t),[3,3,t,1]),i=r.tensor1d(e(t)),_=r.tensor1d(e(t)),a=r.tensor1d(e(t)),p=r.tensor1d(e(t));return o.push({paramPath:n+"/filters"},{paramPath:n+"/batch_norm_scale"},{paramPath:n+"/batch_norm_offset"},{paramPath:n+"/batch_norm_mean"},{paramPath:n+"/batch_norm_variance"}),{filters:c,batch_norm_scale:i,batch_norm_offset:_,batch_norm_mean:a,batch_norm_variance:p}}(t,i+"/depthwise_conv"),pointwise_conv:n(t,c,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:n(3,32,3,"mobilenetv1/conv_0"),conv_1:c(32,64,"mobilenetv1/conv_1"),conv_2:c(64,128,"mobilenetv1/conv_2"),conv_3:c(128,128,"mobilenetv1/conv_3"),conv_4:c(128,256,"mobilenetv1/conv_4"),conv_5:c(256,256,"mobilenetv1/conv_5"),conv_6:c(256,512,"mobilenetv1/conv_6"),conv_7:c(512,512,"mobilenetv1/conv_7"),conv_8:c(512,512,"mobilenetv1/conv_8"),conv_9:c(512,512,"mobilenetv1/conv_9"),conv_10:c(512,512,"mobilenetv1/conv_10"),conv_11:c(512,512,"mobilenetv1/conv_11"),conv_12:c(512,1024,"mobilenetv1/conv_12"),conv_13:c(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:n(1024,256,1,"prediction_layer/conv_0"),conv_1:n(256,512,3,"prediction_layer/conv_1"),conv_2:n(512,128,1,"prediction_layer/conv_2"),conv_3:n(128,256,3,"prediction_layer/conv_3"),conv_4:n(256,128,1,"prediction_layer/conv_4"),conv_5:n(128,256,3,"prediction_layer/conv_5"),conv_6:n(256,64,1,"prediction_layer/conv_6"),conv_7:n(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:t(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:t(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:t(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:t(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:t(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:t(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:t(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:t(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:t(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:t(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:t(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:t(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function c(o){var t=[],c=(0,e.extractWeightsFactory)(o),i=c.extractWeights,_=c.getRemainingWeights,a=n(i,t),p=a.extractMobilenetV1Params,d=a.extractPredictionLayerParams,s=p(),l=d(),v={extra_dim:r.tensor3d(i(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==_().length)throw new Error("weights remaing after extract: "+_().length);return{params:{mobilenetv1:s,prediction_layer:l,output_layer:v},paramMappings:t}}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E"}],"bPy0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=t;var e=require("../common"),o=require("../utils");function r(o,r){var t=(0,e.extractWeightEntryFactory)(o,r);function n(e,o,r){return{filters:t(e+"/Conv2d_"+o+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:t(e+"/Conv2d_"+o+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function i(e){var o="mobilenetv1/conv_"+e,r="MobilenetV1/Conv2d_"+e+"_depthwise",i=o+"/depthwise_conv",c=o+"/pointwise_conv";return{depthwise_conv:{filters:t(r+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:t(r+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:t(r+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:t(r+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:t(r+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:n("MobilenetV1",e,c)}}function c(e,o){return{filters:t(e+"/weights",4,o+"/filters"),bias:t(e+"/biases",1,o+"/bias")}}function _(e){return{box_encoding_predictor:c("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:c("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:n("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:n("Prediction",0,"prediction_layer/conv_0"),conv_1:n("Prediction",1,"prediction_layer/conv_1"),conv_2:n("Prediction",2,"prediction_layer/conv_2"),conv_3:n("Prediction",3,"prediction_layer/conv_3"),conv_4:n("Prediction",4,"prediction_layer/conv_4"),conv_5:n("Prediction",5,"prediction_layer/conv_5"),conv_6:n("Prediction",6,"prediction_layer/conv_6"),conv_7:n("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:_(0),box_predictor_1:_(1),box_predictor_2:_(2),box_predictor_3:_(3),box_predictor_4:_(4),box_predictor_5:_(5)}}}}function t(t){var n=[],i=r(t,n),c=i.extractMobilenetV1Params,_=i.extractPredictionLayerParams,a=t["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!(0,o.isTensor3D)(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var d={mobilenetv1:c(),prediction_layer:_(),output_layer:{extra_dim:a}};return(0,e.disposeUnusedWeightTensors)(t,n),{params:d,paramMappings:n}}
},{"../common":"gZ1E","../utils":"acHD"}],"XeL0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pointwiseConvLayer=n;var e=r(require("@tensorflow/tfjs-core"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function n(t,r,n){return e.tidy(function(){var o=e.conv2d(t,r.filters,n,"same");return o=e.add(o,r.batch_norm_offset),e.clipByValue(o,0,6)})}
},{"@tensorflow/tfjs-core":"FZBM"}],"VwkV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mobileNetV1=u;var e=r(require("@tensorflow/tfjs-core")),n=require("./pointwiseConvLayer");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t();if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var i=o?Object.getOwnPropertyDescriptor(e,c):null;i&&(i.get||i.set)?Object.defineProperty(r,c,i):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}var o=.0010000000474974513;function c(n,t,r){return e.tidy(function(){var c=e.depthwiseConv2d(n,t.filters,r,"same");return c=e.batchNorm(c,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,o),e.clipByValue(c,0,6)})}function i(e){return[2,4,6,12].some(function(n){return n===e})?[2,2]:[1,1]}function u(t,r){return e.tidy(function(){var e=null,o=(0,n.pointwiseConvLayer)(t,r.conv_0,[2,2]);if([r.conv_1,r.conv_2,r.conv_3,r.conv_4,r.conv_5,r.conv_6,r.conv_7,r.conv_8,r.conv_9,r.conv_10,r.conv_11,r.conv_12,r.conv_13].forEach(function(t,r){var u=r+1,a=i(u);o=c(o,t.depthwise_conv,a),o=(0,n.pointwiseConvLayer)(o,t.pointwise_conv,[1,1]),11===u&&(e=o)}),null===e)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:o,conv11:e}})}
},{"@tensorflow/tfjs-core":"FZBM","./pointwiseConvLayer":"XeL0"}],"di5l":[function(require,module,exports) {
"use strict";function r(r,a,n,e,o){var h=r.shape[0],i=Math.min(n,h),c=a.map(function(r,t){return{score:r,boxIndex:t}}).filter(function(r){return r.score>o}).sort(function(r,t){return t.score-r.score}),s=[];return c.forEach(function(a){if(!(s.length>=i)){for(var n=a.score,h=s.length-1;h>=0;--h){var c=t(r,a.boxIndex,s[h]);if(0!==c&&(a.score*=c<=e?1:0,a.score<=o))break}n===a.score&&s.push(a.boxIndex)}}),s}function t(r,t,a){var n=r.arraySync(),e=Math.min(n[t][0],n[t][2]),o=Math.min(n[t][1],n[t][3]),h=Math.max(n[t][0],n[t][2]),i=Math.max(n[t][1],n[t][3]),c=Math.min(n[a][0],n[a][2]),s=Math.min(n[a][1],n[a][3]),u=Math.max(n[a][0],n[a][2]),x=Math.max(n[a][1],n[a][3]),M=(h-e)*(i-o),m=(u-c)*(x-s);if(M<=0||m<=0)return 0;var f=Math.max(e,c),p=Math.max(o,s),v=Math.min(h,u),b=Math.min(i,x),d=Math.max(v-f,0)*Math.max(b-p,0);return d/(M+m-d)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=r;
},{}],"WWcN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outputLayer=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=s?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}function a(r){var t=e.unstack(e.transpose(r,[1,0])),a=[e.sub(t[2],t[0]),e.sub(t[3],t[1])];return{sizes:a,centers:[e.add(t[0],e.div(a[0],e.scalar(2))),e.add(t[1],e.div(a[1],e.scalar(2)))]}}function s(r,t){var s=a(r),n=s.sizes,u=s.centers,c=e.unstack(e.transpose(t,[1,0])),i=e.div(e.mul(e.exp(e.div(c[2],e.scalar(5))),n[0]),e.scalar(2)),o=e.add(e.mul(e.div(c[0],e.scalar(10)),n[0]),u[0]),d=e.div(e.mul(e.exp(e.div(c[3],e.scalar(5))),n[1]),e.scalar(2)),p=e.add(e.mul(e.div(c[1],e.scalar(10)),n[1]),u[1]);return e.transpose(e.stack([e.sub(o,i),e.sub(p,d),e.add(o,i),e.add(p,d)]),[1,0])}function n(r,t,a){return e.tidy(function(){var n=r.shape[0],u=s(e.reshape(e.tile(a.extra_dim,[n,1,1]),[-1,4]),e.reshape(r,[-1,4]));u=e.reshape(u,[n,u.shape[0]/n,4]);var c=e.sigmoid(e.slice(t,[0,0,1],[-1,-1,-1])),i=e.slice(c,[0,0,0],[-1,-1,1]);return i=e.reshape(i,[n,i.shape[1]]),{boxes:e.unstack(u),scores:e.unstack(i)}})}
},{"@tensorflow/tfjs-core":"FZBM"}],"QHbj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boxPredictionLayer=o;var e=n(require("@tensorflow/tfjs-core")),r=require("../common");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var c=o?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function o(t,n){return e.tidy(function(){var o=t.shape[0];return{boxPredictionEncoding:e.reshape((0,r.convLayer)(t,n.box_encoding_predictor),[o,-1,1,4]),classPrediction:e.reshape((0,r.convLayer)(t,n.class_predictor),[o,-1,3])}})}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E"}],"vP5J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.predictionLayer=t;var e=n(require("@tensorflow/tfjs-core")),o=require("./boxPredictionLayer"),r=require("./pointwiseConvLayer");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=i();if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var c=n?Object.getOwnPropertyDescriptor(e,t):null;c&&(c.get||c.set)?Object.defineProperty(r,t,c):r[t]=e[t]}return r.default=e,o&&o.set(e,r),r}function t(i,n,t){return e.tidy(function(){var c=(0,r.pointwiseConvLayer)(i,t.conv_0,[1,1]),a=(0,r.pointwiseConvLayer)(c,t.conv_1,[2,2]),d=(0,r.pointwiseConvLayer)(a,t.conv_2,[1,1]),s=(0,r.pointwiseConvLayer)(d,t.conv_3,[2,2]),p=(0,r.pointwiseConvLayer)(s,t.conv_4,[1,1]),u=(0,r.pointwiseConvLayer)(p,t.conv_5,[2,2]),y=(0,r.pointwiseConvLayer)(u,t.conv_6,[1,1]),b=(0,r.pointwiseConvLayer)(y,t.conv_7,[2,2]),P=(0,o.boxPredictionLayer)(n,t.box_predictor_0),v=(0,o.boxPredictionLayer)(i,t.box_predictor_1),_=(0,o.boxPredictionLayer)(a,t.box_predictor_2),f=(0,o.boxPredictionLayer)(s,t.box_predictor_3),x=(0,o.boxPredictionLayer)(u,t.box_predictor_4),l=(0,o.boxPredictionLayer)(b,t.box_predictor_5);return{boxPredictions:e.concat([P.boxPredictionEncoding,v.boxPredictionEncoding,_.boxPredictionEncoding,f.boxPredictionEncoding,x.boxPredictionEncoding,l.boxPredictionEncoding],1),classPredictions:e.concat([P.classPrediction,v.classPrediction,_.classPrediction,f.classPrediction,x.classPrediction,l.classPrediction],1)}})}
},{"@tensorflow/tfjs-core":"FZBM","./boxPredictionLayer":"QHbj","./pointwiseConvLayer":"XeL0"}],"sbr6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SsdMobilenetv1Options=void 0;var e=function(){function e(e){var n=void 0===e?{}:e,t=n.minConfidence,i=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=t||.5,this._maxResults=i||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}();exports.SsdMobilenetv1Options=e;
},{}],"YH6x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SsdMobilenetv1=void 0;var e=require("tslib"),t=h(require("@tensorflow/tfjs-core")),r=require("../classes"),n=require("../classes/FaceDetection"),o=require("../dom"),i=require("../NeuralNetwork"),a=require("./extractParams"),u=require("./extractParamsFromWeigthMap"),s=require("./mobileNetV1"),c=require("./nonMaxSuppression"),p=require("./outputLayer"),l=require("./predictionLayer"),f=require("./SsdMobilenetv1Options");function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var m=function(i){function d(){return i.call(this,"SsdMobilenetv1")||this}return(0,e.__extends)(d,i),d.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return t.tidy(function(){var n=e.toBatchTensor(512,!1).toFloat(),o=t.sub(t.mul(n,t.scalar(.007843137718737125)),t.scalar(1)),i=(0,s.mobileNetV1)(o,r.mobilenetv1),a=(0,l.predictionLayer)(i.out,i.conv11,r.prediction_layer),u=a.boxPredictions,c=a.classPredictions;return(0,p.outputLayer)(u,c,r.output_layer)})},d.prototype.forward=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return r=this.forwardInput,[4,(0,o.toNetInput)(t)];case 1:return[2,r.apply(this,[e.sent()])]}})})},d.prototype.locateFaces=function(t,i){return void 0===i&&(i={}),(0,e.__awaiter)(this,void 0,void 0,function(){var a,u,s,p,l,d,h,m,v,y,b,w,M,_,g,x,P,q,O,S;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return a=new f.SsdMobilenetv1Options(i),u=a.maxResults,s=a.minConfidence,[4,(0,o.toNetInput)(t)];case 1:for(p=e.sent(),l=this.forwardInput(p),d=l.boxes,h=l.scores,m=d[0],v=h[0],y=1;y<d.length;y++)d[y].dispose(),h[y].dispose();return M=(w=Array).from,[4,v.data()];case 2:return b=M.apply(w,[e.sent()]),.5,_=(0,c.nonMaxSuppression)(m,b,u,.5,s),g=p.getReshapedInputDimensions(0),x=p.inputSize,P=x/g.width,q=x/g.height,O=m.arraySync(),S=_.map(function(e){var t=[Math.max(0,O[e][0]),Math.min(1,O[e][2])].map(function(e){return e*q}),o=t[0],i=t[1],a=[Math.max(0,O[e][1]),Math.min(1,O[e][3])].map(function(e){return e*P}),u=a[0],s=a[1];return new n.FaceDetection(b[e],new r.Rect(u,o,s-u,i-o),{height:p.getInputHeight(0),width:p.getInputWidth(0)})}),m.dispose(),v.dispose(),[2,S]}})})},d.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},d.prototype.extractParamsFromWeigthMap=function(e){return(0,u.extractParamsFromWeigthMap)(e)},d.prototype.extractParams=function(e){return(0,a.extractParams)(e)},d}(i.NeuralNetwork);exports.SsdMobilenetv1=m;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../classes":"ywa2","../classes/FaceDetection":"EHzx","../dom":"F9LC","../NeuralNetwork":"bTJB","./extractParams":"gCnX","./extractParamsFromWeigthMap":"bPy0","./mobileNetV1":"VwkV","./nonMaxSuppression":"di5l","./outputLayer":"WWcN","./predictionLayer":"vP5J","./SsdMobilenetv1Options":"sbr6"}],"pMO5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createSsdMobilenetv1:!0,createFaceDetectionNet:!0,FaceDetectionNet:!0};exports.createSsdMobilenetv1=o,exports.createFaceDetectionNet=c,exports.FaceDetectionNet=void 0;var t=require("tslib"),r=require("./SsdMobilenetv1");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var n=require("./SsdMobilenetv1Options");function o(e){var t=new r.SsdMobilenetv1;return t.extractWeights(e),t}function c(e){return o(e)}Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var i=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r}(r.SsdMobilenetv1);exports.FaceDetectionNet=i;
},{"tslib":"qjU2","./SsdMobilenetv1":"YH6x","./SsdMobilenetv1Options":"sbr6"}],"L1kx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_MODEL_NAME_SEPARABLE_CONV=exports.DEFAULT_MODEL_NAME=exports.MEAN_RGB_SEPARABLE=exports.BOX_ANCHORS_SEPARABLE=exports.BOX_ANCHORS=exports.IOU_THRESHOLD=void 0;var e=require("../classes"),o=.4;exports.IOU_THRESHOLD=o;var _=[new e.Point(.738768,.874946),new e.Point(2.42204,2.65704),new e.Point(4.30971,7.04493),new e.Point(10.246,4.59428),new e.Point(12.6868,11.8741)];exports.BOX_ANCHORS=_;var t=[new e.Point(1.603231,2.094468),new e.Point(6.041143,7.080126),new e.Point(2.882459,3.518061),new e.Point(4.266906,5.178857),new e.Point(9.041765,10.66308)];exports.BOX_ANCHORS_SEPARABLE=t;var E=[117.001,114.697,97.404];exports.MEAN_RGB_SEPARABLE=E;var A="tiny_yolov2_model";exports.DEFAULT_MODEL_NAME=A;var r="tiny_yolov2_separable_conv_model";exports.DEFAULT_MODEL_NAME_SEPARABLE_CONV=r;
},{"../classes":"ywa2"}],"Zips":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateConfig=e;var r=function(r){return"number"==typeof r};function e(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!r(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(r){return"string"==typeof r}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(r){return r||{}}).every(function(e){return r(e.x)&&r(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(r)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}
},{}],"MHFK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leaky=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(r){return e.tidy(function(){var t=e.mul(r,e.scalar(.10000000149011612));return e.add(e.relu(e.sub(r,t)),t)})}
},{"@tensorflow/tfjs-core":"FZBM"}],"MPO1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convWithBatchNorm=o;var e=n(require("@tensorflow/tfjs-core")),r=require("./leaky");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function o(t,n){return e.tidy(function(){var o=e.pad(t,[[0,0],[1,1],[1,1],[0,0]]);return o=e.conv2d(o,n.conv.filters,[1,1],"valid"),o=e.sub(o,n.bn.sub),o=e.mul(o,n.bn.truediv),o=e.add(o,n.conv.bias),(0,r.leaky)(o)})}
},{"@tensorflow/tfjs-core":"FZBM","./leaky":"MHFK"}],"OeRT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseSeparableConv=o;var e=n(require("@tensorflow/tfjs-core")),r=require("./leaky");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function o(t,n){return e.tidy(function(){var o=e.pad(t,[[0,0],[1,1],[1,1],[0,0]]);return o=e.separableConv2d(o,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),o=e.add(o,n.bias),(0,r.leaky)(o)})}
},{"@tensorflow/tfjs-core":"FZBM","./leaky":"MHFK"}],"ZSgS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=v;var r=a(require("@tensorflow/tfjs-core")),t=require("../common"),e=require("../common/extractSeparableConvParamsFactory"),n=require("../common/extractWeightsFactory");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o){var a=(0,t.extractConvParamsFactory)(n,o);var c=(0,e.extractSeparableConvParamsFactory)(n,o);return{extractConvParams:a,extractConvWithBatchNormParams:function(t,e,c){return{conv:a(t,e,3,c+"/conv"),bn:function(t,e){var a=r.tensor1d(n(t)),c=r.tensor1d(n(t));return o.push({paramPath:e+"/sub"},{paramPath:e+"/truediv"}),{sub:a,truediv:c}}(e,c+"/bn")}},extractSeparableConvParams:c}}function v(r,t,e,o){var a,v=(0,n.extractWeightsFactory)(r),i=v.extractWeights,s=v.getRemainingWeights,u=[],p=c(i,u),f=p.extractConvParams,m=p.extractConvWithBatchNormParams,l=p.extractSeparableConvParams;if(t.withSeparableConvs){var h=o[0],P=o[1],b=o[2],x=o[3],y=o[4],g=o[5],d=o[6],C=o[7],w=o[8];a={conv0:t.isFirstLayerConv2d?f(h,P,3,"conv0"):l(h,P,"conv0"),conv1:l(P,b,"conv1"),conv2:l(b,x,"conv2"),conv3:l(x,y,"conv3"),conv4:l(y,g,"conv4"),conv5:l(g,d,"conv5"),conv6:C?l(d,C,"conv6"):void 0,conv7:w?l(C,w,"conv7"):void 0,conv8:f(w||C||d,5*e,1,"conv8")}}else{h=o[0],P=o[1],b=o[2],x=o[3],y=o[4],g=o[5],d=o[6],C=o[7],w=o[8];a={conv0:m(h,P,"conv0"),conv1:m(P,b,"conv1"),conv2:m(b,x,"conv2"),conv3:m(x,y,"conv3"),conv4:m(y,g,"conv4"),conv5:m(g,d,"conv5"),conv6:m(d,C,"conv6"),conv7:m(C,w,"conv7"),conv8:f(w,5*e,1,"conv8")}}if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:a,paramMappings:u}}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E","../common/extractSeparableConvParamsFactory":"J4Yx","../common/extractWeightsFactory":"fHbF"}],"Yu0Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=e;var n=require("../common/disposeUnusedWeightTensors"),o=require("../common/extractSeparableConvParamsFactory"),r=require("../common/extractWeightEntryFactory");function c(n,c){var e=(0,r.extractWeightEntryFactory)(n,c);function t(n){return{filters:e(n+"/filters",4),bias:e(n+"/bias",1)}}return{extractConvParams:t,extractConvWithBatchNormParams:function(n){return{conv:t(n+"/conv"),bn:function(n){return{sub:e(n+"/sub",1),truediv:e(n+"/truediv",1)}}(n+"/bn")}},extractSeparableConvParams:(0,o.loadSeparableConvParamsFactory)(e)}}function e(o,r){var e,t=[],a=c(o,t),v=a.extractConvParams,s=a.extractConvWithBatchNormParams,i=a.extractSeparableConvParams;if(r.withSeparableConvs){var u=r.filterSizes&&r.filterSizes.length||9;e={conv0:r.isFirstLayerConv2d?v("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:v("conv8")}}else e={conv0:s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:s("conv6"),conv7:s("conv7"),conv8:v("conv8")};return(0,n.disposeUnusedWeightTensors)(o,t),{params:e,paramMappings:t}}
},{"../common/disposeUnusedWeightTensors":"cQ29","../common/extractSeparableConvParamsFactory":"J4Yx","../common/extractWeightEntryFactory":"jLb1"}],"k8q6":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyYolov2Options=exports.TinyYolov2SizeType=void 0,exports.TinyYolov2SizeType=e,function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(e||(exports.TinyYolov2SizeType=e={}));var o=function(){function e(e){var o=void 0===e?{}:e,t=o.inputSize,i=o.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=t||416,this._scoreThreshold=i||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}();exports.TinyYolov2Options=o;
},{}],"Nr16":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyYolov2Base=void 0;var e=require("tslib"),t=b(require("@tensorflow/tfjs-core")),r=require("../classes/BoundingBox"),o=require("../classes/ObjectDetection"),n=require("../common"),i=require("../dom"),a=require("../NeuralNetwork"),s=require("../ops"),c=require("../ops/nonMaxSuppression"),u=require("../ops/normalize"),l=require("./config"),p=require("./convWithBatchNorm"),h=require("./depthwiseSeparableConv"),f=require("./extractParams"),v=require("./extractParamsFromWeigthMap"),d=require("./leaky"),m=require("./TinyYolov2Options");function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}var y=function(a){function g(e){var t=a.call(this,"TinyYolov2")||this;return(0,l.validateConfig)(e),t._config=e,t}return(0,e.__extends)(g,a),Object.defineProperty(g.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),g.prototype.runTinyYolov2=function(e,r){var o=(0,p.convWithBatchNorm)(e,r.conv0);return o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,p.convWithBatchNorm)(o,r.conv1),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,p.convWithBatchNorm)(o,r.conv2),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,p.convWithBatchNorm)(o,r.conv3),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,p.convWithBatchNorm)(o,r.conv4),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,p.convWithBatchNorm)(o,r.conv5),o=t.maxPool(o,[2,2],[1,1],"same"),o=(0,p.convWithBatchNorm)(o,r.conv6),o=(0,p.convWithBatchNorm)(o,r.conv7),(0,n.convLayer)(o,r.conv8,"valid",!1)},g.prototype.runMobilenet=function(e,r){var o=this.config.isFirstLayerConv2d?(0,d.leaky)((0,n.convLayer)(e,r.conv0,"valid",!1)):(0,h.depthwiseSeparableConv)(e,r.conv0);return o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,h.depthwiseSeparableConv)(o,r.conv1),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,h.depthwiseSeparableConv)(o,r.conv2),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,h.depthwiseSeparableConv)(o,r.conv3),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,h.depthwiseSeparableConv)(o,r.conv4),o=t.maxPool(o,[2,2],[2,2],"same"),o=(0,h.depthwiseSeparableConv)(o,r.conv5),o=t.maxPool(o,[2,2],[1,1],"same"),o=r.conv6?(0,h.depthwiseSeparableConv)(o,r.conv6):o,o=r.conv7?(0,h.depthwiseSeparableConv)(o,r.conv7):o,(0,n.convLayer)(o,r.conv8,"valid",!1)},g.prototype.forwardInput=function(e,r){var o=this,n=this.params;if(!n)throw new Error("TinyYolov2 - load model before inference");return t.tidy(function(){var i=e.toBatchTensor(r,!1).toFloat();return i=(i=o.config.meanRgb?(0,u.normalize)(i,o.config.meanRgb):i).div(t.scalar(256)),o.config.withSeparableConvs?o.runMobilenet(i,n):o.runTinyYolov2(i,n)})},g.prototype.forward=function(t,r){return(0,e.__awaiter)(this,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o=this.forwardInput,[4,(0,i.toNetInput)(t)];case 1:return[4,o.apply(this,[e.sent(),r])];case 2:return[2,e.sent()]}})})},g.prototype.detect=function(r,n){return void 0===n&&(n={}),(0,e.__awaiter)(this,void 0,void 0,function(){var a,s,u,l,p,h,f,v,d,g,b,y,w,x=this;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return a=new m.TinyYolov2Options(n),s=a.inputSize,u=a.scoreThreshold,[4,(0,i.toNetInput)(r)];case 1:return l=e.sent(),[4,this.forwardInput(l,s)];case 2:return p=e.sent(),h=t.tidy(function(){return t.unstack(p)[0].expandDims()}),f={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(h,l.getReshapedInputDimensions(0),u)];case 3:return v=e.sent(),p.dispose(),h.dispose(),d=v.map(function(e){return e.box}),g=v.map(function(e){return e.score}),b=v.map(function(e){return e.classScore}),y=v.map(function(e){return x.config.classes[e.label]}),w=(0,c.nonMaxSuppression)(d.map(function(e){return e.rescale(s)}),g,this.config.iouThreshold,!0),[2,w.map(function(e){return new o.ObjectDetection(g[e],b[e],y[e],d[e],f)})]}})})},g.prototype.getDefaultModelName=function(){return""},g.prototype.extractParamsFromWeigthMap=function(e){return(0,v.extractParamsFromWeigthMap)(e,this.config)},g.prototype.extractParams=function(e){var t=this.config.filterSizes||g.DEFAULT_FILTER_SIZES,r=t?t.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return(0,f.extractParams)(e,this.config,this.boxEncodingSize,t)},g.prototype.extractBoxes=function(o,n,i){return(0,e.__awaiter)(this,void 0,void 0,function(){var a,c,u,l,p,h,f,v,d,m,g,b,y,w,x,S,_,P,C,B,q,N,O,T,M,W,j,I,E,D=this;return(0,e.__generator)(this,function(F){switch(F.label){case 0:return a=n.width,c=n.height,u=Math.max(a,c),l=u/a,p=u/c,h=o.shape[1],f=this.config.anchors.length,v=t.tidy(function(){var e=o.reshape([h,h,f,D.boxEncodingSize]);return[e.slice([0,0,0,0],[h,h,f,4]),e.slice([0,0,0,4],[h,h,f,1]),D.withClassScores?t.softmax(e.slice([0,0,0,5],[h,h,f,D.config.classes.length]),3):t.scalar(0)]}),d=v[0],m=v[1],g=v[2],b=[],[4,m.array()];case 1:return y=F.sent(),[4,d.array()];case 2:w=F.sent(),x=0,F.label=3;case 3:if(!(x<h))return[3,12];S=0,F.label=4;case 4:if(!(S<h))return[3,11];_=0,F.label=5;case 5:return _<f?(P=(0,s.sigmoid)(y[x][S][_][0]),!i||P>i?(C=(S+(0,s.sigmoid)(w[x][S][_][0]))/h*l,B=(x+(0,s.sigmoid)(w[x][S][_][1]))/h*p,q=Math.exp(w[x][S][_][2])*this.config.anchors[_].x/h*l,N=Math.exp(w[x][S][_][3])*this.config.anchors[_].y/h*p,O=C-q/2,T=B-N/2,M={row:x,col:S,anchor:_},this.withClassScores?[4,this.extractPredictedClass(g,M)]:[3,7]):[3,9]):[3,10];case 6:return E=F.sent(),[3,8];case 7:E={classScore:1,label:0},F.label=8;case 8:j=(W=E).classScore,I=W.label,b.push((0,e.__assign)({box:new r.BoundingBox(O,T,O+q,T+N),score:P,classScore:P*j,label:I},M)),F.label=9;case 9:return _++,[3,5];case 10:return S++,[3,4];case 11:return x++,[3,3];case 12:return d.dispose(),m.dispose(),g.dispose(),[2,b]}})})},g.prototype.extractPredictedClass=function(t,r){return(0,e.__awaiter)(this,void 0,void 0,function(){var o,n,i,a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o=r.row,n=r.col,i=r.anchor,[4,t.array()];case 1:return a=e.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return a[o][n][i][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},g.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],g}(a.NeuralNetwork);exports.TinyYolov2Base=y;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../classes/BoundingBox":"FLHV","../classes/ObjectDetection":"pkol","../common":"gZ1E","../dom":"F9LC","../NeuralNetwork":"bTJB","../ops":"CGLe","../ops/nonMaxSuppression":"RBqA","../ops/normalize":"WE0o","./config":"Zips","./convWithBatchNorm":"MPO1","./depthwiseSeparableConv":"OeRT","./extractParams":"ZSgS","./extractParamsFromWeigthMap":"Yu0Z","./leaky":"MHFK","./TinyYolov2Options":"k8q6"}],"Shpd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyYolov2=void 0;var e=require("tslib"),t=require("../classes"),r=require("./const"),o=require("./TinyYolov2Base"),n=function(o){function n(e){void 0===e&&(e=!0);var t=Object.assign({},{withSeparableConvs:e,iouThreshold:r.IOU_THRESHOLD,classes:["face"]},e?{anchors:r.BOX_ANCHORS_SEPARABLE,meanRgb:r.MEAN_RGB_SEPARABLE}:{anchors:r.BOX_ANCHORS,withClassScores:!0});return o.call(this,t)||this}return(0,e.__extends)(n,o),Object.defineProperty(n.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),n.prototype.locateFaces=function(r,o){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.detect(r,o)];case 1:return[2,e.sent().map(function(e){return new t.FaceDetection(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},n.prototype.getDefaultModelName=function(){return this.withSeparableConvs?r.DEFAULT_MODEL_NAME_SEPARABLE_CONV:r.DEFAULT_MODEL_NAME},n.prototype.extractParamsFromWeigthMap=function(e){return o.prototype.extractParamsFromWeigthMap.call(this,e)},n}(o.TinyYolov2Base);exports.TinyYolov2=n;
},{"tslib":"qjU2","../classes":"ywa2","./const":"L1kx","./TinyYolov2Base":"Nr16"}],"viua":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createTinyYolov2:!0,TinyYolov2:!0};exports.createTinyYolov2=n,Object.defineProperty(exports,"TinyYolov2",{enumerable:!0,get:function(){return r.TinyYolov2}});var r=require("./TinyYolov2"),t=require("./TinyYolov2Options");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("./config");function n(e,t){void 0===t&&(t=!0);var o=new r.TinyYolov2(t);return o.extractWeights(e),o}Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});
},{"./TinyYolov2":"Shpd","./TinyYolov2Options":"k8q6","./config":"Zips"}],"v9q6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyFaceDetectorOptions=void 0;var e=require("tslib"),t=require("../tinyYolov2"),i=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return(0,e.__extends)(i,t),i}(t.TinyYolov2Options);exports.TinyFaceDetectorOptions=i;
},{"tslib":"qjU2","../tinyYolov2":"viua"}],"uKWf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComposableTask=void 0;var t=require("tslib"),e=function(){function e(){}return e.prototype.then=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var r;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return r=e,[4,this.run()];case 1:return[2,r.apply(void 0,[t.sent()])]}})})},e.prototype.run=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();exports.ComposableTask=e;
},{"tslib":"qjU2"}],"ypiC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractAllFacesAndComputeResults=a,exports.extractSingleFaceAndComputeResult=u;var e=require("tslib"),t=i(require("@tensorflow/tfjs-core")),r=require("../dom"),n=require("../factories/WithFaceLandmarks");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function a(o,i,a,u,c){return void 0===c&&(c=function(e){return e.alignedRect}),(0,e.__awaiter)(this,void 0,void 0,function(){var s,f,l,d,p;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return s=o.map(function(e){return(0,n.isWithFaceLandmarks)(e)?c(e):e.detection}),(l=u)?[3,5]:i instanceof t.Tensor?[4,(0,r.extractFaceTensors)(i,s)]:[3,2];case 1:return d=e.sent(),[3,4];case 2:return[4,(0,r.extractFaces)(i,s)];case 3:d=e.sent(),e.label=4;case 4:l=d,e.label=5;case 5:return[4,a(f=l)];case 6:return p=e.sent(),f.forEach(function(e){return e instanceof t.Tensor&&e.dispose()}),[2,p]}})})}function u(t,r,n,o,i){return(0,e.__awaiter)(this,void 0,void 0,function(){var u=this;return(0,e.__generator)(this,function(c){return[2,a([t],r,function(t){return(0,e.__awaiter)(u,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,n(t[0])]})})},o,i)]})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../factories/WithFaceLandmarks":"bw0I"}],"JBqT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bgrToRgbTensor=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(r){return e.tidy(function(){return e.stack(e.unstack(r,3).reverse(),3)})}
},{"@tensorflow/tfjs-core":"FZBM"}],"FWxD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CELL_SIZE=exports.CELL_STRIDE=void 0;var e=2;exports.CELL_STRIDE=e;var r=12;exports.CELL_SIZE=r;
},{}],"QWyn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParams=o;var e=require("tslib"),t=a(require("@tensorflow/tfjs-core")),r=require("../common");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var o=a?Object.getOwnPropertyDescriptor(e,c):null;o&&(o.get||o.set)?Object.defineProperty(r,c,o):r[c]=e[c]}return r.default=e,t&&t.set(e,r),r}function c(n,a){var c=(0,r.extractConvParamsFactory)(n,a),o=(0,r.extractFCParamsFactory)(n,a);function p(e,r){var c=t.tensor1d(n(e));return a.push({paramPath:r}),c}function u(e,t,r){return void 0===r&&(r=!1),{conv1:c(e[0],e[1],3,t+"/conv1"),prelu1_alpha:p(e[1],t+"/prelu1_alpha"),conv2:c(e[1],e[2],3,t+"/conv2"),prelu2_alpha:p(e[2],t+"/prelu2_alpha"),conv3:c(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:p(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var t=u([3,10,16,32],"pnet"),r=c(32,2,1,"pnet/conv4_1"),n=c(32,4,1,"pnet/conv4_2");return(0,e.__assign)((0,e.__assign)({},t),{conv4_1:r,conv4_2:n})},extractRNetParams:function(){var t=u([3,28,48,64],"rnet",!0),r=o(576,128,"rnet/fc1"),n=p(128,"rnet/prelu4_alpha"),a=o(128,2,"rnet/fc2_1"),c=o(128,4,"rnet/fc2_2");return(0,e.__assign)((0,e.__assign)({},t),{fc1:r,prelu4_alpha:n,fc2_1:a,fc2_2:c})},extractONetParams:function(){var t=u([3,32,64,64],"onet"),r=c(64,128,2,"onet/conv4"),n=p(128,"onet/prelu4_alpha"),a=o(1152,256,"onet/fc1"),f=p(256,"onet/prelu5_alpha"),i=o(256,2,"onet/fc2_1"),s=o(256,4,"onet/fc2_2"),_=o(256,10,"onet/fc2_3");return(0,e.__assign)((0,e.__assign)({},t),{conv4:r,prelu4_alpha:n,fc1:a,prelu5_alpha:f,fc2_1:i,fc2_2:s,fc2_3:_})}}}function o(e){var t=(0,r.extractWeightsFactory)(e),n=t.extractWeights,a=t.getRemainingWeights,o=[],p=c(n,o),u=p.extractPNetParams,f=p.extractRNetParams,i=p.extractONetParams,s=u(),_=f(),l=i();if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:{pnet:s,rnet:_,onet:l},paramMappings:o}}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../common":"gZ1E"}],"pss6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractParamsFromWeigthMap=a;var e=require("tslib"),t=require("../common");function r(r,a){var n=(0,t.extractWeightEntryFactory)(r,a);function c(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function s(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function o(e){return n(e,1)}function _(e){return{conv1:c(e+"/conv1"),prelu1_alpha:o(e+"/prelu1_alpha"),conv2:c(e+"/conv2"),prelu2_alpha:o(e+"/prelu2_alpha"),conv3:c(e+"/conv3"),prelu3_alpha:o(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var t=_("pnet"),r=c("pnet/conv4_1"),a=c("pnet/conv4_2");return(0,e.__assign)((0,e.__assign)({},t),{conv4_1:r,conv4_2:a})},extractRNetParams:function(){var t=_("rnet"),r=s("rnet/fc1"),a=o("rnet/prelu4_alpha"),n=s("rnet/fc2_1"),c=s("rnet/fc2_2");return(0,e.__assign)((0,e.__assign)({},t),{fc1:r,prelu4_alpha:a,fc2_1:n,fc2_2:c})},extractONetParams:function(){var t=_("onet"),r=c("onet/conv4"),a=o("onet/prelu4_alpha"),n=s("onet/fc1"),p=o("onet/prelu5_alpha"),u=s("onet/fc2_1"),i=s("onet/fc2_2"),l=s("onet/fc2_3");return(0,e.__assign)((0,e.__assign)({},t),{conv4:r,prelu4_alpha:a,fc1:n,prelu5_alpha:p,fc2_1:u,fc2_2:i,fc2_3:l})}}}function a(e){var a=[],n=r(e,a),c=n.extractPNetParams,s=n.extractRNetParams,o=n.extractONetParams,_=c(),p=s(),u=o();return(0,t.disposeUnusedWeightTensors)(e,a),{params:{pnet:_,rnet:p,onet:u},paramMappings:a}}
},{"tslib":"qjU2","../common":"gZ1E"}],"i57n":[function(require,module,exports) {
"use strict";function e(e,t){var r=t[0],o=t[1];return{height:Math.floor(r*e),width:Math.floor(o*e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSizesForScale=e;
},{}],"MGmq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pyramidDown=r;var e=require("./config");function r(r,t,o){for(var i=o[0],n=o[1],u=e.CELL_SIZE/r,a=[],p=Math.min(i,n)*u,s=0;p>=12;)a.push(u*Math.pow(t,s)),p*=t,s+=1;return a}
},{"./config":"FWxD"}],"JgXS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MtcnnBox=void 0;var t=require("tslib"),e=require("../classes"),r=function(e){function r(t,r,o,s){return e.call(this,{left:t,top:r,right:o,bottom:s},!0)||this}return(0,t.__extends)(r,e),r}(e.Box);exports.MtcnnBox=r;
},{"tslib":"qjU2","../classes":"ywa2"}],"HmoS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalize=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(r){return e.tidy(function(){return e.mul(e.sub(r,e.scalar(127.5)),e.scalar(.0078125))})}
},{"@tensorflow/tfjs-core":"FZBM"}],"l0WF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=n;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var f=u?Object.getOwnPropertyDescriptor(e,o):null;f&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function n(r,t){return e.tidy(function(){return e.add(e.relu(r),e.mul(t,e.neg(e.relu(e.neg(r)))))})}
},{"@tensorflow/tfjs-core":"FZBM"}],"rrlW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sharedLayer=a;var e=o(require("@tensorflow/tfjs-core")),r=require("../common"),t=require("./prelu");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function a(n,o,a){return void 0===a&&(a=!1),e.tidy(function(){var u=(0,r.convLayer)(n,o.conv1,"valid");return u=(0,t.prelu)(u,o.prelu1_alpha),u=e.maxPool(u,a?[2,2]:[3,3],[2,2],"same"),u=(0,r.convLayer)(u,o.conv2,"valid"),u=(0,t.prelu)(u,o.prelu2_alpha),u=a?u:e.maxPool(u,[3,3],[2,2],"valid"),u=(0,r.convLayer)(u,o.conv3,"valid"),u=(0,t.prelu)(u,o.prelu3_alpha)})}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E","./prelu":"l0WF"}],"fy1H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PNet=u;var e=o(require("@tensorflow/tfjs-core")),r=require("../common"),t=require("./sharedLayers");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function u(n,o){return e.tidy(function(){var u=(0,t.sharedLayer)(n,o,!0),a=(0,r.convLayer)(u,o.conv4_1,"valid"),i=e.expandDims(e.max(a,3),3);return{prob:e.softmax(e.sub(a,i),3),regions:(0,r.convLayer)(u,o.conv4_2,"valid")}})}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E","./sharedLayers":"rrlW"}],"DDZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stage1=l;var e=c(require("@tensorflow/tfjs-core")),r=require("../classes"),n=require("../ops"),t=require("./config"),o=require("./getSizesForScale"),u=require("./MtcnnBox"),a=require("./normalize"),i=require("./PNet");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=t?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function p(r,n){return e.tidy(function(){var t=(0,o.getSizesForScale)(n,r.shape.slice(1)),u=t.height,i=t.width,s=e.image.resizeBilinear(r,[u,i]),c=(0,a.normalize)(s);return e.transpose(c,[0,2,1,3])})}function f(e,n,o,a){for(var i=[],s=e.arraySync(),c=0;c<e.shape[0];c++)for(var p=0;p<e.shape[1];p++)s[c][p]>=a&&i.push(new r.Point(p,c));return i.map(function(e){var a=new r.BoundingBox(Math.round((e.y*t.CELL_STRIDE+1)/o),Math.round((e.x*t.CELL_STRIDE+1)/o),Math.round((e.y*t.CELL_STRIDE+t.CELL_SIZE)/o),Math.round((e.x*t.CELL_STRIDE+t.CELL_SIZE)/o)),i=s[e.y][e.x],c=n.arraySync();return{cell:a,score:i,region:new u.MtcnnBox(c[e.y][e.x][0],c[e.y][e.x][1],c[e.y][e.x][2],c[e.y][e.x][3])}})}function l(t,o,u,a,s){s.stage1=[];var c=o.map(function(r){return e.tidy(function(){var n={scale:r},o=p(t,r),u=Date.now(),s=(0,i.PNet)(o,a),c=s.prob,f=s.regions;return n.pnet=Date.now()-u,{scoresTensor:e.unstack(e.unstack(c,3)[1])[0],regionsTensor:e.unstack(f)[0],scale:r,statsForScale:n}})}).map(function(e){var r=e.scoresTensor,t=e.regionsTensor,o=e.scale,a=e.statsForScale,i=f(r,t,o,u);if(r.dispose(),t.dispose(),!i.length)return s.stage1.push(a),[];var c=Date.now(),p=(0,n.nonMaxSuppression)(i.map(function(e){return e.cell}),i.map(function(e){return e.score}),.5);return a.nms=Date.now()-c,a.numBoxes=p.length,s.stage1.push(a),p.map(function(e){return i[e]})}).reduce(function(e,r){return e.concat(r)},[]),l=[],g=[];if(c.length>0){var h=Date.now(),y=(0,n.nonMaxSuppression)(c.map(function(e){return e.cell}),c.map(function(e){return e.score}),.7);s.stage1_nms=Date.now()-h,g=y.map(function(e){return c[e].score}),l=y.map(function(e){return c[e]}).map(function(e){var n=e.cell,t=e.region;return new r.BoundingBox(n.left+t.left*n.width,n.top+t.top*n.height,n.right+t.right*n.width,n.bottom+t.bottom*n.height).toSquare().round()})}return{boxes:l,scores:g}}
},{"@tensorflow/tfjs-core":"FZBM","../classes":"ywa2","../ops":"CGLe","./config":"FWxD","./getSizesForScale":"i57n","./MtcnnBox":"JgXS","./normalize":"HmoS","./PNet":"fy1H"}],"gHdc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractImagePatches=u;var e=require("tslib"),t=i(require("@tensorflow/tfjs-core")),r=require("../dom"),n=require("../env"),a=require("./normalize");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function u(o,i,u){var s=u.width,c=u.height;return(0,e.__awaiter)(this,void 0,void 0,function(){var u,f,p,d=this;return(0,e.__generator)(this,function(h){switch(h.label){case 0:return u=(0,r.getContext2dOrThrow)(o),[4,Promise.all(i.map(function(t){return(0,e.__awaiter)(d,void 0,void 0,function(){var a,i,s,c,f,p,d,h;return(0,e.__generator)(this,function(e){return a=t.padAtBorders(o.height,o.width),i=a.y,s=a.ey,c=a.x,f=a.ex,p=c-1,d=i-1,h=u.getImageData(p,d,f-p,s-d),[2,n.env.isNodejs()?(0,r.createCanvasFromMedia)(h):createImageBitmap(h)]})})}))];case 1:return f=h.sent(),p=[],f.forEach(function(e){var t=(0,r.createCanvas)({width:s,height:c}),n=(0,r.getContext2dOrThrow)(t);n.drawImage(e,0,0,s,c);for(var a=n.getImageData(0,0,s,c).data,o=[],i=0;i<a.length;i+=4)o.push(a[i+2]),o.push(a[i+1]),o.push(a[i]);p.push(o)}),[2,p.map(function(e){return t.tidy(function(){var r=t.transpose(t.tensor4d(e,[1,s,c,3]),[0,2,1,3]).toFloat();return(0,a.normalize)(r)})})]}})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../env":"iBDr","./normalize":"HmoS"}],"pUwR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RNet=a;var e=u(require("@tensorflow/tfjs-core")),r=require("../common/fullyConnectedLayer"),t=require("./prelu"),n=require("./sharedLayers");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function a(o,u){return e.tidy(function(){var a=(0,n.sharedLayer)(o,u),f=e.reshape(a,[a.shape[0],u.fc1.weights.shape[0]]),c=(0,r.fullyConnectedLayer)(f,u.fc1),s=(0,t.prelu)(c,u.prelu4_alpha),i=(0,r.fullyConnectedLayer)(s,u.fc2_1),l=e.expandDims(e.max(i,1),1),p=e.softmax(e.sub(i,l),1),y=(0,r.fullyConnectedLayer)(s,u.fc2_2);return{scores:e.unstack(p,1)[1],regions:y}})}
},{"@tensorflow/tfjs-core":"FZBM","../common/fullyConnectedLayer":"E0V1","./prelu":"l0WF","./sharedLayers":"rrlW"}],"ulT3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stage2=s;var e=require("tslib"),t=u(require("@tensorflow/tfjs-core")),r=require("../ops"),n=require("./extractImagePatches"),o=require("./MtcnnBox"),a=require("./RNet");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function s(i,u,s,c,f){return(0,e.__awaiter)(this,void 0,void 0,function(){var p,l,d,g,w,h,m,y,v,b,x,_,O,P;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return p=Date.now(),[4,(0,n.extractImagePatches)(i,u,{width:24,height:24})];case 1:return l=e.sent(),f.stage2_extractImagePatches=Date.now()-p,p=Date.now(),d=l.map(function(e){var t=(0,a.RNet)(e,c);return e.dispose(),t}),f.stage2_rnet=Date.now()-p,g=d.length>1?t.concat(d.map(function(e){return e.scores})):d[0].scores,m=(h=Array).from,[4,g.data()];case 2:return w=m.apply(h,[e.sent()]),g.dispose(),y=w.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>s}).map(function(e){return e.idx}),v=y.map(function(e){return u[e]}),b=y.map(function(e){return w[e]}),x=[],_=[],v.length>0&&(p=Date.now(),O=(0,r.nonMaxSuppression)(v,b,.7),f.stage2_nms=Date.now()-p,P=O.map(function(e){var t=d[y[e]].regions.arraySync();return new o.MtcnnBox(t[0][0],t[0][1],t[0][2],t[0][3])}),_=O.map(function(e){return b[e]}),x=O.map(function(e,t){return v[e].calibrate(P[t])})),d.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:x,scores:_}]}})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../ops":"CGLe","./extractImagePatches":"gHdc","./MtcnnBox":"JgXS","./RNet":"pUwR"}],"XbMk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ONet=c;var e=u(require("@tensorflow/tfjs-core")),r=require("../common"),t=require("../common/fullyConnectedLayer"),n=require("./prelu"),o=require("./sharedLayers");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function c(a,u){return e.tidy(function(){var c=(0,o.sharedLayer)(a,u);c=e.maxPool(c,[2,2],[2,2],"same"),c=(0,r.convLayer)(c,u.conv4,"valid"),c=(0,n.prelu)(c,u.prelu4_alpha);var f=e.reshape(c,[c.shape[0],u.fc1.weights.shape[0]]),l=(0,t.fullyConnectedLayer)(f,u.fc1),i=(0,n.prelu)(l,u.prelu5_alpha),s=(0,t.fullyConnectedLayer)(i,u.fc2_1),p=e.expandDims(e.max(s,1),1),y=e.softmax(e.sub(s,p),1),d=(0,t.fullyConnectedLayer)(i,u.fc2_2),v=(0,t.fullyConnectedLayer)(i,u.fc2_3);return{scores:e.unstack(y,1)[1],regions:d,points:v}})}
},{"@tensorflow/tfjs-core":"FZBM","../common":"gZ1E","../common/fullyConnectedLayer":"E0V1","./prelu":"l0WF","./sharedLayers":"rrlW"}],"P3Qr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stage3=c;var e=require("tslib"),t=u(require("@tensorflow/tfjs-core")),r=require("../classes"),n=require("../ops"),o=require("./extractImagePatches"),a=require("./MtcnnBox"),i=require("./ONet");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(s,u,c,f,p){return(0,e.__awaiter)(this,void 0,void 0,function(){var l,d,g,h,w,y,m,v,b,x,O,_,P,j,D;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return l=Date.now(),[4,(0,o.extractImagePatches)(s,u,{width:48,height:48})];case 1:return d=e.sent(),p.stage3_extractImagePatches=Date.now()-l,l=Date.now(),g=d.map(function(e){var t=(0,i.ONet)(e,f);return e.dispose(),t}),p.stage3_onet=Date.now()-l,h=g.length>1?t.concat(g.map(function(e){return e.scores})):g[0].scores,m=(y=Array).from,[4,h.data()];case 2:return w=m.apply(y,[e.sent()]),h.dispose(),v=w.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>c}).map(function(e){return e.idx}),b=v.map(function(e){var t=g[e].regions.arraySync();return new a.MtcnnBox(t[0][0],t[0][1],t[0][2],t[0][3])}),x=v.map(function(e,t){return u[e].calibrate(b[t])}),O=v.map(function(e){return w[e]}),_=[],P=[],j=[],x.length>0&&(l=Date.now(),D=(0,n.nonMaxSuppression)(x,O,.7,!1),p.stage3_nms=Date.now()-l,_=D.map(function(e){return x[e]}),P=D.map(function(e){return O[e]}),j=D.map(function(e,t){return Array(5).fill(0).map(function(n,o){var a=g[e].points.arraySync();return new r.Point(a[0][o]*(_[t].width+1)+_[t].left,a[0][o+5]*(_[t].height+1)+_[t].top)})})),g.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:_,scores:P,points:j}]}})})}
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../classes":"ywa2","../ops":"CGLe","./extractImagePatches":"gHdc","./MtcnnBox":"JgXS","./ONet":"XbMk"}],"uYvs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mtcnn=void 0;var e=require("tslib"),t=v(require("@tensorflow/tfjs-core")),r=require("../classes"),n=require("../classes/FaceDetection"),o=require("../classes/FaceLandmarks5"),a=require("../dom"),i=require("../factories"),s=require("../NeuralNetwork"),u=require("./bgrToRgbTensor"),c=require("./config"),l=require("./extractParams"),p=require("./extractParamsFromWeigthMap"),d=require("./getSizesForScale"),f=require("./MtcnnOptions"),h=require("./pyramidDown"),w=require("./stage1"),g=require("./stage2"),m=require("./stage3");function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}var b=function(s){function _(){return s.call(this,"Mtcnn")||this}return(0,e.__extends)(_,s),_.prototype.load=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return console.warn("mtcnn is deprecated and will be removed soon"),[2,s.prototype.load.call(this,t)]})})},_.prototype.loadFromDisk=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return console.warn("mtcnn is deprecated and will be removed soon"),[2,s.prototype.loadFromDisk.call(this,t)]})})},_.prototype.forwardInput=function(a,s){return void 0===s&&(s={}),(0,e.__awaiter)(this,void 0,void 0,function(){var l,p,_,v,b,y,x,D,q,F,M,P,O,S,k,I,j,N,W,L,T;return(0,e.__generator)(this,function(e){switch(e.label){case 0:if(!(l=this.params))throw new Error("Mtcnn - load model before inference");if(!(p=a.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return _={},v=Date.now(),b=t.tidy(function(){return(0,u.bgrToRgbTensor)(t.expandDims(t.browser.fromPixels(p)).toFloat())}),y=function(e){return b.dispose(),_.total=Date.now()-v,e},x=b.shape.slice(1),D=x[0],q=x[1],F=new f.MtcnnOptions(s),M=F.minFaceSize,P=F.scaleFactor,O=F.maxNumScales,S=F.scoreThresholds,k=F.scaleSteps,I=(k||(0,h.pyramidDown)(M,P,[D,q])).filter(function(e){var t=(0,d.getSizesForScale)(e,[D,q]);return Math.min(t.width,t.height)>c.CELL_SIZE}).slice(0,O),_.scales=I,_.pyramid=I.map(function(e){return(0,d.getSizesForScale)(e,[D,q])}),j=Date.now(),[4,(0,w.stage1)(b,I,S[0],l.pnet,_)];case 1:return N=e.sent(),_.total_stage1=Date.now()-j,N.boxes.length?(_.stage2_numInputBoxes=N.boxes.length,j=Date.now(),[4,(0,g.stage2)(p,N.boxes,S[1],l.rnet,_)]):[2,y({results:[],stats:_})];case 2:return W=e.sent(),_.total_stage2=Date.now()-j,W.boxes.length?(_.stage3_numInputBoxes=W.boxes.length,j=Date.now(),[4,(0,m.stage3)(p,W.boxes,S[2],l.onet,_)]):[2,y({results:[],stats:_})];case 3:return L=e.sent(),_.total_stage3=Date.now()-j,T=L.boxes.map(function(e,t){return(0,i.extendWithFaceLandmarks)((0,i.extendWithFaceDetection)({},new n.FaceDetection(L.scores[t],new r.Rect(e.left/q,e.top/D,e.width/q,e.height/D),{height:D,width:q})),new o.FaceLandmarks5(L.points[t].map(function(t){return t.sub(new r.Point(e.left,e.top)).div(new r.Point(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,y({results:T,stats:_})]}})})},_.prototype.forward=function(t,r){return void 0===r&&(r={}),(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=this.forwardInput,[4,(0,a.toNetInput)(t)];case 1:return[4,n.apply(this,[e.sent(),r])];case 2:return[2,e.sent().results]}})})},_.prototype.forwardWithStats=function(t,r){return void 0===r&&(r={}),(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=this.forwardInput,[4,(0,a.toNetInput)(t)];case 1:return[2,n.apply(this,[e.sent(),r])]}})})},_.prototype.getDefaultModelName=function(){return"mtcnn_model"},_.prototype.extractParamsFromWeigthMap=function(e){return(0,p.extractParamsFromWeigthMap)(e)},_.prototype.extractParams=function(e){return(0,l.extractParams)(e)},_}(s.NeuralNetwork);exports.Mtcnn=b;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../classes":"ywa2","../classes/FaceDetection":"EHzx","../classes/FaceLandmarks5":"dtUY","../dom":"F9LC","../factories":"bBQL","../NeuralNetwork":"bTJB","./bgrToRgbTensor":"JBqT","./config":"FWxD","./extractParams":"QWyn","./extractParamsFromWeigthMap":"pss6","./getSizesForScale":"i57n","./MtcnnOptions":"Idgp","./pyramidDown":"MGmq","./stage1":"DDZI","./stage2":"ulT3","./stage3":"P3Qr"}],"bGQJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MEAN_RGB=exports.BOX_ANCHORS=exports.IOU_THRESHOLD=void 0;var e=require("../classes"),t=.4;exports.IOU_THRESHOLD=t;var o=[new e.Point(1.603231,2.094468),new e.Point(6.041143,7.080126),new e.Point(2.882459,3.518061),new e.Point(4.266906,5.178857),new e.Point(9.041765,10.66308)];exports.BOX_ANCHORS=o;var r=[117.001,114.697,97.404];exports.MEAN_RGB=r;
},{"../classes":"ywa2"}],"kpkq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TinyFaceDetector=void 0;var e=require("tslib"),t=require("../classes"),r=require("../tinyYolov2/TinyYolov2Base"),o=require("./const"),i=function(r){function i(){var e={withSeparableConvs:!0,iouThreshold:o.IOU_THRESHOLD,classes:["face"],anchors:o.BOX_ANCHORS,meanRgb:o.MEAN_RGB,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return r.call(this,e)||this}return(0,e.__extends)(i,r),Object.defineProperty(i.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),i.prototype.locateFaces=function(r,o){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.detect(r,o)];case 1:return[2,e.sent().map(function(e){return new t.FaceDetection(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},i.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},i.prototype.extractParamsFromWeigthMap=function(e){return r.prototype.extractParamsFromWeigthMap.call(this,e)},i}(r.TinyYolov2Base);exports.TinyFaceDetector=i;
},{"tslib":"qjU2","../classes":"ywa2","../tinyYolov2/TinyYolov2Base":"Nr16","./const":"bGQJ"}],"Tqdo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detectLandmarks=exports.locateFaces=exports.loadFaceDetectionModel=exports.loadAgeGenderModel=exports.loadFaceExpressionModel=exports.loadFaceRecognitionModel=exports.loadFaceLandmarkTinyModel=exports.loadFaceLandmarkModel=exports.loadTinyYolov2Model=exports.loadMtcnnModel=exports.loadTinyFaceDetectorModel=exports.loadSsdMobilenetv1Model=exports.predictAgeAndGender=exports.recognizeFaceExpressions=exports.computeFaceDescriptor=exports.detectFaceLandmarksTiny=exports.detectFaceLandmarks=exports.mtcnn=exports.tinyYolov2=exports.tinyFaceDetector=exports.ssdMobilenetv1=exports.nets=void 0;var e=require("../ageGenderNet/AgeGenderNet"),t=require("../faceExpressionNet/FaceExpressionNet"),o=require("../faceLandmarkNet/FaceLandmark68Net"),r=require("../faceLandmarkNet/FaceLandmark68TinyNet"),n=require("../faceRecognitionNet/FaceRecognitionNet"),a=require("../mtcnn/Mtcnn"),c=require("../ssdMobilenetv1/SsdMobilenetv1"),d=require("../tinyFaceDetector/TinyFaceDetector"),s=require("../tinyYolov2"),i={ssdMobilenetv1:new c.SsdMobilenetv1,tinyFaceDetector:new d.TinyFaceDetector,tinyYolov2:new s.TinyYolov2,mtcnn:new a.Mtcnn,faceLandmark68Net:new o.FaceLandmark68Net,faceLandmark68TinyNet:new r.FaceLandmark68TinyNet,faceRecognitionNet:new n.FaceRecognitionNet,faceExpressionNet:new t.FaceExpressionNet,ageGenderNet:new e.AgeGenderNet};exports.nets=i;var l=function(e,t){return i.ssdMobilenetv1.locateFaces(e,t)};exports.ssdMobilenetv1=l;var p=function(e,t){return i.tinyFaceDetector.locateFaces(e,t)};exports.tinyFaceDetector=p;var x=function(e,t){return i.tinyYolov2.locateFaces(e,t)};exports.tinyYolov2=x;var u=function(e,t){return i.mtcnn.forward(e,t)};exports.mtcnn=u;var v=function(e){return i.faceLandmark68Net.detectLandmarks(e)};exports.detectFaceLandmarks=v;var F=function(e){return i.faceLandmark68TinyNet.detectLandmarks(e)};exports.detectFaceLandmarksTiny=F;var f=function(e){return i.faceRecognitionNet.computeFaceDescriptor(e)};exports.computeFaceDescriptor=f;var M=function(e){return i.faceExpressionNet.predictExpressions(e)};exports.recognizeFaceExpressions=M;var m=function(e){return i.ageGenderNet.predictAgeAndGender(e)};exports.predictAgeAndGender=m;var N=function(e){return i.ssdMobilenetv1.load(e)};exports.loadSsdMobilenetv1Model=N;var y=function(e){return i.tinyFaceDetector.load(e)};exports.loadTinyFaceDetectorModel=y;var k=function(e){return i.mtcnn.load(e)};exports.loadMtcnnModel=k;var L=function(e){return i.tinyYolov2.load(e)};exports.loadTinyYolov2Model=L;var g=function(e){return i.faceLandmark68Net.load(e)};exports.loadFaceLandmarkModel=g;var T=function(e){return i.faceLandmark68TinyNet.load(e)};exports.loadFaceLandmarkTinyModel=T;var D=function(e){return i.faceRecognitionNet.load(e)};exports.loadFaceRecognitionModel=D;var b=function(e){return i.faceExpressionNet.load(e)};exports.loadFaceExpressionModel=b;var E=function(e){return i.ageGenderNet.load(e)};exports.loadAgeGenderModel=E;var G=N;exports.loadFaceDetectionModel=G;var w=l;exports.locateFaces=w;var A=v;exports.detectLandmarks=A;
},{"../ageGenderNet/AgeGenderNet":"o2hs","../faceExpressionNet/FaceExpressionNet":"uqll","../faceLandmarkNet/FaceLandmark68Net":"bacu","../faceLandmarkNet/FaceLandmark68TinyNet":"TU0Q","../faceRecognitionNet/FaceRecognitionNet":"A8XY","../mtcnn/Mtcnn":"uYvs","../ssdMobilenetv1/SsdMobilenetv1":"YH6x","../tinyFaceDetector/TinyFaceDetector":"kpkq","../tinyYolov2":"viua"}],"k9y7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PredictSingleFaceExpressionsWithFaceAlignmentTask=exports.PredictAllFaceExpressionsWithFaceAlignmentTask=exports.PredictSingleFaceExpressionsTask=exports.PredictAllFaceExpressionsTask=exports.PredictFaceExpressionsTaskBase=void 0;var e=require("tslib"),t=require("../factories/WithFaceExpressions"),n=require("./ComposableTask"),r=require("./ComputeFaceDescriptorsTasks"),s=require("./extractFacesAndComputeResults"),i=require("./nets"),a=require("./PredictAgeAndGenderTask"),c=function(t){function n(e,n,r){var s=t.call(this)||this;return s.parentTask=e,s.input=n,s.extractedFaces=r,s}return(0,e.__extends)(n,t),n}(n.ComposableTask);exports.PredictFaceExpressionsTaskBase=c;var o=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,e.__extends)(r,n),r.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,r,a=this;return(0,e.__generator)(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return n=c.sent(),[4,(0,s.extractAllFacesAndComputeResults)(n,this.input,function(t){return(0,e.__awaiter)(a,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,Promise.all(t.map(function(e){return i.nets.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,e.sent()]}})})},this.extractedFaces)];case 2:return r=c.sent(),[2,n.map(function(e,n){return(0,t.extendWithFaceExpressions)(e,r[n])})]}})})},r.prototype.withAgeAndGender=function(){return new a.PredictAllAgeAndGenderTask(this,this.input)},r}(c);exports.PredictAllFaceExpressionsTask=o;var u=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,e.__extends)(r,n),r.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return(n=e.sent())?[4,(0,s.extractSingleFaceAndComputeResult)(n,this.input,function(e){return i.nets.faceExpressionNet.predictExpressions(e)},this.extractedFaces)]:[2];case 2:return r=e.sent(),[2,(0,t.extendWithFaceExpressions)(n,r)]}})})},r.prototype.withAgeAndGender=function(){return new a.PredictSingleAgeAndGenderTask(this,this.input)},r}(c);exports.PredictSingleFaceExpressionsTask=u;var p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(n,t),n.prototype.withAgeAndGender=function(){return new a.PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},n.prototype.withFaceDescriptors=function(){return new r.ComputeAllFaceDescriptorsTask(this,this.input)},n}(o);exports.PredictAllFaceExpressionsWithFaceAlignmentTask=p;var l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(n,t),n.prototype.withAgeAndGender=function(){return new a.PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},n.prototype.withFaceDescriptor=function(){return new r.ComputeSingleFaceDescriptorTask(this,this.input)},n}(u);exports.PredictSingleFaceExpressionsWithFaceAlignmentTask=l;
},{"tslib":"qjU2","../factories/WithFaceExpressions":"KSS7","./ComposableTask":"uKWf","./ComputeFaceDescriptorsTasks":"lU9f","./extractFacesAndComputeResults":"ypiC","./nets":"Tqdo","./PredictAgeAndGenderTask":"Rc8t"}],"Rc8t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PredictSingleAgeAndGenderWithFaceAlignmentTask=exports.PredictAllAgeAndGenderWithFaceAlignmentTask=exports.PredictSingleAgeAndGenderTask=exports.PredictAllAgeAndGenderTask=exports.PredictAgeAndGenderTaskBase=void 0;var e=require("tslib"),t=require("../factories/WithAge"),n=require("../factories/WithGender"),r=require("./ComposableTask"),i=require("./ComputeFaceDescriptorsTasks"),s=require("./extractFacesAndComputeResults"),a=require("./nets"),c=require("./PredictFaceExpressionsTask"),o=function(t){function n(e,n,r){var i=t.call(this)||this;return i.parentTask=e,i.input=n,i.extractedFaces=r,i}return(0,e.__extends)(n,t),n}(r.ComposableTask);exports.PredictAgeAndGenderTaskBase=o;var u=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(i,r),i.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var r,i,c=this;return(0,e.__generator)(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return r=o.sent(),[4,(0,s.extractAllFacesAndComputeResults)(r,this.input,function(t){return(0,e.__awaiter)(c,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,Promise.all(t.map(function(e){return a.nets.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,e.sent()]}})})},this.extractedFaces)];case 2:return i=o.sent(),[2,r.map(function(e,r){var s=i[r],a=s.age,c=s.gender,o=s.genderProbability;return(0,t.extendWithAge)((0,n.extendWithGender)(e,c,o),a)})]}})})},i.prototype.withFaceExpressions=function(){return new c.PredictAllFaceExpressionsTask(this,this.input)},i}(o);exports.PredictAllAgeAndGenderTask=u;var d=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(i,r),i.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var r,i,c,o,u;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return(r=e.sent())?[4,(0,s.extractSingleFaceAndComputeResult)(r,this.input,function(e){return a.nets.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)]:[2];case 2:return i=e.sent(),c=i.age,o=i.gender,u=i.genderProbability,[2,(0,t.extendWithAge)((0,n.extendWithGender)(r,o,u),c)]}})})},i.prototype.withFaceExpressions=function(){return new c.PredictSingleFaceExpressionsTask(this,this.input)},i}(o);exports.PredictSingleAgeAndGenderTask=d;var p=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(n,t),n.prototype.withFaceExpressions=function(){return new c.PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},n.prototype.withFaceDescriptors=function(){return new i.ComputeAllFaceDescriptorsTask(this,this.input)},n}(u);exports.PredictAllAgeAndGenderWithFaceAlignmentTask=p;var l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(n,t),n.prototype.withFaceExpressions=function(){return new c.PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},n.prototype.withFaceDescriptor=function(){return new i.ComputeSingleFaceDescriptorTask(this,this.input)},n}(d);exports.PredictSingleAgeAndGenderWithFaceAlignmentTask=l;
},{"tslib":"qjU2","../factories/WithAge":"rdnN","../factories/WithGender":"cjMs","./ComposableTask":"uKWf","./ComputeFaceDescriptorsTasks":"lU9f","./extractFacesAndComputeResults":"ypiC","./nets":"Tqdo","./PredictFaceExpressionsTask":"k9y7"}],"lU9f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComputeSingleFaceDescriptorTask=exports.ComputeAllFaceDescriptorsTask=exports.ComputeFaceDescriptorsTaskBase=void 0;var e=require("tslib"),t=require("../factories/WithFaceDescriptor"),n=require("./ComposableTask"),r=require("./extractFacesAndComputeResults"),i=require("./nets"),s=require("./PredictAgeAndGenderTask"),u=require("./PredictFaceExpressionsTask"),o=function(t){function n(e,n){var r=t.call(this)||this;return r.parentTask=e,r.input=n,r}return(0,e.__extends)(n,t),n}(n.ComposableTask);exports.ComputeFaceDescriptorsTaskBase=o;var a=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return(0,e.__extends)(o,n),o.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return n=e.sent(),[4,(0,r.extractAllFacesAndComputeResults)(n,this.input,function(e){return Promise.all(e.map(function(e){return i.nets.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,e.sent().map(function(e,r){return(0,t.extendWithFaceDescriptor)(n[r],e)})]}})})},o.prototype.withFaceExpressions=function(){return new u.PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},o.prototype.withAgeAndGender=function(){return new s.PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},o}(o);exports.ComputeAllFaceDescriptorsTask=a;var c=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return(0,e.__extends)(o,n),o.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,s;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return(n=e.sent())?[4,(0,r.extractSingleFaceAndComputeResult)(n,this.input,function(e){return i.nets.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return s=e.sent(),[2,(0,t.extendWithFaceDescriptor)(n,s)]}})})},o.prototype.withFaceExpressions=function(){return new u.PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},o.prototype.withAgeAndGender=function(){return new s.PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},o}(o);exports.ComputeSingleFaceDescriptorTask=c;
},{"tslib":"qjU2","../factories/WithFaceDescriptor":"VXGS","./ComposableTask":"uKWf","./extractFacesAndComputeResults":"ypiC","./nets":"Tqdo","./PredictAgeAndGenderTask":"Rc8t","./PredictFaceExpressionsTask":"k9y7"}],"g1OH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetectSingleFaceLandmarksTask=exports.DetectAllFaceLandmarksTask=exports.DetectFaceLandmarksTaskBase=void 0;var e=require("tslib"),t=p(require("@tensorflow/tfjs-core")),n=require("../dom"),r=require("../factories/WithFaceLandmarks"),s=require("./ComposableTask"),i=require("./ComputeFaceDescriptorsTasks"),a=require("./nets"),c=require("./PredictAgeAndGenderTask"),o=require("./PredictFaceExpressionsTask");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=r?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}var d=function(t){function n(e,n,r){var s=t.call(this)||this;return s.parentTask=e,s.input=n,s.useTinyLandmarkNet=r,s}return(0,e.__extends)(n,t),Object.defineProperty(n.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?a.nets.faceLandmark68TinyNet:a.nets.faceLandmark68Net},enumerable:!0,configurable:!0}),n}(s.ComposableTask);exports.DetectFaceLandmarksTaskBase=d;var l=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return(0,e.__extends)(a,s),a.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var s,i,a,c,o,u=this;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return s=e.sent(),i=s.map(function(e){return e.detection}),this.input instanceof t.Tensor?[4,(0,n.extractFaceTensors)(this.input,i)]:[3,3];case 2:return c=e.sent(),[3,5];case 3:return[4,(0,n.extractFaces)(this.input,i)];case 4:c=e.sent(),e.label=5;case 5:return a=c,[4,Promise.all(a.map(function(e){return u.landmarkNet.detectLandmarks(e)}))];case 6:return o=e.sent(),a.forEach(function(e){return e instanceof t.Tensor&&e.dispose()}),[2,s.map(function(e,t){return(0,r.extendWithFaceLandmarks)(e,o[t])})]}})})},a.prototype.withFaceExpressions=function(){return new o.PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},a.prototype.withAgeAndGender=function(){return new c.PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},a.prototype.withFaceDescriptors=function(){return new i.ComputeAllFaceDescriptorsTask(this,this.input)},a}(d);exports.DetectAllFaceLandmarksTask=l;var f=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return(0,e.__extends)(a,s),a.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var s,i,a,c,o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parentTask];case 1:return(s=e.sent())?(i=s.detection,this.input instanceof t.Tensor?[4,(0,n.extractFaceTensors)(this.input,[i])]:[3,3]):[2];case 2:return c=e.sent(),[3,5];case 3:return[4,(0,n.extractFaces)(this.input,[i])];case 4:c=e.sent(),e.label=5;case 5:return a=c,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return o=e.sent(),a.forEach(function(e){return e instanceof t.Tensor&&e.dispose()}),[2,(0,r.extendWithFaceLandmarks)(s,o)]}})})},a.prototype.withFaceExpressions=function(){return new o.PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},a.prototype.withAgeAndGender=function(){return new c.PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},a.prototype.withFaceDescriptor=function(){return new i.ComputeSingleFaceDescriptorTask(this,this.input)},a}(d);exports.DetectSingleFaceLandmarksTask=f;
},{"tslib":"qjU2","@tensorflow/tfjs-core":"FZBM","../dom":"F9LC","../factories/WithFaceLandmarks":"bw0I","./ComposableTask":"uKWf","./ComputeFaceDescriptorsTasks":"lU9f","./nets":"Tqdo","./PredictAgeAndGenderTask":"Rc8t","./PredictFaceExpressionsTask":"k9y7"}],"GJ3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DetectSingleFaceTask=exports.DetectAllFacesTask=exports.DetectFacesTaskBase=void 0;var e=require("tslib"),t=require("../factories/WithFaceDetection"),n=require("../mtcnn/MtcnnOptions"),i=require("../ssdMobilenetv1/SsdMobilenetv1Options"),r=require("../tinyFaceDetector/TinyFaceDetectorOptions"),o=require("../tinyYolov2"),s=require("./ComposableTask"),c=require("./DetectFaceLandmarksTasks"),a=require("./nets"),u=require("./PredictAgeAndGenderTask"),d=require("./PredictFaceExpressionsTask"),p=function(t){function n(e,n){void 0===n&&(n=new i.SsdMobilenetv1Options);var r=t.call(this)||this;return r.input=e,r.options=n,r}return(0,e.__extends)(n,t),n}(s.ComposableTask);exports.DetectFacesTaskBase=p;var h=function(s){function p(){return null!==s&&s.apply(this,arguments)||this}return(0,e.__extends)(p,s),p.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,s,c,u;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return s=(t=this).input,(c=t.options)instanceof n.MtcnnOptions?[4,a.nets.mtcnn.forward(s,c)]:[3,2];case 1:return[2,e.sent().map(function(e){return e.detection})];case 2:if(!(u=c instanceof r.TinyFaceDetectorOptions?function(e){return a.nets.tinyFaceDetector.locateFaces(e,c)}:c instanceof i.SsdMobilenetv1Options?function(e){return a.nets.ssdMobilenetv1.locateFaces(e,c)}:c instanceof o.TinyYolov2Options?function(e){return a.nets.tinyYolov2.locateFaces(e,c)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,u(s)]}})})},p.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(i){return(0,e.__awaiter)(n,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.run()];case 1:return n=e.sent(),[2,i(n.map(function(e){return(0,t.extendWithFaceDetection)({},e)}))]}})})})},p.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new c.DetectAllFaceLandmarksTask(this.runAndExtendWithFaceDetections(),this.input,e)},p.prototype.withFaceExpressions=function(){return new d.PredictAllFaceExpressionsTask(this.runAndExtendWithFaceDetections(),this.input)},p.prototype.withAgeAndGender=function(){return new u.PredictAllAgeAndGenderTask(this.runAndExtendWithFaceDetections(),this.input)},p}(p);exports.DetectAllFacesTask=h;var l=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return(0,e.__extends)(i,n),i.prototype.run=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,new h(this.input,this.options)];case 1:return t=e.sent(),n=t[0],t.forEach(function(e){e.score>n.score&&(n=e)}),[2,n]}})})},i.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(i){return(0,e.__awaiter)(n,void 0,void 0,function(){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.run()];case 1:return n=e.sent(),[2,i(n?(0,t.extendWithFaceDetection)({},n):void 0)]}})})})},i.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new c.DetectSingleFaceLandmarksTask(this.runAndExtendWithFaceDetection(),this.input,e)},i.prototype.withFaceExpressions=function(){return new d.PredictSingleFaceExpressionsTask(this.runAndExtendWithFaceDetection(),this.input)},i.prototype.withAgeAndGender=function(){return new u.PredictSingleAgeAndGenderTask(this.runAndExtendWithFaceDetection(),this.input)},i}(p);exports.DetectSingleFaceTask=l;
},{"tslib":"qjU2","../factories/WithFaceDetection":"ufye","../mtcnn/MtcnnOptions":"Idgp","../ssdMobilenetv1/SsdMobilenetv1Options":"sbr6","../tinyFaceDetector/TinyFaceDetectorOptions":"v9q6","../tinyYolov2":"viua","./ComposableTask":"uKWf","./DetectFaceLandmarksTasks":"g1OH","./nets":"Tqdo","./PredictAgeAndGenderTask":"Rc8t","./PredictFaceExpressionsTask":"k9y7"}],"Daqn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detectSingleFace=s,exports.detectAllFaces=n;var e=require("../ssdMobilenetv1/SsdMobilenetv1Options"),t=require("./DetectFacesTasks");function s(s,n){return void 0===n&&(n=new e.SsdMobilenetv1Options),new t.DetectSingleFaceTask(s,n)}function n(s,n){return void 0===n&&(n=new e.SsdMobilenetv1Options),new t.DetectAllFacesTask(s,n)}
},{"../ssdMobilenetv1/SsdMobilenetv1Options":"sbr6","./DetectFacesTasks":"GJ3p"}],"M1wi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.allFacesSsdMobilenetv1=r,exports.allFacesTinyYolov2=a,exports.allFacesMtcnn=o,exports.allFaces=void 0;var e=require("tslib"),t=require("../mtcnn/MtcnnOptions"),n=require("../ssdMobilenetv1"),i=require("../tinyYolov2"),s=require("./detectFaces");function r(t,i){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return console.warn("allFacesSsdMobilenetv1 is deprecated and will be removed soon, use the high level api instead"),[4,(0,s.detectAllFaces)(t,new n.SsdMobilenetv1Options(i?{minConfidence:i}:{})).withFaceLandmarks().withFaceDescriptors()];case 1:return[2,e.sent()]}})})}function a(t,n){return void 0===n&&(n={}),(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return console.warn("allFacesTinyYolov2 is deprecated and will be removed soon, use the high level api instead"),[4,(0,s.detectAllFaces)(t,new i.TinyYolov2Options(n)).withFaceLandmarks().withFaceDescriptors()];case 1:return[2,e.sent()]}})})}function o(n,i){return void 0===i&&(i={}),(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return console.warn("allFacesMtcnn is deprecated and will be removed soon, use the high level api instead"),[4,(0,s.detectAllFaces)(n,new t.MtcnnOptions(i)).withFaceLandmarks().withFaceDescriptors()];case 1:return[2,e.sent()]}})})}var c=r;exports.allFaces=c;
},{"tslib":"qjU2","../mtcnn/MtcnnOptions":"Idgp","../ssdMobilenetv1":"pMO5","../tinyYolov2":"viua","./detectFaces":"Daqn"}],"lsRB":[function(require,module,exports) {
"use strict";function r(r,e){if(r.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(r),n=Array.from(e);return Math.sqrt(t.map(function(r,e){return r-n[e]}).reduce(function(r,e){return r+Math.pow(e,2)},0))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.euclideanDistance=r;
},{}],"VocE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceMatcher=void 0;var e=require("../classes/FaceMatch"),r=require("../classes/LabeledFaceDescriptors"),t=require("../euclideanDistance"),n=function(){function n(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var c=1,o=function(){return"person "+c++};this._labeledDescriptors=n.map(function(e){if(e instanceof r.LabeledFaceDescriptors)return e;if(e instanceof Float32Array)return new r.LabeledFaceDescriptors(o(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new r.LabeledFaceDescriptors(o(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,r){return r.map(function(r){return(0,t.euclideanDistance)(r,e)}).reduce(function(e,r){return e+r},0)/(r.length||1)},n.prototype.matchDescriptor=function(r){var t=this;return this.labeledDescriptors.map(function(n){var c=n.descriptors,o=n.label;return new e.FaceMatch(o,t.computeMeanDistance(r,c))}).reduce(function(e,r){return e.distance<r.distance?e:r})},n.prototype.findBestMatch=function(r){var t=this.matchDescriptor(r);return t.distance<this.distanceThreshold?t:new e.FaceMatch("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){return new n(e.labeledDescriptors.map(function(e){return r.LabeledFaceDescriptors.fromJSON(e)}),e.distanceThreshold)},n}();exports.FaceMatcher=n;
},{"../classes/FaceMatch":"oI1C","../classes/LabeledFaceDescriptors":"MbIs","../euclideanDistance":"lsRB"}],"bMPk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./allFaces");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&(r in exports&&exports[r]===e[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}}))});var r=require("./ComposableTask");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===r[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}}))});var t=require("./ComputeFaceDescriptorsTasks");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===t[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}}))});var o=require("./detectFaces");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===o[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}}))});var n=require("./DetectFacesTasks");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===n[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}}))});var u=require("./DetectFaceLandmarksTasks");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===u[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}}))});var s=require("./FaceMatcher");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===s[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}}))});var c=require("./nets");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in exports&&exports[e]===c[e]||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}}))});
},{"./allFaces":"M1wi","./ComposableTask":"uKWf","./ComputeFaceDescriptorsTasks":"lU9f","./detectFaces":"Daqn","./DetectFacesTasks":"GJ3p","./DetectFaceLandmarksTasks":"g1OH","./FaceMatcher":"VocE","./nets":"Tqdo"}],"WvOb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createMtcnn:!0};exports.createMtcnn=n;var t=require("./Mtcnn");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./MtcnnOptions");function n(e){var r=new t.Mtcnn;return r.extractWeights(e),r}Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});
},{"./Mtcnn":"uYvs","./MtcnnOptions":"Idgp"}],"AXDT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createTinyFaceDetector:!0};exports.createTinyFaceDetector=o;var t=require("./TinyFaceDetector");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./TinyFaceDetectorOptions");function o(e){var r=new t.TinyFaceDetector;return r.extractWeights(e),r}Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});
},{"./TinyFaceDetector":"kpkq","./TinyFaceDetectorOptions":"v9q6"}],"ybHn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeResults=s;var e=require("./classes"),i=require("./classes/FaceDetection"),t=require("./classes/FaceLandmarks"),r=require("./factories/WithFaceDetection"),n=require("./factories/WithFaceLandmarks");function s(a,c){var o=new e.Dimensions(c.width,c.height),h=o.width,d=o.height;if(h<=0||d<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:h,height:d}));if(Array.isArray(a))return a.map(function(e){return s(e,{width:h,height:d})});if((0,n.isWithFaceLandmarks)(a)){var u=a.detection.forSize(h,d),f=a.unshiftedLandmarks.forSize(u.box.width,u.box.height);return(0,n.extendWithFaceLandmarks)((0,r.extendWithFaceDetection)(a,u),f)}return(0,r.isWithFaceDetection)(a)?(0,r.extendWithFaceDetection)(a,a.detection.forSize(h,d)):a instanceof t.FaceLandmarks||a instanceof i.FaceDetection?a.forSize(h,d):a}
},{"./classes":"ywa2","./classes/FaceDetection":"EHzx","./classes/FaceLandmarks":"Cc3m","./factories/WithFaceDetection":"ufye","./factories/WithFaceLandmarks":"bw0I"}],"yNIJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={tf:!0,draw:!0,utils:!0};exports.utils=exports.draw=exports.tf=void 0;var t=v(require("@tensorflow/tfjs-core"));exports.tf=t;var r=v(require("./draw"));exports.draw=r;var o=v(require("./utils"));exports.utils=o;var n=require("./ageGenderNet/index");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===n[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var u=require("./classes/index");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===u[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var c=require("./dom/index");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===c[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return c[t]}}))});var p=require("./env/index");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===p[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var a=require("./faceExpressionNet/index");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===a[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var s=require("./faceLandmarkNet/index");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===s[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var i=require("./faceRecognitionNet/index");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===i[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))});var f=require("./factories/index");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===f[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var l=require("./globalApi/index");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===l[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var d=require("./mtcnn/index");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===d[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return d[t]}}))});var y=require("./ops/index");Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===y[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return y[t]}}))});var b=require("./ssdMobilenetv1/index");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===b[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var O=require("./tinyFaceDetector/index");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===O[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var x=require("./tinyYolov2/index");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===x[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var j=require("./euclideanDistance");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===j[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var P=require("./NeuralNetwork");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===P[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var _=require("./resizeResults");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===_[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});
},{"@tensorflow/tfjs-core":"FZBM","./draw":"sID2","./utils":"acHD","./ageGenderNet/index":"EEkx","./classes/index":"ywa2","./dom/index":"F9LC","./env/index":"iBDr","./faceExpressionNet/index":"YaCQ","./faceLandmarkNet/index":"DBMC","./faceRecognitionNet/index":"bYao","./factories/index":"bBQL","./globalApi/index":"bMPk","./mtcnn/index":"WvOb","./ops/index":"CGLe","./ssdMobilenetv1/index":"pMO5","./tinyFaceDetector/index":"AXDT","./tinyYolov2/index":"viua","./euclideanDistance":"lsRB","./NeuralNetwork":"bTJB","./resizeResults":"ybHn"}],"iLJ5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("react")),t=o(require("styled-components")),r=s(require("face-api.js")),a=require("src/config"),n=require("src/utils"),c=require("comp");function o(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var c=a?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(r,n,c):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}const i=({onDetect:t=n.nullFn})=>{const a=(0,e.useRef)(),o=(0,e.useRef)(),[l,s]=(0,e.useState)(!1),[i,f]=(0,e.useState)(null),[p,m]=(0,e.useState)(!1),[h,y]=(0,e.useState)(null);(0,e.useEffect)(()=>{u().then(e=>{console.log("data ready"),s(!0),f(e)})},[a]);const v=e=>{t(e)};return e.default.createElement(d,null,0==l?"Loading...":p?e.default.createElement(c.Button,{onClick:()=>{a.current.pause(),a.current.srcObject.getTracks()[0].stop(),m(!1),clearInterval(h)},size:"small",width:"100px"},"Stop"):e.default.createElement(c.Button,{onClick:()=>{m(!0),navigator.mediaDevices.getUserMedia({video:{width:160}}).then(e=>{let t=a.current;t.srcObject=e,t.play()}).catch(e=>{console.error("error:",e)})},size:"small",width:"200px"},"Face Recognition"),e.default.createElement(c.Space,{h:"0.5rem"}),e.default.createElement("div",{style:{display:l&&p?"block":"none"}},e.default.createElement("video",{ref:a,height:120,width:160,onPlay:()=>{console.log(a.current),y(setInterval(async()=>{if(o&&o.current){o.current.innerHTML=r.createCanvasFromMedia(a.current);const e={width:160,height:120};r.matchDimensions(o.current,e);const t=await r.detectAllFaces(a.current,new r.TinyFaceDetectorOptions).withFaceLandmarks().withFaceDescriptors(),n=r.resizeResults(t,e),c=new r.FaceMatcher(i,.7);n.map(e=>c.findBestMatch(e.descriptor)).forEach(e=>{v(e._label)})}},500))},style:{borderRadius:"10px"}}),e.default.createElement("canvas",{ref:o})))},u=()=>Promise.all([r.nets.tinyFaceDetector.loadFromUri(a.modelsUrl),r.nets.faceLandmark68Net.loadFromUri(a.modelsUrl),r.nets.ssdMobilenetv1.loadFromUri(a.modelsUrl),r.nets.faceRecognitionNet.loadFromUri(a.modelsUrl),r.nets.faceExpressionNet.loadFromUri(a.modelsUrl)]).then(()=>Promise.all(a.faceLabels.map(async e=>{const t=await r.fetchImage(`${a.facesUrl+e}.png`),n=await r.detectSingleFace(t).withFaceLandmarks().withFaceDescriptor();if(!n)throw"no facce detectedi";const c=[n.descriptor];return new r.LabeledFaceDescriptors(e,c)}))),d=t.default.div`
	display: flex;
	flex-direction: column;
`;var f=i;exports.default=f;
},{"react":"n8MK","styled-components":"tFSs","face-api.js":"yNIJ","src/config":"itQ5","src/utils":"FOZT","comp":"iA92"}],"pRdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("react")),t=r(require("styled-components"));function r(e){return e&&e.__esModule?e:{default:e}}const a=({entries:t})=>{const r={A:"",P:"",S:"",L:""},a={A:0,P:0,S:0,L:0};return t.forEach(e=>{"T"!=e.attd&&(a[e.attd]+=1)}),e.default.createElement(d,null,Object.keys(a).map(t=>e.default.createElement(n,{key:t},a[t]," ",r[t])))},d=t.default.div`
	display: flex;
	border: 1px solid #ccc;
	padding: 2rem 2rem;
	background: #f0f0ff;
	box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
	border-radius: 8px;
	align-items: center;
	justify-content: center;
	gap: 2rem;
`,n=t.default.div`
	font-size: 1.8rem;
`;var o=a;exports.default=o;
},{"react":"n8MK","styled-components":"tFSs"}],"FuvR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("react")),t=o(require("styled-components")),r=require("react-router-dom"),a=require("comp"),n=require("src/config");function o(e){return e&&e.__esModule?e:{default:e}}const u=()=>{const t=(0,r.useNavigate)();return e.default.createElement(l,{onChange:e=>{"menu"!=e.target.value&&t(n.links[e.target.value])}},e.default.createElement("option",{value:"menu"}," Menu"),e.default.createElement("option",{value:"adminHome"},"Admin"),e.default.createElement("option",{value:"teacherHome"},"Teacher"))},l=(0,t.default)(a.Select)`
	-moz-appearance: none;
	-webkit-appearance: none;
	background: var(--primary);
	color: #eee;
	width: min-content;
	font-weight: bold;
	padding-left: 1rem;
`;var c=u;exports.default=c;
},{"react":"n8MK","styled-components":"tFSs","react-router-dom":"UFqb","comp":"iA92","src/config":"itQ5"}],"TWzL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("react"));function t(e){return e&&e.__esModule?e:{default:e}}const r=({size:t="1rem",style:r,onClick:l})=>e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:t,onClick:l,style:r,viewBox:"0 96 960 960",width:t},e.default.createElement("path",{d:"M480 711 240 471l43-43 197 198 197-197 43 43-240 239Z"}));var l=r;exports.default=l;
},{"react":"n8MK"}],"Y1jt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("react"));function t(e){return e&&e.__esModule?e:{default:e}}const r=({style:t,size:r="1rem",onClick:l})=>e.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:r,viewBox:"0 96 960 960",style:t,onClick:l,width:r},e.default.createElement("path",{d:"m283 711-43-43 240-240 240 239-43 43-197-197-197 198Z"}));var l=r;exports.default=l;
},{"react":"n8MK"}],"atRt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("react")),t=u(require("styled-components")),r=require("comp"),n=u(require("src/icons/MoreIcon")),l=u(require("src/icons/LessIcon")),a=require("src/utils");function u(e){return e&&e.__esModule?e:{default:e}}function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var a=n?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(r,l,a):r[l]=e[l]}return r.default=e,t&&t.set(e,r),r}const f=({entries:t,onChange:r})=>e.default.createElement(d,null,t.map(t=>e.default.createElement(i,{key:t.name,entry:t,onChange:r}))),i=({entry:t,onChange:u})=>{const[o,c]=(0,e.useState)(!1),f=o?l.default:n.default;return e.default.createElement(s,{key:t.name},e.default.createElement(p,{fill:"true"},t.name),e.default.createElement(p,null,e.default.createElement(r.AttdButton,{value:t.attd,onClick:e=>u(t.entryId,{attd:e})}),e.default.createElement(f,{size:"2rem",style:{cursor:"pointer"},onClick:()=>c(a.toggle)})),o&&e.default.createElement(p,{fill:"true",style:{padding:"0.5rem 1rem"}},e.default.createElement(r.Input,{placeholder:"Type note here...",onChange:e=>u(t.entryId,{note:e.target.value})}),e.default.createElement("br",null),e.default.createElement(r.CameraButton,{onClick:e=>u(t.entryId,{img:e})})))},d=t.default.div`
`,s=t.default.div`
	display: flex;
	flex-wrap: wrap;
`,p=t.default.div`
	display: flex;
	align-items: center;
	flex-grow: ${e=>e.fill?"1":"0"};
`;var m=f;exports.default=m;
},{"react":"n8MK","styled-components":"tFSs","comp":"iA92","src/icons/MoreIcon":"TWzL","src/icons/LessIcon":"Y1jt","src/utils":"FOZT"}],"vDjI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("react")),t=l(require("styled-components")),r=require("src/utils");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var d=l?Object.getOwnPropertyDescriptor(e,a):null;d&&(d.get||d.set)?Object.defineProperty(r,a,d):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}const d=({students:t,entries:n,onClick:l})=>{const a=(0,r.minDate)(n.map(e=>e.date)),d=(0,r.maxDate)(n.map(e=>e.date));return e.default.createElement(u,null,e.default.createElement(o,null,e.default.createElement(i,{width:"200px"},e.default.createElement("strong",null,"Students")),t.map(t=>e.default.createElement(i,{key:t.studentId,width:"200px",style:{cursor:"pointer"},onClick:l(t.studentId)},t.name))),e.default.createElement(f,null,(0,r.fromToDate)(a,d,l=>e.default.createElement(o,{key:l},e.default.createElement(i,{center:"true"},e.default.createElement("strong",null,(0,r.dateToHeader)(l))),t.map(t=>e.default.createElement(i,{key:t.studentId,center:"true"},(0,r.displayAttdFromEntries)(n,t.studentId,l)))))))},u=t.default.div`
	display: flex;
	border: 1px solid #ccc;
	padding: 0.5rem;
	border-radius: 8px;
	box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
`,o=t.default.div`
	display: flex;
	flex-direction: column;
	flex-wrap: wrap;
	min-width: 100px;
`,i=t.default.div`
	display: flex;
	height: 2rem;
	width: ${e=>e.width||"auto"};
	flex-grow: 1;
	${e=>e.center&&t.css`
		justify-content: center;
	`}
`,f=t.default.div`
	overflow-x: scroll;
	display: flex;
	flex-grow: 1;
`;var c=d;exports.default=c;
},{"react":"n8MK","styled-components":"tFSs","src/utils":"FOZT"}],"iA92":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AttdButton",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"TimeButton",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"CameraButton",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Space",{enumerable:!0,get:function(){return n.Space}}),Object.defineProperty(exports,"FlexGrow",{enumerable:!0,get:function(){return n.FlexGrow}}),Object.defineProperty(exports,"Row",{enumerable:!0,get:function(){return n.Row}}),Object.defineProperty(exports,"Block",{enumerable:!0,get:function(){return n.Block}}),Object.defineProperty(exports,"Input",{enumerable:!0,get:function(){return u.Input}}),Object.defineProperty(exports,"InputMultiple",{enumerable:!0,get:function(){return u.InputMultiple}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return u.Select}}),Object.defineProperty(exports,"Button",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"FaceButton",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"IssuesBoard",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"MenuButton",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"DayTable",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"AttdTable",{enumerable:!0,get:function(){return c.default}});var e=p(require("./general/AttdButton")),t=p(require("./general/TimeButton")),r=p(require("./general/CameraButton")),n=require("./general/Grid"),u=require("./general/Input"),o=p(require("./general/Button")),a=p(require("./general/FaceButton")),l=p(require("./general/IssuesBoard")),i=p(require("./general/MenuButton")),f=p(require("./tables/DayTable")),c=p(require("./tables/AttdTable"));function p(e){return e&&e.__esModule?e:{default:e}}
},{"./general/AttdButton":"Z4Oe","./general/TimeButton":"hp4X","./general/CameraButton":"pMb3","./general/Grid":"RiWY","./general/Input":"j3eL","./general/Button":"aQX2","./general/FaceButton":"iLJ5","./general/IssuesBoard":"pRdr","./general/MenuButton":"FuvR","./tables/DayTable":"atRt","./tables/AttdTable":"vDjI"}],"hW5V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.authState=exports.entriesState=exports.studentsState=void 0;var e=require("recoil");const t=[{studentId:1,name:"Aman Redi",grade:"11",section:"A",phonenumber:"0911203040",face:""},{studentId:2,name:"Aymen Kedir",grade:"11",section:"A",phonenumber:"0911203040",face:""},{studentId:3,name:"Biruk Million",grade:"11",section:"A",phonenumber:"0911203040",face:""},{studentId:4,name:"Amanuel Asheber",grade:"11",section:"B",phonenumber:"0911203040",face:""},{studentId:5,name:"Kaleb Dembelash",grade:"11",section:"B",phonenumber:"0911203040",face:""},{studentId:6,name:"Kirubel Belayneh",grade:"11",section:"B",phonenumber:"0911203040",face:""}],n=(0,e.atom)({key:"students",default:t});exports.studentsState=n;const a=(0,e.atom)({key:"entries",default:[]});exports.entriesState=a;const s=(0,e.atom)({key:"auth",default:!1});exports.authState=s;
},{"recoil":"mfdx"}],"EDTP":[function(require,module,exports) {
"use strict";function e(e,t){return function(){return e.apply(t,arguments)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"S1cf":[function(require,module,exports) {
var global = arguments[3];
var define;
var e,t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=n(require("./helpers/bind.js"));function n(e){return e&&e.__esModule?e:{default:e}}const{toString:o}=Object.prototype,{getPrototypeOf:i}=Object,s=(e=>t=>{const r=o.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),l=e=>(e=e.toLowerCase(),t=>s(t)===e),a=e=>t=>typeof t===e,{isArray:c}=Array,u=a("undefined");function f(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&b(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const p=l("ArrayBuffer");function y(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&p(e.buffer)}const d=a("string"),b=a("function"),O=a("number"),g=e=>null!==e&&"object"==typeof e,h=e=>!0===e||!1===e,m=e=>{if("object"!==s(e))return!1;const t=i(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},w=l("Date"),j=l("File"),A=l("Blob"),F=l("FileList"),S=e=>g(e)&&b(e.pipe),P=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||b(e.append)&&("formdata"===(t=s(e))||"object"===t&&b(e.toString)&&"[object FormData]"===e.toString()))},x=l("URLSearchParams"),L=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function B(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),c(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(n=0;n<i;n++)s=o[n],t.call(null,e[s],s,e)}}function C(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(t===(n=r[o]).toLowerCase())return n;return null}const D=(()=>"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t)(),T=e=>!u(e)&&e!==D;function E(){const{caseless:e}=T(this)&&this||{},t={},r=(r,n)=>{const o=e&&C(t,n)||n;m(t[o])&&m(r)?t[o]=E(t[o],r):m(r)?t[o]=E({},r):c(r)?t[o]=r.slice():t[o]=r};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&B(arguments[n],r);return t}const v=(e,t,n,{allOwnKeys:o}={})=>(B(t,(t,o)=>{n&&b(t)?e[o]=(0,r.default)(t,n):e[o]=t},{allOwnKeys:o}),e),M=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),N=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},U=(e,t,r,n)=>{let o,s,l;const a={};if(t=t||{},null==e)return t;do{for(s=(o=Object.getOwnPropertyNames(e)).length;s-- >0;)l=o[s],n&&!n(l,e,t)||a[l]||(t[l]=e[l],a[l]=!0);e=!1!==r&&i(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},_=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},H=e=>{if(!e)return null;if(c(e))return e;let t=e.length;if(!O(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},I=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&i(Uint8Array)),k=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},K=(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},R=l("HTMLFormElement"),z=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),G=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),V=l("RegExp"),q=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};B(r,(r,o)=>{!1!==t(r,o,e)&&(n[o]=r)}),Object.defineProperties(e,n)},J=e=>{q(e,(t,r)=>{if(b(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];b(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=(()=>{throw Error("Can not rewrite read-only method '"+r+"'")})))})},W=(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return c(e)?n(e):n(String(e).split(t)),r},$=()=>{},Q=(e,t)=>(e=+e,Number.isFinite(e)?e:t),X="abcdefghijklmnopqrstuvwxyz",Y="0123456789",Z={DIGIT:Y,ALPHA:X,ALPHA_DIGIT:X+X.toUpperCase()+Y},ee=(e=16,t=Z.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function te(e){return!!(e&&b(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}const re=e=>{const t=new Array(10),r=(e,n)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=c(e)?[]:{};return B(e,(e,t)=>{const i=r(e,n+1);!u(i)&&(o[t]=i)}),t[n]=void 0,o}}return e};return r(e,0)},ne=l("AsyncFunction"),oe=e=>e&&(g(e)||b(e))&&b(e.then)&&b(e.catch);var ie={isArray:c,isArrayBuffer:p,isBuffer:f,isFormData:P,isArrayBufferView:y,isString:d,isNumber:O,isBoolean:h,isObject:g,isPlainObject:m,isUndefined:u,isDate:w,isFile:j,isBlob:A,isRegExp:V,isFunction:b,isStream:S,isURLSearchParams:x,isTypedArray:I,isFileList:F,forEach:B,merge:E,extend:v,trim:L,stripBOM:M,inherits:N,toFlatObject:U,kindOf:s,kindOfTest:l,endsWith:_,toArray:H,forEachEntry:k,matchAll:K,isHTMLForm:R,hasOwnProperty:G,hasOwnProp:G,reduceDescriptors:q,freezeMethods:J,toObjectSet:W,toCamelCase:z,noop:$,toFiniteNumber:Q,findKey:C,global:D,isContextDefined:T,ALPHABET:Z,generateString:ee,isSpecCompliantForm:te,toJSONObject:re,isAsyncFn:ne,isThenable:oe};exports.default=ie;
},{"./helpers/bind.js":"EDTP"}],"rRKx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../utils.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t,r,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i)}e.default.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:e.default.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const s=r.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{i[e]={value:e}}),Object.defineProperties(r,i),Object.defineProperty(s,"isAxiosError",{value:!0}),r.from=((t,i,o,a,n,c)=>{const u=Object.create(s);return e.default.toFlatObject(t,u,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),r.call(u,t.message,i,o,a,n),u.cause=t,u.name=t.name,c&&Object.assign(u,c),u});var o=r;exports.default=o;
},{"../utils.js":"S1cf"}],"jiNE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=null;exports.default=e;
},{}],"BFle":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../utils.js")),r=i(require("../core/AxiosError.js")),n=i(require("../platform/node/classes/FormData.js"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return t.default.isPlainObject(e)||t.default.isArray(e)}function f(e){return t.default.endsWith(e,"[]")?e.slice(0,-2):e}function o(e,t,r){return e?e.concat(t).map(function(e,t){return e=f(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function a(e){return t.default.isArray(e)&&!e.some(u)}const l=t.default.toFlatObject(t.default,{},null,function(e){return/^is[A-Z]/.test(e)});function s(i,s,d){if(!t.default.isObject(i))throw new TypeError("target must be an object");s=s||new(n.default||FormData);const c=(d=t.default.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,r){return!t.default.isUndefined(r[e])})).metaTokens,p=d.visitor||h,b=d.dots,j=d.indexes,y=(d.Blob||"undefined"!=typeof Blob&&Blob)&&t.default.isSpecCompliantForm(s);if(!t.default.isFunction(p))throw new TypeError("visitor must be a function");function m(n){if(null===n)return"";if(t.default.isDate(n))return n.toISOString();if(!y&&t.default.isBlob(n))throw new r.default("Blob is not supported. Use a Buffer instead.");return t.default.isArrayBuffer(n)||t.default.isTypedArray(n)?y&&"function"==typeof Blob?new Blob([n]):e.from(n):n}function h(e,r,n){let i=e;if(e&&!n&&"object"==typeof e)if(t.default.endsWith(r,"{}"))r=c?r:r.slice(0,-2),e=JSON.stringify(e);else if(t.default.isArray(e)&&a(e)||(t.default.isFileList(e)||t.default.endsWith(r,"[]"))&&(i=t.default.toArray(e)))return r=f(r),i.forEach(function(e,n){!t.default.isUndefined(e)&&null!==e&&s.append(!0===j?o([r],n,b):null===j?r:r+"[]",m(e))}),!1;return!!u(e)||(s.append(o(n,r,b),m(e)),!1)}const w=[],B=Object.assign(l,{defaultVisitor:h,convertValue:m,isVisitable:u});if(!t.default.isObject(i))throw new TypeError("data must be an object");return function e(r,n){if(!t.default.isUndefined(r)){if(-1!==w.indexOf(r))throw Error("Circular reference detected in "+n.join("."));w.push(r),t.default.forEach(r,function(r,i){!0===(!(t.default.isUndefined(r)||null===r)&&p.call(s,r,t.default.isString(i)?i.trim():i,n,B))&&e(r,n?n.concat(i):[i])}),w.pop()}}(i),s}var d=s;exports.default=d;
},{"../utils.js":"S1cf","../core/AxiosError.js":"rRKx","../platform/node/classes/FormData.js":"jiNE","buffer":"qrgL"}],"lSwM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./toFormData.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function r(e,n){this._pairs=[],e&&(0,t.default)(e,this,n)}const o=r.prototype;o.append=function(t,e){this._pairs.push([t,e])},o.toString=function(t){const e=t?function(e){return t.call(this,e,n)}:n;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};var u=r;exports.default=u;
},{"./toFormData.js":"BFle"}],"H6Qo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=t(require("../utils.js")),r=t(require("../helpers/AxiosURLSearchParams.js"));function t(e){return e&&e.__esModule?e:{default:e}}function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function n(t,n,a){if(!n)return t;const c=a&&a.encode||i,l=a&&a.serialize;let s;if(s=l?l(n,a):e.default.isURLSearchParams(n)?n.toString():new r.default(n,a).toString(c)){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+s}return t}
},{"../utils.js":"S1cf","../helpers/AxiosURLSearchParams.js":"lSwM"}],"rj2i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./../utils.js"));function s(e){return e&&e.__esModule?e:{default:e}}class r{constructor(){this.handlers=[]}use(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){e.default.forEach(this.handlers,function(e){null!==e&&s(e)})}}var t=r;exports.default=t;
},{"./../utils.js":"S1cf"}],"LrSb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};exports.default=e;
},{}],"gNhC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../../../helpers/AxiosURLSearchParams.js"));function r(e){return e&&e.__esModule?e:{default:e}}var a="undefined"!=typeof URLSearchParams?URLSearchParams:e.default;exports.default=a;
},{"../../../helpers/AxiosURLSearchParams.js":"lSwM"}],"BCMH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="undefined"!=typeof FormData?FormData:null;exports.default=e;
},{}],"jSAH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="undefined"!=typeof Blob?Blob:null;exports.default=e;
},{}],"KFqX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./classes/URLSearchParams.js")),r=o(require("./classes/FormData.js")),t=o(require("./classes/Blob.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),s=(()=>"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts)();var d={isBrowser:!0,classes:{URLSearchParams:e.default,FormData:r.default,Blob:t.default},isStandardBrowserEnv:a,isStandardBrowserWebWorkerEnv:s,protocols:["http","https","file","blob","url","data"]};exports.default=d;
},{"./classes/URLSearchParams.js":"gNhC","./classes/FormData.js":"BCMH","./classes/Blob.js":"jSAH"}],"dN6h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}});var e=t(require("./node/index.js"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./node/index.js":"KFqX"}],"R27V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=s(require("../utils.js")),t=s(require("./toFormData.js")),r=s(require("../platform/index.js"));function s(e){return e&&e.__esModule?e:{default:e}}function u(s,u){return(0,t.default)(s,new r.default.classes.URLSearchParams,Object.assign({visitor:function(t,s,u,a){return r.default.isNode&&e.default.isBuffer(t)?(this.append(s,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},u))}
},{"../utils.js":"S1cf","./toFormData.js":"BFle","../platform/index.js":"dN6h"}],"zEQI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../utils.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(e){return t.default.matchAll(/\w+|\[(\w*)]/g,e).map(t=>"[]"===t[0]?"":t[1]||t[0])}function n(t){const e={},r=Object.keys(t);let n;const u=r.length;let l;for(n=0;n<u;n++)e[l=r[n]]=t[l];return e}function u(e){if(t.default.isFormData(e)&&t.default.isFunction(e.entries)){const u={};return t.default.forEachEntry(e,(e,l)=>{!function e(r,u,l,a){let s=r[a++];const i=Number.isFinite(+s),o=a>=r.length;return s=!s&&t.default.isArray(l)?l.length:s,o?(t.default.hasOwnProp(l,s)?l[s]=[l[s],u]:l[s]=u,!i):(l[s]&&t.default.isObject(l[s])||(l[s]=[]),e(r,u,l[s],a)&&t.default.isArray(l[s])&&(l[s]=n(l[s])),!i)}(r(e),l,u,0)}),u}return null}var l=u;exports.default=l;
},{"../utils.js":"S1cf"}],"VQpg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../utils.js")),t=o(require("../core/AxiosError.js")),r=o(require("./transitional.js")),a=o(require("../helpers/toFormData.js")),i=o(require("../helpers/toURLEncodedForm.js")),n=o(require("../platform/index.js")),s=o(require("../helpers/formDataToJSON.js"));function o(e){return e&&e.__esModule?e:{default:e}}const f={"Content-Type":void 0};function u(t,r,a){if(e.default.isString(t))try{return(r||JSON.parse)(t),e.default.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(a||JSON.stringify)(t)}const l={transitional:r.default,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",o=n.indexOf("application/json")>-1,f=e.default.isObject(t);if(f&&e.default.isHTMLForm(t)&&(t=new FormData(t)),e.default.isFormData(t))return o&&o?JSON.stringify((0,s.default)(t)):t;if(e.default.isArrayBuffer(t)||e.default.isBuffer(t)||e.default.isStream(t)||e.default.isFile(t)||e.default.isBlob(t))return t;if(e.default.isArrayBufferView(t))return t.buffer;if(e.default.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(f){if(n.indexOf("application/x-www-form-urlencoded")>-1)return(0,i.default)(t,this.formSerializer).toString();if((l=e.default.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return(0,a.default)(l?{"files[]":t}:t,e&&new e,this.formSerializer)}}return f||o?(r.setContentType("application/json",!1),u(t)):t}],transformResponse:[function(r){const a=this.transitional||l.transitional,i=a&&a.forcedJSONParsing,n="json"===this.responseType;if(r&&e.default.isString(r)&&(i&&!this.responseType||n)){const e=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(r)}catch(s){if(e){if("SyntaxError"===s.name)throw t.default.from(s,t.default.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n.default.classes.FormData,Blob:n.default.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};e.default.forEach(["delete","get","head"],function(e){l.headers[e]={}}),e.default.forEach(["post","put","patch"],function(t){l.headers[t]=e.default.merge(f)});var d=l;exports.default=d;
},{"../utils.js":"S1cf","../core/AxiosError.js":"rRKx","./transitional.js":"LrSb","../helpers/toFormData.js":"BFle","../helpers/toURLEncodedForm.js":"R27V","../platform/index.js":"dN6h","../helpers/formDataToJSON.js":"zEQI"}],"ZeD7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./../utils.js"));function t(e){return e&&e.__esModule?e:{default:e}}const r=e.default.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var o=e=>{const t={};let o,i,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),o=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!o||t[o]&&r[o]||("set-cookie"===o?t[o]?t[o].push(i):t[o]=[i]:t[o]=t[o]?t[o]+", "+i:i)}),t};exports.default=o;
},{"./../utils.js":"S1cf"}],"aueS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../utils.js")),e=r(require("../helpers/parseHeaders.js"));function r(t){return t&&t.__esModule?t:{default:t}}const n=Symbol("internals");function s(t){return t&&String(t).trim().toLowerCase()}function i(e){return!1===e||null==e?e:t.default.isArray(e)?e.map(i):String(e)}function o(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const c=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function a(e,r,n,s,i){return t.default.isFunction(s)?s.call(this,r,n):(i&&(r=n),t.default.isString(r)?t.default.isString(s)?-1!==r.indexOf(s):t.default.isRegExp(s)?s.test(r):void 0:void 0)}function u(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,r)=>e.toUpperCase()+r)}function f(e,r){const n=t.default.toCamelCase(" "+r);["get","set","has"].forEach(t=>{Object.defineProperty(e,t+n,{value:function(e,n,s){return this[t].call(this,r,e,n,s)},configurable:!0})})}class l{constructor(t){t&&this.set(t)}set(r,n,o){const a=this;function u(e,r,n){const o=s(r);if(!o)throw new Error("header name must be a non-empty string");const c=t.default.findKey(a,o);(!c||void 0===a[c]||!0===n||void 0===n&&!1!==a[c])&&(a[c||r]=i(e))}const f=(e,r)=>t.default.forEach(e,(t,e)=>u(t,e,r));return t.default.isPlainObject(r)||r instanceof this.constructor?f(r,n):t.default.isString(r)&&(r=r.trim())&&!c(r)?f((0,e.default)(r),n):null!=r&&u(n,r,o),this}get(e,r){if(e=s(e)){const n=t.default.findKey(this,e);if(n){const e=this[n];if(!r)return e;if(!0===r)return o(e);if(t.default.isFunction(r))return r.call(this,e,n);if(t.default.isRegExp(r))return r.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=s(e)){const n=t.default.findKey(this,e);return!(!n||void 0===this[n]||r&&!a(this,this[n],n,r))}return!1}delete(e,r){const n=this;let i=!1;function o(e){if(e=s(e)){const s=t.default.findKey(n,e);!s||r&&!a(n,n[s],s,r)||(delete n[s],i=!0)}}return t.default.isArray(e)?e.forEach(o):o(e),i}clear(t){const e=Object.keys(this);let r=e.length,n=!1;for(;r--;){const s=e[r];t&&!a(this,this[s],s,t,!0)||(delete this[s],n=!0)}return n}normalize(e){const r=this,n={};return t.default.forEach(this,(s,o)=>{const c=t.default.findKey(n,o);if(c)return r[c]=i(s),void delete r[o];const a=e?u(o):String(o).trim();a!==o&&delete r[o],r[a]=i(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(e){const r=Object.create(null);return t.default.forEach(this,(n,s)=>{null!=n&&!1!==n&&(r[s]=e&&t.default.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach(t=>r.set(t)),r}static accessor(e){const r=(this[n]=this[n]={accessors:{}}).accessors,i=this.prototype;function o(t){const e=s(t);r[e]||(f(i,t),r[e]=!0)}return t.default.isArray(e)?e.forEach(o):o(e),this}}l.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),t.default.freezeMethods(l.prototype),t.default.freezeMethods(l);var d=l;exports.default=d;
},{"../utils.js":"S1cf","../helpers/parseHeaders.js":"ZeD7"}],"woEt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=u(require("./../utils.js")),t=u(require("../defaults/index.js")),r=u(require("../core/AxiosHeaders.js"));function u(e){return e&&e.__esModule?e:{default:e}}function s(u,s){const a=this||t.default,o=s||a,i=r.default.from(o.headers);let l=o.data;return e.default.forEach(u,function(e){l=e.call(a,l,i.normalize(),s?s.status:void 0)}),i.normalize(),l}
},{"./../utils.js":"S1cf","../defaults/index.js":"VQpg","../core/AxiosHeaders.js":"aueS"}],"V30M":[function(require,module,exports) {
"use strict";function e(e){return!(!e||!e.__CANCEL__)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"E1lI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../core/AxiosError.js")),r=t(require("../utils.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(r,t,u){e.default.call(this,null==r?"canceled":r,e.default.ERR_CANCELED,t,u),this.name="CanceledError"}r.default.inherits(u,e.default,{__CANCEL__:!0});var l=u;exports.default=l;
},{"../core/AxiosError.js":"rRKx","../utils.js":"S1cf"}],"aS8y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=e(require("./AxiosError.js"));function e(t){return t&&t.__esModule?t:{default:t}}function s(e,s,u){const a=u.config.validateStatus;u.status&&a&&!a(u.status)?s(new t.default("Request failed with status code "+u.status,[t.default.ERR_BAD_REQUEST,t.default.ERR_BAD_RESPONSE][Math.floor(u.status/100)-4],u.config,u.request,u)):e(u)}
},{"./AxiosError.js":"rRKx"}],"dn2M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./../utils.js")),t=n(require("../platform/index.js"));function n(e){return e&&e.__esModule?e:{default:e}}var o=t.default.isStandardBrowserEnv?{write:function(t,n,o,r,u,i){const s=[];s.push(t+"="+encodeURIComponent(n)),e.default.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),e.default.isString(r)&&s.push("path="+r),e.default.isString(u)&&s.push("domain="+u),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};exports.default=o;
},{"./../utils.js":"S1cf","../platform/index.js":"dN6h"}],"YZjV":[function(require,module,exports) {
"use strict";function e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"a2Uu":[function(require,module,exports) {
"use strict";function e(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"KxkP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("../helpers/isAbsoluteURL.js")),r=t(require("../helpers/combineURLs.js"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){return t&&!(0,e.default)(u)?(0,r.default)(t,u):u}
},{"../helpers/isAbsoluteURL.js":"YZjV","../helpers/combineURLs.js":"a2Uu"}],"w7LF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./../utils.js")),t=r(require("../platform/index.js"));function r(e){return e&&e.__esModule?e:{default:e}}var o=t.default.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let o;function a(e){let o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return o=a(window.location.href),function(t){const r=e.default.isString(t)?a(t):t;return r.protocol===o.protocol&&r.host===o.host}}():function(){return!0};exports.default=o;
},{"./../utils.js":"S1cf","../platform/index.js":"dN6h"}],"NS8l":[function(require,module,exports) {
"use strict";function e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"keMf":[function(require,module,exports) {
"use strict";function e(e,t){e=e||10;const r=new Array(e),o=new Array(e);let n,u=0,s=0;return t=void 0!==t?t:1e3,function(a){const d=Date.now(),i=o[s];n||(n=d),r[u]=a,o[u]=d;let c=s,f=0;for(;c!==u;)f+=r[c++],c%=e;if((u=(u+1)%e)===s&&(s=(s+1)%e),d-n<t)return;const l=i&&d-i;return l?Math.round(1e3*f/l):void 0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e;exports.default=t;
},{}],"KRuG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("./../utils.js")),t=p(require("./../core/settle.js")),o=p(require("./../helpers/cookies.js")),r=p(require("./../helpers/buildURL.js")),s=p(require("../core/buildFullPath.js")),n=p(require("./../helpers/isURLSameOrigin.js")),a=p(require("../defaults/transitional.js")),u=p(require("../core/AxiosError.js")),l=p(require("../cancel/CanceledError.js")),d=p(require("../helpers/parseProtocol.js")),i=p(require("../platform/index.js")),f=p(require("../core/AxiosHeaders.js")),c=p(require("../helpers/speedometer.js"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){let o=0;const r=(0,c.default)(50,250);return s=>{const n=s.loaded,a=s.lengthComputable?s.total:void 0,u=n-o,l=r(u);o=n;const d={loaded:n,total:a,progress:a?n/a:void 0,bytes:u,rate:l||void 0,estimated:l&&a&&n<=a?(a-n)/l:void 0,event:s};d[t?"download":"upload"]=!0,e(d)}}const E="undefined"!=typeof XMLHttpRequest;var T=E&&function(c){return new Promise(function(p,E){let T=c.data;const g=f.default.from(c.headers).normalize(),h=c.responseType;let R;function w(){c.cancelToken&&c.cancelToken.unsubscribe(R),c.signal&&c.signal.removeEventListener("abort",R)}e.default.isFormData(T)&&(i.default.isStandardBrowserEnv||i.default.isStandardBrowserWebWorkerEnv?g.setContentType(!1):g.setContentType("multipart/form-data;",!1));let q=new XMLHttpRequest;if(c.auth){const e=c.auth.username||"",t=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";g.set("Authorization","Basic "+btoa(e+":"+t))}const b=(0,s.default)(c.baseURL,c.url);function v(){if(!q)return;const e=f.default.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),o={data:h&&"text"!==h&&"json"!==h?q.response:q.responseText,status:q.status,statusText:q.statusText,headers:e,config:c,request:q};(0,t.default)(function(e){p(e),w()},function(e){E(e),w()},o),q=null}if(q.open(c.method.toUpperCase(),(0,r.default)(b,c.params,c.paramsSerializer),!0),q.timeout=c.timeout,"onloadend"in q?q.onloadend=v:q.onreadystatechange=function(){q&&4===q.readyState&&(0!==q.status||q.responseURL&&0===q.responseURL.indexOf("file:"))&&setTimeout(v)},q.onabort=function(){q&&(E(new u.default("Request aborted",u.default.ECONNABORTED,c,q)),q=null)},q.onerror=function(){E(new u.default("Network Error",u.default.ERR_NETWORK,c,q)),q=null},q.ontimeout=function(){let e=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const t=c.transitional||a.default;c.timeoutErrorMessage&&(e=c.timeoutErrorMessage),E(new u.default(e,t.clarifyTimeoutError?u.default.ETIMEDOUT:u.default.ECONNABORTED,c,q)),q=null},i.default.isStandardBrowserEnv){const e=(c.withCredentials||(0,n.default)(b))&&c.xsrfCookieName&&o.default.read(c.xsrfCookieName);e&&g.set(c.xsrfHeaderName,e)}void 0===T&&g.setContentType(null),"setRequestHeader"in q&&e.default.forEach(g.toJSON(),function(e,t){q.setRequestHeader(t,e)}),e.default.isUndefined(c.withCredentials)||(q.withCredentials=!!c.withCredentials),h&&"json"!==h&&(q.responseType=c.responseType),"function"==typeof c.onDownloadProgress&&q.addEventListener("progress",m(c.onDownloadProgress,!0)),"function"==typeof c.onUploadProgress&&q.upload&&q.upload.addEventListener("progress",m(c.onUploadProgress)),(c.cancelToken||c.signal)&&(R=(e=>{q&&(E(!e||e.type?new l.default(null,c,q):e),q.abort(),q=null)}),c.cancelToken&&c.cancelToken.subscribe(R),c.signal&&(c.signal.aborted?R():c.signal.addEventListener("abort",R)));const x=(0,d.default)(b);x&&-1===i.default.protocols.indexOf(x)?E(new u.default("Unsupported protocol "+x+":",u.default.ERR_BAD_REQUEST,c)):q.send(T||null)})};exports.default=T;
},{"./../utils.js":"S1cf","./../core/settle.js":"aS8y","./../helpers/cookies.js":"dn2M","./../helpers/buildURL.js":"H6Qo","../core/buildFullPath.js":"KxkP","./../helpers/isURLSameOrigin.js":"w7LF","../defaults/transitional.js":"LrSb","../core/AxiosError.js":"rRKx","../cancel/CanceledError.js":"E1lI","../helpers/parseProtocol.js":"NS8l","../platform/index.js":"dN6h","../core/AxiosHeaders.js":"aueS","../helpers/speedometer.js":"keMf"}],"MSoV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../utils.js")),t=o(require("./http.js")),r=o(require("./xhr.js")),a=o(require("../core/AxiosError.js"));function o(e){return e&&e.__esModule?e:{default:e}}const n={http:t.default,xhr:r.default};e.default.forEach(n,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});var i={getAdapter:t=>{t=e.default.isArray(t)?t:[t];const{length:r}=t;let o,i;for(let a=0;a<r&&(o=t[a],!(i=e.default.isString(o)?n[o.toLowerCase()]:o));a++);if(!i){if(!1===i)throw new a.default(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(e.default.hasOwnProp(n,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`)}if(!e.default.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:n};exports.default=i;
},{"../utils.js":"S1cf","./http.js":"jiNE","./xhr.js":"KRuG","../core/AxiosError.js":"rRKx"}],"uz6X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=d(require("./transformData.js")),r=d(require("../cancel/isCancel.js")),a=d(require("../defaults/index.js")),t=d(require("../cancel/CanceledError.js")),s=d(require("../core/AxiosHeaders.js")),n=d(require("../adapters/adapters.js"));function d(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new t.default(null,e)}function u(t){return o(t),t.headers=s.default.from(t.headers),t.data=e.default.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),n.default.getAdapter(t.adapter||a.default.adapter)(t).then(function(r){return o(t),r.data=e.default.call(t,t.transformResponse,r),r.headers=s.default.from(r.headers),r},function(a){return(0,r.default)(a)||(o(t),a&&a.response&&(a.response.data=e.default.call(t,t.transformResponse,a.response),a.response.headers=s.default.from(a.response.headers))),Promise.reject(a)})}
},{"./transformData.js":"woEt","../cancel/isCancel.js":"V30M","../defaults/index.js":"VQpg","../cancel/CanceledError.js":"E1lI","../core/AxiosHeaders.js":"aueS","../adapters/adapters.js":"MSoV"}],"OHvn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=n(require("../utils.js")),t=n(require("./AxiosHeaders.js"));function n(e){return e&&e.__esModule?e:{default:e}}const s=e=>e instanceof t.default?e.toJSON():e;function i(t,n){n=n||{};const i={};function r(t,n,s){return e.default.isPlainObject(t)&&e.default.isPlainObject(n)?e.default.merge.call({caseless:s},t,n):e.default.isPlainObject(n)?e.default.merge({},n):e.default.isArray(n)?n.slice():n}function a(t,n,s){return e.default.isUndefined(n)?e.default.isUndefined(t)?void 0:r(void 0,t,s):r(t,n,s)}function o(t,n){if(!e.default.isUndefined(n))return r(void 0,n)}function d(t,n){return e.default.isUndefined(n)?e.default.isUndefined(t)?void 0:r(void 0,t):r(void 0,n)}function u(e,s,i){return i in n?r(e,s):i in t?r(void 0,e):void 0}const f={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(e,t)=>a(s(e),s(t),!0)};return e.default.forEach(Object.keys(Object.assign({},t,n)),function(s){const r=f[s]||a,o=r(t[s],n[s],s);e.default.isUndefined(o)&&r!==u||(i[s]=o)}),i}
},{"../utils.js":"S1cf","./AxiosHeaders.js":"aueS"}],"xNqU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=void 0;const e="1.4.0";exports.VERSION="1.4.0";
},{}],"lsvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../env/data.js"),t=n(require("../core/AxiosError.js"));function n(e){return e&&e.__esModule?e:{default:e}}const o={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const r={};function i(e,n,o){if("object"!=typeof e)throw new t.default("options must be an object",t.default.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=n[a];if(s){const n=e[a],o=void 0===n||s(n,a,e);if(!0!==o)throw new t.default("option "+a+" must be "+o,t.default.ERR_BAD_OPTION_VALUE)}else if(!0!==o)throw new t.default("Unknown option "+a,t.default.ERR_BAD_OPTION)}}o.transitional=function(n,o,i){function a(t,n){return"[Axios v"+e.VERSION+"] Transitional option '"+t+"'"+n+(i?". "+i:"")}return(e,i,s)=>{if(!1===n)throw new t.default(a(i," has been removed"+(o?" in "+o:"")),t.default.ERR_DEPRECATED);return o&&!r[i]&&(r[i]=!0,console.warn(a(i," has been deprecated since v"+o+" and will be removed in the near future"))),!n||n(e,i,s)}};var a={assertOptions:i,validators:o};exports.default=a;
},{"../env/data.js":"xNqU","../core/AxiosError.js":"rRKx"}],"OvAf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./../utils.js")),t=i(require("../helpers/buildURL.js")),r=i(require("./InterceptorManager.js")),a=i(require("./dispatchRequest.js")),s=i(require("./mergeConfig.js")),o=i(require("./buildFullPath.js")),n=i(require("../helpers/validator.js")),u=i(require("./AxiosHeaders.js"));function i(e){return e&&e.__esModule?e:{default:e}}const l=n.default.validators;class d{constructor(e){this.defaults=e,this.interceptors={request:new r.default,response:new r.default}}request(t,r){"string"==typeof t?(r=r||{}).url=t:r=t||{},r=(0,s.default)(this.defaults,r);const{transitional:o,paramsSerializer:i,headers:d}=r;let f;void 0!==o&&n.default.assertOptions(o,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1),null!=i&&(e.default.isFunction(i)?r.paramsSerializer={serialize:i}:n.default.assertOptions(i,{encode:l.function,serialize:l.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase(),(f=d&&e.default.merge(d.common,d[r.method]))&&e.default.forEach(["delete","get","head","post","put","patch","common"],e=>{delete d[e]}),r.headers=u.default.concat(f,d);const c=[];let h=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(r)||(h=h&&e.synchronous,c.unshift(e.fulfilled,e.rejected))});const p=[];let m;this.interceptors.response.forEach(function(e){p.push(e.fulfilled,e.rejected)});let g,q=0;if(!h){const e=[a.default.bind(this),void 0];for(e.unshift.apply(e,c),e.push.apply(e,p),g=e.length,m=Promise.resolve(r);q<g;)m=m.then(e[q++],e[q++]);return m}g=c.length;let y=r;for(q=0;q<g;){const e=c[q++],t=c[q++];try{y=e(y)}catch(j){t.call(this,j);break}}try{m=a.default.call(this,y)}catch(j){return Promise.reject(j)}for(q=0,g=p.length;q<g;)m=m.then(p[q++],p[q++]);return m}getUri(e){e=(0,s.default)(this.defaults,e);const r=(0,o.default)(e.baseURL,e.url);return(0,t.default)(r,e.params,e.paramsSerializer)}}e.default.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(t,r){return this.request((0,s.default)(r||{},{method:e,url:t,data:(r||{}).data}))}}),e.default.forEach(["post","put","patch"],function(e){function t(t){return function(r,a,o){return this.request((0,s.default)(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)});var f=d;exports.default=f;
},{"./../utils.js":"S1cf","../helpers/buildURL.js":"H6Qo","./InterceptorManager.js":"rj2i","./dispatchRequest.js":"uz6X","./mergeConfig.js":"OHvn","./buildFullPath.js":"KxkP","../helpers/validator.js":"lsvU","./AxiosHeaders.js":"aueS"}],"tsWd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./CanceledError.js"));function s(e){return e&&e.__esModule?e:{default:e}}class t{constructor(s){if("function"!=typeof s)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](e);r._listeners=null}),this.promise.then=(e=>{let s;const t=new Promise(e=>{r.subscribe(e),s=e}).then(e);return t.cancel=function(){r.unsubscribe(s)},t}),s(function(s,n,i){r.reason||(r.reason=new e.default(s,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);-1!==s&&this._listeners.splice(s,1)}static source(){let e;return{token:new t(function(s){e=s}),cancel:e}}}var r=t;exports.default=r;
},{"./CanceledError.js":"E1lI"}],"X8jb":[function(require,module,exports) {
"use strict";function e(e){return function(t){return e.apply(null,t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"wICU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./../utils.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){return e.default.isObject(r)&&!0===r.isAxiosError}
},{"./../utils.js":"S1cf"}],"Ijhc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e).forEach(([t,o])=>{e[o]=t});var t=e;exports.default=t;
},{}],"nUiQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=x(require("./utils.js")),r=x(require("./helpers/bind.js")),t=x(require("./core/Axios.js")),a=x(require("./core/mergeConfig.js")),u=x(require("./defaults/index.js")),l=x(require("./helpers/formDataToJSON.js")),s=x(require("./cancel/CanceledError.js")),o=x(require("./cancel/CancelToken.js")),d=x(require("./cancel/isCancel.js")),i=require("./env/data.js"),n=x(require("./helpers/toFormData.js")),f=x(require("./core/AxiosError.js")),c=x(require("./helpers/spread.js")),p=x(require("./helpers/isAxiosError.js")),j=x(require("./core/AxiosHeaders.js")),q=x(require("./helpers/HttpStatusCode.js"));function x(e){return e&&e.__esModule?e:{default:e}}function C(u){const l=new t.default(u),s=(0,r.default)(t.default.prototype.request,l);return e.default.extend(s,t.default.prototype,l,{allOwnKeys:!0}),e.default.extend(s,l,null,{allOwnKeys:!0}),s.create=function(e){return C((0,a.default)(u,e))},s}const m=C(u.default);m.Axios=t.default,m.CanceledError=s.default,m.CancelToken=o.default,m.isCancel=d.default,m.VERSION=i.VERSION,m.toFormData=n.default,m.AxiosError=f.default,m.Cancel=m.CanceledError,m.all=function(e){return Promise.all(e)},m.spread=c.default,m.isAxiosError=p.default,m.mergeConfig=a.default,m.AxiosHeaders=j.default,m.formToJSON=(r=>(0,l.default)(e.default.isHTMLForm(r)?new FormData(r):r)),m.HttpStatusCode=q.default,m.default=m;var E=m;exports.default=E;
},{"./utils.js":"S1cf","./helpers/bind.js":"EDTP","./core/Axios.js":"OvAf","./core/mergeConfig.js":"OHvn","./defaults/index.js":"VQpg","./helpers/formDataToJSON.js":"zEQI","./cancel/CanceledError.js":"E1lI","./cancel/CancelToken.js":"tsWd","./cancel/isCancel.js":"V30M","./env/data.js":"xNqU","./helpers/toFormData.js":"BFle","./core/AxiosError.js":"rRKx","./helpers/spread.js":"X8jb","./helpers/isAxiosError.js":"wICU","./core/AxiosHeaders.js":"aueS","./helpers/HttpStatusCode.js":"Ijhc"}],"dZBD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return e.default}}),exports.mergeConfig=exports.formToJSON=exports.HttpStatusCode=exports.AxiosHeaders=exports.toFormData=exports.spread=exports.isAxiosError=exports.Cancel=exports.all=exports.VERSION=exports.CancelToken=exports.isCancel=exports.CanceledError=exports.AxiosError=exports.Axios=void 0;var e=r(require("./lib/axios.js"));function r(e){return e&&e.__esModule?e:{default:e}}const{Axios:o,AxiosError:s,CanceledError:t,isCancel:x,CancelToken:p,VERSION:a,all:i,Cancel:n,isAxiosError:l,spread:d,toFormData:c,AxiosHeaders:C,HttpStatusCode:u,formToJSON:f,mergeConfig:A}=e.default;exports.mergeConfig=A,exports.formToJSON=f,exports.HttpStatusCode=u,exports.AxiosHeaders=C,exports.toFormData=c,exports.spread=d,exports.isAxiosError=l,exports.Cancel=n,exports.all=i,exports.VERSION=a,exports.CancelToken=p,exports.isCancel=x,exports.CanceledError=t,exports.AxiosError=s,exports.Axios=o;
},{"./lib/axios.js":"nUiQ"}],"LVu9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchEntries=exports.saveEntries=void 0;var e=r(require("axios")),t=require("src/utils"),n=require("src/config");function r(e){return e&&e.__esModule?e:{default:e}}const s=[{entryId:1,studentId:1,name:"Euel Mekonnen",grade:"12",section:"G",attd:"T",time:"M",date:"2023-05-19",img:"",note:""},{entryId:2,studentId:1,name:"Euel Mekonnen",grade:"12",section:"G",attd:"T",time:"A",date:"2023-05-19",img:"",note:""},{entryId:3,studentId:1,name:"Euel Mekonnen",grade:"12",section:"G",attd:"T",time:"M",date:"2023-05-18",img:"",note:""},{entryId:4,studentId:1,name:"Euel Mekonnen",grade:"12",section:"G",attd:"T",time:"A",date:"2023-05-18",img:"",note:""},{entryId:5,studentId:1,name:"Euel Mekonnen",grade:"12",section:"G",attd:"T",time:"M",date:"2023-05-17",img:"",note:""},{entryId:6,studentId:1,name:"Euel Mekonnen",grade:"12",section:"G",attd:"T",time:"A",date:"2023-05-17",img:"",note:""}],o=(t,r={})=>{const s=new FormData;return Object.keys(r).forEach(e=>{e in["entries","grade","section","date"]?s.append(e,JSON.stringify(r[e])):s.append(e,r[e])}),(0,e.default)({method:"post",url:n.serverBaseUrl+t,data:s,headers:{"Content-Type":"multipart/form-data"}}).then(e=>(console.log("rizzed",e.data),e.data)).catch(e=>(console.log("cheger on network",e),{success:!1,message:"NETWORK_ERROR"})).then(({success:e,message:t,result:n})=>{if(0==e)throw t;return n})},a=(e,n,r,s)=>{console.log("save entries for",e,n,r,s);const a={grade:n,section:r,date:s,entries:(0,t.removeWholeImgFromEntries)(e),...(0,t.extractImagesFromEntries)(e)};return o("save-entries.php",a)};exports.saveEntries=a;const d=()=>o("get-entries.php");exports.fetchEntries=d;
},{"axios":"dZBD","src/utils":"FOZT","src/config":"itQ5"}],"w65G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("react")),t=s(require("styled-components")),r=s(require("react-hot-toast")),a=require("react-router-dom"),n=require("recoil"),l=require("comp"),u=require("src/states"),o=require("src/utils"),c=require("src/api");function s(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=a?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}const f=(e,t)=>r=>r.map(r=>r.entryId==e?{...r,...t}:r),m={loading:"Uploading...",success:e.default.createElement("strong",null,"Uploaded successfully"),error:e.default.createElement("strong",null,"Connection problem")},p=()=>{const t=(0,a.useLocation)(),[s,d]=[t.state.grade||"11",t.state.section||"A"],[,i]=(0,n.useRecoilState)(u.entriesState),p=(0,o.filterByClass)((0,n.useRecoilState)(u.studentsState)[0],s,d),[y,g]=(0,e.useState)((0,o.genEntriesFromStudents)(p)),[v,S]=(0,e.useState)("M"),[h,w]=(0,e.useState)((0,o.getDate)()),[b,q]=(0,e.useState)("");(0,e.useEffect)(()=>{const e=y.find(e=>e.studentId==b);"unknown"!=b&&0!=!!e&&"T"!=e.attd&&(r.default.success(e.name+" present"),g(f(e.entryId,{attd:"T"})),q(""))},[b,y]);return e.default.createElement(e.default.Fragment,null,e.default.createElement(l.Block,null),e.default.createElement(E,null,e.default.createElement("h1",null,"Today","'","s Attendance"),e.default.createElement(l.FaceButton,{onDetect:e=>q(e),key:y}),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement("input",{width:"100px",type:"date",value:h,onChange:e=>w(e.target.value)}),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.Row,null,e.default.createElement(l.TimeButton,{value:v,onClick:e=>S(e)}),e.default.createElement(l.FlexGrow,null),e.default.createElement(l.Button,{size:"small",onClick:()=>{console.log("time for now",v);const e=(0,o.addTimeToEntries)((0,o.addDateToEntries)(y,h),v);r.default.promise((0,c.saveEntries)(e,s,d,h),m)}},"Save")),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.DayTable,{entries:y,onChange:(e,t)=>{g(f(e,t)),i(f(e,f))}})))},E=t.default.div`
	display: flex;
	flex-direction: column;
	padding: 1rem;
	max-width: 500px;
	margin: 0 auto;
`;var y=p;exports.default=y;
},{"react":"n8MK","styled-components":"tFSs","react-hot-toast":"Vp88","react-router-dom":"UFqb","recoil":"mfdx","comp":"iA92","src/states":"hW5V","src/utils":"FOZT","src/api":"LVu9"}],"FASq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("react")),t=d(require("styled-components")),r=require("recoil"),a=require("react-router-dom"),l=require("src/states"),n=require("comp"),o=require("src/utils");function d(e){return e&&e.__esModule?e:{default:e}}const u=()=>{const t=(0,a.useLocation)().state.studentId||1,d=(0,r.useRecoilState)(l.studentsState)[0].find(e=>e.studentId==t),u=(0,r.useRecoilState)(l.entriesState)[0].filter(e=>e.studentId==t),p=(0,o.findMostCommonDay)(u),g=u.filter(({note:e})=>1==!!e),E=c(u);return e.default.createElement(e.default.Fragment,null,e.default.createElement(n.Block,null),e.default.createElement(s,null,e.default.createElement("h1",null,d.name," - ",d.grade,d.section),e.default.createElement(n.Button,{onClick:()=>window.open("tel:"+d.phonenumber)},"Call: ",d.phonenumber),e.default.createElement(i,null,"Student record"),e.default.createElement(n.IssuesBoard,{entries:u}),e.default.createElement(i,null,"Most common day: ",e.default.createElement("span",{style:{color:"teal"}},p)),e.default.createElement(i,null,"Recommended action: ",e.default.createElement("span",{style:{color:E.color}},E.message)),e.default.createElement(i,null,"Recent notes"),0==g.length?e.default.createElement(f,null,"No notes recorded"):g.map(({note:t,img:r,entryId:a})=>e.default.createElement(m,{key:t},t,"",r?e.default.createElement("a",{href:(0,o.getImageLink)(a)},"View Image"):null))))},c=e=>{const t={A:0,P:0,S:0,L:0},r=[{color:"#F97B22",message:"Warn the student about his attendance",criteria:["A",3]},{color:"#F45050",message:"Talk with parents about this case",criteria:["A",5]}];let a={color:"#7AA874",message:"Fair, just encouragement"};return e.forEach(e=>{"T"!=e.attd&&(t[e.attd]+=1)}),r.forEach(e=>{t[e.criteria[0]]>=e.criteria[1]&&(a=e)}),a},s=t.default.div`
	display: flex;
	flex-direction: column;
	padding: 1rem;
	max-width: 500px;
	margin: 0 auto;
`,i=t.default.h2`
	color: #363636;
`,m=t.default.div`
	font-size: 1.2rem;
	border: 1px solid #ddd;
	box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
	padding: 1rem 2rem;
	margin: 4px;
	border-radius: 8px;
`,f=t.default.div`
	color: teal;
	font-size: 1.6rem;
	font-weight: bold;
	text-align: center;
`;var p=u;exports.default=p;
},{"react":"n8MK","styled-components":"tFSs","recoil":"mfdx","react-router-dom":"UFqb","src/states":"hW5V","comp":"iA92","src/utils":"FOZT"}],"MEUy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("react")),t=s(require("styled-components")),r=require("react-router-dom"),a=require("recoil"),l=require("comp"),n=require("src/states"),u=require("src/utils"),o=require("src/config");function s(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var n=a?Object.getOwnPropertyDescriptor(e,l):null;n&&(n.get||n.set)?Object.defineProperty(r,l,n):r[l]=e[l]}return r.default=e,t&&t.set(e,r),r}const c=()=>{const[t,s]=(0,e.useState)(),i=(0,r.useNavigate)(),d=(0,a.useRecoilState)(n.entriesState)[0],[c,v]=(0,e.useState)(d),g=(0,a.useRecoilState)(n.studentsState)[0],y=Array.from(g).sort((0,u.sortWithIssues)(c)).slice(0,5),E=e=>()=>{i(o.links.studentProfile,{state:{studentId:e}}),console.log("open this student",e)};return console.log("total entries in issues",d),(0,e.useEffect)(()=>{if("0"==t)return void v(d);const e=d.filter(e=>(0,u.calcDaysDiff)(e.date,new Date)<=Number(t));v(e)},[t]),e.default.createElement(e.default.Fragment,null,e.default.createElement(l.Block,null),e.default.createElement(f,null,e.default.createElement("h1",null,"View records"),e.default.createElement(l.Select,{onChange:e=>s(e.target.value)},e.default.createElement("option",{value:"1"},"Today"),e.default.createElement("option",{value:"7"},"This week"),e.default.createElement("option",{value:"30"},"This month"),e.default.createElement("option",{value:"0"},"All")),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.IssuesBoard,{entries:c}),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(p,null,"Students with records"),y.map(t=>e.default.createElement(m,{key:t.studentId,onClick:E(t.studentId)},t.name," - ",e.default.createElement("strong",{style:{color:"teal"}},(0,u.calculateNOfIssues)(t.studentId,c))))))},f=t.default.div`
	display: flex;
	flex-direction: column;
	padding: 1rem;
	max-width: 500px;
	margin: 0 auto;
`,p=t.default.h2`
	color: #363636;
`,m=t.default.div`
	font-size: 1.1rem;
	cursor: pointer;
	border: 1px solid #ddd;
	box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
	padding: 1rem 2rem;
	margin: 4px;
	border-radius: 8px;
`;var v=c;exports.default=v;
},{"react":"n8MK","styled-components":"tFSs","react-router-dom":"UFqb","recoil":"mfdx","comp":"iA92","src/states":"hW5V","src/utils":"FOZT","src/config":"itQ5"}],"AkFF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("react")),t=o(require("styled-components")),r=require("react-router-dom"),a=require("recoil"),n=require("src/config"),l=require("comp"),u=require("src/states");function o(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=a?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}const d=()=>{var t,o;const c=(0,a.useRecoilState)(u.entriesState)[0],i=(0,a.useRecoilState)(u.studentsState)[0],d=(0,r.useNavigate)(),p=(0,r.useLocation)(),[m,v]=(0,e.useState)((null===(t=p.state)||void 0===t?void 0:t.grade)||"12"),[g,y]=(0,e.useState)((null===(o=p.state)||void 0===o?void 0:o.section)||"G"),[E,S]=(0,e.useState)(i);(0,e.useEffect)(()=>{S(i.filter(e=>e.grade==m&&e.section==g))},[m,g]);return e.default.createElement(e.default.Fragment,null,e.default.createElement(l.Block,null),e.default.createElement(s,null,e.default.createElement("h1",null,"View Attendance"),e.default.createElement(l.Select,{value:m,onChange:e=>v(e.target.value)},n.grades.map(t=>e.default.createElement("option",{key:t,value:t},"Grade ",t))),e.default.createElement(l.Space,{h:"0.5rem"}),e.default.createElement(l.Select,{value:g,onChange:e=>y(e.target.value)},n.sections.map(t=>e.default.createElement("option",{key:t,value:t},"Section ",t))),e.default.createElement(l.Space,{h:"2rem"}),0==c.length?e.default.createElement(f,null,"No data here"):e.default.createElement(l.AttdTable,{onClick:e=>()=>{d(n.links.studentProfile,{state:{studentId:e}})},entries:c,students:E})))},s=t.default.div`
	display: flex;
	flex-direction: column;
	padding: 1rem;
	max-width: 500px;
	margin: 0 auto;
`,f=t.default.h1`
	color: #545454;
	text-align: center;
`;var p=d;exports.default=p;
},{"react":"n8MK","styled-components":"tFSs","react-router-dom":"UFqb","recoil":"mfdx","src/config":"itQ5","comp":"iA92","src/states":"hW5V"}],"Ytdi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("react")),t=i(require("styled-components")),r=i(require("react-hot-toast")),a=require("recoil"),n=require("react-router-dom"),l=require("comp"),u=require("src/config"),o=require("src/states"),c=require("src/api");function i(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=a?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}const s={loading:"Loading...",success:e.default.createElement("strong",null,"Data loaded"),error:e.default.createElement("strong",null,"Connection problem")},p=()=>{const t=(0,n.useNavigate)(),[i,d]=(0,a.useRecoilState)(o.entriesState),[f,p]=(0,e.useState)("11"),[v,h]=(0,e.useState)("A");return(0,e.useEffect)(()=>{0==i.length&&r.default.promise((0,c.fetchEntries)().then(e=>{d(e)}),s)},[]),e.default.createElement(e.default.Fragment,null,e.default.createElement(g,null),e.default.createElement(m,null,e.default.createElement(l.MenuButton,null),e.default.createElement(l.Space,{h:"4rem"}),e.default.createElement(E,null,"Good morning, teacher."),e.default.createElement(l.Select,{value:f,onChange:e=>p(e.target.value)},u.grades.map(t=>e.default.createElement("option",{key:t,value:t},"Grade ",t))),e.default.createElement(l.Space,{h:"0.5rem"}),e.default.createElement(l.Select,{value:v,onChange:e=>h(e.target.value)},u.sections.map(t=>e.default.createElement("option",{key:t,value:t},"Section ",t))),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.Row,{center:"true"},e.default.createElement(l.Button,{onClick:()=>{t(u.links.viewAttd,{state:{grade:f,section:v}})}},"View"),e.default.createElement(l.Space,{w:"1rem"}),e.default.createElement(l.Button,{type:"outline",onClick:()=>{t(u.links.editDay,{state:{grade:f,section:v}})}},"Fill"))))},m=t.default.div`
	display: flex;
	flex-direction: column;
	padding: 2rem;
	max-width: 500px;
	margin: 0 auto;
`,g=t.default.div`
	height: 50px;
	background: teal;
`,E=t.default.h1`
	color: #212121;
	text-align: center;
`;var v=p;exports.default=v;
},{"react":"n8MK","styled-components":"tFSs","react-hot-toast":"Vp88","recoil":"mfdx","react-router-dom":"UFqb","comp":"iA92","src/config":"itQ5","src/states":"hW5V","src/api":"LVu9"}],"eVFl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("react")),t=c(require("react-hot-toast")),r=c(require("styled-components")),a=require("recoil"),n=require("react-router-dom"),l=require("comp"),u=require("src/config"),o=require("src/states");function c(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=a?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}const f=()=>{const[r,c]=(0,e.useState)("admin"),[i,d]=(0,e.useState)("admin"),f=(0,n.useNavigate)(),[,m]=(0,a.useRecoilState)(o.authState);return e.default.createElement(e.default.Fragment,null,e.default.createElement(l.Block,null),e.default.createElement(s,null,e.default.createElement(l.MenuButton,null),e.default.createElement(l.Space,{h:"4rem"}),e.default.createElement(p,null,"Enter your admin email and password to get in"),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.Input,{placeholder:"Email",value:r,onChange:e=>c(e.target.value)}),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.Input,{placeholder:"Password",type:"password",value:i,onChange:e=>d(e.target.value)}),e.default.createElement(l.Space,{h:"2rem"}),e.default.createElement(l.Button,{onClick:()=>{r==u.authConfig.email&&i==u.authConfig.password?(m(!0),f(u.links.adminHome)):t.default.error("Incorrect admin email or password")}},"Login")))},s=r.default.div`
	display: flex;
	flex-direction: column;
	padding: 2rem;
	max-width: 500px;
	margin: 0 auto;
`,p=r.default.h1`
	color: #212121;
	text-align: center;
`;var m=f;exports.default=m;
},{"react":"n8MK","react-hot-toast":"Vp88","styled-components":"tFSs","recoil":"mfdx","react-router-dom":"UFqb","comp":"iA92","src/config":"itQ5","src/states":"hW5V"}],"KRu6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("react")),t=c(require("styled-components")),r=c(require("react-hot-toast")),n=require("recoil"),a=require("react-router-dom"),l=require("comp"),u=require("src/config"),o=require("src/api"),i=require("src/states");function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=n?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}const s={loading:"Loading...",success:e.default.createElement("strong",null,"Data loaded"),error:e.default.createElement("strong",null,"Connection problem")},p=()=>{const t=(0,a.useNavigate)(),[c,d]=(0,n.useRecoilState)(i.entriesState),f=(0,n.useRecoilState)(i.authState)[0];return console.log("entries at adminHome",c),(0,e.useEffect)(()=>{0==c.length&&r.default.promise((0,o.fetchEntries)().then(e=>{d(e)}),s),0==f&&t(u.links.adminLogin)},[]),e.default.createElement(e.default.Fragment,null,e.default.createElement(E,null),e.default.createElement(m,null,e.default.createElement(l.MenuButton,null),e.default.createElement(l.Space,{h:"2rem"}),e.default.createElement(g,null,"Administrator page ",e.default.createElement(y,null,"(dedicated to Mr. Tesfaye )")),e.default.createElement(l.Space,{h:"4rem"}),e.default.createElement(l.Button,{type:"outline",onClick:()=>t(u.links.viewIssues)},"View Records"),e.default.createElement(l.Space,{h:"1rem"}),e.default.createElement(l.Button,{type:"outline",onClick:()=>t(u.links.viewAttd)},"View Attendance")))},m=t.default.div`
	display: flex;
	flex-direction: column;
	padding: 2rem;
	max-width: 500px;
	margin: 0 auto;
`,g=t.default.h1`
	color: #212121;
	text-align: center;
`,y=t.default.span`
	font-size: 1.1rem;
`,E=t.default.div`
	height: 50px;
	background: teal;
`;var h=p;exports.default=h;
},{"react":"n8MK","styled-components":"tFSs","react-hot-toast":"Vp88","recoil":"mfdx","react-router-dom":"UFqb","comp":"iA92","src/config":"itQ5","src/api":"LVu9","src/states":"hW5V"}],"lY9v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("react")),t=require("react-router-dom"),r=require("react-hot-toast"),l=require("styled-components"),a=require("recoil"),u=require("./config"),n=f(require("src/views/EditDay")),o=f(require("src/views/StudentProfile")),i=f(require("src/views/ViewIssues")),d=f(require("src/views/ViewAttendance")),s=f(require("src/views/TeacherHome")),c=f(require("src/views/AdminLogin")),m=f(require("src/views/AdminHome"));function f(e){return e&&e.__esModule?e:{default:e}}const h=l.createGlobalStyle`
	:root {
		--primary: ${e=>e.theme.primary};
	}

	body {
		padding: 0;
		margin: 0;
		border: 0;
		outline: 0;
		// background: #f0f0ff;
	}

	* {
		box-sizing: border-box;
		font-family: sans-serif;
	}
`,E=()=>e.default.createElement(a.RecoilRoot,null,e.default.createElement(l.ThemeProvider,{theme:u.colors},e.default.createElement(t.HashRouter,null,e.default.createElement(h,null),e.default.createElement(r.Toaster,null),e.default.createElement(t.Routes,null,e.default.createElement(t.Route,{path:u.routePathList.teacherHome,element:e.default.createElement(s.default,null),exact:!0}),e.default.createElement(t.Route,{path:u.routePathList.editDay,element:e.default.createElement(n.default,null)}),e.default.createElement(t.Route,{path:u.routePathList.studentProfile,element:e.default.createElement(o.default,null)}),e.default.createElement(t.Route,{path:u.routePathList.viewIssues,element:e.default.createElement(i.default,null)}),e.default.createElement(t.Route,{path:u.routePathList.viewAttd,element:e.default.createElement(d.default,null)}),e.default.createElement(t.Route,{path:u.routePathList.adminHome,element:e.default.createElement(m.default,null)}),e.default.createElement(t.Route,{path:u.routePathList.adminLogin,element:e.default.createElement(c.default,null)})))));var p=E;exports.default=p;
},{"react":"n8MK","react-router-dom":"UFqb","react-hot-toast":"Vp88","styled-components":"tFSs","recoil":"mfdx","./config":"itQ5","src/views/EditDay":"w65G","src/views/StudentProfile":"FASq","src/views/ViewIssues":"MEUy","src/views/ViewAttendance":"AkFF","src/views/TeacherHome":"Ytdi","src/views/AdminLogin":"eVFl","src/views/AdminHome":"KRu6"}],"epB2":[function(require,module,exports) {
"use strict";var e=u(require("react")),t=require("react-dom/client"),r=u(require("./App"));function u(e){return e&&e.__esModule?e:{default:e}}const n=document.getElementById("app"),a=(0,t.createRoot)(n);a.render(e.default.createElement(r.default,null));
},{"react":"n8MK","react-dom/client":"NdAl","./App":"lY9v"}]},{},["epB2"], null)
//# sourceMappingURL=/main.7e495428.js.map